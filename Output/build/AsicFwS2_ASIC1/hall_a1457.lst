   1              		.syntax unified
   2              		.cpu cortex-r4
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 4
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"hall_a1457.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.text.a1457_read_register,"ax",%progbits
  19              		.align	1
  20              		.global	a1457_read_register
  21              		.thumb
  22              		.thumb_func
  24              	a1457_read_register:
  25              	.LFB1:
  26              		.file 1 "/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c"
   1:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** /*******************************************************************************
   2:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * Copyright (c) 2016, The LightCo
   3:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * All rights reserved.
   4:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * Redistribution and use in source and binary forms, with or without
   5:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * modification, are strictly prohibited without prior permission
   6:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * of The LightCo.
   7:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  *
   8:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * @file    hall_sensor.c
   9:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * @author  The LightCo
  10:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * @version V1.0.0
  11:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * @date    Jun-27-2016
  12:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * @brief   This file contains hall sensor source code
  13:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  *
  14:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  ******************************************************************************/
  15:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** /* Includes ------------------------------------------------------------------*/
  16:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** #include "assert.h"
  17:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** #include "stdbool.h"
  18:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** #include "stddef.h"
  19:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** #include "hall.h"
  20:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** #include "i2cm.h"
  21:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
  22:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** /* Private define ------------------------------------------------------------*/
  23:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** #define A1457_ADDR						0x0C
  24:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
  25:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** #define IS_A1457_SENSITIVITY(SENS)		(SENS < 8)
  26:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
  27:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** #define A1457_OUTPUT_REG				0x05
  28:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** #define A1457_PIDCTL0_REG				0x16
  29:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** #define A1457_PIDCTL5_REG				0x1B
  30:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** #define A1457_FACTRES3_REG				0x1F
  31:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
  32:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** #define A1457_NUM_SENSITIVITIES			8
  33:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
  34:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** /* Private typedef -----------------------------------------------------------*/
  35:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** /* Private function prototype ------------------------------------------------*/
  36:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
  37:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** static hall_return_t write_register(i2c_t i2c_chid,
  38:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 											uint8_t reg_addr, uint8_t reg_val);
  39:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
  40:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** /* Private variable ----------------------------------------------------------*/
  41:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** /* Exported function ---------------------------------------------------------*/
  42:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
  43:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** /**
  44:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * @brief a1457_read_register
  45:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * The function reads register value from independent A1457 hall sensor.
  46:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * Limitation: this supports for reading non-factory registers only
  47:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  */
  48:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** hall_return_t a1457_read_register(i2c_t i2c_chid,
  49:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 							uint8_t reg_addr, uint8_t reg_len, uint8_t *reg_val)
  50:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** {
  27              		.loc 1 50 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              	.LVL0:
  32 0000 37B5     		push	{r0, r1, r2, r4, r5, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 24
  35              		.cfi_offset 4, -12
  36              		.cfi_offset 5, -8
  37              		.cfi_offset 14, -4
  51:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	i2cm_error_t ret = i2cm.read(i2c_chid,
  38              		.loc 1 51 0
  39 0002 094C     		ldr	r4, .L4
  40 0004 012A     		cmp	r2, #1
  41 0006 0D46     		mov	r5, r1
  42 0008 4FF00C02 		mov	r2, #12
  43              	.LVL1:
  44 000c 18BF     		it	ne
  45 000e 0221     		movne	r1, #2
  46              	.LVL2:
  47 0010 E468     		ldr	r4, [r4, #12]
  48 0012 08BF     		it	eq
  49 0014 0021     		moveq	r1, #0
  50 0016 0093     		str	r3, [sp]
  51 0018 2B46     		mov	r3, r5
  52              	.LVL3:
  53 001a A047     		blx	r4
  54              	.LVL4:
  52:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 									(reg_len == 1) ? BYTE_ADDR8 : WORD_ADDR8,
  53:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 									A1457_ADDR, reg_addr, reg_val);
  54:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	return (ret == I2CM_ERROR_BUSY) ? HALL_TIMED_OUT : HALL_OK;
  55:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** }
  55              		.loc 1 55 0
  56 001c A0F18003 		sub	r3, r0, #128
  57 0020 5842     		rsbs	r0, r3, #0
  58              	.LVL5:
  59 0022 5841     		adcs	r0, r0, r3
  60 0024 03B0     		add	sp, sp, #12
  61              	.LCFI1:
  62              		.cfi_def_cfa_offset 12
  63              		@ sp needed
  64 0026 30BD     		pop	{r4, r5, pc}
  65              	.L5:
  66              		.align	2
  67              	.L4:
  68 0028 00000000 		.word	i2cm
  69              		.cfi_endproc
  70              	.LFE1:
  72              		.section	.text.write_register,"ax",%progbits
  73              		.align	1
  74              		.thumb
  75              		.thumb_func
  77              	write_register:
  78              	.LFB6:
  56:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
  57:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** /**
  58:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * @brief a1457_init
  59:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * The function initializes independent A1457 hall sensor
  60:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  */
  61:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** hall_return_t a1457_init(i2c_t i2c_chid, bool polarity_reversal)
  62:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** {
  63:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	hall_return_t	ret;
  64:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	uint8_t			PIDCTL5_reg;
  65:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
  66:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	/* get the PIDCTL5 register value */
  67:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	ret = a1457_read_register(i2c_chid, A1457_PIDCTL5_REG, 1, &PIDCTL5_reg);
  68:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	if (ret == HALL_OK)
  69:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	{
  70:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		/* set polarity */
  71:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		PIDCTL5_reg = (PIDCTL5_reg & ~0x80) | (polarity_reversal << 7);
  72:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		ret = write_register(i2c_chid, A1457_PIDCTL5_REG, PIDCTL5_reg);
  73:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	}
  74:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
  75:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	return ret;
  76:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** }
  77:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
  78:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** /**
  79:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * @brief a1457_set_sensitivity
  80:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * The function set sensitivity of independent A1457 hall sensor
  81:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  */
  82:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** hall_return_t a1457_set_sensitivity(i2c_t i2c_chid, uint8_t sensitivity)
  83:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** {
  84:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	hall_return_t	ret;
  85:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
  86:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	if (!(IS_A1457_SENSITIVITY(sensitivity)))
  87:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		ret = HALL_INVALID_SENSITIVITY;
  88:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	else
  89:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	{
  90:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		uint8_t PIDCTL5_reg = 0;	/* HGAIN[1:0] (bit 5:4) */
  91:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		uint8_t FACTRES3_reg = 0;	/* HGAIN[2] (bit 6) */
  92:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		uint8_t PIDCTL0_reg = 0;	/* LOCKF (bit 7) */
  93:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
  94:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		/* read the PIDCTL0 register */
  95:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		ret = a1457_read_register(i2c_chid, A1457_PIDCTL0_REG, 1, &PIDCTL0_reg);
  96:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		if (ret == HALL_OK)
  97:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		{
  98:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			/* unlock the FACTRES3 register */
  99:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			PIDCTL0_reg &= ~(1 << 7);
 100:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			ret = write_register(i2c_chid, A1457_PIDCTL0_REG, PIDCTL0_reg);
 101:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		}
 102:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		/* read the registers containing sensitivity */
 103:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		ret |= a1457_read_register(i2c_chid, A1457_PIDCTL5_REG, 1,
 104:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 									&PIDCTL5_reg);
 105:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		ret |= a1457_read_register(i2c_chid, A1457_FACTRES3_REG, 1,
 106:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 									&FACTRES3_reg);
 107:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		if (ret == HALL_OK)
 108:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		{
 109:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			/* configure sensitivity with "Sensitivity" argument */
 110:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			/* configure bit [5:4] : HGAIN[1:0] */
 111:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			PIDCTL5_reg = (PIDCTL5_reg & ~(0x03 << 4)) |
 112:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 							((sensitivity & 0x03) << 4);
 113:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			/* configure bit 6 HGAIN[2] */
 114:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			FACTRES3_reg = (FACTRES3_reg & ~(0x01 << 6)) |
 115:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 							((sensitivity & 0x04) << 4);
 116:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			ret = write_register(i2c_chid, A1457_PIDCTL5_REG, PIDCTL5_reg);
 117:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			ret |= write_register(i2c_chid, A1457_FACTRES3_REG, FACTRES3_reg);
 118:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			/* lock the FACTRES3 register */
 119:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			PIDCTL0_reg |= (1 << 7);
 120:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			ret |= write_register(i2c_chid, A1457_PIDCTL0_REG, PIDCTL0_reg);
 121:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		}
 122:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	}
 123:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 124:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	return ret;
 125:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** }
 126:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 127:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** /**
 128:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * @brief a1457_read_position
 129:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * The function read position from independent A1457 hall sensor
 130:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  */
 131:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** hall_return_t a1457_read_position(i2c_t i2c_chid, uint16_t *position)
 132:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** {
 133:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	hall_return_t	ret;
 134:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	uint16_t		output_value;
 135:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	uint8_t			regs_val[2];
 136:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 137:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	/* assert parameters */
 138:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	assert_param(position != NULL);
 139:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 140:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	/* read output registers */
 141:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	ret = a1457_read_register(i2c_chid, A1457_OUTPUT_REG, 2, regs_val);
 142:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	if (ret == HALL_OK)
 143:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	{
 144:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		/* get output value */
 145:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		output_value = (regs_val[0] << 4) | regs_val[1];
 146:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		/* get position */
 147:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		*position = (output_value + 0x0800) & 0x0FFF;
 148:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	}
 149:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 150:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	return ret;
 151:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** }
 152:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 153:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** /**
 154:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * @brief a1457_scan_sensitivities
 155:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * The function reads position values
 156:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  * 		corresponding to the configurable sensitivities of A1457 hall sensor
 157:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c ****  */
 158:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** hall_return_t a1457_scan_sensitivities(i2c_t i2c_chid, uint16_t *position_data)
 159:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** {
 160:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	hall_return_t	ret = HALL_OK;
 161:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	uint8_t			i;
 162:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 163:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	/* assert parameters */
 164:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	assert_param(position_data != NULL);
 165:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 166:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	for (i = 0; (i < A1457_NUM_SENSITIVITIES) && (ret == HALL_OK); i++)
 167:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	{
 168:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		ret = a1457_set_sensitivity(i2c_chid, i);
 169:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		ret |= a1457_read_position(i2c_chid, position_data + i);
 170:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	}
 171:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 172:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	return ret;
 173:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** }
 174:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 175:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** /* Private function --------------------------------------------------------- */
 176:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** static hall_return_t write_register(i2c_t i2c_chid,
 177:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 											uint8_t reg_addr, uint8_t reg_val)
 178:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** {
  79              		.loc 1 178 0
  80              		.cfi_startproc
  81              		@ args = 0, pretend = 0, frame = 8
  82              		@ frame_needed = 0, uses_anonymous_args = 0
  83              	.LVL6:
  84 0000 1FB5     		push	{r0, r1, r2, r3, r4, lr}
  85              	.LCFI2:
  86              		.cfi_def_cfa_offset 24
  87              		.cfi_offset 4, -8
  88              		.cfi_offset 14, -4
  89              		.loc 1 178 0
  90 0002 04AC     		add	r4, sp, #16
 179:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	i2cm_error_t ret = i2cm.write(i2c_chid, BYTE_ADDR8,
  91              		.loc 1 179 0
  92 0004 0B46     		mov	r3, r1
  93 0006 0021     		movs	r1, #0
  94              	.LVL7:
 178:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	i2cm_error_t ret = i2cm.write(i2c_chid, BYTE_ADDR8,
  95              		.loc 1 178 0
  96 0008 04F8012D 		strb	r2, [r4, #-1]!
  97              		.loc 1 179 0
  98 000c 054A     		ldr	r2, .L7
  99              	.LVL8:
 100 000e 0094     		str	r4, [sp]
 101 0010 1469     		ldr	r4, [r2, #16]
 102              	.LVL9:
 103 0012 0C22     		movs	r2, #12
 104 0014 A047     		blx	r4
 105              	.LVL10:
 180:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 									A1457_ADDR, reg_addr, &reg_val);
 181:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	return (ret == I2CM_ERROR_BUSY) ? HALL_TIMED_OUT : HALL_OK;
 182:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** }
 106              		.loc 1 182 0
 107 0016 A0F18003 		sub	r3, r0, #128
 108 001a 5842     		rsbs	r0, r3, #0
 109              	.LVL11:
 110 001c 5841     		adcs	r0, r0, r3
 111 001e 04B0     		add	sp, sp, #16
 112              	.LCFI3:
 113              		.cfi_def_cfa_offset 8
 114              	.LVL12:
 115              		@ sp needed
 116 0020 10BD     		pop	{r4, pc}
 117              	.LVL13:
 118              	.L8:
 119 0022 00BF     		.align	2
 120              	.L7:
 121 0024 00000000 		.word	i2cm
 122              		.cfi_endproc
 123              	.LFE6:
 125              		.section	.text.a1457_init,"ax",%progbits
 126              		.align	1
 127              		.global	a1457_init
 128              		.thumb
 129              		.thumb_func
 131              	a1457_init:
 132              	.LFB2:
  62:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	hall_return_t	ret;
 133              		.loc 1 62 0
 134              		.cfi_startproc
 135              		@ args = 0, pretend = 0, frame = 8
 136              		@ frame_needed = 0, uses_anonymous_args = 0
 137              	.LVL14:
 138 0000 73B5     		push	{r0, r1, r4, r5, r6, lr}
 139              	.LCFI4:
 140              		.cfi_def_cfa_offset 24
 141              		.cfi_offset 4, -16
 142              		.cfi_offset 5, -12
 143              		.cfi_offset 6, -8
 144              		.cfi_offset 14, -4
  67:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	if (ret == HALL_OK)
 145              		.loc 1 67 0
 146 0002 0122     		movs	r2, #1
  62:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	hall_return_t	ret;
 147              		.loc 1 62 0
 148 0004 0D46     		mov	r5, r1
  67:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	if (ret == HALL_OK)
 149              		.loc 1 67 0
 150 0006 0DF10703 		add	r3, sp, #7
 151 000a 1B21     		movs	r1, #27
 152              	.LVL15:
 153 000c 094E     		ldr	r6, .L12
  62:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	hall_return_t	ret;
 154              		.loc 1 62 0
 155 000e 0446     		mov	r4, r0
  67:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	if (ret == HALL_OK)
 156              		.loc 1 67 0
 157 0010 B047     		blx	r6
 158              	.LVL16:
  68:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	{
 159              		.loc 1 68 0
 160 0012 60B9     		cbnz	r0, .L10
  71:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		ret = write_register(i2c_chid, A1457_PIDCTL5_REG, PIDCTL5_reg);
 161              		.loc 1 71 0
 162 0014 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 163 0018 02F07F02 		and	r2, r2, #127
 164 001c 42EAC512 		orr	r2, r2, r5, lsl #7
  72:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	}
 165              		.loc 1 72 0
 166 0020 2046     		mov	r0, r4
 167              	.LVL17:
 168 0022 1B21     		movs	r1, #27
  71:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		ret = write_register(i2c_chid, A1457_PIDCTL5_REG, PIDCTL5_reg);
 169              		.loc 1 71 0
 170 0024 D2B2     		uxtb	r2, r2
  72:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	}
 171              		.loc 1 72 0
 172 0026 044B     		ldr	r3, .L12+4
  71:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		ret = write_register(i2c_chid, A1457_PIDCTL5_REG, PIDCTL5_reg);
 173              		.loc 1 71 0
 174 0028 8DF80720 		strb	r2, [sp, #7]
  72:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	}
 175              		.loc 1 72 0
 176 002c 9847     		blx	r3
 177              	.LVL18:
 178              	.L10:
  76:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 179              		.loc 1 76 0
 180 002e 02B0     		add	sp, sp, #8
 181              	.LCFI5:
 182              		.cfi_def_cfa_offset 16
 183              		@ sp needed
 184 0030 70BD     		pop	{r4, r5, r6, pc}
 185              	.L13:
 186 0032 00BF     		.align	2
 187              	.L12:
 188 0034 00000000 		.word	a1457_read_register
 189 0038 00000000 		.word	write_register
 190              		.cfi_endproc
 191              	.LFE2:
 193              		.section	.text.a1457_read_position,"ax",%progbits
 194              		.align	1
 195              		.global	a1457_read_position
 196              		.thumb
 197              		.thumb_func
 199              	a1457_read_position:
 200              	.LFB4:
 132:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	hall_return_t	ret;
 201              		.loc 1 132 0
 202              		.cfi_startproc
 203              		@ args = 0, pretend = 0, frame = 8
 204              		@ frame_needed = 0, uses_anonymous_args = 0
 205              	.LVL19:
 206 0000 37B5     		push	{r0, r1, r2, r4, r5, lr}
 207              	.LCFI6:
 208              		.cfi_def_cfa_offset 24
 209              		.cfi_offset 4, -12
 210              		.cfi_offset 5, -8
 211              		.cfi_offset 14, -4
 132:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	hall_return_t	ret;
 212              		.loc 1 132 0
 213 0002 0546     		mov	r5, r0
 138:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 214              		.loc 1 138 0
 215 0004 0C46     		mov	r4, r1
 216 0006 19B9     		cbnz	r1, .L15
 138:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 217              		.loc 1 138 0 is_stmt 0 discriminator 1
 218 0008 0A48     		ldr	r0, .L17
 219              	.LVL20:
 220 000a 8A21     		movs	r1, #138
 221              	.LVL21:
 222 000c 0A4B     		ldr	r3, .L17+4
 223 000e 9847     		blx	r3
 224              	.LVL22:
 225              	.L15:
 141:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	if (ret == HALL_OK)
 226              		.loc 1 141 0 is_stmt 1
 227 0010 2846     		mov	r0, r5
 228 0012 0521     		movs	r1, #5
 229 0014 0222     		movs	r2, #2
 230 0016 01AB     		add	r3, sp, #4
 231 0018 084D     		ldr	r5, .L17+8
 232 001a A847     		blx	r5
 233              	.LVL23:
 142:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	{
 234              		.loc 1 142 0
 235 001c 40B9     		cbnz	r0, .L16
 236              	.LVL24:
 145:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		/* get position */
 237              		.loc 1 145 0
 238 001e 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 239 0022 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 240 0026 43EA0213 		orr	r3, r3, r2, lsl #4
 147:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	}
 241              		.loc 1 147 0
 242 002a 83F40063 		eor	r3, r3, #2048
 243 002e 2380     		strh	r3, [r4]	@ movhi
 244              	.LVL25:
 245              	.L16:
 151:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 246              		.loc 1 151 0
 247 0030 03B0     		add	sp, sp, #12
 248              	.LCFI7:
 249              		.cfi_def_cfa_offset 12
 250              		@ sp needed
 251 0032 30BD     		pop	{r4, r5, pc}
 252              	.LVL26:
 253              	.L18:
 254              		.align	2
 255              	.L17:
 256 0034 00000000 		.word	.LANCHOR0
 257 0038 00000000 		.word	assert_failed
 258 003c 00000000 		.word	a1457_read_register
 259              		.cfi_endproc
 260              	.LFE4:
 262              		.section	.text.a1457_set_sensitivity,"ax",%progbits
 263              		.align	1
 264              		.global	a1457_set_sensitivity
 265              		.thumb
 266              		.thumb_func
 268              	a1457_set_sensitivity:
 269              	.LFB3:
  83:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	hall_return_t	ret;
 270              		.loc 1 83 0
 271              		.cfi_startproc
 272              		@ args = 0, pretend = 0, frame = 8
 273              		@ frame_needed = 0, uses_anonymous_args = 0
 274              	.LVL27:
  86:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		ret = HALL_INVALID_SENSITIVITY;
 275              		.loc 1 86 0
 276 0000 0729     		cmp	r1, #7
  83:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	hall_return_t	ret;
 277              		.loc 1 83 0
 278 0002 F7B5     		push	{r0, r1, r2, r4, r5, r6, r7, lr}
 279              	.LCFI8:
 280              		.cfi_def_cfa_offset 32
 281              		.cfi_offset 4, -20
 282              		.cfi_offset 5, -16
 283              		.cfi_offset 6, -12
 284              		.cfi_offset 7, -8
 285              		.cfi_offset 14, -4
  83:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	hall_return_t	ret;
 286              		.loc 1 83 0
 287 0004 0546     		mov	r5, r0
 288 0006 0E46     		mov	r6, r1
  86:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		ret = HALL_INVALID_SENSITIVITY;
 289              		.loc 1 86 0
 290 0008 56D8     		bhi	.L23
 291              	.LVL28:
 292              	.LBB6:
 293              	.LBB7:
 294              	.LBB8:
  90:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		uint8_t FACTRES3_reg = 0;	/* HGAIN[2] (bit 6) */
 295              		.loc 1 90 0
 296 000a 0022     		movs	r2, #0
  92:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 297              		.loc 1 92 0
 298 000c 02AB     		add	r3, sp, #8
  90:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		uint8_t FACTRES3_reg = 0;	/* HGAIN[2] (bit 6) */
 299              		.loc 1 90 0
 300 000e 8DF80520 		strb	r2, [sp, #5]
  95:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		if (ret == HALL_OK)
 301              		.loc 1 95 0
 302 0012 1621     		movs	r1, #22
 303              	.LVL29:
  91:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		uint8_t PIDCTL0_reg = 0;	/* LOCKF (bit 7) */
 304              		.loc 1 91 0
 305 0014 8DF80620 		strb	r2, [sp, #6]
  92:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 306              		.loc 1 92 0
 307 0018 03F8012D 		strb	r2, [r3, #-1]!
  95:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		if (ret == HALL_OK)
 308              		.loc 1 95 0
 309 001c 0122     		movs	r2, #1
 310 001e 284F     		ldr	r7, .L24
 311 0020 B847     		blx	r7
 312              	.LVL30:
  96:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		{
 313              		.loc 1 96 0
 314 0022 0446     		mov	r4, r0
 315 0024 50B9     		cbnz	r0, .L21
  99:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			ret = write_register(i2c_chid, A1457_PIDCTL0_REG, PIDCTL0_reg);
 316              		.loc 1 99 0
 317 0026 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 318 002a 02F07F02 		and	r2, r2, #127
 100:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		}
 319              		.loc 1 100 0
 320 002e 2846     		mov	r0, r5
 321              	.LVL31:
 322 0030 1621     		movs	r1, #22
 323 0032 244B     		ldr	r3, .L24+4
  99:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			ret = write_register(i2c_chid, A1457_PIDCTL0_REG, PIDCTL0_reg);
 324              		.loc 1 99 0
 325 0034 8DF80720 		strb	r2, [sp, #7]
 100:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		}
 326              		.loc 1 100 0
 327 0038 9847     		blx	r3
 328              	.LVL32:
 329 003a 0446     		mov	r4, r0
 330              	.LVL33:
 331              	.L21:
 103:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 									&PIDCTL5_reg);
 332              		.loc 1 103 0
 333 003c 1B21     		movs	r1, #27
 334 003e 0122     		movs	r2, #1
 335 0040 0DF10503 		add	r3, sp, #5
 336 0044 2846     		mov	r0, r5
 337 0046 B847     		blx	r7
 338              	.LVL34:
 105:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 									&FACTRES3_reg);
 339              		.loc 1 105 0
 340 0048 1F21     		movs	r1, #31
 341 004a 0122     		movs	r2, #1
 342 004c 0DF10603 		add	r3, sp, #6
 103:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 									&PIDCTL5_reg);
 343              		.loc 1 103 0
 344 0050 2043     		orrs	r0, r0, r4
 345 0052 C4B2     		uxtb	r4, r0
 346              	.LVL35:
 105:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 									&FACTRES3_reg);
 347              		.loc 1 105 0
 348 0054 2846     		mov	r0, r5
 349 0056 B847     		blx	r7
 350              	.LVL36:
 351 0058 2043     		orrs	r0, r0, r4
 352              	.LVL37:
 107:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		{
 353              		.loc 1 107 0
 354 005a 10F0FF00 		ands	r0, r0, #255
 355              	.LVL38:
 356 005e 2CD1     		bne	.L20
 112:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			/* configure bit 6 HGAIN[2] */
 357              		.loc 1 112 0
 358 0060 06F00303 		and	r3, r6, #3
 111:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 							((sensitivity & 0x03) << 4);
 359              		.loc 1 111 0
 360 0064 9DF80520 		ldrb	r2, [sp, #5]	@ zero_extendqisi2
 115:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			ret = write_register(i2c_chid, A1457_PIDCTL5_REG, PIDCTL5_reg);
 361              		.loc 1 115 0
 362 0068 06F00406 		and	r6, r6, #4
 363              	.LVL39:
 111:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 							((sensitivity & 0x03) << 4);
 364              		.loc 1 111 0
 365 006c 22F03002 		bic	r2, r2, #48
 366 0070 42EA0312 		orr	r2, r2, r3, lsl #4
 114:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 							((sensitivity & 0x04) << 4);
 367              		.loc 1 114 0
 368 0074 9DF80630 		ldrb	r3, [sp, #6]	@ zero_extendqisi2
 369 0078 23F04003 		bic	r3, r3, #64
 370 007c 43EA0616 		orr	r6, r3, r6, lsl #4
 116:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			ret |= write_register(i2c_chid, A1457_FACTRES3_REG, FACTRES3_reg);
 371              		.loc 1 116 0
 372 0080 1B21     		movs	r1, #27
 114:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 							((sensitivity & 0x04) << 4);
 373              		.loc 1 114 0
 374 0082 8DF80660 		strb	r6, [sp, #6]
 116:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			ret |= write_register(i2c_chid, A1457_FACTRES3_REG, FACTRES3_reg);
 375              		.loc 1 116 0
 376 0086 2846     		mov	r0, r5
 377 0088 0E4E     		ldr	r6, .L24+4
 111:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 							((sensitivity & 0x03) << 4);
 378              		.loc 1 111 0
 379 008a 8DF80520 		strb	r2, [sp, #5]
 116:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			ret |= write_register(i2c_chid, A1457_FACTRES3_REG, FACTRES3_reg);
 380              		.loc 1 116 0
 381 008e B047     		blx	r6
 382              	.LVL40:
 117:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			/* lock the FACTRES3 register */
 383              		.loc 1 117 0
 384 0090 1F21     		movs	r1, #31
 385 0092 9DF80620 		ldrb	r2, [sp, #6]	@ zero_extendqisi2
 116:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			ret |= write_register(i2c_chid, A1457_FACTRES3_REG, FACTRES3_reg);
 386              		.loc 1 116 0
 387 0096 0446     		mov	r4, r0
 388              	.LVL41:
 117:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			/* lock the FACTRES3 register */
 389              		.loc 1 117 0
 390 0098 2846     		mov	r0, r5
 391 009a B047     		blx	r6
 392              	.LVL42:
 119:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			ret |= write_register(i2c_chid, A1457_PIDCTL0_REG, PIDCTL0_reg);
 393              		.loc 1 119 0
 394 009c 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 395 00a0 42F08002 		orr	r2, r2, #128
 120:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		}
 396              		.loc 1 120 0
 397 00a4 1621     		movs	r1, #22
 119:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			ret |= write_register(i2c_chid, A1457_PIDCTL0_REG, PIDCTL0_reg);
 398              		.loc 1 119 0
 399 00a6 8DF80720 		strb	r2, [sp, #7]
 117:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 			/* lock the FACTRES3 register */
 400              		.loc 1 117 0
 401 00aa 2043     		orrs	r0, r0, r4
 402 00ac C4B2     		uxtb	r4, r0
 403              	.LVL43:
 120:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		}
 404              		.loc 1 120 0
 405 00ae 2846     		mov	r0, r5
 406 00b0 B047     		blx	r6
 407              	.LVL44:
 408 00b2 2043     		orrs	r0, r0, r4
 409 00b4 C0B2     		uxtb	r0, r0
 410              	.LVL45:
 411 00b6 00E0     		b	.L20
 412              	.LVL46:
 413              	.L23:
 414              	.LBE8:
 415              	.LBE7:
 416              	.LBE6:
  87:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	else
 417              		.loc 1 87 0
 418 00b8 0220     		movs	r0, #2
 419              	.LVL47:
 420              	.L20:
 125:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 421              		.loc 1 125 0
 422 00ba 03B0     		add	sp, sp, #12
 423              	.LCFI9:
 424              		.cfi_def_cfa_offset 20
 425              		@ sp needed
 426 00bc F0BD     		pop	{r4, r5, r6, r7, pc}
 427              	.L25:
 428 00be 00BF     		.align	2
 429              	.L24:
 430 00c0 00000000 		.word	a1457_read_register
 431 00c4 00000000 		.word	write_register
 432              		.cfi_endproc
 433              	.LFE3:
 435              		.section	.text.a1457_scan_sensitivities,"ax",%progbits
 436              		.align	1
 437              		.global	a1457_scan_sensitivities
 438              		.thumb
 439              		.thumb_func
 441              	a1457_scan_sensitivities:
 442              	.LFB5:
 159:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	hall_return_t	ret = HALL_OK;
 443              		.loc 1 159 0
 444              		.cfi_startproc
 445              		@ args = 0, pretend = 0, frame = 0
 446              		@ frame_needed = 0, uses_anonymous_args = 0
 447              	.LVL48:
 448 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 449              	.LCFI10:
 450              		.cfi_def_cfa_offset 24
 451              		.cfi_offset 3, -24
 452              		.cfi_offset 4, -20
 453              		.cfi_offset 5, -16
 454              		.cfi_offset 6, -12
 455              		.cfi_offset 7, -8
 456              		.cfi_offset 14, -4
 159:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	hall_return_t	ret = HALL_OK;
 457              		.loc 1 159 0
 458 0002 0646     		mov	r6, r0
 164:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 459              		.loc 1 164 0
 460 0004 0F46     		mov	r7, r1
 461 0006 19B9     		cbnz	r1, .L27
 164:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 462              		.loc 1 164 0 is_stmt 0 discriminator 1
 463 0008 0B48     		ldr	r0, .L34
 464              	.LVL49:
 465 000a A421     		movs	r1, #164
 466              	.LVL50:
 467 000c 0B4B     		ldr	r3, .L34+4
 468 000e 9847     		blx	r3
 469              	.LVL51:
 470              	.L27:
 159:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	hall_return_t	ret = HALL_OK;
 471              		.loc 1 159 0 is_stmt 1 discriminator 1
 472 0010 0025     		movs	r5, #0
 473              	.LVL52:
 474              	.L29:
 168:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		ret |= a1457_read_position(i2c_chid, position_data + i);
 475              		.loc 1 168 0 discriminator 4
 476 0012 E9B2     		uxtb	r1, r5
 477 0014 0A4B     		ldr	r3, .L34+8
 478 0016 3046     		mov	r0, r6
 479 0018 9847     		blx	r3
 480              	.LVL53:
 169:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	}
 481              		.loc 1 169 0 discriminator 4
 482 001a 07EB4501 		add	r1, r7, r5, lsl #1
 483 001e 094B     		ldr	r3, .L34+12
 168:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 		ret |= a1457_read_position(i2c_chid, position_data + i);
 484              		.loc 1 168 0 discriminator 4
 485 0020 0446     		mov	r4, r0
 486              	.LVL54:
 169:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	}
 487              		.loc 1 169 0 discriminator 4
 488 0022 3046     		mov	r0, r6
 489 0024 9847     		blx	r3
 490              	.LVL55:
 166:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	{
 491              		.loc 1 166 0 discriminator 4
 492 0026 072D     		cmp	r5, #7
 169:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	}
 493              		.loc 1 169 0 discriminator 4
 494 0028 40EA0400 		orr	r0, r0, r4
 495 002c C0B2     		uxtb	r0, r0
 496              	.LVL56:
 166:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	{
 497              		.loc 1 166 0 discriminator 4
 498 002e 02D0     		beq	.L33
 499 0030 0135     		adds	r5, r5, #1
 500              	.LVL57:
 166:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 	{
 501              		.loc 1 166 0 is_stmt 0 discriminator 3
 502 0032 0028     		cmp	r0, #0
 503 0034 EDD0     		beq	.L29
 504              	.L33:
 173:/home/tienluong/workspace/atlantis_fw/platform/driver/src/hall_a1457.c **** 
 505              		.loc 1 173 0 is_stmt 1
 506 0036 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 507              	.LVL58:
 508              	.L35:
 509              		.align	2
 510              	.L34:
 511 0038 00000000 		.word	.LANCHOR1
 512 003c 00000000 		.word	assert_failed
 513 0040 00000000 		.word	a1457_set_sensitivity
 514 0044 00000000 		.word	a1457_read_position
 515              		.cfi_endproc
 516              	.LFE5:
 518              		.global	a1457
 519              		.section	.data.a1457,"aw",%progbits
 520              		.align	2
 523              	a1457:
 524 0000 08       		.byte	8
 525 0001 00       		.space	1
 526 0002 FF0F     		.short	4095
 527 0004 00000000 		.word	a1457_init
 528 0008 00000000 		.word	a1457_set_sensitivity
 529 000c 00000000 		.word	a1457_read_position
 530 0010 00000000 		.word	a1457_scan_sensitivities
 531 0014 00000000 		.word	a1457_read_register
 532              		.section	.rodata.__FUNCTION__.7302,"a",%progbits
 533              		.set	.LANCHOR0,. + 0
 536              	__FUNCTION__.7302:
 537 0000 61313435 		.ascii	"a1457_read_position\000"
 537      375F7265 
 537      61645F70 
 537      6F736974 
 537      696F6E00 
 538              		.section	.rodata.__FUNCTION__.7309,"a",%progbits
 539              		.set	.LANCHOR1,. + 0
 542              	__FUNCTION__.7309:
 543 0000 61313435 		.ascii	"a1457_scan_sensitivities\000"
 543      375F7363 
 543      616E5F73 
 543      656E7369 
 543      74697669 
 544              		.text
 545              	.Letext0:
 546              		.file 2 "/opt/toolchains/gcc-arm-none-eabi-4_9-2015q1/arm-none-eabi/include/machine/_default_types
 547              		.file 3 "/opt/toolchains/gcc-arm-none-eabi-4_9-2015q1/arm-none-eabi/include/stdint.h"
 548              		.file 4 "/home/tienluong/workspace/atlantis_fw/platform/os/Source/portable/GCC/cortex-r4/portmacro
 549              		.file 5 "/home/tienluong/workspace/atlantis_fw/platform/asic/hal/include/hal_i2c.h"
 550              		.file 6 "/home/tienluong/workspace/atlantis_fw/platform/common/lcc_system.h"
 551              		.file 7 "/home/tienluong/workspace/atlantis_fw/platform/driver/include/i2cm.h"
 552              		.file 8 "/home/tienluong/workspace/atlantis_fw/platform/driver/include/hall.h"
DEFINED SYMBOLS
                            *ABS*:00000000 hall_a1457.c
     /tmp/ccD4TZ7c.s:19     .text.a1457_read_register:00000000 $t
     /tmp/ccD4TZ7c.s:24     .text.a1457_read_register:00000000 a1457_read_register
     /tmp/ccD4TZ7c.s:68     .text.a1457_read_register:00000028 $d
     /tmp/ccD4TZ7c.s:73     .text.write_register:00000000 $t
     /tmp/ccD4TZ7c.s:77     .text.write_register:00000000 write_register
     /tmp/ccD4TZ7c.s:121    .text.write_register:00000024 $d
     /tmp/ccD4TZ7c.s:126    .text.a1457_init:00000000 $t
     /tmp/ccD4TZ7c.s:131    .text.a1457_init:00000000 a1457_init
     /tmp/ccD4TZ7c.s:188    .text.a1457_init:00000034 $d
     /tmp/ccD4TZ7c.s:194    .text.a1457_read_position:00000000 $t
     /tmp/ccD4TZ7c.s:199    .text.a1457_read_position:00000000 a1457_read_position
     /tmp/ccD4TZ7c.s:256    .text.a1457_read_position:00000034 $d
     /tmp/ccD4TZ7c.s:263    .text.a1457_set_sensitivity:00000000 $t
     /tmp/ccD4TZ7c.s:268    .text.a1457_set_sensitivity:00000000 a1457_set_sensitivity
     /tmp/ccD4TZ7c.s:430    .text.a1457_set_sensitivity:000000c0 $d
     /tmp/ccD4TZ7c.s:436    .text.a1457_scan_sensitivities:00000000 $t
     /tmp/ccD4TZ7c.s:441    .text.a1457_scan_sensitivities:00000000 a1457_scan_sensitivities
     /tmp/ccD4TZ7c.s:511    .text.a1457_scan_sensitivities:00000038 $d
     /tmp/ccD4TZ7c.s:523    .data.a1457:00000000 a1457
     /tmp/ccD4TZ7c.s:520    .data.a1457:00000000 $d
     /tmp/ccD4TZ7c.s:536    .rodata.__FUNCTION__.7302:00000000 __FUNCTION__.7302
     /tmp/ccD4TZ7c.s:542    .rodata.__FUNCTION__.7309:00000000 __FUNCTION__.7309
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
i2cm
assert_failed
