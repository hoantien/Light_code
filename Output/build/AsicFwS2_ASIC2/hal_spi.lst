   1              		.syntax unified
   2              		.cpu cortex-r4
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 4
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"hal_spi.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.text.hal_spi_irq_handler,"ax",%progbits
  19              		.align	1
  20              		.thumb
  21              		.thumb_func
  23              	hal_spi_irq_handler:
  24              	.LFB23:
  25              		.file 1 "/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c"
   1:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /*******************************************************************************
   2:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * Copyright (c) 2016, The LightCo
   3:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * All rights reserved.
   4:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * Redistribution and use in source and binary forms,
   5:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * with or without modification, are strictly prohibited without prior
   6:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * permission of The LightCo.
   7:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  *
   8:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * @file    hal_spi.c
   9:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * @author  The LightCo
  10:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * @version V1.0.0
  11:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * @date    01-Mar-2016
  12:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * @brief   This file provides firmware functions to manage the following
  13:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  *          functionalities of SPI peripheral:
  14:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  *			  + Initialization and Configuration
  15:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  *			  + Data transfers functions
  16:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  *			  + Interrupts management
  17:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  *
  18:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  ******************************************************************************/
  19:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Includes ------------------------------------------------------------------*/
  20:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #include "assert.h"
  21:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #include "board_config.h"
  22:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #include "cortex_r4.h"
  23:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #include "hal_vic.h"
  24:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #include "hal_spi.h"
  25:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #include "hal_cache.h"
  26:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  27:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Private macro -------------------------------------------------------------*/
  28:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* HW definition of Max size of XFER register */
  29:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #define SSI_MAX_XFER_SIZE_32_BIT
  30:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #define SPI_FIFO_DEPTH 32	/* The real FIFO is 32 data registers */
  31:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  32:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /*
  33:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * TODO: undefined MACRO below if you don't want to test SPI in loop back mode
  34:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  */
  35:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* #define TEST_LOOPBACK */
  36:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  37:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Private typedef -----------------------------------------------------------*/
  38:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** spi_hw_config_t spi_hw[3] =
  39:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
  40:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{.spix = SPI_MASTER},		/* SPI hardware channel 0 */
  41:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{.spix = SPI_SLAVE0},		/* SPI hardware channel 1 */
  42:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{.spix = SPI_SLAVE1}		/* SPI hardware channel 2 */
  43:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** };
  44:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  45:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Store interrupt handler function pointer */
  46:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** spi_interrupt_handle_t spi_interrupt[3] =
  47:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
  48:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Initializing default value for SPI CH0 interrupt */
  49:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
  50:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.multi_master_handler		= NULL,
  51:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.rx_fifo_full_handler		= NULL,
  52:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.rx_fifo_overflow_handler	= NULL,
  53:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.rx_fifo_underflow_handler	= NULL,
  54:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.tx_fifo_overflow_handler	= NULL
  55:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	},
  56:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  57:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Initializing default value for SPI CH1 interrupt */
  58:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
  59:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.multi_master_handler		= NULL,
  60:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.rx_fifo_full_handler		= NULL,
  61:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.rx_fifo_overflow_handler	= NULL,
  62:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.rx_fifo_underflow_handler	= NULL,
  63:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.tx_fifo_overflow_handler	= NULL
  64:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	},
  65:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  66:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Initializing default value for SPI CH2 interrupt */
  67:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
  68:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.multi_master_handler		= NULL,
  69:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.rx_fifo_full_handler		= NULL,
  70:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.rx_fifo_overflow_handler	= NULL,
  71:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.rx_fifo_underflow_handler	= NULL,
  72:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.tx_fifo_overflow_handler	= NULL
  73:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
  74:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** };
  75:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  76:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** flag_status_t spi_interrupt_enable[3] = {DISABLE, DISABLE, DISABLE};
  77:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Private define ------------------------------------------------------------*/
  78:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  79:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Define time out for wait fifo */
  80:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #define TIME_OUT_WAIT_TX_FIFO 	20000
  81:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #define TIME_OUT_TX				50000
  82:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #define TIME_OUT_RX				2000
  83:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  84:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Private variables ---------------------------------------------------------*/
  85:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Private function prototypes -----------------------------------------------*/
  86:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static void hal_spi_0_irq(void);
  87:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static void hal_spi_1_irq(void);
  88:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static void hal_spi_2_irq(void);
  89:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static void hal_spi_irq_handler(ssi_channel_t channel);
  90:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  91:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_transceiver_dma(spi_config_t *spi,
  92:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 											spi_buffer_t *buff);
  93:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_transceiver_normal(spi_config_t *spi,
  94:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 												spi_buffer_t *buff);
  95:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_transmit_buf_dma(spi_config_t *spi, uint8_t *tx_buf,
  96:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 												uint16_t len);
  97:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_transmit_buf_normal(spi_config_t *spi,
  98:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 												uint8_t *tx_buf, uint16_t len);
  99:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_receive_buf_dma(spi_config_t *spi, uint8_t *rx_buf,
 100:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 											uint16_t len);
 101:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_receive_buf_normal(spi_config_t *spi,
 102:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 												uint8_t *rx_buf, uint16_t len);
 103:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 104:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 105:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 106:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 107:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Private functions ---------------------------------------------------------*/
 108:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static void spi_delay(__IO uint32_t time)
 109:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 110:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	while(time > 0)
 111:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		time--;
 112:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 113:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 114:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static uint8_t wait_tx_fifo_empty(spi_config_t *spi)
 115:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 116:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/*
 117:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	 * TODO: have to calculate time out with other baud rate
 118:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	 */
 119:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	__IO uint32_t time_out = TIME_OUT_WAIT_TX_FIFO;
 120:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t status_reg = 0;
 121:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint8_t rx_fifo = 0;
 122:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check received data in fifo */
 123:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	do
 124:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 125:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		status_reg = spi_hw[spi->channel].spix->SR;
 126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		time_out--;
 127:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	} while(((status_reg & (SR_TF_EMPT | SR_BUSY)) != SR_TF_EMPT)
 128:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			&& (time_out > 0));
 129:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 130:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	rx_fifo = spi_hw[spi->channel].spix->RXFLR;
 131:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 132:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return rx_fifo;
 133:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 134:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 135:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Exported functions --------------------------------------------------------*/
 136:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** spi_status_t hal_spi_init(spi_config_t *spi)
 137:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 138:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t control_0_reg = 0;
 139:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 140:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check parameters */
 141:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_DATA_SIZE(spi->data_size));
 142:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 143:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
 144:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 145:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 146:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 147:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 148:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #if ((ASIC_NUM == ASIC2) || (ASIC_NUM == ASIC3))
 149:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if (SSI_CH2 == spi->channel)
 150:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 151:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Bit [5,7:8] of OxA8 register have to be high */
 152:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		*(volatile uint32_t*)(SCU_BASE + 0xA8) &= ~(0x000001A0);
 153:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 154:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #endif
 155:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Clear interrupt mark register */
 156:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->IMR = 0;
 157:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 158:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Disable SSI bit 0- Offset 0x08 - SSI Enable Register */
 159:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 160:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 161:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure baud rate
 162:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	 * Fclk_out = Fssi_clk/SCKDV Offset 0x14 - Baud Rate Select
 163:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	 */
 164:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->BAUDR = BOARD_PCLOCK / spi->master_clk_freq;
 165:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 166:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #ifdef TEST_LOOPBACK
 167:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	control_0_reg |= (uint32_t)(1 << 11);
 168:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #endif
 169:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 170:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure SSI mode */
 171:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->ssi_mode)
 172:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 173:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_MOTO_SPI:
 174:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 175:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Configure SPI mode - bit 4 Offset 0x00 - Control Register 0  */
 176:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg |= SPI_FRF_SPI;
 177:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Configure SPI frame size 32bit mode - bit 20 : 16 */
 178:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg |= ((spi->data_size - 1) << SPI_DFS_32_OFFSET);
 179:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 180:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 181:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_TI_SSP:
 182:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 183:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg |= SPI_FRF_SSP;
 184:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 185:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 186:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_NS_MICROWIRE:
 187:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 188:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Configure Microwire mode */
 189:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg |= SPI_FRF_MICROWIRE;
 190:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 191:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Configure Microwire frame size */
 192:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			if (spi->data_size == DATASIZE_8BIT ||
 193:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					spi->data_size == DATASIZE_16BIT)
 194:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 195:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				control_0_reg |= ((spi->data_size - 1) << SPI_CFS_OFFSET);
 196:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			}
 197:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			else
 198:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 199:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				return SPI_ERROR;
 200:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			}
 201:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 202:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 203:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 204:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 205:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 206:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 207:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 208:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 209:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure SPI frame format type - bit [22:21] */
 210:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	control_0_reg |= (spi->spi_type << SPI_FRF_FRAME_OFFSET);
 211:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 212:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure transfer mode - bit[9:8] */
 213:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	control_0_reg |= (spi->transfer_mode << SPI_TMOD_OFFSET);
 214:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 215:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure clock polarity and phase */
 216:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch (spi->spi_mode)
 217:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 218:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* bit [7:6] */
 219:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SPI_MODE_0:
 220:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 221:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg &= ~SPI_SCOL;
 222:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg &= ~SPI_SCPH;
 223:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 224:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 225:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SPI_MODE_1:
 226:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 227:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg &= ~SPI_SCOL;
 228:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg |= SPI_SCPH;
 229:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 230:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 231:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SPI_MODE_2:
 232:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 233:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg |= SPI_SCOL;
 234:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg &= ~SPI_SCPH;
 235:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 236:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 237:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SPI_MODE_3:
 238:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 239:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg |= SPI_SCOL | SPI_SCPH;
 240:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 241:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 242:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 243:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 244:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 245:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 246:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 247:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 248:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Enable slave output function */
 249:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi_hw[spi->channel].spix != SPI_MASTER)
 250:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 251:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi->transfer_mode == RX_ONLY)
 252:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 253:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Bit 10 - offset 0 : disable TX */
 254:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg |= (SPI_SLVOE);
 255:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 256:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		else
 257:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 258:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Bit 10 - offset 0 : enable TX */
 259:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg &= ~(SPI_SLVOE);
 260:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 261:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 262:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 263:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->CTRL0 = control_0_reg;
 264:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 1;
 265:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 266:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure number of data frame Offset 0x04 - Control Register 1 */
 267:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi->channel == SSI_CH0
 268:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		&& (spi->transfer_mode == RX_ONLY
 269:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		|| spi->transfer_mode == EEPROM_READ))
 270:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 271:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Configure number of data frame */
 272:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		spi_hw[spi->channel].spix->CTRL1 = spi->master_data_frame;
 273:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 274:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 275:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return SPI_OK;
 276:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 277:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 278:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** spi_status_t hal_spi_slave_select(uint8_t cs_pin, flag_status_t value)
 279:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 280:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	__IO uint32_t tmp = 0;
 281:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 282:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(cs_pin >= 1 && cs_pin <= 32)
 283:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 284:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		tmp = spi_hw[SSI_CH0].spix->SER;
 285:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		tmp = (tmp & ~(1 << (cs_pin - 1))) | (value << (cs_pin - 1));
 286:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		spi_hw[SSI_CH0].spix->SER = tmp;
 287:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_OK;
 288:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 289:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return SPI_ERROR;
 290:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 291:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 292:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** void hal_spi_disable(spi_config_t *spi)
 293:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 294:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 295:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 296:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 297:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 298:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 299:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** void hal_spi_enable(spi_config_t *spi)
 300:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 301:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 302:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 303:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 1;
 304:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 305:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 306:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** void hal_spi_reset(spi_config_t *spi)
 307:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 308:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 309:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 310:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 311:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_delay(0xff);
 312:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 1;
 313:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 314:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 315:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_receive_buf_dma(spi_config_t *spi, uint8_t *rx_buf,
 316:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 											uint16_t len)
 317:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 318:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_init_type_t dma_rx = { 0 };
 319:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_config_t spi_dma;
 320:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 321:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check parameters */
 322:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 323:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(rx_buf == NULL));
 324:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 325:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_disable(spi);
 326:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_rx.chid);
 327:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 328:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure spi dma */
 329:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_receive_data_level = 0;
 330:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_data_level = 0;
 331:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_receive_enable = ENABLE;
 332:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_enable = DISABLE;
 333:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_dma_init(spi, &spi_dma);
 334:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_init(spi);
 335:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 336:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure DMA SPI RX */
 337:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.chid = spi->dma_rx.chid;
 338:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.length = len * (spi->data_size / 8);
 339:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.trans_type = PER_TO_MEM;
 340:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 341:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_addr = (uint32_t)rx_buf;
 342:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_bsize = BURST_SIZE_1;
 343:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_bsize = BURST_SIZE_1;
 344:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 345:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->data_size)
 346:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 347:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_8BIT:
 348:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 349:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.src_wdata = DATA_WIDTH_8;
 350:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_8;
 351:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 352:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 353:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_16BIT:
 354:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 355:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.src_wdata = DATA_WIDTH_16;
 356:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_16;
 357:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 358:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 359:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_32BIT:
 360:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 361:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.src_wdata = DATA_WIDTH_32;
 362:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_32;
 363:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 364:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 365:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 366:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 367:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_spi_disable(spi);
 368:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 369:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 370:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 371:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 372:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 373:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->channel)
 374:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 375:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH0:
 376:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.periph_type = SPI0_DMA_RX;
 377:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 378:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH1:
 379:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.periph_type = SPI1_DMA_RX;
 380:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 381:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH2:
 382:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.periph_type = SPI2_DMA_RX;
 383:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 384:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 385:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 386:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_spi_disable(spi);
 387:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 388:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 389:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 390:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 391:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 392:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.clb_func = spi->dma_rx.callback_func;
 393:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_enable_global_interrupt(0);
 394:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 395:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(hal_dma_init(&dma_rx) != HAL_DMA_OK)
 396:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 397:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 398:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	flush_cache((unsigned long)rx_buf, len);
 399:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(hal_dma_channel_enable(spi->dma_rx.chid) != HAL_DMA_OK)
 400:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 401:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 402:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return SPI_OK;
 403:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 404:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 405:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_receive_buf_normal(spi_config_t *spi,
 406:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 												uint8_t *rx_buf, uint16_t len)
 407:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 408:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	volatile uint8_t status = 0;
 409:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t time_out = 0;
 410:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t rx_tmp = 0;
 411:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint16_t index_rx = 0;
 412:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint16_t buff_index = 0;
 413:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 414:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check parameters */
 415:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 416:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(rx_buf == NULL));
 417:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 418:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi_hw[spi->channel].spix->SSIENR == 0)
 419:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 420:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Enable SPI if which is disable */
 421:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		spi_hw[spi->channel].spix->SSIENR = 1;
 422:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 423:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 424:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	time_out = TIME_OUT_RX;
 425:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 426:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	while(time_out)
 427:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 428:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		time_out--;
 429:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Read number of data in receiver FIFO */
 430:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		status = spi_hw[spi->channel].spix->RXFLR;
 431:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(status)
 432:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 433:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			time_out = TIME_OUT_RX;
 434:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Read data in RX FIFO */
 435:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			rx_tmp = spi_hw[spi->channel].spix->DR[0];
 436:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 437:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			switch(spi->data_size)
 438:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 439:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_8BIT:
 440:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 441:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					*(uint8_t *)(&rx_buf[index_rx]) = (uint8_t)rx_tmp;
 442:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_rx++;
 443:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 444:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 445:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_16BIT:
 446:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 447:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					*(uint16_t *)(&rx_buf[index_rx]) = (uint16_t)rx_tmp;
 448:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_rx += 2;
 449:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 450:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 451:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_32BIT:
 452:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 453:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					*(uint32_t *)(&rx_buf[index_rx]) = (uint32_t)rx_tmp;
 454:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_rx += 4;
 455:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 456:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 457:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				default:
 458:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 459:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					/* Disable SPI */
 460:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					spi_hw[spi->channel].spix->SSIENR = 0;
 461:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					return SPI_ERROR;
 462:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 463:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			}
 464:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			buff_index++;
 465:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 466:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			if(buff_index == len)
 467:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 468:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				/* Receive full data */
 469:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				break;
 470:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			}
 471:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 472:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 473:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 474:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(time_out != 0)
 475:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_OK;
 476:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	else
 477:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 478:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 479:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 480:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /*
 481:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * Data buffer need to receive has to typecast to uint8_t
 482:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * e.g: uint8_t rx_data[len]; // len is number of data
 483:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * 		hal_spi_receive_buf(spi, (uint8_t *)rx_buf, len);
 484:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 485:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * e.g: uint16_t rx_data[len]; // len is number of data
 486:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * 		hal_spi_receive_buf(spi, (uint8_t *)rx_buf, len);
 487:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 488:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * e.g: uint32_t rx_data[len]; // len is number of data
 489:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * 		hal_spi_receive_buf(spi, (uint8_t *)rx_buf, len);
 490:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  */
 491:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** spi_status_t hal_spi_receive_buf(spi_config_t *spi, uint8_t *rx_buf,
 492:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 									uint16_t len)
 493:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 494:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 495:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi->dma_rx.enable == ENABLE)
 496:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_receive_buf_dma(spi, rx_buf, len);
 497:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	else
 498:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_receive_buf_normal(spi, rx_buf, len);
 499:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 500:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return ret;
 501:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 502:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 503:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_transmit_buf_dma(spi_config_t *spi, uint8_t *tx_buf,
 504:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 												uint16_t len)
 505:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 506:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_init_type_t dma_tx = { 0 };
 507:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_config_t spi_dma;
 508:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 509:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check parameters */
 510:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 511:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(tx_buf == NULL));
 512:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 513:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_disable(spi);
 514:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_tx.chid);
 515:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 516:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure spi dma */
 517:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_receive_data_level = 0;
 518:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_data_level = 0;
 519:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_receive_enable = DISABLE;
 520:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_enable = ENABLE;
 521:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_dma_init(spi, &spi_dma);
 522:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_init(spi);
 523:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 524:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure DMA SPI TX */
 525:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.chid = spi->dma_tx.chid;
 526:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.length = len * (spi->data_size / 8);
 527:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.trans_type = MEM_TO_PER;
 528:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_addr = (uint32_t)tx_buf;
 529:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.dst_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 530:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_bsize = BURST_SIZE_1;
 531:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.dst_bsize = BURST_SIZE_1;
 532:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 533:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->data_size)
 534:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 535:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_8BIT:
 536:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 537:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.src_wdata = DATA_WIDTH_8;
 538:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_8;
 539:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 540:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 541:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_16BIT:
 542:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 543:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.src_wdata = DATA_WIDTH_16;
 544:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_16;
 545:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 546:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 547:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_32BIT:
 548:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 549:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.src_wdata = DATA_WIDTH_32;
 550:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_32;
 551:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 552:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 553:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 554:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 555:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_spi_disable(spi);
 556:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 557:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 558:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 559:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 560:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->channel)
 561:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 562:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH0:
 563:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.periph_type = SPI0_DMA_TX;
 564:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 565:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH1:
 566:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.periph_type = SPI1_DMA_TX;
 567:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 568:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH2:
 569:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.periph_type = SPI2_DMA_TX;
 570:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 571:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 572:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 573:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_spi_disable(spi);
 574:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 575:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 576:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 577:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 578:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 579:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.clb_func = spi->dma_tx.callback_func;
 580:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_enable_global_interrupt(0);
 581:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 582:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(hal_dma_init(&dma_tx) != HAL_DMA_OK)
 583:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 584:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 585:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	flush_cache((unsigned long)tx_buf, len);
 586:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(hal_dma_channel_enable(spi->dma_tx.chid) != HAL_DMA_OK)
 587:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 588:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 589:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return SPI_OK;
 590:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 591:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 592:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_transmit_buf_normal(spi_config_t *spi,
 593:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 												uint8_t *tx_buf, uint16_t len)
 594:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 595:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t time_out = 0;
 596:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t i = 0;
 597:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint16_t index_tx = 0;
 598:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint8_t count = 0;
 599:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t tx_tmp = 0;
 600:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 601:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check parameters */
 602:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 603:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(tx_buf == NULL));
 604:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 605:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	while(len > 0)
 606:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 607:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Check data length */
 608:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(len <= SPI_FIFO_DEPTH)
 609:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 610:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			count = len;
 611:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			len = 0;
 612:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 613:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		else
 614:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 615:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			count = SPI_FIFO_DEPTH;
 616:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			len -= SPI_FIFO_DEPTH;
 617:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 618:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 619:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/*
 620:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		 * Transmit data full buffer
 621:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		 */
 622:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		for(i = 0; i < count; i++)
 623:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 624:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Format transmit data */
 625:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			switch(spi->data_size)
 626:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 627:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_8BIT:
 628:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 629:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					tx_tmp = *(uint8_t *)(&tx_buf[index_tx]);
 630:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_tx++;
 631:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 632:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 633:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_16BIT:
 634:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 635:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					tx_tmp = *(uint16_t *)(&tx_buf[index_tx]);
 636:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_tx += 2;
 637:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 638:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 639:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_32BIT:
 640:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 641:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					tx_tmp = *(uint32_t *)(&tx_buf[index_tx]);
 642:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_tx += 4;
 643:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 644:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 645:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				default:
 646:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 647:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					return SPI_ERROR;
 648:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 649:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			}
 650:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Move data need to send to FIFO */
 651:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			spi_hw[spi->channel].spix->DR[0] = tx_tmp;
 652:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 653:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 654:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		time_out = TIME_OUT_TX * SPI_FIFO_DEPTH;
 655:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		while(spi_hw[spi->channel].spix->TXFLR != 0)
 656:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 657:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			time_out--;
 658:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			if(time_out == 0)
 659:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				return SPI_ERROR;
 660:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 661:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 662:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return SPI_OK;
 663:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 664:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 665:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /*
 666:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * Data buffer need to transmit has to typecast to uint8_t
 667:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * e.g: uint8_t tx_data[len]; // len is number of data
 668:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * 		hal_spi_transmit_buf(spi, (uint8_t *)tx_buf, len);
 669:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 670:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * e.g: uint16_t tx_data[len]; // len is number of data
 671:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * 		hal_spi_transmit_buf(spi, (uint8_t *)tx_buf, len);
 672:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 673:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * e.g: uint32_t tx_data[len]; // len is number of data
 674:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * 		hal_spi_transmit_buf(spi, (uint8_t *)tx_buf, len);
 675:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  */
 676:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** spi_status_t hal_spi_transmit_buf(spi_config_t *spi, uint8_t *tx_buf,
 677:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 									uint16_t len)
 678:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 679:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 680:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi->dma_tx.enable == ENABLE)
 681:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_transmit_buf_dma(spi, tx_buf, len);
 682:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	else
 683:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_transmit_buf_normal(spi, tx_buf, len);
 684:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 685:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return ret;
 686:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 687:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 688:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_transceiver_dma(spi_config_t *spi,
 689:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 											spi_buffer_t *buff)
 690:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 691:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint16_t ret = SPI_ERROR;
 692:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_init_type_t dma_rx = { 0 };
 693:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_init_type_t dma_tx = { 0 };
 694:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_config_t spi_dma;
 695:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint8_t *rx_buf, *tx_buf;
 696:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint16_t rx_len, tx_len;
 697:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 698:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check parameters */
 699:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_DATA_SIZE(spi->data_size));
 700:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 701:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 702:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 703:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 704:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 705:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(buff->txbuf.buf == NULL  || buff->txbuf.len == 0 ||
 706:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					buff->rxbuf.buf == NULL || buff->rxbuf.len == 0 ||
 707:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					buff->rxbuf.len != buff->txbuf.len));
 708:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 709:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	rx_buf = buff->rxbuf.buf;
 710:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	rx_len = buff->rxbuf.len * (spi->data_size / 8);
 711:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	tx_buf = buff->txbuf.buf;
 712:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	tx_len = buff->txbuf.len * (spi->data_size / 8);
 713:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 714:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_rx.chid);
 715:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_tx.chid);
 716:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_disable(spi);
 717:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 718:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure DMA for SPI */
 719:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_receive_data_level = 0;
 720:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_data_level = 0;
 721:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_receive_enable = ENABLE;
 722:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_enable = ENABLE;
 723:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_dma_init(spi, &spi_dma);
 724:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 725:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure DMA SPI RX */
 726:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.chid = spi->dma_rx.chid;
 727:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.length = rx_len;
 728:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.trans_type = PER_TO_MEM;
 729:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 730:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_addr = (uint32_t)rx_buf;
 731:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_bsize = BURST_SIZE_1;
 732:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_bsize = BURST_SIZE_1;
 733:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->data_size)
 734:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 735:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_8BIT:
 736:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 737:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.src_wdata = DATA_WIDTH_8;
 738:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_8;
 739:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 740:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 741:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_16BIT:
 742:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 743:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.src_wdata = DATA_WIDTH_16;
 744:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_16;
 745:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 746:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 747:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_32BIT:
 748:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 749:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.src_wdata = DATA_WIDTH_32;
 750:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_32;
 751:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 752:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 753:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 754:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 755:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_spi_disable(spi);
 756:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 757:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 758:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 759:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 760:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->channel)
 761:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 762:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH0:
 763:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.periph_type = SPI0_DMA_RX;
 764:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 765:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH1:
 766:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.periph_type = SPI1_DMA_RX;
 767:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 768:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH2:
 769:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.periph_type = SPI2_DMA_RX;
 770:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 771:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 772:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 773:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_spi_disable(spi);
 774:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 775:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 776:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 777:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 778:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.clb_func = spi->dma_rx.callback_func;
 779:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 780:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure DMA SPI TX */
 781:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.chid = spi->dma_tx.chid;
 782:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.length = tx_len;
 783:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.trans_type = MEM_TO_PER;
 784:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_addr = (uint32_t)tx_buf;
 785:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.dst_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 786:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->data_size)
 787:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 788:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_8BIT:
 789:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 790:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.src_wdata = DATA_WIDTH_8;
 791:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_8;
 792:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 793:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 794:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_16BIT:
 795:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 796:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.src_wdata = DATA_WIDTH_16;
 797:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_16;
 798:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 799:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 800:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_32BIT:
 801:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 802:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.src_wdata = DATA_WIDTH_32;
 803:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_32;
 804:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 805:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 806:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 807:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 808:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_spi_disable(spi);
 809:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 810:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 811:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 812:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 813:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->channel)
 814:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 815:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH0:
 816:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.periph_type = SPI0_DMA_TX;
 817:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 818:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH1:
 819:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.periph_type = SPI1_DMA_TX;
 820:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 821:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH2:
 822:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.periph_type = SPI2_DMA_TX;
 823:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 824:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 825:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 826:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_spi_disable(spi);
 827:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 828:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 829:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 830:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 831:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.clb_func = spi->dma_tx.callback_func;
 832:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 833:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_enable_global_interrupt(0);
 834:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	ret = hal_dma_init(&dma_rx);
 835:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != HAL_DMA_OK)
 836:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 837:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 838:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	ret = hal_dma_init(&dma_tx);
 839:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != HAL_DMA_OK)
 840:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 841:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 842:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	flush_cache((unsigned long)tx_buf, tx_len);
 843:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	flush_cache((unsigned long)rx_buf, rx_len);
 844:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	ret = hal_spi_init(spi);
 845:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != SPI_OK)
 846:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 847:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 848:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	ret = hal_dma_channel_enable(spi->dma_rx.chid);
 849:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != HAL_DMA_OK)
 850:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 851:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 852:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	ret = hal_dma_channel_enable(spi->dma_tx.chid);
 853:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != HAL_DMA_OK)
 854:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 855:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 856:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return SPI_OK;
 857:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 858:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 859:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_transceiver_normal(spi_config_t *spi,
 860:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 												spi_buffer_t *buff)
 861:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 862:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	__IO uint32_t time_out = 0;
 863:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t buff_size = 0;
 864:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t tx_tmp = 0, rx_tmp = 0, i = 0;
 865:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	int idx_tx = 0, idx_rx = 0, count = 0;
 866:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	int rx_fifo = 0;
 867:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 868:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check parameters */
 869:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_DATA_SIZE(spi->data_size));
 870:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 871:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 872:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 873:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 874:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 875:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(buff->txbuf.buf == NULL  || buff->txbuf.len == 0 ||
 876:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					buff->rxbuf.buf == NULL || buff->rxbuf.len == 0 ||
 877:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					buff->rxbuf.len != buff->txbuf.len));
 878:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 879:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	buff_size = buff->txbuf.len;
 880:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	buff->rxbuf.counter = 0;
 881:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	buff->txbuf.counter = 0;
 882:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 883:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Enable SPI */
 884:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 1;
 885:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 886:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	while(buff_size != 0)
 887:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 888:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Check data length */
 889:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(buff_size <= SPI_FIFO_DEPTH)
 890:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 891:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			count = buff_size;
 892:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			buff_size = 0;
 893:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 894:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		else
 895:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 896:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			count = SPI_FIFO_DEPTH;
 897:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			buff_size -= SPI_FIFO_DEPTH;
 898:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 899:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 900:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/*
 901:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		 * Transmit data full buffer
 902:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		 */
 903:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		for(i = 0; i < count; i++)
 904:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 905:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Format transmit data */
 906:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			switch(spi->data_size)
 907:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 908:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_8BIT:
 909:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 910:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					tx_tmp = *(uint8_t *)(&buff->txbuf.buf[idx_tx]);
 911:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_tx++;
 912:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 913:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 914:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_16BIT:
 915:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 916:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					tx_tmp = *(uint16_t *)(&buff->txbuf.buf[idx_tx]);
 917:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_tx += 2;
 918:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 919:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 920:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_32BIT:
 921:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 922:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					tx_tmp = *(uint32_t *)(&buff->txbuf.buf[idx_tx]);
 923:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_tx += 4;
 924:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 925:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 926:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				default:
 927:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 928:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					spi_hw[spi->channel].spix->SSIENR = 0;
 929:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					return SPI_ERROR;
 930:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 931:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			}
 932:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Move data need to send to FIFO */
 933:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			spi_hw[spi->channel].spix->DR[0] = tx_tmp;
 934:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			buff->txbuf.counter = idx_tx;
 935:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 936:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 937:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi->channel == SSI_CH0)
 938:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 939:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Read all datas from Rx FIFO */
 940:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			rx_fifo = wait_tx_fifo_empty(spi);
 941:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 942:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		else
 943:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 944:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Wait for SPI slave transmission complete all data */
 945:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			time_out = TIME_OUT_TX * SPI_FIFO_DEPTH;
 946:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			while(spi_hw[spi->channel].spix->RXFLR != count)
 947:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 948:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				time_out--;
 949:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				if(time_out == 0)
 950:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 951:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					spi_hw[spi->channel].spix->SSIENR = 0;
 952:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					return SPI_ERROR;
 953:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 954:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			}
 955:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			rx_fifo = spi_hw[spi->channel].spix->RXFLR;
 956:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 957:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 958:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		while(rx_fifo > 0)
 959:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 960:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			rx_tmp = spi_hw[spi->channel].spix->DR[0];
 961:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 962:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			switch(spi->data_size)
 963:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 964:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_8BIT:
 965:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 966:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					*(uint8_t *)(&buff->rxbuf.buf[idx_rx]) = (uint8_t)rx_tmp;
 967:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_rx++;
 968:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 969:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 970:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_16BIT:
 971:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 972:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					*(uint16_t *)(&buff->rxbuf.buf[idx_rx]) = (uint16_t)rx_tmp;
 973:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_rx += 2;
 974:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 975:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 976:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_32BIT:
 977:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 978:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					*(uint32_t *)(&buff->rxbuf.buf[idx_rx]) = (uint32_t)rx_tmp;
 979:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_rx += 4;
 980:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 981:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 982:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				default:
 983:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 984:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					/* Disable SPI */
 985:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					spi_hw[spi->channel].spix->SSIENR = 0;
 986:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					return SPI_ERROR;
 987:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 988:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			}
 989:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			buff->rxbuf.counter = idx_rx;
 990:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			rx_fifo--;
 991:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 992:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 993:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Disable SPI */
 994:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 995:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return SPI_OK;
 996:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 997:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 998:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /*
 999:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * Data buffer need to transmit and receive has to typecast to uint8_t
1000:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * e.g: uint8_t tx_data[len]; // len is number of data
1001:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * 		spi_buf.txbuf.buf = (uint8_t *)tx_data;
1002:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1003:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * e.g: uint16_t tx_data[len]; // len is number of data
1004:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * 		spi_buf.txbuf.buf = (uint8_t *)tx_data;
1005:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1006:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * e.g: uint32_t tx_data[len]; // len is number of data
1007:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * 		spi_buf.txbuf.buf = (uint8_t *)tx_data;
1008:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  */
1009:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** spi_status_t hal_spi_transceiver(spi_config_t *spi, spi_buffer_t *buff)
1010:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
1011:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
1012:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi->dma_rx.enable == ENABLE && spi->dma_tx.enable == ENABLE)
1013:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_transceiver_dma(spi, buff);
1014:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	else
1015:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_transceiver_normal(spi, buff);
1016:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1017:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return ret;
1018:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
1019:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1020:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** void hal_spi_dma_init(spi_config_t *spi, dma_config_t *dma)
1021:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
1022:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t reg_tmp = 0;
1023:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1024:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check parameters */
1025:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_DATA_SIZE(spi->data_size));
1026:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
1027:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
1028:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
1029:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
1030:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
1031:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(dma->dma_receive_enable));
1032:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(dma->dma_transmit_enable));
1033:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1034:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure DMA transmit data level */
1035:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->DMATDLR = dma->dma_transmit_data_level;
1036:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure DMA receive / receive data level */
1037:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->DMARDLR = dma->dma_transmit_data_level;
1038:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Enable/Disable transmit DMA enable bit */
1039:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	reg_tmp = ((uint32_t)dma->dma_transmit_enable << 1) |
1040:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			((uint32_t)dma->dma_receive_enable << 0);
1041:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1042:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Initializing DMA controller */
1043:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->DMACR = reg_tmp;
1044:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
1045:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1046:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** void hal_spi_interrupt_init(spi_config_t *spi, spi_interrupt_init_t *interrupt)
1047:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
1048:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t reg_tmp = 0;
1049:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1050:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check parameters */
1051:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_DATA_SIZE(spi->data_size));
1052:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
1053:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
1054:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
1055:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
1056:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
1057:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1058:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check interrupt parameters */
1059:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->rx_fifo_full));
1060:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->rx_fifo_overflow));
1061:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->rx_fifo_underflow));
1062:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->tx_fifo_empty));
1063:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->tx_fifo_overflow));
1064:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->multi_master_contention));
1065:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(interrupt->rx_fifo_threshold > 31));
1066:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(interrupt->tx_fifo_threshold > 31));
1067:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1068:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1069:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure transmit FIFO threshold */
1070:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->TXFTLR = interrupt->tx_fifo_threshold;
1071:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1072:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure receive FIFO threshold */
1073:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->RXFTLR = interrupt->rx_fifo_threshold;
1074:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1075:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure interrupts */
1076:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	reg_tmp = (interrupt->multi_master_contention << SPI_INT_MSTI_OFFSET)	|
1077:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->rx_fifo_full << SPI_INT_RXFI_OFFSET)			|
1078:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->rx_fifo_overflow << SPI_INT_RXOI_OFFSET)		|
1079:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->rx_fifo_underflow << SPI_INT_RXUI_OFFSET)		|
1080:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->tx_fifo_overflow << SPI_INT_TXOI_OFFSET)		|
1081:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->tx_fifo_empty << SPI_INT_TXEI_OFFSET);
1082:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1083:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt_enable[spi->channel] = ENABLE;
1084:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1085:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Copy interrupt function pointer to global variable */
1086:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].multi_master_handler =
1087:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.multi_master_handler;
1088:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1089:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_full_handler =
1090:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.rx_fifo_full_handler;
1091:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1092:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_overflow_handler =
1093:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.rx_fifo_overflow_handler;
1094:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1095:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_underflow_handler =
1096:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.rx_fifo_underflow_handler;
1097:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1098:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].tx_fifo_empty_handler =
1099:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.tx_fifo_empty_handler;
1100:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1101:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].tx_fifo_overflow_handler =
1102:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.tx_fifo_overflow_handler;
1103:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1104:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->channel)
1105:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
1106:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH0:
1107:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			vic_register_irq(SPI_IRQn, hal_spi_0_irq);
1108:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
1109:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH1:
1110:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			vic_register_irq(SPIS0_IRQn, hal_spi_1_irq);
1111:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
1112:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH2:
1113:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			vic_register_irq(SPIS1_IRQn, hal_spi_2_irq);
1114:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
1115:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
1116:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
1117:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
1118:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1119:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Init interrupt */
1120:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->IMR = reg_tmp;
1121:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
1122:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1123:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** void hal_spi_interrupt_deinit(spi_config_t *spi)
1124:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
1125:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
1126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_DATA_SIZE(spi->data_size));
1127:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
1128:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
1129:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
1130:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
1131:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
1132:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1133:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Disable all interrupt */
1134:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->IMR = 0;
1135:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->TXFTLR = 0;
1136:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->RXFTLR = 0;
1137:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt_enable[spi->channel] = DISABLE;
1138:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].multi_master_handler = NULL;
1139:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_full_handler = NULL;
1140:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_overflow_handler = NULL;
1141:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_underflow_handler = NULL;
1142:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].tx_fifo_empty_handler = NULL;
1143:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].tx_fifo_overflow_handler = NULL;
1144:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1145:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->channel)
1146:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
1147:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH0:
1148:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			vic_unregister_irq(SPI_IRQn);
1149:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
1150:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH1:
1151:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			vic_unregister_irq(SPIS0_IRQn);
1152:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
1153:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH2:
1154:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			vic_unregister_irq(SPIS1_IRQn);
1155:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
1156:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
1157:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
1158:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
1159:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
1160:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1161:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static void hal_spi_0_irq(void)
1162:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
1163:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_irq_handler(SSI_CH0);
1164:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
1165:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1166:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static void hal_spi_1_irq(void)
1167:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
1168:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_irq_handler(SSI_CH1);
1169:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
1170:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1171:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static void hal_spi_2_irq(void)
1172:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
1173:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_irq_handler(SSI_CH2);
1174:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
1175:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1176:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static void hal_spi_irq_handler(ssi_channel_t channel)
1177:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
  26              		.loc 1 1177 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              	.LVL0:
  31 0000 38B5     		push	{r3, r4, r5, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 16
  34              		.cfi_offset 3, -16
  35              		.cfi_offset 4, -12
  36              		.cfi_offset 5, -8
  37              		.cfi_offset 14, -4
1178:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t tmp = 0;
1179:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1180:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* 1. Check multi-master interrupt */
1181:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi_hw[channel].spix->ISR & SPI_INT_MSTI)
  38              		.loc 1 1181 0
  39 0002 284D     		ldr	r5, .L45
1177:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t tmp = 0;
  40              		.loc 1 1177 0
  41 0004 0446     		mov	r4, r0
  42              		.loc 1 1181 0
  43 0006 55F82030 		ldr	r3, [r5, r0, lsl #2]
  44 000a 1A6B     		ldr	r2, [r3, #48]
  45 000c 9206     		lsls	r2, r2, #26
  46 000e 06D5     		bpl	.L2
1182:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
1183:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Read multi-master interrupt clear register */
1184:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		tmp = spi_hw[channel].spix->MSTICR;
  47              		.loc 1 1184 0
  48 0010 5B6C     		ldr	r3, [r3, #68]
  49              	.LVL1:
1185:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi_interrupt[channel].multi_master_handler != NULL)
  50              		.loc 1 1185 0
  51 0012 1823     		movs	r3, #24
  52 0014 244A     		ldr	r2, .L45+4
  53 0016 4343     		muls	r3, r0, r3
  54 0018 D358     		ldr	r3, [r2, r3]
  55 001a 03B1     		cbz	r3, .L2
1186:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			spi_interrupt[channel].multi_master_handler();
  56              		.loc 1 1186 0
  57 001c 9847     		blx	r3
  58              	.LVL2:
  59              	.L2:
1187:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
1188:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* 2. Check receive FIFO full interrupt */
1189:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi_hw[channel].spix->ISR & SPI_INT_RXFI)
  60              		.loc 1 1189 0
  61 001e 55F82430 		ldr	r3, [r5, r4, lsl #2]
  62 0022 1B6B     		ldr	r3, [r3, #48]
  63 0024 DB06     		lsls	r3, r3, #27
  64 0026 06D5     		bpl	.L3
1190:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
1191:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi_interrupt[channel].rx_fifo_full_handler != NULL)
  65              		.loc 1 1191 0
  66 0028 1F4A     		ldr	r2, .L45+4
  67 002a 1823     		movs	r3, #24
  68 002c 03FB0423 		mla	r3, r3, r4, r2
  69 0030 5B68     		ldr	r3, [r3, #4]
  70 0032 03B1     		cbz	r3, .L3
1192:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			spi_interrupt[channel].rx_fifo_full_handler();
  71              		.loc 1 1192 0
  72 0034 9847     		blx	r3
  73              	.LVL3:
  74              	.L3:
1193:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
1194:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* 3. Check receive FIFO overflow interrupt */
1195:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi_hw[channel].spix->ISR & SPI_INT_RXOI)
  75              		.loc 1 1195 0
  76 0036 55F82430 		ldr	r3, [r5, r4, lsl #2]
  77 003a 1A6B     		ldr	r2, [r3, #48]
  78 003c 1007     		lsls	r0, r2, #28
  79 003e 07D5     		bpl	.L4
1196:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
1197:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Read RXOICR to clear SPI_INT_RXOI interrupt flag */
1198:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		tmp = spi_hw[channel].spix->RXOICR;
1199:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi_interrupt[channel].rx_fifo_overflow_handler != NULL)
  80              		.loc 1 1199 0
  81 0040 194A     		ldr	r2, .L45+4
1198:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi_interrupt[channel].rx_fifo_overflow_handler != NULL)
  82              		.loc 1 1198 0
  83 0042 DB6B     		ldr	r3, [r3, #60]
  84              		.loc 1 1199 0
  85 0044 1823     		movs	r3, #24
  86 0046 03FB0423 		mla	r3, r3, r4, r2
  87 004a 9B68     		ldr	r3, [r3, #8]
  88 004c 03B1     		cbz	r3, .L4
1200:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			spi_interrupt[channel].rx_fifo_overflow_handler();
  89              		.loc 1 1200 0
  90 004e 9847     		blx	r3
  91              	.LVL4:
  92              	.L4:
1201:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
1202:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* 4. Check receive FIFO underflow interrupt */
1203:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi_hw[channel].spix->ISR & SPI_INT_RXUI)
  93              		.loc 1 1203 0
  94 0050 55F82430 		ldr	r3, [r5, r4, lsl #2]
  95 0054 1A6B     		ldr	r2, [r3, #48]
  96 0056 5107     		lsls	r1, r2, #29
  97 0058 07D5     		bpl	.L5
1204:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
1205:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Read RXUICR to clear SPI_INT_RXUI interrupt flag */
1206:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		tmp = spi_hw[channel].spix->RXUICR;
1207:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi_interrupt[channel].rx_fifo_underflow_handler != NULL)
  98              		.loc 1 1207 0
  99 005a 134A     		ldr	r2, .L45+4
1206:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi_interrupt[channel].rx_fifo_underflow_handler != NULL)
 100              		.loc 1 1206 0
 101 005c 1B6C     		ldr	r3, [r3, #64]
 102              		.loc 1 1207 0
 103 005e 1823     		movs	r3, #24
 104 0060 03FB0423 		mla	r3, r3, r4, r2
 105 0064 DB68     		ldr	r3, [r3, #12]
 106 0066 03B1     		cbz	r3, .L5
1208:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			spi_interrupt[channel].rx_fifo_underflow_handler();
 107              		.loc 1 1208 0
 108 0068 9847     		blx	r3
 109              	.LVL5:
 110              	.L5:
1209:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
1210:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* 5. Check transmit FIFO overflow interrupt */
1211:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi_hw[channel].spix->ISR & SPI_INT_TXOI)
 111              		.loc 1 1211 0
 112 006a 55F82430 		ldr	r3, [r5, r4, lsl #2]
 113 006e 1A6B     		ldr	r2, [r3, #48]
 114 0070 9207     		lsls	r2, r2, #30
 115 0072 07D5     		bpl	.L6
1212:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
1213:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Read TXOICR to clear SPI_INT_TXOI interrupt flag */
1214:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		tmp = spi_hw[channel].spix->TXOICR;
1215:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi_interrupt[channel].tx_fifo_overflow_handler != NULL)
 116              		.loc 1 1215 0
 117 0074 0C4A     		ldr	r2, .L45+4
1214:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi_interrupt[channel].tx_fifo_overflow_handler != NULL)
 118              		.loc 1 1214 0
 119 0076 9B6B     		ldr	r3, [r3, #56]
 120              		.loc 1 1215 0
 121 0078 1823     		movs	r3, #24
 122 007a 03FB0423 		mla	r3, r3, r4, r2
 123 007e 1B69     		ldr	r3, [r3, #16]
 124 0080 03B1     		cbz	r3, .L6
1216:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			spi_interrupt[channel].tx_fifo_overflow_handler();
 125              		.loc 1 1216 0
 126 0082 9847     		blx	r3
 127              	.LVL6:
 128              	.L6:
1217:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
1218:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* 6. Check transmit FIFO empty interrupt */
1219:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi_hw[channel].spix->ISR & SPI_INT_TXEI)
 129              		.loc 1 1219 0
 130 0084 55F82430 		ldr	r3, [r5, r4, lsl #2]
 131 0088 1B6B     		ldr	r3, [r3, #48]
 132 008a DB07     		lsls	r3, r3, #31
 133 008c 06D5     		bpl	.L7
1220:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
1221:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi_interrupt[channel].tx_fifo_empty_handler != NULL)
 134              		.loc 1 1221 0
 135 008e 064A     		ldr	r2, .L45+4
 136 0090 1823     		movs	r3, #24
 137 0092 03FB0423 		mla	r3, r3, r4, r2
 138 0096 5B69     		ldr	r3, [r3, #20]
 139 0098 03B1     		cbz	r3, .L7
1222:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			spi_interrupt[channel].tx_fifo_empty_handler();
 140              		.loc 1 1222 0
 141 009a 9847     		blx	r3
 142              	.LVL7:
 143              	.L7:
1223:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
1224:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Read to clear all interrupt flag */
1225:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	tmp |= spi_hw[channel].spix->ICR;
 144              		.loc 1 1225 0
 145 009c 55F82430 		ldr	r3, [r5, r4, lsl #2]
 146 00a0 9B6C     		ldr	r3, [r3, #72]
 147 00a2 38BD     		pop	{r3, r4, r5, pc}
 148              	.L46:
 149              		.align	2
 150              	.L45:
 151 00a4 00000000 		.word	.LANCHOR0
 152 00a8 00000000 		.word	.LANCHOR1
 153              		.cfi_endproc
 154              	.LFE23:
 156              		.section	.text.hal_spi_2_irq,"ax",%progbits
 157              		.align	1
 158              		.thumb
 159              		.thumb_func
 161              	hal_spi_2_irq:
 162              	.LFB22:
1172:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_irq_handler(SSI_CH2);
 163              		.loc 1 1172 0
 164              		.cfi_startproc
 165              		@ args = 0, pretend = 0, frame = 0
 166              		@ frame_needed = 0, uses_anonymous_args = 0
 167 0000 08B5     		push	{r3, lr}
 168              	.LCFI1:
 169              		.cfi_def_cfa_offset 8
 170              		.cfi_offset 3, -8
 171              		.cfi_offset 14, -4
1173:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 172              		.loc 1 1173 0
 173 0002 0220     		movs	r0, #2
 174 0004 014B     		ldr	r3, .L48
 175 0006 9847     		blx	r3
 176              	.LVL8:
 177 0008 08BD     		pop	{r3, pc}
 178              	.L49:
 179 000a 00BF     		.align	2
 180              	.L48:
 181 000c 00000000 		.word	hal_spi_irq_handler
 182              		.cfi_endproc
 183              	.LFE22:
 185              		.section	.text.hal_spi_1_irq,"ax",%progbits
 186              		.align	1
 187              		.thumb
 188              		.thumb_func
 190              	hal_spi_1_irq:
 191              	.LFB21:
1167:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_irq_handler(SSI_CH1);
 192              		.loc 1 1167 0
 193              		.cfi_startproc
 194              		@ args = 0, pretend = 0, frame = 0
 195              		@ frame_needed = 0, uses_anonymous_args = 0
 196 0000 08B5     		push	{r3, lr}
 197              	.LCFI2:
 198              		.cfi_def_cfa_offset 8
 199              		.cfi_offset 3, -8
 200              		.cfi_offset 14, -4
1168:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 201              		.loc 1 1168 0
 202 0002 0120     		movs	r0, #1
 203 0004 014B     		ldr	r3, .L51
 204 0006 9847     		blx	r3
 205              	.LVL9:
 206 0008 08BD     		pop	{r3, pc}
 207              	.L52:
 208 000a 00BF     		.align	2
 209              	.L51:
 210 000c 00000000 		.word	hal_spi_irq_handler
 211              		.cfi_endproc
 212              	.LFE21:
 214              		.section	.text.hal_spi_0_irq,"ax",%progbits
 215              		.align	1
 216              		.thumb
 217              		.thumb_func
 219              	hal_spi_0_irq:
 220              	.LFB20:
1162:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_irq_handler(SSI_CH0);
 221              		.loc 1 1162 0
 222              		.cfi_startproc
 223              		@ args = 0, pretend = 0, frame = 0
 224              		@ frame_needed = 0, uses_anonymous_args = 0
 225 0000 08B5     		push	{r3, lr}
 226              	.LCFI3:
 227              		.cfi_def_cfa_offset 8
 228              		.cfi_offset 3, -8
 229              		.cfi_offset 14, -4
1163:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 230              		.loc 1 1163 0
 231 0002 0020     		movs	r0, #0
 232 0004 014B     		ldr	r3, .L54
 233 0006 9847     		blx	r3
 234              	.LVL10:
 235 0008 08BD     		pop	{r3, pc}
 236              	.L55:
 237 000a 00BF     		.align	2
 238              	.L54:
 239 000c 00000000 		.word	hal_spi_irq_handler
 240              		.cfi_endproc
 241              	.LFE20:
 243              		.section	.text.hal_spi_init,"ax",%progbits
 244              		.align	1
 245              		.global	hal_spi_init
 246              		.thumb
 247              		.thumb_func
 249              	hal_spi_init:
 250              	.LFB3:
 137:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t control_0_reg = 0;
 251              		.loc 1 137 0
 252              		.cfi_startproc
 253              		@ args = 0, pretend = 0, frame = 0
 254              		@ frame_needed = 0, uses_anonymous_args = 0
 255              	.LVL11:
 256 0000 38B5     		push	{r3, r4, r5, lr}
 257              	.LCFI4:
 258              		.cfi_def_cfa_offset 16
 259              		.cfi_offset 3, -16
 260              		.cfi_offset 4, -12
 261              		.cfi_offset 5, -8
 262              		.cfi_offset 14, -4
 141:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 263              		.loc 1 141 0
 264 0002 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 265 0004 082B     		cmp	r3, #8
 137:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t control_0_reg = 0;
 266              		.loc 1 137 0
 267 0006 0446     		mov	r4, r0
 141:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 268              		.loc 1 141 0
 269 0008 07D0     		beq	.L57
 141:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 270              		.loc 1 141 0 is_stmt 0 discriminator 1
 271 000a 102B     		cmp	r3, #16
 272 000c 05D0     		beq	.L57
 141:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 273              		.loc 1 141 0 discriminator 2
 274 000e 202B     		cmp	r3, #32
 275 0010 03D0     		beq	.L57
 141:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 276              		.loc 1 141 0 discriminator 3
 277 0012 3F48     		ldr	r0, .L96
 278              	.LVL12:
 279 0014 8D21     		movs	r1, #141
 280 0016 3F4B     		ldr	r3, .L96+4
 281 0018 9847     		blx	r3
 282              	.LVL13:
 283              	.L57:
 142:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
 284              		.loc 1 142 0 is_stmt 1
 285 001a E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 286 001c 032B     		cmp	r3, #3
 287 001e 03D9     		bls	.L58
 142:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
 288              		.loc 1 142 0 is_stmt 0 discriminator 1
 289 0020 3B48     		ldr	r0, .L96
 290 0022 8E21     		movs	r1, #142
 291 0024 3B4B     		ldr	r3, .L96+4
 292 0026 9847     		blx	r3
 293              	.LVL14:
 294              	.L58:
 143:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 295              		.loc 1 143 0 is_stmt 1
 296 0028 6379     		ldrb	r3, [r4, #5]	@ zero_extendqisi2
 297 002a 032B     		cmp	r3, #3
 298 002c 03D9     		bls	.L59
 143:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 299              		.loc 1 143 0 is_stmt 0 discriminator 1
 300 002e 3848     		ldr	r0, .L96
 301 0030 8F21     		movs	r1, #143
 302 0032 384B     		ldr	r3, .L96+4
 303 0034 9847     		blx	r3
 304              	.LVL15:
 305              	.L59:
 144:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 306              		.loc 1 144 0 is_stmt 1
 307 0036 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 308 0038 022B     		cmp	r3, #2
 309 003a 03D9     		bls	.L60
 144:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 310              		.loc 1 144 0 is_stmt 0 discriminator 1
 311 003c 3448     		ldr	r0, .L96
 312 003e 9021     		movs	r1, #144
 313 0040 344B     		ldr	r3, .L96+4
 314 0042 9847     		blx	r3
 315              	.LVL16:
 316              	.L60:
 145:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 317              		.loc 1 145 0 is_stmt 1
 318 0044 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 319 0046 022B     		cmp	r3, #2
 320 0048 03D9     		bls	.L61
 145:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 321              		.loc 1 145 0 is_stmt 0 discriminator 1
 322 004a 3148     		ldr	r0, .L96
 323 004c 9121     		movs	r1, #145
 324 004e 314B     		ldr	r3, .L96+4
 325 0050 9847     		blx	r3
 326              	.LVL17:
 327              	.L61:
 146:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 328              		.loc 1 146 0 is_stmt 1
 329 0052 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 330 0054 022B     		cmp	r3, #2
 331 0056 03D9     		bls	.L62
 146:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 332              		.loc 1 146 0 is_stmt 0 discriminator 1
 333 0058 2D48     		ldr	r0, .L96
 334 005a 9221     		movs	r1, #146
 335 005c 2D4B     		ldr	r3, .L96+4
 336 005e 9847     		blx	r3
 337              	.LVL18:
 338              	.L62:
 149:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 339              		.loc 1 149 0 is_stmt 1
 340 0060 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 341 0062 0228     		cmp	r0, #2
 152:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 342              		.loc 1 152 0
 343 0064 01BF     		itttt	eq
 344 0066 2C4A     		ldreq	r2, .L96+8
 345 0068 1368     		ldreq	r3, [r2]
 346 006a 23F4D073 		biceq	r3, r3, #416
 347 006e 1360     		streq	r3, [r2]
 156:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 348              		.loc 1 156 0
 349 0070 2A4B     		ldr	r3, .L96+12
 164:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 350              		.loc 1 164 0
 351 0072 A268     		ldr	r2, [r4, #8]
 156:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 352              		.loc 1 156 0
 353 0074 53F82010 		ldr	r1, [r3, r0, lsl #2]
 354 0078 0023     		movs	r3, #0
 355 007a CB62     		str	r3, [r1, #44]
 159:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 356              		.loc 1 159 0
 357 007c 8B60     		str	r3, [r1, #8]
 164:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 358              		.loc 1 164 0
 359 007e 284B     		ldr	r3, .L96+16
 360 0080 B3FBF2F3 		udiv	r3, r3, r2
 361 0084 4B61     		str	r3, [r1, #20]
 171:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 362              		.loc 1 171 0
 363 0086 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 364 0088 012B     		cmp	r3, #1
 365 008a 11D0     		beq	.L78
 366 008c 02D3     		bcc	.L66
 367 008e 022B     		cmp	r3, #2
 368 0090 04D0     		beq	.L67
 369 0092 39E0     		b	.L80
 370              	.L66:
 178:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 371              		.loc 1 178 0
 372 0094 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 373 0096 013B     		subs	r3, r3, #1
 374 0098 1A04     		lsls	r2, r3, #16
 375              	.LVL19:
 179:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 376              		.loc 1 179 0
 377 009a 0AE0     		b	.L65
 378              	.LVL20:
 379              	.L67:
 192:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					spi->data_size == DATASIZE_16BIT)
 380              		.loc 1 192 0
 381 009c 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 382 009e 082B     		cmp	r3, #8
 383 00a0 01D0     		beq	.L68
 192:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					spi->data_size == DATASIZE_16BIT)
 384              		.loc 1 192 0 is_stmt 0 discriminator 1
 385 00a2 102B     		cmp	r3, #16
 386 00a4 30D1     		bne	.L80
 387              	.L68:
 195:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			}
 388              		.loc 1 195 0 is_stmt 1
 389 00a6 013B     		subs	r3, r3, #1
 390 00a8 1B03     		lsls	r3, r3, #12
 391 00aa 43F02002 		orr	r2, r3, #32
 392              	.LVL21:
 201:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 393              		.loc 1 201 0
 394 00ae 00E0     		b	.L65
 395              	.LVL22:
 396              	.L78:
 183:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 397              		.loc 1 183 0
 398 00b0 1022     		movs	r2, #16
 399              	.LVL23:
 400              	.L65:
 210:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 401              		.loc 1 210 0
 402 00b2 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 403 00b4 5B05     		lsls	r3, r3, #21
 213:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 404              		.loc 1 213 0
 405 00b6 6579     		ldrb	r5, [r4, #5]	@ zero_extendqisi2
 406 00b8 43EA0523 		orr	r3, r3, r5, lsl #8
 407 00bc 1343     		orrs	r3, r3, r2
 408              	.LVL24:
 216:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 409              		.loc 1 216 0
 410 00be E278     		ldrb	r2, [r4, #3]	@ zero_extendqisi2
 411 00c0 032A     		cmp	r2, #3
 412 00c2 21D8     		bhi	.L80
 413 00c4 DFE802F0 		tbb	[pc, r2]
 414              	.L70:
 415 00c8 02       		.byte	(.L69-.L70)/2
 416 00c9 05       		.byte	(.L71-.L70)/2
 417 00ca 08       		.byte	(.L72-.L70)/2
 418 00cb 0B       		.byte	(.L73-.L70)/2
 419              		.p2align 1
 420              	.L69:
 421              	.LVL25:
 222:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 422              		.loc 1 222 0
 423 00cc 23F0C003 		bic	r3, r3, #192
 424              	.LVL26:
 223:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 425              		.loc 1 223 0
 426 00d0 07E0     		b	.L74
 427              	.L71:
 228:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 428              		.loc 1 228 0
 429 00d2 43F04003 		orr	r3, r3, #64
 430              	.LVL27:
 229:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 431              		.loc 1 229 0
 432 00d6 04E0     		b	.L74
 433              	.L72:
 434              	.LVL28:
 234:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 435              		.loc 1 234 0
 436 00d8 43F08003 		orr	r3, r3, #128
 437              	.LVL29:
 235:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 438              		.loc 1 235 0
 439 00dc 01E0     		b	.L74
 440              	.L73:
 239:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 441              		.loc 1 239 0
 442 00de 43F0C003 		orr	r3, r3, #192
 443              	.LVL30:
 444              	.L74:
 249:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 445              		.loc 1 249 0
 446 00e2 104A     		ldr	r2, .L96+20
 447 00e4 9142     		cmp	r1, r2
 448 00e6 05D0     		beq	.L75
 251:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 449              		.loc 1 251 0
 450 00e8 022D     		cmp	r5, #2
 254:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 451              		.loc 1 254 0
 452 00ea 0CBF     		ite	eq
 453 00ec 43F48063 		orreq	r3, r3, #1024
 454              	.LVL31:
 259:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 455              		.loc 1 259 0
 456 00f0 23F48063 		bicne	r3, r3, #1024
 457              	.LVL32:
 458              	.L75:
 263:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 1;
 459              		.loc 1 263 0
 460 00f4 0B60     		str	r3, [r1]
 264:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 461              		.loc 1 264 0
 462 00f6 0123     		movs	r3, #1
 463              	.LVL33:
 464 00f8 8B60     		str	r3, [r1, #8]
 465              	.LVL34:
 267:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		&& (spi->transfer_mode == RX_ONLY
 466              		.loc 1 267 0
 467 00fa 38B9     		cbnz	r0, .L81
 268:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		|| spi->transfer_mode == EEPROM_READ))
 468              		.loc 1 268 0
 469 00fc 023D     		subs	r5, r5, #2
 470 00fe 9D42     		cmp	r5, r3
 471 0100 05D8     		bhi	.L64
 272:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 472              		.loc 1 272 0
 473 0102 E388     		ldrh	r3, [r4, #6]
 474 0104 4B60     		str	r3, [r1, #4]
 475 0106 38BD     		pop	{r3, r4, r5, pc}
 476              	.LVL35:
 477              	.L80:
 244:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 478              		.loc 1 244 0
 479 0108 0E20     		movs	r0, #14
 480 010a 38BD     		pop	{r3, r4, r5, pc}
 481              	.LVL36:
 482              	.L81:
 275:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 483              		.loc 1 275 0
 484 010c 0020     		movs	r0, #0
 485              	.L64:
 276:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 486              		.loc 1 276 0
 487 010e 38BD     		pop	{r3, r4, r5, pc}
 488              	.LVL37:
 489              	.L97:
 490              		.align	2
 491              	.L96:
 492 0110 00000000 		.word	.LANCHOR2
 493 0114 00000000 		.word	assert_failed
 494 0118 A8000002 		.word	33554600
 495 011c 00000000 		.word	.LANCHOR0
 496 0120 40EFC41F 		.word	533000000
 497 0124 00C00102 		.word	33669120
 498              		.cfi_endproc
 499              	.LFE3:
 501              		.section	.text.hal_spi_slave_select,"ax",%progbits
 502              		.align	1
 503              		.global	hal_spi_slave_select
 504              		.thumb
 505              		.thumb_func
 507              	hal_spi_slave_select:
 508              	.LFB4:
 279:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	__IO uint32_t tmp = 0;
 509              		.loc 1 279 0
 510              		.cfi_startproc
 511              		@ args = 0, pretend = 0, frame = 8
 512              		@ frame_needed = 0, uses_anonymous_args = 0
 513              	.LVL38:
 514 0000 37B5     		push	{r0, r1, r2, r4, r5, lr}
 515              	.LCFI5:
 516              		.cfi_def_cfa_offset 24
 517              		.cfi_offset 4, -12
 518              		.cfi_offset 5, -8
 519              		.cfi_offset 14, -4
 282:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 520              		.loc 1 282 0
 521 0002 0138     		subs	r0, r0, #1
 522              	.LVL39:
 280:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 523              		.loc 1 280 0
 524 0004 0023     		movs	r3, #0
 282:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 525              		.loc 1 282 0
 526 0006 C2B2     		uxtb	r2, r0
 527 0008 1F2A     		cmp	r2, #31
 280:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 528              		.loc 1 280 0
 529 000a 0193     		str	r3, [sp, #4]
 282:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 530              		.loc 1 282 0
 531 000c 0FD8     		bhi	.L100
 284:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		tmp = (tmp & ~(1 << (cs_pin - 1))) | (value << (cs_pin - 1));
 532              		.loc 1 284 0
 533 000e 094A     		ldr	r2, .L101
 285:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		spi_hw[SSI_CH0].spix->SER = tmp;
 534              		.loc 1 285 0
 535 0010 8140     		lsls	r1, r1, r0
 536              	.LVL40:
 284:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		tmp = (tmp & ~(1 << (cs_pin - 1))) | (value << (cs_pin - 1));
 537              		.loc 1 284 0
 538 0012 1568     		ldr	r5, [r2]
 539 0014 2A69     		ldr	r2, [r5, #16]
 540 0016 0192     		str	r2, [sp, #4]
 285:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		spi_hw[SSI_CH0].spix->SER = tmp;
 541              		.loc 1 285 0
 542 0018 0122     		movs	r2, #1
 543 001a 019C     		ldr	r4, [sp, #4]
 544 001c 8240     		lsls	r2, r2, r0
 545 001e 24EA0202 		bic	r2, r4, r2
 546 0022 1143     		orrs	r1, r1, r2
 287:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 547              		.loc 1 287 0
 548 0024 1846     		mov	r0, r3
 285:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		spi_hw[SSI_CH0].spix->SER = tmp;
 549              		.loc 1 285 0
 550 0026 0191     		str	r1, [sp, #4]
 286:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_OK;
 551              		.loc 1 286 0
 552 0028 019A     		ldr	r2, [sp, #4]
 553 002a 2A61     		str	r2, [r5, #16]
 287:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 554              		.loc 1 287 0
 555 002c 00E0     		b	.L99
 556              	.LVL41:
 557              	.L100:
 289:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 558              		.loc 1 289 0
 559 002e 0E20     		movs	r0, #14
 560              	.LVL42:
 561              	.L99:
 290:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 562              		.loc 1 290 0
 563 0030 03B0     		add	sp, sp, #12
 564              	.LCFI6:
 565              		.cfi_def_cfa_offset 12
 566              		@ sp needed
 567 0032 30BD     		pop	{r4, r5, pc}
 568              	.L102:
 569              		.align	2
 570              	.L101:
 571 0034 00000000 		.word	.LANCHOR0
 572              		.cfi_endproc
 573              	.LFE4:
 575              		.section	.text.hal_spi_disable,"ax",%progbits
 576              		.align	1
 577              		.global	hal_spi_disable
 578              		.thumb
 579              		.thumb_func
 581              	hal_spi_disable:
 582              	.LFB5:
 293:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 583              		.loc 1 293 0
 584              		.cfi_startproc
 585              		@ args = 0, pretend = 0, frame = 0
 586              		@ frame_needed = 0, uses_anonymous_args = 0
 587              	.LVL43:
 295:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 588              		.loc 1 295 0
 589 0000 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 590 0002 022B     		cmp	r3, #2
 293:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 591              		.loc 1 293 0
 592 0004 10B5     		push	{r4, lr}
 593              	.LCFI7:
 594              		.cfi_def_cfa_offset 8
 595              		.cfi_offset 4, -8
 596              		.cfi_offset 14, -4
 293:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 597              		.loc 1 293 0
 598 0006 0446     		mov	r4, r0
 295:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 599              		.loc 1 295 0
 600 0008 04D9     		bls	.L104
 295:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 601              		.loc 1 295 0 is_stmt 0 discriminator 1
 602 000a 0648     		ldr	r0, .L105
 603              	.LVL44:
 604 000c 40F22711 		movw	r1, #295
 605 0010 054B     		ldr	r3, .L105+4
 606 0012 9847     		blx	r3
 607              	.LVL45:
 608              	.L104:
 296:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 609              		.loc 1 296 0 is_stmt 1
 610 0014 054B     		ldr	r3, .L105+8
 611 0016 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 612 0018 53F82230 		ldr	r3, [r3, r2, lsl #2]
 613 001c 0022     		movs	r2, #0
 614 001e 9A60     		str	r2, [r3, #8]
 615 0020 10BD     		pop	{r4, pc}
 616              	.LVL46:
 617              	.L106:
 618 0022 00BF     		.align	2
 619              	.L105:
 620 0024 00000000 		.word	.LANCHOR3
 621 0028 00000000 		.word	assert_failed
 622 002c 00000000 		.word	.LANCHOR0
 623              		.cfi_endproc
 624              	.LFE5:
 626              		.section	.text.hal_spi_enable,"ax",%progbits
 627              		.align	1
 628              		.global	hal_spi_enable
 629              		.thumb
 630              		.thumb_func
 632              	hal_spi_enable:
 633              	.LFB6:
 300:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 634              		.loc 1 300 0
 635              		.cfi_startproc
 636              		@ args = 0, pretend = 0, frame = 0
 637              		@ frame_needed = 0, uses_anonymous_args = 0
 638              	.LVL47:
 302:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 1;
 639              		.loc 1 302 0
 640 0000 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 641 0002 022B     		cmp	r3, #2
 300:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 642              		.loc 1 300 0
 643 0004 10B5     		push	{r4, lr}
 644              	.LCFI8:
 645              		.cfi_def_cfa_offset 8
 646              		.cfi_offset 4, -8
 647              		.cfi_offset 14, -4
 300:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 648              		.loc 1 300 0
 649 0006 0446     		mov	r4, r0
 302:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 1;
 650              		.loc 1 302 0
 651 0008 04D9     		bls	.L108
 302:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 1;
 652              		.loc 1 302 0 is_stmt 0 discriminator 1
 653 000a 0648     		ldr	r0, .L109
 654              	.LVL48:
 655 000c 4FF49771 		mov	r1, #302
 656 0010 054B     		ldr	r3, .L109+4
 657 0012 9847     		blx	r3
 658              	.LVL49:
 659              	.L108:
 303:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 660              		.loc 1 303 0 is_stmt 1
 661 0014 054B     		ldr	r3, .L109+8
 662 0016 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 663 0018 53F82230 		ldr	r3, [r3, r2, lsl #2]
 664 001c 0122     		movs	r2, #1
 665 001e 9A60     		str	r2, [r3, #8]
 666 0020 10BD     		pop	{r4, pc}
 667              	.LVL50:
 668              	.L110:
 669 0022 00BF     		.align	2
 670              	.L109:
 671 0024 00000000 		.word	.LANCHOR4
 672 0028 00000000 		.word	assert_failed
 673 002c 00000000 		.word	.LANCHOR0
 674              		.cfi_endproc
 675              	.LFE6:
 677              		.section	.text.hal_spi_reset,"ax",%progbits
 678              		.align	1
 679              		.global	hal_spi_reset
 680              		.thumb
 681              		.thumb_func
 683              	hal_spi_reset:
 684              	.LFB7:
 307:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 685              		.loc 1 307 0
 686              		.cfi_startproc
 687              		@ args = 0, pretend = 0, frame = 0
 688              		@ frame_needed = 0, uses_anonymous_args = 0
 689              	.LVL51:
 309:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 690              		.loc 1 309 0
 691 0000 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 692 0002 022B     		cmp	r3, #2
 307:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 693              		.loc 1 307 0
 694 0004 10B5     		push	{r4, lr}
 695              	.LCFI9:
 696              		.cfi_def_cfa_offset 8
 697              		.cfi_offset 4, -8
 698              		.cfi_offset 14, -4
 307:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 699              		.loc 1 307 0
 700 0006 0446     		mov	r4, r0
 309:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 701              		.loc 1 309 0
 702 0008 04D9     		bls	.L112
 309:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 703              		.loc 1 309 0 is_stmt 0 discriminator 1
 704 000a 0948     		ldr	r0, .L116
 705              	.LVL52:
 706 000c 40F23511 		movw	r1, #309
 707 0010 084B     		ldr	r3, .L116+4
 708 0012 9847     		blx	r3
 709              	.LVL53:
 710              	.L112:
 310:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_delay(0xff);
 711              		.loc 1 310 0 is_stmt 1
 712 0014 084B     		ldr	r3, .L116+8
 713 0016 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 714 0018 53F82220 		ldr	r2, [r3, r2, lsl #2]
 715 001c 0023     		movs	r3, #0
 716 001e 9360     		str	r3, [r2, #8]
 717 0020 FF23     		movs	r3, #255
 718              	.LVL54:
 719              	.L113:
 720              	.LBB4:
 721              	.LBB5:
 110:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		time--;
 722              		.loc 1 110 0
 723 0022 0BB1     		cbz	r3, .L115
 111:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 724              		.loc 1 111 0
 725 0024 013B     		subs	r3, r3, #1
 726 0026 FCE7     		b	.L113
 727              	.L115:
 728              	.LBE5:
 729              	.LBE4:
 312:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 730              		.loc 1 312 0
 731 0028 0123     		movs	r3, #1
 732 002a 9360     		str	r3, [r2, #8]
 733 002c 10BD     		pop	{r4, pc}
 734              	.LVL55:
 735              	.L117:
 736 002e 00BF     		.align	2
 737              	.L116:
 738 0030 00000000 		.word	.LANCHOR5
 739 0034 00000000 		.word	assert_failed
 740 0038 00000000 		.word	.LANCHOR0
 741              		.cfi_endproc
 742              	.LFE7:
 744              		.section	.text.hal_spi_dma_init,"ax",%progbits
 745              		.align	1
 746              		.global	hal_spi_dma_init
 747              		.thumb
 748              		.thumb_func
 750              	hal_spi_dma_init:
 751              	.LFB17:
1021:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t reg_tmp = 0;
 752              		.loc 1 1021 0
 753              		.cfi_startproc
 754              		@ args = 0, pretend = 0, frame = 0
 755              		@ frame_needed = 0, uses_anonymous_args = 0
 756              	.LVL56:
 757 0000 38B5     		push	{r3, r4, r5, lr}
 758              	.LCFI10:
 759              		.cfi_def_cfa_offset 16
 760              		.cfi_offset 3, -16
 761              		.cfi_offset 4, -12
 762              		.cfi_offset 5, -8
 763              		.cfi_offset 14, -4
1025:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 764              		.loc 1 1025 0
 765 0002 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 766 0004 082B     		cmp	r3, #8
1021:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t reg_tmp = 0;
 767              		.loc 1 1021 0
 768 0006 0446     		mov	r4, r0
 769 0008 0D46     		mov	r5, r1
1025:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 770              		.loc 1 1025 0
 771 000a 08D0     		beq	.L119
1025:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 772              		.loc 1 1025 0 is_stmt 0 discriminator 1
 773 000c 102B     		cmp	r3, #16
 774 000e 06D0     		beq	.L119
1025:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 775              		.loc 1 1025 0 discriminator 2
 776 0010 202B     		cmp	r3, #32
 777 0012 04D0     		beq	.L119
1025:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 778              		.loc 1 1025 0 discriminator 3
 779 0014 2548     		ldr	r0, .L136
 780              	.LVL57:
 781 0016 40F20141 		movw	r1, #1025
 782              	.LVL58:
 783 001a 254B     		ldr	r3, .L136+4
 784 001c 9847     		blx	r3
 785              	.LVL59:
 786              	.L119:
1026:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
 787              		.loc 1 1026 0 is_stmt 1
 788 001e E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 789 0020 032B     		cmp	r3, #3
 790 0022 04D9     		bls	.L120
1026:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
 791              		.loc 1 1026 0 is_stmt 0 discriminator 1
 792 0024 2148     		ldr	r0, .L136
 793 0026 40F20241 		movw	r1, #1026
 794 002a 214B     		ldr	r3, .L136+4
 795 002c 9847     		blx	r3
 796              	.LVL60:
 797              	.L120:
1027:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 798              		.loc 1 1027 0 is_stmt 1
 799 002e 6379     		ldrb	r3, [r4, #5]	@ zero_extendqisi2
 800 0030 032B     		cmp	r3, #3
 801 0032 04D9     		bls	.L121
1027:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 802              		.loc 1 1027 0 is_stmt 0 discriminator 1
 803 0034 1D48     		ldr	r0, .L136
 804 0036 40F20341 		movw	r1, #1027
 805 003a 1D4B     		ldr	r3, .L136+4
 806 003c 9847     		blx	r3
 807              	.LVL61:
 808              	.L121:
1028:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 809              		.loc 1 1028 0 is_stmt 1
 810 003e A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 811 0040 022B     		cmp	r3, #2
 812 0042 04D9     		bls	.L122
1028:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 813              		.loc 1 1028 0 is_stmt 0 discriminator 1
 814 0044 1948     		ldr	r0, .L136
 815 0046 40F20441 		movw	r1, #1028
 816 004a 194B     		ldr	r3, .L136+4
 817 004c 9847     		blx	r3
 818              	.LVL62:
 819              	.L122:
1029:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 820              		.loc 1 1029 0 is_stmt 1
 821 004e 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 822 0050 022B     		cmp	r3, #2
 823 0052 04D9     		bls	.L123
1029:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 824              		.loc 1 1029 0 is_stmt 0 discriminator 1
 825 0054 1548     		ldr	r0, .L136
 826 0056 40F20541 		movw	r1, #1029
 827 005a 154B     		ldr	r3, .L136+4
 828 005c 9847     		blx	r3
 829              	.LVL63:
 830              	.L123:
1030:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(dma->dma_receive_enable));
 831              		.loc 1 1030 0 is_stmt 1
 832 005e 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 833 0060 022B     		cmp	r3, #2
 834 0062 04D9     		bls	.L124
1030:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(dma->dma_receive_enable));
 835              		.loc 1 1030 0 is_stmt 0 discriminator 1
 836 0064 1148     		ldr	r0, .L136
 837 0066 40F20641 		movw	r1, #1030
 838 006a 114B     		ldr	r3, .L136+4
 839 006c 9847     		blx	r3
 840              	.LVL64:
 841              	.L124:
1031:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(dma->dma_transmit_enable));
 842              		.loc 1 1031 0 is_stmt 1
 843 006e EB78     		ldrb	r3, [r5, #3]	@ zero_extendqisi2
 844 0070 012B     		cmp	r3, #1
 845 0072 04D9     		bls	.L125
1031:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(dma->dma_transmit_enable));
 846              		.loc 1 1031 0 is_stmt 0 discriminator 1
 847 0074 0D48     		ldr	r0, .L136
 848 0076 40F20741 		movw	r1, #1031
 849 007a 0D4B     		ldr	r3, .L136+4
 850 007c 9847     		blx	r3
 851              	.LVL65:
 852              	.L125:
1032:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 853              		.loc 1 1032 0 is_stmt 1
 854 007e AB78     		ldrb	r3, [r5, #2]	@ zero_extendqisi2
 855 0080 012B     		cmp	r3, #1
 856 0082 04D9     		bls	.L126
1032:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 857              		.loc 1 1032 0 is_stmt 0 discriminator 1
 858 0084 0948     		ldr	r0, .L136
 859 0086 4FF48161 		mov	r1, #1032
 860 008a 094B     		ldr	r3, .L136+4
 861 008c 9847     		blx	r3
 862              	.LVL66:
 863              	.L126:
1035:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure DMA receive / receive data level */
 864              		.loc 1 1035 0 is_stmt 1
 865 008e 094B     		ldr	r3, .L136+8
 866 0090 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 867 0092 53F82230 		ldr	r3, [r3, r2, lsl #2]
 868 0096 2A78     		ldrb	r2, [r5]	@ zero_extendqisi2
 869 0098 1A65     		str	r2, [r3, #80]
1037:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Enable/Disable transmit DMA enable bit */
 870              		.loc 1 1037 0
 871 009a 2A78     		ldrb	r2, [r5]	@ zero_extendqisi2
 872 009c 5A65     		str	r2, [r3, #84]
1039:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			((uint32_t)dma->dma_receive_enable << 0);
 873              		.loc 1 1039 0
 874 009e A978     		ldrb	r1, [r5, #2]	@ zero_extendqisi2
1040:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 875              		.loc 1 1040 0
 876 00a0 EA78     		ldrb	r2, [r5, #3]	@ zero_extendqisi2
1039:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			((uint32_t)dma->dma_receive_enable << 0);
 877              		.loc 1 1039 0
 878 00a2 42EA4102 		orr	r2, r2, r1, lsl #1
 879              	.LVL67:
1043:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 880              		.loc 1 1043 0
 881 00a6 DA64     		str	r2, [r3, #76]
 882 00a8 38BD     		pop	{r3, r4, r5, pc}
 883              	.LVL68:
 884              	.L137:
 885 00aa 00BF     		.align	2
 886              	.L136:
 887 00ac 00000000 		.word	.LANCHOR6
 888 00b0 00000000 		.word	assert_failed
 889 00b4 00000000 		.word	.LANCHOR0
 890              		.cfi_endproc
 891              	.LFE17:
 893              		.section	.text.hal_spi_receive_buf,"ax",%progbits
 894              		.align	1
 895              		.global	hal_spi_receive_buf
 896              		.thumb
 897              		.thumb_func
 899              	hal_spi_receive_buf:
 900              	.LFB10:
 493:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 901              		.loc 1 493 0
 902              		.cfi_startproc
 903              		@ args = 0, pretend = 0, frame = 40
 904              		@ frame_needed = 0, uses_anonymous_args = 0
 905              	.LVL69:
 906 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 907              	.LCFI11:
 908              		.cfi_def_cfa_offset 36
 909              		.cfi_offset 4, -36
 910              		.cfi_offset 5, -32
 911              		.cfi_offset 6, -28
 912              		.cfi_offset 7, -24
 913              		.cfi_offset 8, -20
 914              		.cfi_offset 9, -16
 915              		.cfi_offset 10, -12
 916              		.cfi_offset 11, -8
 917              		.cfi_offset 14, -4
 495:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_receive_buf_dma(spi, rx_buf, len);
 918              		.loc 1 495 0
 919 0004 037D     		ldrb	r3, [r0, #20]	@ zero_extendqisi2
 920 0006 012B     		cmp	r3, #1
 493:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 921              		.loc 1 493 0
 922 0008 8BB0     		sub	sp, sp, #44
 923              	.LCFI12:
 924              		.cfi_def_cfa_offset 80
 493:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 925              		.loc 1 493 0
 926 000a 0446     		mov	r4, r0
 927 000c 0D46     		mov	r5, r1
 928 000e 9046     		mov	r8, r2
 929 0010 684F     		ldr	r7, .L176
 495:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_receive_buf_dma(spi, rx_buf, len);
 930              		.loc 1 495 0
 931 0012 40F08380 		bne	.L139
 932              	.LVL70:
 933              	.LBB10:
 934              	.LBB11:
 318:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_config_t spi_dma;
 935              		.loc 1 318 0
 936 0016 684B     		ldr	r3, .L176+4
 937 0018 01A8     		add	r0, sp, #4
 938              	.LVL71:
 939 001a 0021     		movs	r1, #0
 940              	.LVL72:
 941 001c 2422     		movs	r2, #36
 942              	.LVL73:
 943 001e 9847     		blx	r3
 944              	.LVL74:
 322:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(rx_buf == NULL));
 945              		.loc 1 322 0
 946 0020 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 947 0022 022B     		cmp	r3, #2
 948 0024 04D9     		bls	.L140
 949 0026 6548     		ldr	r0, .L176+8
 950 0028 4FF4A171 		mov	r1, #322
 951 002c 644B     		ldr	r3, .L176+12
 952 002e 9847     		blx	r3
 953              	.LVL75:
 954              	.L140:
 323:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 955              		.loc 1 323 0
 956 0030 25B9     		cbnz	r5, .L141
 957 0032 6248     		ldr	r0, .L176+8
 958 0034 40F24311 		movw	r1, #323
 959 0038 614B     		ldr	r3, .L176+12
 960 003a 9847     		blx	r3
 961              	.LVL76:
 962              	.L141:
 325:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_rx.chid);
 963              		.loc 1 325 0
 964 003c 2046     		mov	r0, r4
 329:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_data_level = 0;
 965              		.loc 1 329 0
 966 003e 0026     		movs	r6, #0
 325:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_rx.chid);
 967              		.loc 1 325 0
 968 0040 DFF89CA1 		ldr	r10, .L176+44
 331:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_enable = DISABLE;
 969              		.loc 1 331 0
 970 0044 4FF0010B 		mov	fp, #1
 325:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_rx.chid);
 971              		.loc 1 325 0
 972 0048 D047     		blx	r10
 973              	.LVL77:
 326:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 974              		.loc 1 326 0
 975 004a DFF89891 		ldr	r9, .L176+48
 976 004e 607D     		ldrb	r0, [r4, #21]	@ zero_extendqisi2
 977 0050 C847     		blx	r9
 978              	.LVL78:
 333:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_init(spi);
 979              		.loc 1 333 0
 980 0052 6946     		mov	r1, sp
 981 0054 2046     		mov	r0, r4
 982 0056 5B4B     		ldr	r3, .L176+16
 329:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_data_level = 0;
 983              		.loc 1 329 0
 984 0058 8DF80160 		strb	r6, [sp, #1]
 330:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_receive_enable = ENABLE;
 985              		.loc 1 330 0
 986 005c 8DF80060 		strb	r6, [sp]
 331:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_enable = DISABLE;
 987              		.loc 1 331 0
 988 0060 8DF803B0 		strb	fp, [sp, #3]
 332:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_dma_init(spi, &spi_dma);
 989              		.loc 1 332 0
 990 0064 8DF80260 		strb	r6, [sp, #2]
 333:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_init(spi);
 991              		.loc 1 333 0
 992 0068 9847     		blx	r3
 993              	.LVL79:
 334:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 994              		.loc 1 334 0
 995 006a 574B     		ldr	r3, .L176+20
 996 006c 2046     		mov	r0, r4
 997 006e 9847     		blx	r3
 998              	.LVL80:
 337:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.length = len * (spi->data_size / 8);
 999              		.loc 1 337 0
 1000 0070 637D     		ldrb	r3, [r4, #21]	@ zero_extendqisi2
 1001 0072 8DF80430 		strb	r3, [sp, #4]
 338:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.trans_type = PER_TO_MEM;
 1002              		.loc 1 338 0
 1003 0076 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 1004 0078 DA08     		lsrs	r2, r3, #3
 339:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 1005              		.loc 1 339 0
 1006 007a 0221     		movs	r1, #2
 338:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.trans_type = PER_TO_MEM;
 1007              		.loc 1 338 0
 1008 007c 02FB08F2 		mul	r2, r2, r8
 345:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1009              		.loc 1 345 0
 1010 0080 102B     		cmp	r3, #16
 339:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 1011              		.loc 1 339 0
 1012 0082 8DF81810 		strb	r1, [sp, #24]
 1013 0086 D446     		mov	ip, r10
 338:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.trans_type = PER_TO_MEM;
 1014              		.loc 1 338 0
 1015 0088 0492     		str	r2, [sp, #16]
 340:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_addr = (uint32_t)rx_buf;
 1016              		.loc 1 340 0
 1017 008a 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 1018 008c 57F82200 		ldr	r0, [r7, r2, lsl #2]
 1019 0090 4F46     		mov	r7, r9
 341:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_bsize = BURST_SIZE_1;
 1020              		.loc 1 341 0
 1021 0092 0395     		str	r5, [sp, #12]
 340:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_addr = (uint32_t)rx_buf;
 1022              		.loc 1 340 0
 1023 0094 00F16000 		add	r0, r0, #96
 342:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_bsize = BURST_SIZE_1;
 1024              		.loc 1 342 0
 1025 0098 8DF81460 		strb	r6, [sp, #20]
 340:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_addr = (uint32_t)rx_buf;
 1026              		.loc 1 340 0
 1027 009c 0290     		str	r0, [sp, #8]
 343:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1028              		.loc 1 343 0
 1029 009e 8DF81560 		strb	r6, [sp, #21]
 345:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1030              		.loc 1 345 0
 1031 00a2 08D0     		beq	.L143
 1032 00a4 202B     		cmp	r3, #32
 1033 00a6 0BD0     		beq	.L144
 1034 00a8 082B     		cmp	r3, #8
 1035 00aa 0ED1     		bne	.L169
 349:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_8;
 1036              		.loc 1 349 0
 1037 00ac 8DF81660 		strb	r6, [sp, #22]
 350:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1038              		.loc 1 350 0
 1039 00b0 8DF81760 		strb	r6, [sp, #23]
 1040 00b4 0EE0     		b	.L146
 1041              	.L143:
 355:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_16;
 1042              		.loc 1 355 0
 1043 00b6 8DF816B0 		strb	fp, [sp, #22]
 356:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1044              		.loc 1 356 0
 1045 00ba 8DF817B0 		strb	fp, [sp, #23]
 1046 00be 09E0     		b	.L146
 1047              	.L144:
 361:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_32;
 1048              		.loc 1 361 0
 1049 00c0 8DF81610 		strb	r1, [sp, #22]
 362:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1050              		.loc 1 362 0
 1051 00c4 8DF81710 		strb	r1, [sp, #23]
 1052 00c8 04E0     		b	.L146
 1053              	.L169:
 367:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 1054              		.loc 1 367 0
 1055 00ca 2046     		mov	r0, r4
 1056 00cc D047     		blx	r10
 1057              	.LVL81:
 368:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 1058              		.loc 1 368 0
 1059 00ce 607D     		ldrb	r0, [r4, #21]	@ zero_extendqisi2
 1060 00d0 C847     		blx	r9
 1061              	.LVL82:
 1062 00d2 3EE0     		b	.L174
 1063              	.L146:
 373:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1064              		.loc 1 373 0
 1065 00d4 012A     		cmp	r2, #1
 1066 00d6 06D0     		beq	.L149
 1067 00d8 03D3     		bcc	.L150
 1068 00da 022A     		cmp	r2, #2
 1069 00dc 10D1     		bne	.L175
 382:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1070              		.loc 1 382 0
 1071 00de 0423     		movs	r3, #4
 1072 00e0 02E0     		b	.L172
 1073              	.L150:
 376:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1074              		.loc 1 376 0
 1075 00e2 0023     		movs	r3, #0
 1076 00e4 00E0     		b	.L172
 1077              	.L149:
 379:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1078              		.loc 1 379 0
 1079 00e6 0223     		movs	r3, #2
 1080              	.L172:
 382:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1081              		.loc 1 382 0
 1082 00e8 8DF81B30 		strb	r3, [sp, #27]
 393:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1083              		.loc 1 393 0
 1084 00ec 0020     		movs	r0, #0
 392:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_enable_global_interrupt(0);
 1085              		.loc 1 392 0
 1086 00ee A369     		ldr	r3, [r4, #24]
 1087 00f0 0993     		str	r3, [sp, #36]
 393:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1088              		.loc 1 393 0
 1089 00f2 364B     		ldr	r3, .L176+24
 1090 00f4 9847     		blx	r3
 1091              	.LVL83:
 395:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 1092              		.loc 1 395 0
 1093 00f6 01A8     		add	r0, sp, #4
 1094 00f8 354B     		ldr	r3, .L176+28
 1095 00fa 9847     		blx	r3
 1096              	.LVL84:
 1097 00fc 48BB     		cbnz	r0, .L174
 1098 00fe 04E0     		b	.L153
 1099              	.L175:
 386:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 1100              		.loc 1 386 0
 1101 0100 2046     		mov	r0, r4
 1102 0102 E047     		blx	ip
 1103              	.LVL85:
 387:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 1104              		.loc 1 387 0
 1105 0104 607D     		ldrb	r0, [r4, #21]	@ zero_extendqisi2
 1106 0106 B847     		blx	r7
 1107              	.LVL86:
 1108 0108 23E0     		b	.L174
 1109              	.L153:
 398:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(hal_dma_channel_enable(spi->dma_rx.chid) != HAL_DMA_OK)
 1110              		.loc 1 398 0
 1111 010a 2846     		mov	r0, r5
 1112 010c 4146     		mov	r1, r8
 1113 010e 314B     		ldr	r3, .L176+32
 1114 0110 9847     		blx	r3
 1115              	.LVL87:
 399:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 1116              		.loc 1 399 0
 1117 0112 607D     		ldrb	r0, [r4, #21]	@ zero_extendqisi2
 1118 0114 304B     		ldr	r3, .L176+36
 1119 0116 9847     		blx	r3
 1120              	.LVL88:
 1121 0118 D8B9     		cbnz	r0, .L174
 1122 011a 47E0     		b	.L155
 1123              	.LVL89:
 1124              	.L139:
 1125              	.LBE11:
 1126              	.LBE10:
 1127              	.LBB12:
 1128              	.LBB13:
 408:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t time_out = 0;
 1129              		.loc 1 408 0
 1130 011c 0023     		movs	r3, #0
 1131 011e 8DF80430 		strb	r3, [sp, #4]
 1132              	.LVL90:
 415:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(rx_buf == NULL));
 1133              		.loc 1 415 0
 1134 0122 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 1135 0124 022B     		cmp	r3, #2
 1136 0126 04D9     		bls	.L156
 1137 0128 2C48     		ldr	r0, .L176+40
 1138              	.LVL91:
 1139 012a 40F29F11 		movw	r1, #415
 1140              	.LVL92:
 1141 012e 244B     		ldr	r3, .L176+12
 1142 0130 9847     		blx	r3
 1143              	.LVL93:
 1144              	.L156:
 416:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1145              		.loc 1 416 0
 1146 0132 25B9     		cbnz	r5, .L157
 1147 0134 2948     		ldr	r0, .L176+40
 1148 0136 4FF4D071 		mov	r1, #416
 1149 013a 214B     		ldr	r3, .L176+12
 1150 013c 9847     		blx	r3
 1151              	.LVL94:
 1152              	.L157:
 418:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1153              		.loc 1 418 0
 1154 013e 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 1155 0140 57F82330 		ldr	r3, [r7, r3, lsl #2]
 1156 0144 9A68     		ldr	r2, [r3, #8]
 1157 0146 32B9     		cbnz	r2, .L158
 421:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 1158              		.loc 1 421 0
 1159 0148 0122     		movs	r2, #1
 1160 014a 9A60     		str	r2, [r3, #8]
 1161 014c 03E0     		b	.L158
 1162              	.LVL95:
 1163              	.L171:
 460:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					return SPI_ERROR;
 1164              		.loc 1 460 0
 1165 014e 0023     		movs	r3, #0
 1166 0150 B360     		str	r3, [r6, #8]
 1167              	.LVL96:
 1168              	.L174:
 461:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 1169              		.loc 1 461 0
 1170 0152 0E20     		movs	r0, #14
 1171 0154 2AE0     		b	.L155
 1172              	.LVL97:
 1173              	.L158:
 430:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(status)
 1174              		.loc 1 430 0
 1175 0156 0022     		movs	r2, #0
 1176 0158 1346     		mov	r3, r2
 1177              	.LVL98:
 1178              	.L165:
 1179 015a 94F801E0 		ldrb	lr, [r4, #1]	@ zero_extendqisi2
 1180 015e 57F82E60 		ldr	r6, [r7, lr, lsl #2]
 1181 0162 4FF4FA61 		mov	r1, #2000
 1182              	.LVL99:
 1183              	.L166:
 1184 0166 706A     		ldr	r0, [r6, #36]
 1185 0168 C0B2     		uxtb	r0, r0
 1186 016a 8DF80400 		strb	r0, [sp, #4]
 431:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 1187              		.loc 1 431 0
 1188 016e 9DF80400 		ldrb	r0, [sp, #4]	@ zero_extendqisi2
 1189 0172 C0B1     		cbz	r0, .L159
 1190              	.LVL100:
 435:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1191              		.loc 1 435 0
 1192 0174 57F82E10 		ldr	r1, [r7, lr, lsl #2]
 437:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 1193              		.loc 1 437 0
 1194 0178 2079     		ldrb	r0, [r4, #4]	@ zero_extendqisi2
 1195 017a 1028     		cmp	r0, #16
 435:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1196              		.loc 1 435 0
 1197 017c 096E     		ldr	r1, [r1, #96]
 1198              	.LVL101:
 437:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 1199              		.loc 1 437 0
 1200 017e 06D0     		beq	.L161
 1201 0180 2028     		cmp	r0, #32
 1202 0182 07D0     		beq	.L162
 1203 0184 0828     		cmp	r0, #8
 1204 0186 E2D1     		bne	.L171
 441:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_rx++;
 1205              		.loc 1 441 0
 1206 0188 E954     		strb	r1, [r5, r3]
 442:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 1207              		.loc 1 442 0
 1208 018a 0133     		adds	r3, r3, #1
 1209 018c 04E0     		b	.L173
 1210              	.L161:
 447:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_rx += 2;
 1211              		.loc 1 447 0
 1212 018e E952     		strh	r1, [r5, r3]	@ movhi
 448:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 1213              		.loc 1 448 0
 1214 0190 0233     		adds	r3, r3, #2
 1215 0192 01E0     		b	.L173
 1216              	.L162:
 453:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_rx += 4;
 1217              		.loc 1 453 0
 1218 0194 E950     		str	r1, [r5, r3]
 454:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 1219              		.loc 1 454 0
 1220 0196 0433     		adds	r3, r3, #4
 1221              	.L173:
 1222 0198 0132     		adds	r2, r2, #1
 1223              	.LVL102:
 1224 019a 9BB2     		uxth	r3, r3
 1225              	.LVL103:
 466:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 1226              		.loc 1 466 0
 1227 019c 91B2     		uxth	r1, r2
 1228              	.LVL104:
 1229 019e 4145     		cmp	r1, r8
 1230 01a0 DBD1     		bne	.L165
 475:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	else
 1231              		.loc 1 475 0
 1232 01a2 0020     		movs	r0, #0
 1233 01a4 02E0     		b	.L155
 1234              	.LVL105:
 1235              	.L159:
 426:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1236              		.loc 1 426 0
 1237 01a6 0139     		subs	r1, r1, #1
 1238              	.LVL106:
 1239 01a8 DDD1     		bne	.L166
 1240 01aa D2E7     		b	.L174
 1241              	.LVL107:
 1242              	.L155:
 1243              	.LBE13:
 1244              	.LBE12:
 501:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1245              		.loc 1 501 0
 1246 01ac 0BB0     		add	sp, sp, #44
 1247              	.LCFI13:
 1248              		.cfi_def_cfa_offset 36
 1249              		@ sp needed
 1250 01ae BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1251              	.LVL108:
 1252              	.L177:
 1253 01b2 00BF     		.align	2
 1254              	.L176:
 1255 01b4 00000000 		.word	.LANCHOR0
 1256 01b8 00000000 		.word	memset
 1257 01bc 00000000 		.word	.LANCHOR7
 1258 01c0 00000000 		.word	assert_failed
 1259 01c4 00000000 		.word	hal_spi_dma_init
 1260 01c8 00000000 		.word	hal_spi_init
 1261 01cc 00000000 		.word	hal_dma_enable_global_interrupt
 1262 01d0 00000000 		.word	hal_dma_init
 1263 01d4 00000000 		.word	flush_cache
 1264 01d8 00000000 		.word	hal_dma_channel_enable
 1265 01dc 00000000 		.word	.LANCHOR8
 1266 01e0 00000000 		.word	hal_spi_disable
 1267 01e4 00000000 		.word	hal_dma_deinit
 1268              		.cfi_endproc
 1269              	.LFE10:
 1271              		.section	.text.hal_spi_transmit_buf,"ax",%progbits
 1272              		.align	1
 1273              		.global	hal_spi_transmit_buf
 1274              		.thumb
 1275              		.thumb_func
 1277              	hal_spi_transmit_buf:
 1278              	.LFB13:
 678:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 1279              		.loc 1 678 0
 1280              		.cfi_startproc
 1281              		@ args = 0, pretend = 0, frame = 40
 1282              		@ frame_needed = 0, uses_anonymous_args = 0
 1283              	.LVL109:
 1284 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1285              	.LCFI14:
 1286              		.cfi_def_cfa_offset 36
 1287              		.cfi_offset 4, -36
 1288              		.cfi_offset 5, -32
 1289              		.cfi_offset 6, -28
 1290              		.cfi_offset 7, -24
 1291              		.cfi_offset 8, -20
 1292              		.cfi_offset 9, -16
 1293              		.cfi_offset 10, -12
 1294              		.cfi_offset 11, -8
 1295              		.cfi_offset 14, -4
 680:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_transmit_buf_dma(spi, tx_buf, len);
 1296              		.loc 1 680 0
 1297 0004 037B     		ldrb	r3, [r0, #12]	@ zero_extendqisi2
 1298 0006 012B     		cmp	r3, #1
 678:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 1299              		.loc 1 678 0
 1300 0008 8BB0     		sub	sp, sp, #44
 1301              	.LCFI15:
 1302              		.cfi_def_cfa_offset 80
 678:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 1303              		.loc 1 678 0
 1304 000a 0546     		mov	r5, r0
 1305 000c 0E46     		mov	r6, r1
 1306 000e 1446     		mov	r4, r2
 680:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_transmit_buf_dma(spi, tx_buf, len);
 1307              		.loc 1 680 0
 1308 0010 40F08680 		bne	.L179
 1309              	.LVL110:
 1310              	.LBB18:
 1311              	.LBB19:
 506:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_config_t spi_dma;
 1312              		.loc 1 506 0
 1313 0014 654B     		ldr	r3, .L221
 1314 0016 01A8     		add	r0, sp, #4
 1315              	.LVL111:
 1316 0018 0021     		movs	r1, #0
 1317              	.LVL112:
 1318 001a 2422     		movs	r2, #36
 1319              	.LVL113:
 1320 001c 9847     		blx	r3
 1321              	.LVL114:
 510:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(tx_buf == NULL));
 1322              		.loc 1 510 0
 1323 001e 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 1324 0020 022B     		cmp	r3, #2
 1325 0022 04D9     		bls	.L180
 1326 0024 6248     		ldr	r0, .L221+4
 1327 0026 4FF4FF71 		mov	r1, #510
 1328 002a 624B     		ldr	r3, .L221+8
 1329 002c 9847     		blx	r3
 1330              	.LVL115:
 1331              	.L180:
 511:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1332              		.loc 1 511 0
 1333 002e 26B9     		cbnz	r6, .L181
 1334 0030 5F48     		ldr	r0, .L221+4
 1335 0032 40F2FF11 		movw	r1, #511
 1336 0036 5F4B     		ldr	r3, .L221+8
 1337 0038 9847     		blx	r3
 1338              	.LVL116:
 1339              	.L181:
 513:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_tx.chid);
 1340              		.loc 1 513 0
 1341 003a 2846     		mov	r0, r5
 517:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_data_level = 0;
 1342              		.loc 1 517 0
 1343 003c 0027     		movs	r7, #0
 513:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_tx.chid);
 1344              		.loc 1 513 0
 1345 003e DFF89CA1 		ldr	r10, .L221+48
 520:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_dma_init(spi, &spi_dma);
 1346              		.loc 1 520 0
 1347 0042 4FF00108 		mov	r8, #1
 513:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_tx.chid);
 1348              		.loc 1 513 0
 1349 0046 D047     		blx	r10
 1350              	.LVL117:
 514:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1351              		.loc 1 514 0
 1352 0048 DFF89491 		ldr	r9, .L221+52
 1353 004c 687B     		ldrb	r0, [r5, #13]	@ zero_extendqisi2
 1354 004e CB46     		mov	fp, r9
 1355 0050 C847     		blx	r9
 1356              	.LVL118:
 521:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_init(spi);
 1357              		.loc 1 521 0
 1358 0052 6946     		mov	r1, sp
 1359 0054 2846     		mov	r0, r5
 1360 0056 584B     		ldr	r3, .L221+12
 517:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_data_level = 0;
 1361              		.loc 1 517 0
 1362 0058 8DF80170 		strb	r7, [sp, #1]
 518:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_receive_enable = DISABLE;
 1363              		.loc 1 518 0
 1364 005c 8DF80070 		strb	r7, [sp]
 519:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_enable = ENABLE;
 1365              		.loc 1 519 0
 1366 0060 8DF80370 		strb	r7, [sp, #3]
 520:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_dma_init(spi, &spi_dma);
 1367              		.loc 1 520 0
 1368 0064 8DF80280 		strb	r8, [sp, #2]
 521:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_init(spi);
 1369              		.loc 1 521 0
 1370 0068 9847     		blx	r3
 1371              	.LVL119:
 522:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1372              		.loc 1 522 0
 1373 006a 544B     		ldr	r3, .L221+16
 1374 006c 2846     		mov	r0, r5
 1375 006e 9847     		blx	r3
 1376              	.LVL120:
 525:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.length = len * (spi->data_size / 8);
 1377              		.loc 1 525 0
 1378 0070 6B7B     		ldrb	r3, [r5, #13]	@ zero_extendqisi2
 1379 0072 8DF80430 		strb	r3, [sp, #4]
 526:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.trans_type = MEM_TO_PER;
 1380              		.loc 1 526 0
 1381 0076 2B79     		ldrb	r3, [r5, #4]	@ zero_extendqisi2
 1382 0078 DA08     		lsrs	r2, r3, #3
 529:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_bsize = BURST_SIZE_1;
 1383              		.loc 1 529 0
 1384 007a 5149     		ldr	r1, .L221+20
 533:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1385              		.loc 1 533 0
 1386 007c 102B     		cmp	r3, #16
 526:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.trans_type = MEM_TO_PER;
 1387              		.loc 1 526 0
 1388 007e 02FB04F2 		mul	r2, r2, r4
 527:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_addr = (uint32_t)tx_buf;
 1389              		.loc 1 527 0
 1390 0082 8DF81880 		strb	r8, [sp, #24]
 528:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.dst_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 1391              		.loc 1 528 0
 1392 0086 0296     		str	r6, [sp, #8]
 526:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.trans_type = MEM_TO_PER;
 1393              		.loc 1 526 0
 1394 0088 0492     		str	r2, [sp, #16]
 529:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_bsize = BURST_SIZE_1;
 1395              		.loc 1 529 0
 1396 008a 6A78     		ldrb	r2, [r5, #1]	@ zero_extendqisi2
 1397 008c 51F82210 		ldr	r1, [r1, r2, lsl #2]
 530:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.dst_bsize = BURST_SIZE_1;
 1398              		.loc 1 530 0
 1399 0090 8DF81470 		strb	r7, [sp, #20]
 529:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_bsize = BURST_SIZE_1;
 1400              		.loc 1 529 0
 1401 0094 01F16001 		add	r1, r1, #96
 531:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1402              		.loc 1 531 0
 1403 0098 8DF81570 		strb	r7, [sp, #21]
 529:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_bsize = BURST_SIZE_1;
 1404              		.loc 1 529 0
 1405 009c 0391     		str	r1, [sp, #12]
 1406 009e 5146     		mov	r1, r10
 533:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1407              		.loc 1 533 0
 1408 00a0 08D0     		beq	.L183
 1409 00a2 202B     		cmp	r3, #32
 1410 00a4 0BD0     		beq	.L184
 1411 00a6 082B     		cmp	r3, #8
 1412 00a8 0FD1     		bne	.L213
 537:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_8;
 1413              		.loc 1 537 0
 1414 00aa 8DF81670 		strb	r7, [sp, #22]
 538:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1415              		.loc 1 538 0
 1416 00ae 8DF81770 		strb	r7, [sp, #23]
 1417 00b2 0FE0     		b	.L186
 1418              	.L183:
 543:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_16;
 1419              		.loc 1 543 0
 1420 00b4 8DF81680 		strb	r8, [sp, #22]
 544:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1421              		.loc 1 544 0
 1422 00b8 8DF81780 		strb	r8, [sp, #23]
 1423 00bc 0AE0     		b	.L186
 1424              	.L184:
 549:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_32;
 1425              		.loc 1 549 0
 1426 00be 0223     		movs	r3, #2
 1427 00c0 8DF81630 		strb	r3, [sp, #22]
 550:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1428              		.loc 1 550 0
 1429 00c4 8DF81730 		strb	r3, [sp, #23]
 1430 00c8 04E0     		b	.L186
 1431              	.L213:
 555:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 1432              		.loc 1 555 0
 1433 00ca 2846     		mov	r0, r5
 1434 00cc D047     		blx	r10
 1435              	.LVL121:
 556:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 1436              		.loc 1 556 0
 1437 00ce 687D     		ldrb	r0, [r5, #21]	@ zero_extendqisi2
 1438 00d0 C847     		blx	r9
 1439              	.LVL122:
 1440 00d2 66E0     		b	.L211
 1441              	.L186:
 560:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1442              		.loc 1 560 0
 1443 00d4 012A     		cmp	r2, #1
 1444 00d6 06D0     		beq	.L189
 1445 00d8 03D3     		bcc	.L190
 1446 00da 022A     		cmp	r2, #2
 1447 00dc 11D1     		bne	.L218
 569:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1448              		.loc 1 569 0
 1449 00de 0523     		movs	r3, #5
 1450 00e0 02E0     		b	.L216
 1451              	.L190:
 563:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1452              		.loc 1 563 0
 1453 00e2 0123     		movs	r3, #1
 1454 00e4 00E0     		b	.L216
 1455              	.L189:
 566:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1456              		.loc 1 566 0
 1457 00e6 0323     		movs	r3, #3
 1458              	.L216:
 569:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1459              		.loc 1 569 0
 1460 00e8 8DF81B30 		strb	r3, [sp, #27]
 580:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1461              		.loc 1 580 0
 1462 00ec 0020     		movs	r0, #0
 579:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_enable_global_interrupt(0);
 1463              		.loc 1 579 0
 1464 00ee 2B69     		ldr	r3, [r5, #16]
 1465 00f0 0993     		str	r3, [sp, #36]
 580:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1466              		.loc 1 580 0
 1467 00f2 344B     		ldr	r3, .L221+24
 1468 00f4 9847     		blx	r3
 1469              	.LVL123:
 582:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 1470              		.loc 1 582 0
 1471 00f6 01A8     		add	r0, sp, #4
 1472 00f8 334B     		ldr	r3, .L221+28
 1473 00fa 9847     		blx	r3
 1474              	.LVL124:
 1475 00fc 0028     		cmp	r0, #0
 1476 00fe 50D1     		bne	.L211
 1477 0100 04E0     		b	.L193
 1478              	.L218:
 573:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 1479              		.loc 1 573 0
 1480 0102 2846     		mov	r0, r5
 1481 0104 8847     		blx	r1
 1482              	.LVL125:
 574:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 1483              		.loc 1 574 0
 1484 0106 687D     		ldrb	r0, [r5, #21]	@ zero_extendqisi2
 1485 0108 D847     		blx	fp
 1486              	.LVL126:
 1487 010a 4AE0     		b	.L211
 1488              	.L193:
 585:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(hal_dma_channel_enable(spi->dma_tx.chid) != HAL_DMA_OK)
 1489              		.loc 1 585 0
 1490 010c 3046     		mov	r0, r6
 1491 010e 2146     		mov	r1, r4
 1492 0110 2E4B     		ldr	r3, .L221+32
 1493 0112 9847     		blx	r3
 1494              	.LVL127:
 586:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 1495              		.loc 1 586 0
 1496 0114 687B     		ldrb	r0, [r5, #13]	@ zero_extendqisi2
 1497 0116 2E4B     		ldr	r3, .L221+36
 1498 0118 9847     		blx	r3
 1499              	.LVL128:
 1500 011a 0028     		cmp	r0, #0
 1501 011c 41D1     		bne	.L211
 1502 011e 41E0     		b	.L195
 1503              	.LVL129:
 1504              	.L179:
 1505              	.LBE19:
 1506              	.LBE18:
 1507              	.LBB20:
 1508              	.LBB21:
 602:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(tx_buf == NULL));
 1509              		.loc 1 602 0
 1510 0120 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 1511 0122 022B     		cmp	r3, #2
 1512 0124 04D9     		bls	.L196
 1513 0126 2B48     		ldr	r0, .L221+40
 1514              	.LVL130:
 1515 0128 40F25A21 		movw	r1, #602
 1516              	.LVL131:
 1517 012c 214B     		ldr	r3, .L221+8
 1518 012e 9847     		blx	r3
 1519              	.LVL132:
 1520              	.L196:
 603:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1521              		.loc 1 603 0
 1522 0130 26B9     		cbnz	r6, .L197
 1523 0132 2848     		ldr	r0, .L221+40
 1524 0134 40F25B21 		movw	r1, #603
 1525 0138 1E4B     		ldr	r3, .L221+8
 1526 013a 9847     		blx	r3
 1527              	.LVL133:
 1528              	.L197:
 655:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 1529              		.loc 1 655 0
 1530 013c 0023     		movs	r3, #0
 1531              	.LVL134:
 1532              	.L208:
 605:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1533              		.loc 1 605 0
 1534 013e 002C     		cmp	r4, #0
 1535 0140 2DD0     		beq	.L219
 608:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 1536              		.loc 1 608 0
 1537 0142 202C     		cmp	r4, #32
 616:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 1538              		.loc 1 616 0
 1539 0144 8BBF     		itete	hi
 1540 0146 203C     		subhi	r4, r4, #32
 1541              	.LVL135:
 610:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			len = 0;
 1542              		.loc 1 610 0
 1543 0148 E0B2     		uxtbls	r0, r4
 1544              	.LVL136:
 616:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 1545              		.loc 1 616 0
 1546 014a A4B2     		uxthhi	r4, r4
 611:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 1547              		.loc 1 611 0
 1548 014c 0024     		movls	r4, #0
 1549              	.LVL137:
 615:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			len -= SPI_FIFO_DEPTH;
 1550              		.loc 1 615 0
 1551 014e 88BF     		it	hi
 1552 0150 2020     		movhi	r0, #32
 1553              	.LVL138:
 622:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 1554              		.loc 1 622 0
 1555 0152 0022     		movs	r2, #0
 1556              	.LVL139:
 1557              	.L200:
 1558 0154 8242     		cmp	r2, r0
 1559 0156 17D2     		bcs	.L220
 625:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 1560              		.loc 1 625 0
 1561 0158 2979     		ldrb	r1, [r5, #4]	@ zero_extendqisi2
 1562 015a 1029     		cmp	r1, #16
 1563 015c 06D0     		beq	.L201
 1564 015e 2029     		cmp	r1, #32
 1565 0160 07D0     		beq	.L202
 1566 0162 0829     		cmp	r1, #8
 1567 0164 1DD1     		bne	.L211
 629:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_tx++;
 1568              		.loc 1 629 0
 1569 0166 F15C     		ldrb	r1, [r6, r3]	@ zero_extendqisi2
 1570              	.LVL140:
 630:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 1571              		.loc 1 630 0
 1572 0168 0133     		adds	r3, r3, #1
 1573              	.LVL141:
 1574 016a 04E0     		b	.L217
 1575              	.LVL142:
 1576              	.L201:
 635:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_tx += 2;
 1577              		.loc 1 635 0
 1578 016c F15A     		ldrh	r1, [r6, r3]
 1579              	.LVL143:
 636:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 1580              		.loc 1 636 0
 1581 016e 0233     		adds	r3, r3, #2
 1582              	.LVL144:
 1583 0170 01E0     		b	.L217
 1584              	.LVL145:
 1585              	.L202:
 641:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_tx += 4;
 1586              		.loc 1 641 0
 1587 0172 F158     		ldr	r1, [r6, r3]
 1588              	.LVL146:
 642:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 1589              		.loc 1 642 0
 1590 0174 0433     		adds	r3, r3, #4
 1591              	.LVL147:
 1592              	.L217:
 651:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 1593              		.loc 1 651 0
 1594 0176 124F     		ldr	r7, .L221+20
 1595 0178 95F801E0 		ldrb	lr, [r5, #1]	@ zero_extendqisi2
 642:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 1596              		.loc 1 642 0
 1597 017c 9BB2     		uxth	r3, r3
 1598              	.LVL148:
 622:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 1599              		.loc 1 622 0
 1600 017e 0132     		adds	r2, r2, #1
 1601              	.LVL149:
 651:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 1602              		.loc 1 651 0
 1603 0180 57F82E70 		ldr	r7, [r7, lr, lsl #2]
 1604 0184 3966     		str	r1, [r7, #96]
 1605 0186 E5E7     		b	.L200
 1606              	.LVL150:
 1607              	.L220:
 655:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 1608              		.loc 1 655 0
 1609 0188 0D4A     		ldr	r2, .L221+20
 1610              	.LVL151:
 1611 018a 6978     		ldrb	r1, [r5, #1]	@ zero_extendqisi2
 1612 018c 52F82100 		ldr	r0, [r2, r1, lsl #2]
 1613              	.LVL152:
 1614 0190 114A     		ldr	r2, .L221+44
 1615              	.L206:
 1616              	.LVL153:
 1617 0192 016A     		ldr	r1, [r0, #32]
 1618 0194 0029     		cmp	r1, #0
 1619 0196 D2D0     		beq	.L208
 1620              	.LVL154:
 658:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				return SPI_ERROR;
 1621              		.loc 1 658 0
 1622 0198 013A     		subs	r2, r2, #1
 1623              	.LVL155:
 1624 019a FAD1     		bne	.L206
 1625 019c 01E0     		b	.L211
 1626              	.LVL156:
 1627              	.L219:
 662:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 1628              		.loc 1 662 0
 1629 019e 2046     		mov	r0, r4
 1630 01a0 00E0     		b	.L195
 1631              	.LVL157:
 1632              	.L211:
 659:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 1633              		.loc 1 659 0
 1634 01a2 0E20     		movs	r0, #14
 1635              	.L195:
 1636              	.LVL158:
 1637              	.LBE21:
 1638              	.LBE20:
 686:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1639              		.loc 1 686 0
 1640 01a4 0BB0     		add	sp, sp, #44
 1641              	.LCFI16:
 1642              		.cfi_def_cfa_offset 36
 1643              		@ sp needed
 1644 01a6 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1645              	.LVL159:
 1646              	.L222:
 1647 01aa 00BF     		.align	2
 1648              	.L221:
 1649 01ac 00000000 		.word	memset
 1650 01b0 00000000 		.word	.LANCHOR9
 1651 01b4 00000000 		.word	assert_failed
 1652 01b8 00000000 		.word	hal_spi_dma_init
 1653 01bc 00000000 		.word	hal_spi_init
 1654 01c0 00000000 		.word	.LANCHOR0
 1655 01c4 00000000 		.word	hal_dma_enable_global_interrupt
 1656 01c8 00000000 		.word	hal_dma_init
 1657 01cc 00000000 		.word	flush_cache
 1658 01d0 00000000 		.word	hal_dma_channel_enable
 1659 01d4 00000000 		.word	.LANCHOR10
 1660 01d8 006A1800 		.word	1600000
 1661 01dc 00000000 		.word	hal_spi_disable
 1662 01e0 00000000 		.word	hal_dma_deinit
 1663              		.cfi_endproc
 1664              	.LFE13:
 1666              		.section	.text.hal_spi_transceiver,"ax",%progbits
 1667              		.align	1
 1668              		.global	hal_spi_transceiver
 1669              		.thumb
 1670              		.thumb_func
 1672              	hal_spi_transceiver:
 1673              	.LFB16:
1010:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 1674              		.loc 1 1010 0
 1675              		.cfi_startproc
 1676              		@ args = 0, pretend = 0, frame = 96
 1677              		@ frame_needed = 0, uses_anonymous_args = 0
 1678              	.LVL160:
 1679 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1680              	.LCFI17:
 1681              		.cfi_def_cfa_offset 36
 1682              		.cfi_offset 4, -36
 1683              		.cfi_offset 5, -32
 1684              		.cfi_offset 6, -28
 1685              		.cfi_offset 7, -24
 1686              		.cfi_offset 8, -20
 1687              		.cfi_offset 9, -16
 1688              		.cfi_offset 10, -12
 1689              		.cfi_offset 11, -8
 1690              		.cfi_offset 14, -4
1012:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_transceiver_dma(spi, buff);
 1691              		.loc 1 1012 0
 1692 0004 037D     		ldrb	r3, [r0, #20]	@ zero_extendqisi2
 1693 0006 012B     		cmp	r3, #1
1010:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 1694              		.loc 1 1010 0
 1695 0008 99B0     		sub	sp, sp, #100
 1696              	.LCFI18:
 1697              		.cfi_def_cfa_offset 136
1010:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 1698              		.loc 1 1010 0
 1699 000a 0446     		mov	r4, r0
 1700 000c 0F46     		mov	r7, r1
 1701 000e 8B4D     		ldr	r5, .L344
1012:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_transceiver_dma(spi, buff);
 1702              		.loc 1 1012 0
 1703 0010 40F02C81 		bne	.L224
1012:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_transceiver_dma(spi, buff);
 1704              		.loc 1 1012 0 is_stmt 0 discriminator 1
 1705 0014 037B     		ldrb	r3, [r0, #12]	@ zero_extendqisi2
 1706 0016 012B     		cmp	r3, #1
 1707 0018 40F02881 		bne	.L224
 1708              	.LVL161:
 1709              	.LBB28:
 1710              	.LBB29:
 692:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_init_type_t dma_tx = { 0 };
 1711              		.loc 1 692 0 is_stmt 1
 1712 001c 0021     		movs	r1, #0
 1713              	.LVL162:
 1714 001e 2422     		movs	r2, #36
 1715 0020 874E     		ldr	r6, .L344+4
 1716 0022 06A8     		add	r0, sp, #24
 1717              	.LVL163:
 1718 0024 B047     		blx	r6
 1719              	.LVL164:
 693:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_config_t spi_dma;
 1720              		.loc 1 693 0
 1721 0026 0FA8     		add	r0, sp, #60
 1722 0028 0021     		movs	r1, #0
 1723 002a 2422     		movs	r2, #36
 1724 002c B047     		blx	r6
 1725              	.LVL165:
 699:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 1726              		.loc 1 699 0
 1727 002e 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 1728 0030 082B     		cmp	r3, #8
 1729 0032 08D0     		beq	.L225
 1730 0034 102B     		cmp	r3, #16
 1731 0036 06D0     		beq	.L225
 1732 0038 202B     		cmp	r3, #32
 1733 003a 04D0     		beq	.L225
 1734 003c 8148     		ldr	r0, .L344+8
 1735 003e 40F2BB21 		movw	r1, #699
 1736 0042 814B     		ldr	r3, .L344+12
 1737 0044 9847     		blx	r3
 1738              	.LVL166:
 1739              	.L225:
 700:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 1740              		.loc 1 700 0
 1741 0046 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 1742 0048 032B     		cmp	r3, #3
 1743 004a 04D9     		bls	.L226
 1744 004c 7D48     		ldr	r0, .L344+8
 1745 004e 4FF42F71 		mov	r1, #700
 1746 0052 7D4B     		ldr	r3, .L344+12
 1747 0054 9847     		blx	r3
 1748              	.LVL167:
 1749              	.L226:
 701:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 1750              		.loc 1 701 0
 1751 0056 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 1752 0058 022B     		cmp	r3, #2
 1753 005a 04D9     		bls	.L227
 1754 005c 7948     		ldr	r0, .L344+8
 1755 005e 40F2BD21 		movw	r1, #701
 1756 0062 794B     		ldr	r3, .L344+12
 1757 0064 9847     		blx	r3
 1758              	.LVL168:
 1759              	.L227:
 702:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 1760              		.loc 1 702 0
 1761 0066 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 1762 0068 022B     		cmp	r3, #2
 1763 006a 04D9     		bls	.L228
 1764 006c 7548     		ldr	r0, .L344+8
 1765 006e 40F2BE21 		movw	r1, #702
 1766 0072 754B     		ldr	r3, .L344+12
 1767 0074 9847     		blx	r3
 1768              	.LVL169:
 1769              	.L228:
 703:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1770              		.loc 1 703 0
 1771 0076 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 1772 0078 022B     		cmp	r3, #2
 1773 007a 04D9     		bls	.L229
 1774 007c 7148     		ldr	r0, .L344+8
 1775 007e 40F2BF21 		movw	r1, #703
 1776 0082 714B     		ldr	r3, .L344+12
 1777 0084 9847     		blx	r3
 1778              	.LVL170:
 1779              	.L229:
 705:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					buff->rxbuf.buf == NULL || buff->rxbuf.len == 0 ||
 1780              		.loc 1 705 0
 1781 0086 FB68     		ldr	r3, [r7, #12]
 1782 0088 3BB1     		cbz	r3, .L230
 1783 008a 3B89     		ldrh	r3, [r7, #8]
 1784 008c 2BB1     		cbz	r3, .L230
 1785 008e 7A68     		ldr	r2, [r7, #4]
 1786 0090 1AB1     		cbz	r2, .L230
 1787 0092 3A88     		ldrh	r2, [r7]
 1788 0094 0AB1     		cbz	r2, .L230
 1789 0096 9A42     		cmp	r2, r3
 1790 0098 04D0     		beq	.L231
 1791              	.L230:
 1792 009a 6A48     		ldr	r0, .L344+8
 1793 009c 40F2C321 		movw	r1, #707
 1794 00a0 694B     		ldr	r3, .L344+12
 1795 00a2 9847     		blx	r3
 1796              	.LVL171:
 1797              	.L231:
 710:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	tx_buf = buff->txbuf.buf;
 1798              		.loc 1 710 0
 1799 00a4 2679     		ldrb	r6, [r4, #4]	@ zero_extendqisi2
 1800 00a6 4FEAD609 		lsr	r9, r6, #3
 709:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	rx_len = buff->rxbuf.len * (spi->data_size / 8);
 1801              		.loc 1 709 0
 1802 00aa 7B68     		ldr	r3, [r7, #4]
 714:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_tx.chid);
 1803              		.loc 1 714 0
 1804 00ac 607D     		ldrb	r0, [r4, #21]	@ zero_extendqisi2
 709:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	rx_len = buff->rxbuf.len * (spi->data_size / 8);
 1805              		.loc 1 709 0
 1806 00ae 0093     		str	r3, [sp]
 1807              	.LVL172:
 710:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	tx_buf = buff->txbuf.buf;
 1808              		.loc 1 710 0
 1809 00b0 3B88     		ldrh	r3, [r7]
 1810              	.LVL173:
 1811 00b2 13FB09F3 		smulbb	r3, r3, r9
 714:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_tx.chid);
 1812              		.loc 1 714 0
 1813 00b6 DFF8B0A1 		ldr	r10, .L344+44
 719:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_data_level = 0;
 1814              		.loc 1 719 0
 1815 00ba 0026     		movs	r6, #0
 721:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_enable = ENABLE;
 1816              		.loc 1 721 0
 1817 00bc 4FF0010B 		mov	fp, #1
 710:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	tx_buf = buff->txbuf.buf;
 1818              		.loc 1 710 0
 1819 00c0 1FFA83F8 		uxth	r8, r3
 1820              	.LVL174:
 711:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	tx_len = buff->txbuf.len * (spi->data_size / 8);
 1821              		.loc 1 711 0
 1822 00c4 FB68     		ldr	r3, [r7, #12]
 1823 00c6 0193     		str	r3, [sp, #4]
 1824              	.LVL175:
 712:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1825              		.loc 1 712 0
 1826 00c8 3B89     		ldrh	r3, [r7, #8]
 1827              	.LVL176:
 1828 00ca 0293     		str	r3, [sp, #8]
 1829              	.LVL177:
 714:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_tx.chid);
 1830              		.loc 1 714 0
 1831 00cc D047     		blx	r10
 1832              	.LVL178:
 715:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_disable(spi);
 1833              		.loc 1 715 0
 1834 00ce 607B     		ldrb	r0, [r4, #13]	@ zero_extendqisi2
 1835 00d0 5746     		mov	r7, r10
 1836              	.LVL179:
 1837 00d2 D047     		blx	r10
 1838              	.LVL180:
 716:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1839              		.loc 1 716 0
 1840 00d4 DFF880C1 		ldr	ip, .L344+28
 1841 00d8 2046     		mov	r0, r4
 1842 00da CDF80CC0 		str	ip, [sp, #12]
 1843 00de E047     		blx	ip
 1844              	.LVL181:
 723:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1845              		.loc 1 723 0
 1846 00e0 2046     		mov	r0, r4
 1847 00e2 05A9     		add	r1, sp, #20
 1848 00e4 594B     		ldr	r3, .L344+16
 719:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_data_level = 0;
 1849              		.loc 1 719 0
 1850 00e6 8DF81560 		strb	r6, [sp, #21]
 720:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_receive_enable = ENABLE;
 1851              		.loc 1 720 0
 1852 00ea 8DF81460 		strb	r6, [sp, #20]
 721:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_enable = ENABLE;
 1853              		.loc 1 721 0
 1854 00ee 8DF817B0 		strb	fp, [sp, #23]
 722:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_dma_init(spi, &spi_dma);
 1855              		.loc 1 722 0
 1856 00f2 8DF816B0 		strb	fp, [sp, #22]
 723:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1857              		.loc 1 723 0
 1858 00f6 9847     		blx	r3
 1859              	.LVL182:
 726:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.length = rx_len;
 1860              		.loc 1 726 0
 1861 00f8 637D     		ldrb	r3, [r4, #21]	@ zero_extendqisi2
 1862 00fa 8DF81830 		strb	r3, [sp, #24]
 729:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_addr = (uint32_t)rx_buf;
 1863              		.loc 1 729 0
 1864 00fe 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 1865 0100 55F82320 		ldr	r2, [r5, r3, lsl #2]
 728:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 1866              		.loc 1 728 0
 1867 0104 0220     		movs	r0, #2
 733:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1868              		.loc 1 733 0
 1869 0106 2179     		ldrb	r1, [r4, #4]	@ zero_extendqisi2
 729:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_addr = (uint32_t)rx_buf;
 1870              		.loc 1 729 0
 1871 0108 6032     		adds	r2, r2, #96
 733:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1872              		.loc 1 733 0
 1873 010a 1029     		cmp	r1, #16
 729:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_addr = (uint32_t)rx_buf;
 1874              		.loc 1 729 0
 1875 010c 0792     		str	r2, [sp, #28]
 730:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_bsize = BURST_SIZE_1;
 1876              		.loc 1 730 0
 1877 010e 009A     		ldr	r2, [sp]
 727:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.trans_type = PER_TO_MEM;
 1878              		.loc 1 727 0
 1879 0110 CDF82480 		str	r8, [sp, #36]
 728:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 1880              		.loc 1 728 0
 1881 0114 8DF82C00 		strb	r0, [sp, #44]
 730:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_bsize = BURST_SIZE_1;
 1882              		.loc 1 730 0
 1883 0118 0892     		str	r2, [sp, #32]
 731:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_bsize = BURST_SIZE_1;
 1884              		.loc 1 731 0
 1885 011a 8DF82860 		strb	r6, [sp, #40]
 732:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->data_size)
 1886              		.loc 1 732 0
 1887 011e 8DF82960 		strb	r6, [sp, #41]
 1888 0122 DDF80CC0 		ldr	ip, [sp, #12]
 733:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1889              		.loc 1 733 0
 1890 0126 08D0     		beq	.L233
 1891 0128 2029     		cmp	r1, #32
 1892 012a 0BD0     		beq	.L234
 1893 012c 0829     		cmp	r1, #8
 1894 012e 0ED1     		bne	.L332
 737:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_8;
 1895              		.loc 1 737 0
 1896 0130 8DF82A60 		strb	r6, [sp, #42]
 738:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1897              		.loc 1 738 0
 1898 0134 8DF82B60 		strb	r6, [sp, #43]
 1899 0138 0EE0     		b	.L236
 1900              	.L233:
 743:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_16;
 1901              		.loc 1 743 0
 1902 013a 8DF82AB0 		strb	fp, [sp, #42]
 744:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1903              		.loc 1 744 0
 1904 013e 8DF82BB0 		strb	fp, [sp, #43]
 1905 0142 09E0     		b	.L236
 1906              	.L234:
 749:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_32;
 1907              		.loc 1 749 0
 1908 0144 8DF82A00 		strb	r0, [sp, #42]
 750:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1909              		.loc 1 750 0
 1910 0148 8DF82B00 		strb	r0, [sp, #43]
 1911 014c 04E0     		b	.L236
 1912              	.L332:
 755:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 1913              		.loc 1 755 0
 1914 014e 2046     		mov	r0, r4
 1915 0150 E047     		blx	ip
 1916              	.LVL183:
 756:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 1917              		.loc 1 756 0
 1918 0152 607D     		ldrb	r0, [r4, #21]	@ zero_extendqisi2
 1919 0154 D047     		blx	r10
 1920              	.LVL184:
 1921 0156 D5E0     		b	.L341
 1922              	.L236:
 760:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1923              		.loc 1 760 0
 1924 0158 012B     		cmp	r3, #1
 1925 015a 06D0     		beq	.L239
 1926 015c 03D3     		bcc	.L240
 1927 015e 022B     		cmp	r3, #2
 1928 0160 47D1     		bne	.L335
 769:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1929              		.loc 1 769 0
 1930 0162 0420     		movs	r0, #4
 1931 0164 02E0     		b	.L338
 1932              	.L240:
 763:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1933              		.loc 1 763 0
 1934 0166 0020     		movs	r0, #0
 1935 0168 00E0     		b	.L338
 1936              	.L239:
 766:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1937              		.loc 1 766 0
 1938 016a 0220     		movs	r0, #2
 1939              	.L338:
 712:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1940              		.loc 1 712 0
 1941 016c BDF80820 		ldrh	r2, [sp, #8]
 1942 0170 19FB02F6 		smulbb	r6, r9, r2
 785:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->data_size)
 1943              		.loc 1 785 0
 1944 0174 55F82350 		ldr	r5, [r5, r3, lsl #2]
 786:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1945              		.loc 1 786 0
 1946 0178 1029     		cmp	r1, #16
 769:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1947              		.loc 1 769 0
 1948 017a 8DF82F00 		strb	r0, [sp, #47]
 778:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1949              		.loc 1 778 0
 1950 017e A069     		ldr	r0, [r4, #24]
 782:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.trans_type = MEM_TO_PER;
 1951              		.loc 1 782 0
 1952 0180 B6B2     		uxth	r6, r6
 778:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1953              		.loc 1 778 0
 1954 0182 0E90     		str	r0, [sp, #56]
 785:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->data_size)
 1955              		.loc 1 785 0
 1956 0184 05F16005 		add	r5, r5, #96
 781:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.length = tx_len;
 1957              		.loc 1 781 0
 1958 0188 607B     		ldrb	r0, [r4, #13]	@ zero_extendqisi2
 1959 018a 8DF83C00 		strb	r0, [sp, #60]
 783:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_addr = (uint32_t)tx_buf;
 1960              		.loc 1 783 0
 1961 018e 4FF00100 		mov	r0, #1
 784:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.dst_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 1962              		.loc 1 784 0
 1963 0192 019A     		ldr	r2, [sp, #4]
 782:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.trans_type = MEM_TO_PER;
 1964              		.loc 1 782 0
 1965 0194 1296     		str	r6, [sp, #72]
 783:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_addr = (uint32_t)tx_buf;
 1966              		.loc 1 783 0
 1967 0196 8DF85000 		strb	r0, [sp, #80]
 784:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.dst_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 1968              		.loc 1 784 0
 1969 019a 1092     		str	r2, [sp, #64]
 785:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->data_size)
 1970              		.loc 1 785 0
 1971 019c 1195     		str	r5, [sp, #68]
 786:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1972              		.loc 1 786 0
 1973 019e 05D0     		beq	.L244
 1974 01a0 2029     		cmp	r1, #32
 1975 01a2 08D0     		beq	.L245
 1976 01a4 0829     		cmp	r1, #8
 1977 01a6 24D1     		bne	.L335
 790:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_8;
 1978              		.loc 1 790 0
 1979 01a8 0021     		movs	r1, #0
 1980 01aa 05E0     		b	.L339
 1981              	.L244:
 796:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_16;
 1982              		.loc 1 796 0
 1983 01ac 8DF84E00 		strb	r0, [sp, #78]
 797:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1984              		.loc 1 797 0
 1985 01b0 8DF84F00 		strb	r0, [sp, #79]
 1986 01b4 04E0     		b	.L247
 1987              	.L245:
 802:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_32;
 1988              		.loc 1 802 0
 1989 01b6 0221     		movs	r1, #2
 1990              	.L339:
 1991 01b8 8DF84E10 		strb	r1, [sp, #78]
 803:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1992              		.loc 1 803 0
 1993 01bc 8DF84F10 		strb	r1, [sp, #79]
 1994              	.L247:
 813:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1995              		.loc 1 813 0
 1996 01c0 012B     		cmp	r3, #1
 1997 01c2 06D0     		beq	.L249
 1998 01c4 03D3     		bcc	.L250
 1999 01c6 022B     		cmp	r3, #2
 2000 01c8 13D1     		bne	.L335
 822:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 2001              		.loc 1 822 0
 2002 01ca 0523     		movs	r3, #5
 2003 01cc 02E0     		b	.L340
 2004              	.L250:
 816:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 2005              		.loc 1 816 0
 2006 01ce 0123     		movs	r3, #1
 2007 01d0 00E0     		b	.L340
 2008              	.L249:
 819:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 2009              		.loc 1 819 0
 2010 01d2 0323     		movs	r3, #3
 2011              	.L340:
 822:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 2012              		.loc 1 822 0
 2013 01d4 8DF85330 		strb	r3, [sp, #83]
 833:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	ret = hal_dma_init(&dma_rx);
 2014              		.loc 1 833 0
 2015 01d8 0020     		movs	r0, #0
 831:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2016              		.loc 1 831 0
 2017 01da 2369     		ldr	r3, [r4, #16]
 2018 01dc 1793     		str	r3, [sp, #92]
 833:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	ret = hal_dma_init(&dma_rx);
 2019              		.loc 1 833 0
 2020 01de 1C4B     		ldr	r3, .L344+20
 2021 01e0 9847     		blx	r3
 2022              	.LVL185:
 834:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != HAL_DMA_OK)
 2023              		.loc 1 834 0
 2024 01e2 1C4D     		ldr	r5, .L344+24
 2025 01e4 06A8     		add	r0, sp, #24
 2026 01e6 A847     		blx	r5
 2027              	.LVL186:
 835:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 2028              		.loc 1 835 0
 2029 01e8 80B2     		uxth	r0, r0
 2030              	.LVL187:
 2031 01ea 0028     		cmp	r0, #0
 2032 01ec 40F08A80 		bne	.L341
 2033 01f0 05E0     		b	.L253
 2034              	.LVL188:
 2035              	.L335:
 826:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 2036              		.loc 1 826 0
 2037 01f2 2046     		mov	r0, r4
 2038 01f4 184B     		ldr	r3, .L344+28
 2039 01f6 9847     		blx	r3
 2040              	.LVL189:
 827:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 2041              		.loc 1 827 0
 2042 01f8 607D     		ldrb	r0, [r4, #21]	@ zero_extendqisi2
 2043 01fa B847     		blx	r7
 2044              	.LVL190:
 2045 01fc 82E0     		b	.L341
 2046              	.LVL191:
 2047              	.L253:
 838:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != HAL_DMA_OK)
 2048              		.loc 1 838 0
 2049 01fe 0FA8     		add	r0, sp, #60
 2050 0200 A847     		blx	r5
 2051              	.LVL192:
 839:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 2052              		.loc 1 839 0
 2053 0202 80B2     		uxth	r0, r0
 2054              	.LVL193:
 2055 0204 0028     		cmp	r0, #0
 2056 0206 7DD1     		bne	.L341
 842:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	flush_cache((unsigned long)rx_buf, rx_len);
 2057              		.loc 1 842 0
 2058 0208 0198     		ldr	r0, [sp, #4]
 2059 020a 3146     		mov	r1, r6
 2060 020c 134D     		ldr	r5, .L344+32
 2061 020e A847     		blx	r5
 2062              	.LVL194:
 843:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	ret = hal_spi_init(spi);
 2063              		.loc 1 843 0
 2064 0210 0098     		ldr	r0, [sp]
 2065 0212 4146     		mov	r1, r8
 2066 0214 A847     		blx	r5
 2067              	.LVL195:
 844:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != SPI_OK)
 2068              		.loc 1 844 0
 2069 0216 2046     		mov	r0, r4
 2070 0218 114B     		ldr	r3, .L344+36
 2071 021a 9847     		blx	r3
 2072              	.LVL196:
 845:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 2073              		.loc 1 845 0
 2074 021c 80B2     		uxth	r0, r0
 2075              	.LVL197:
 2076 021e 0028     		cmp	r0, #0
 2077 0220 70D1     		bne	.L341
 848:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != HAL_DMA_OK)
 2078              		.loc 1 848 0
 2079 0222 607D     		ldrb	r0, [r4, #21]	@ zero_extendqisi2
 2080 0224 0F4D     		ldr	r5, .L344+40
 2081 0226 A847     		blx	r5
 2082              	.LVL198:
 849:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 2083              		.loc 1 849 0
 2084 0228 80B2     		uxth	r0, r0
 2085              	.LVL199:
 2086 022a 0028     		cmp	r0, #0
 2087 022c 6AD1     		bne	.L341
 852:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != HAL_DMA_OK)
 2088              		.loc 1 852 0
 2089 022e 607B     		ldrb	r0, [r4, #13]	@ zero_extendqisi2
 2090 0230 A847     		blx	r5
 2091              	.LVL200:
 853:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 2092              		.loc 1 853 0
 2093 0232 80B2     		uxth	r0, r0
 2094              	.LVL201:
 2095 0234 0028     		cmp	r0, #0
 2096 0236 65D1     		bne	.L341
 2097 0238 DFE0     		b	.L255
 2098              	.L345:
 2099 023a 00BF     		.align	2
 2100              	.L344:
 2101 023c 00000000 		.word	.LANCHOR0
 2102 0240 00000000 		.word	memset
 2103 0244 00000000 		.word	.LANCHOR11
 2104 0248 00000000 		.word	assert_failed
 2105 024c 00000000 		.word	hal_spi_dma_init
 2106 0250 00000000 		.word	hal_dma_enable_global_interrupt
 2107 0254 00000000 		.word	hal_dma_init
 2108 0258 00000000 		.word	hal_spi_disable
 2109 025c 00000000 		.word	flush_cache
 2110 0260 00000000 		.word	hal_spi_init
 2111 0264 00000000 		.word	hal_dma_channel_enable
 2112 0268 00000000 		.word	hal_dma_deinit
 2113              	.LVL202:
 2114              	.L224:
 2115              	.LBE29:
 2116              	.LBE28:
 2117              	.LBB30:
 2118              	.LBB31:
 862:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t buff_size = 0;
 2119              		.loc 1 862 0
 2120 026c 0023     		movs	r3, #0
 2121 026e 0693     		str	r3, [sp, #24]
 2122              	.LVL203:
 869:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2123              		.loc 1 869 0
 2124 0270 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 2125 0272 082B     		cmp	r3, #8
 2126 0274 08D0     		beq	.L256
 2127 0276 102B     		cmp	r3, #16
 2128 0278 06D0     		beq	.L256
 2129 027a 202B     		cmp	r3, #32
 2130 027c 04D0     		beq	.L256
 2131 027e 6048     		ldr	r0, .L346
 2132              	.LVL204:
 2133 0280 40F26531 		movw	r1, #869
 2134              	.LVL205:
 2135 0284 5F4B     		ldr	r3, .L346+4
 2136 0286 9847     		blx	r3
 2137              	.LVL206:
 2138              	.L256:
 870:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 2139              		.loc 1 870 0
 2140 0288 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 2141 028a 032B     		cmp	r3, #3
 2142 028c 04D9     		bls	.L257
 2143 028e 5C48     		ldr	r0, .L346
 2144 0290 40F26631 		movw	r1, #870
 2145 0294 5B4B     		ldr	r3, .L346+4
 2146 0296 9847     		blx	r3
 2147              	.LVL207:
 2148              	.L257:
 871:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 2149              		.loc 1 871 0
 2150 0298 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 2151 029a 022B     		cmp	r3, #2
 2152 029c 04D9     		bls	.L258
 2153 029e 5848     		ldr	r0, .L346
 2154 02a0 40F26731 		movw	r1, #871
 2155 02a4 574B     		ldr	r3, .L346+4
 2156 02a6 9847     		blx	r3
 2157              	.LVL208:
 2158              	.L258:
 872:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 2159              		.loc 1 872 0
 2160 02a8 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 2161 02aa 022B     		cmp	r3, #2
 2162 02ac 04D9     		bls	.L259
 2163 02ae 5448     		ldr	r0, .L346
 2164 02b0 4FF45A71 		mov	r1, #872
 2165 02b4 534B     		ldr	r3, .L346+4
 2166 02b6 9847     		blx	r3
 2167              	.LVL209:
 2168              	.L259:
 873:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2169              		.loc 1 873 0
 2170 02b8 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 2171 02ba 022B     		cmp	r3, #2
 2172 02bc 04D9     		bls	.L260
 2173 02be 5048     		ldr	r0, .L346
 2174 02c0 40F26931 		movw	r1, #873
 2175 02c4 4F4B     		ldr	r3, .L346+4
 2176 02c6 9847     		blx	r3
 2177              	.LVL210:
 2178              	.L260:
 875:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					buff->rxbuf.buf == NULL || buff->rxbuf.len == 0 ||
 2179              		.loc 1 875 0
 2180 02c8 FB68     		ldr	r3, [r7, #12]
 2181 02ca 3BB1     		cbz	r3, .L261
 2182 02cc 3B89     		ldrh	r3, [r7, #8]
 2183 02ce 2BB1     		cbz	r3, .L261
 2184 02d0 7A68     		ldr	r2, [r7, #4]
 2185 02d2 1AB1     		cbz	r2, .L261
 2186 02d4 3A88     		ldrh	r2, [r7]
 2187 02d6 0AB1     		cbz	r2, .L261
 2188 02d8 9A42     		cmp	r2, r3
 2189 02da 04D0     		beq	.L262
 2190              	.L261:
 2191 02dc 4848     		ldr	r0, .L346
 2192 02de 40F26D31 		movw	r1, #877
 2193 02e2 484B     		ldr	r3, .L346+4
 2194 02e4 9847     		blx	r3
 2195              	.LVL211:
 2196              	.L262:
 880:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	buff->txbuf.counter = 0;
 2197              		.loc 1 880 0
 2198 02e6 0023     		movs	r3, #0
 884:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2199              		.loc 1 884 0
 2200 02e8 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 2201 02ea 0121     		movs	r1, #1
 879:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	buff->rxbuf.counter = 0;
 2202              		.loc 1 879 0
 2203 02ec 3889     		ldrh	r0, [r7, #8]
 2204              	.LVL212:
 884:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2205              		.loc 1 884 0
 2206 02ee 55F82220 		ldr	r2, [r5, r2, lsl #2]
 880:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	buff->txbuf.counter = 0;
 2207              		.loc 1 880 0
 2208 02f2 7B80     		strh	r3, [r7, #2]	@ movhi
 881:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2209              		.loc 1 881 0
 2210 02f4 7B81     		strh	r3, [r7, #10]	@ movhi
 884:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2211              		.loc 1 884 0
 2212 02f6 9160     		str	r1, [r2, #8]
 865:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	int rx_fifo = 0;
 2213              		.loc 1 865 0
 2214 02f8 1A46     		mov	r2, r3
 2215 02fa 2DE0     		b	.L263
 2216              	.LVL213:
 2217              	.L336:
 928:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					return SPI_ERROR;
 2218              		.loc 1 928 0
 2219 02fc 0022     		movs	r2, #0
 2220              	.LVL214:
 2221 02fe 55F82130 		ldr	r3, [r5, r1, lsl #2]
 2222              	.LVL215:
 2223 0302 9A60     		str	r2, [r3, #8]
 2224              	.LVL216:
 2225              	.L341:
 929:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 2226              		.loc 1 929 0
 2227 0304 0E20     		movs	r0, #14
 2228 0306 78E0     		b	.L255
 2229              	.LVL217:
 2230              	.L272:
 906:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 2231              		.loc 1 906 0
 2232 0308 2679     		ldrb	r6, [r4, #4]	@ zero_extendqisi2
 2233 030a 102E     		cmp	r6, #16
 2234 030c 31D0     		beq	.L268
 2235 030e 202E     		cmp	r6, #32
 2236 0310 34D0     		beq	.L269
 2237 0312 082E     		cmp	r6, #8
 2238 0314 F2D1     		bne	.L336
 910:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_tx++;
 2239              		.loc 1 910 0
 2240 0316 FE68     		ldr	r6, [r7, #12]
 2241 0318 16F80280 		ldrb	r8, [r6, r2]	@ zero_extendqisi2
 2242              	.LVL218:
 911:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 2243              		.loc 1 911 0
 2244 031c 0132     		adds	r2, r2, #1
 2245              	.LVL219:
 2246              	.L271:
 903:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 2247              		.loc 1 903 0
 2248 031e 0CF1010C 		add	ip, ip, #1
 2249              	.LVL220:
 933:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			buff->txbuf.counter = idx_tx;
 2250              		.loc 1 933 0
 2251 0322 55F82160 		ldr	r6, [r5, r1, lsl #2]
 2252 0326 C6F86080 		str	r8, [r6, #96]
 934:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 2253              		.loc 1 934 0
 2254 032a 7A81     		strh	r2, [r7, #10]	@ movhi
 2255              	.LVL221:
 2256              	.L266:
 903:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 2257              		.loc 1 903 0
 2258 032c F445     		cmp	ip, lr
 2259 032e EBD1     		bne	.L272
 937:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 2260              		.loc 1 937 0
 2261 0330 69BB     		cbnz	r1, .L273
 2262              	.LVL222:
 2263              	.LBB32:
 2264              	.LBB33:
 125:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		time_out--;
 2265              		.loc 1 125 0
 2266 0332 D5F800E0 		ldr	lr, [r5]
 2267              	.LVL223:
 119:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t status_reg = 0;
 2268              		.loc 1 119 0
 2269 0336 44F62061 		movw	r1, #20000
 2270 033a 0F91     		str	r1, [sp, #60]
 2271              	.LVL224:
 2272              	.L276:
 125:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		time_out--;
 2273              		.loc 1 125 0
 2274 033c DEF82810 		ldr	r1, [lr, #40]
 2275              	.LVL225:
 126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	} while(((status_reg & (SR_TF_EMPT | SR_BUSY)) != SR_TF_EMPT)
 2276              		.loc 1 126 0
 2277 0340 0F9E     		ldr	r6, [sp, #60]
 127:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			&& (time_out > 0));
 2278              		.loc 1 127 0
 2279 0342 01F00501 		and	r1, r1, #5
 2280              	.LVL226:
 126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	} while(((status_reg & (SR_TF_EMPT | SR_BUSY)) != SR_TF_EMPT)
 2281              		.loc 1 126 0
 2282 0346 013E     		subs	r6, r6, #1
 128:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2283              		.loc 1 128 0
 2284 0348 0429     		cmp	r1, #4
 126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	} while(((status_reg & (SR_TF_EMPT | SR_BUSY)) != SR_TF_EMPT)
 2285              		.loc 1 126 0
 2286 034a 0F96     		str	r6, [sp, #60]
 128:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2287              		.loc 1 128 0
 2288 034c 1BD1     		bne	.L274
 2289              	.L277:
 130:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2290              		.loc 1 130 0
 2291 034e DEF82410 		ldr	r1, [lr, #36]
 2292              	.LVL227:
 2293 0352 C9B2     		uxtb	r1, r1
 2294              	.LVL228:
 2295              	.L278:
 2296              	.LBE33:
 2297              	.LBE32:
 958:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 2298              		.loc 1 958 0
 2299 0354 0029     		cmp	r1, #0
 2300 0356 2BDC     		bgt	.L286
 2301              	.LVL229:
 2302              	.L263:
 2303 0358 6178     		ldrb	r1, [r4, #1]	@ zero_extendqisi2
 886:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 2304              		.loc 1 886 0
 2305 035a 0028     		cmp	r0, #0
 2306 035c 4AD0     		beq	.L342
 889:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 2307              		.loc 1 889 0
 2308 035e 2028     		cmp	r0, #32
 891:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			buff_size = 0;
 2309              		.loc 1 891 0
 2310 0360 95BF     		itete	ls
 2311 0362 8646     		movls	lr, r0
 2312              	.LVL230:
 897:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 2313              		.loc 1 897 0
 2314 0364 2038     		subhi	r0, r0, #32
 2315              	.LVL231:
 892:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 2316              		.loc 1 892 0
 2317 0366 0020     		movls	r0, #0
 2318              	.LVL232:
 896:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			buff_size -= SPI_FIFO_DEPTH;
 2319              		.loc 1 896 0
 2320 0368 4FF0200E 		movhi	lr, #32
 2321              	.LVL233:
 903:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 2322              		.loc 1 903 0
 2323 036c 4FF0000C 		mov	ip, #0
 2324 0370 DCE7     		b	.L266
 2325              	.LVL234:
 2326              	.L268:
 916:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_tx += 2;
 2327              		.loc 1 916 0
 2328 0372 FE68     		ldr	r6, [r7, #12]
 2329 0374 36F80280 		ldrh	r8, [r6, r2]
 2330              	.LVL235:
 917:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 2331              		.loc 1 917 0
 2332 0378 0232     		adds	r2, r2, #2
 2333              	.LVL236:
 2334 037a D0E7     		b	.L271
 2335              	.LVL237:
 2336              	.L269:
 922:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_tx += 4;
 2337              		.loc 1 922 0
 2338 037c FE68     		ldr	r6, [r7, #12]
 2339 037e 56F80280 		ldr	r8, [r6, r2]
 2340              	.LVL238:
 923:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 2341              		.loc 1 923 0
 2342 0382 0432     		adds	r2, r2, #4
 2343              	.LVL239:
 2344 0384 CBE7     		b	.L271
 2345              	.LVL240:
 2346              	.L274:
 2347              	.LBB35:
 2348              	.LBB34:
 128:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2349              		.loc 1 128 0
 2350 0386 0F99     		ldr	r1, [sp, #60]
 2351 0388 0029     		cmp	r1, #0
 2352 038a D7D1     		bne	.L276
 2353 038c DFE7     		b	.L277
 2354              	.LVL241:
 2355              	.L273:
 2356              	.LBE34:
 2357              	.LBE35:
 946:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 2358              		.loc 1 946 0
 2359 038e 55F82110 		ldr	r1, [r5, r1, lsl #2]
 945:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			while(spi_hw[spi->channel].spix->RXFLR != count)
 2360              		.loc 1 945 0
 2361 0392 1D4E     		ldr	r6, .L346+8
 2362 0394 0696     		str	r6, [sp, #24]
 2363              	.L279:
 946:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 2364              		.loc 1 946 0
 2365 0396 4E6A     		ldr	r6, [r1, #36]
 2366 0398 7645     		cmp	r6, lr
 2367 039a 07D0     		beq	.L343
 948:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				if(time_out == 0)
 2368              		.loc 1 948 0
 2369 039c 069E     		ldr	r6, [sp, #24]
 2370 039e 013E     		subs	r6, r6, #1
 2371 03a0 0696     		str	r6, [sp, #24]
 949:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 2372              		.loc 1 949 0
 2373 03a2 069E     		ldr	r6, [sp, #24]
 2374 03a4 002E     		cmp	r6, #0
 2375 03a6 F6D1     		bne	.L279
 951:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					return SPI_ERROR;
 2376              		.loc 1 951 0
 2377 03a8 8E60     		str	r6, [r1, #8]
 2378 03aa ABE7     		b	.L341
 2379              	.L343:
 955:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 2380              		.loc 1 955 0
 2381 03ac 496A     		ldr	r1, [r1, #36]
 2382              	.LVL242:
 2383 03ae D1E7     		b	.L278
 2384              	.LVL243:
 2385              	.L286:
 960:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2386              		.loc 1 960 0
 2387 03b0 6678     		ldrb	r6, [r4, #1]	@ zero_extendqisi2
 2388 03b2 55F826C0 		ldr	ip, [r5, r6, lsl #2]
 962:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 2389              		.loc 1 962 0
 2390 03b6 2679     		ldrb	r6, [r4, #4]	@ zero_extendqisi2
 2391 03b8 102E     		cmp	r6, #16
 960:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2392              		.loc 1 960 0
 2393 03ba DCF860E0 		ldr	lr, [ip, #96]
 2394              	.LVL244:
 962:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 2395              		.loc 1 962 0
 2396 03be 08D0     		beq	.L282
 2397 03c0 202E     		cmp	r6, #32
 2398 03c2 0BD0     		beq	.L283
 2399 03c4 082E     		cmp	r6, #8
 2400 03c6 0ED1     		bne	.L337
 966:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_rx++;
 2401              		.loc 1 966 0
 2402 03c8 7E68     		ldr	r6, [r7, #4]
 2403 03ca 06F803E0 		strb	lr, [r6, r3]
 967:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 2404              		.loc 1 967 0
 2405 03ce 0133     		adds	r3, r3, #1
 2406              	.LVL245:
 2407 03d0 0DE0     		b	.L285
 2408              	.L282:
 972:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_rx += 2;
 2409              		.loc 1 972 0
 2410 03d2 7E68     		ldr	r6, [r7, #4]
 2411 03d4 26F803E0 		strh	lr, [r6, r3]	@ movhi
 973:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 2412              		.loc 1 973 0
 2413 03d8 0233     		adds	r3, r3, #2
 2414              	.LVL246:
 2415 03da 08E0     		b	.L285
 2416              	.L283:
 978:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_rx += 4;
 2417              		.loc 1 978 0
 2418 03dc 7E68     		ldr	r6, [r7, #4]
 2419 03de 46F803E0 		str	lr, [r6, r3]
 979:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 2420              		.loc 1 979 0
 2421 03e2 0433     		adds	r3, r3, #4
 2422              	.LVL247:
 2423 03e4 03E0     		b	.L285
 2424              	.L337:
 985:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					return SPI_ERROR;
 2425              		.loc 1 985 0
 2426 03e6 0023     		movs	r3, #0
 2427              	.LVL248:
 2428 03e8 CCF80830 		str	r3, [ip, #8]
 2429 03ec 8AE7     		b	.L341
 2430              	.LVL249:
 2431              	.L285:
 989:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			rx_fifo--;
 2432              		.loc 1 989 0
 2433 03ee 7B80     		strh	r3, [r7, #2]	@ movhi
 990:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 2434              		.loc 1 990 0
 2435 03f0 0139     		subs	r1, r1, #1
 2436              	.LVL250:
 2437 03f2 AFE7     		b	.L278
 2438              	.LVL251:
 2439              	.L342:
 994:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return SPI_OK;
 2440              		.loc 1 994 0
 2441 03f4 55F82130 		ldr	r3, [r5, r1, lsl #2]
 2442              	.LVL252:
 2443 03f8 9860     		str	r0, [r3, #8]
 2444              	.LVL253:
 2445              	.L255:
 2446              	.LBE31:
 2447              	.LBE30:
1018:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2448              		.loc 1 1018 0
 2449 03fa 19B0     		add	sp, sp, #100
 2450              	.LCFI19:
 2451              		.cfi_def_cfa_offset 36
 2452              		@ sp needed
 2453 03fc BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2454              	.LVL254:
 2455              	.L347:
 2456              		.align	2
 2457              	.L346:
 2458 0400 00000000 		.word	.LANCHOR12
 2459 0404 00000000 		.word	assert_failed
 2460 0408 006A1800 		.word	1600000
 2461              		.cfi_endproc
 2462              	.LFE16:
 2464              		.section	.text.hal_spi_interrupt_init,"ax",%progbits
 2465              		.align	1
 2466              		.global	hal_spi_interrupt_init
 2467              		.thumb
 2468              		.thumb_func
 2470              	hal_spi_interrupt_init:
 2471              	.LFB18:
1047:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t reg_tmp = 0;
 2472              		.loc 1 1047 0
 2473              		.cfi_startproc
 2474              		@ args = 0, pretend = 0, frame = 0
 2475              		@ frame_needed = 0, uses_anonymous_args = 0
 2476              	.LVL255:
 2477 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2478              	.LCFI20:
 2479              		.cfi_def_cfa_offset 24
 2480              		.cfi_offset 3, -24
 2481              		.cfi_offset 4, -20
 2482              		.cfi_offset 5, -16
 2483              		.cfi_offset 6, -12
 2484              		.cfi_offset 7, -8
 2485              		.cfi_offset 14, -4
1051:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2486              		.loc 1 1051 0
 2487 0002 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 2488 0004 082B     		cmp	r3, #8
1047:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t reg_tmp = 0;
 2489              		.loc 1 1047 0
 2490 0006 0646     		mov	r6, r0
 2491 0008 0C46     		mov	r4, r1
1051:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2492              		.loc 1 1051 0
 2493 000a 08D0     		beq	.L349
1051:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2494              		.loc 1 1051 0 is_stmt 0 discriminator 1
 2495 000c 102B     		cmp	r3, #16
 2496 000e 06D0     		beq	.L349
1051:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2497              		.loc 1 1051 0 discriminator 2
 2498 0010 202B     		cmp	r3, #32
 2499 0012 04D0     		beq	.L349
1051:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2500              		.loc 1 1051 0 discriminator 3
 2501 0014 5948     		ldr	r0, .L377
 2502              	.LVL256:
 2503 0016 40F21B41 		movw	r1, #1051
 2504              	.LVL257:
 2505 001a 594B     		ldr	r3, .L377+4
 2506 001c 9847     		blx	r3
 2507              	.LVL258:
 2508              	.L349:
1052:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
 2509              		.loc 1 1052 0 is_stmt 1
 2510 001e F378     		ldrb	r3, [r6, #3]	@ zero_extendqisi2
 2511 0020 032B     		cmp	r3, #3
 2512 0022 04D9     		bls	.L350
1052:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
 2513              		.loc 1 1052 0 is_stmt 0 discriminator 1
 2514 0024 5548     		ldr	r0, .L377
 2515 0026 40F21C41 		movw	r1, #1052
 2516 002a 554B     		ldr	r3, .L377+4
 2517 002c 9847     		blx	r3
 2518              	.LVL259:
 2519              	.L350:
1053:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 2520              		.loc 1 1053 0 is_stmt 1
 2521 002e 7379     		ldrb	r3, [r6, #5]	@ zero_extendqisi2
 2522 0030 032B     		cmp	r3, #3
 2523 0032 04D9     		bls	.L351
1053:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 2524              		.loc 1 1053 0 is_stmt 0 discriminator 1
 2525 0034 5148     		ldr	r0, .L377
 2526 0036 40F21D41 		movw	r1, #1053
 2527 003a 514B     		ldr	r3, .L377+4
 2528 003c 9847     		blx	r3
 2529              	.LVL260:
 2530              	.L351:
1054:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 2531              		.loc 1 1054 0 is_stmt 1
 2532 003e B378     		ldrb	r3, [r6, #2]	@ zero_extendqisi2
 2533 0040 022B     		cmp	r3, #2
 2534 0042 04D9     		bls	.L352
1054:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 2535              		.loc 1 1054 0 is_stmt 0 discriminator 1
 2536 0044 4D48     		ldr	r0, .L377
 2537 0046 40F21E41 		movw	r1, #1054
 2538 004a 4D4B     		ldr	r3, .L377+4
 2539 004c 9847     		blx	r3
 2540              	.LVL261:
 2541              	.L352:
1055:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 2542              		.loc 1 1055 0 is_stmt 1
 2543 004e 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 2544 0050 022B     		cmp	r3, #2
 2545 0052 04D9     		bls	.L353
1055:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 2546              		.loc 1 1055 0 is_stmt 0 discriminator 1
 2547 0054 4948     		ldr	r0, .L377
 2548 0056 40F21F41 		movw	r1, #1055
 2549 005a 494B     		ldr	r3, .L377+4
 2550 005c 9847     		blx	r3
 2551              	.LVL262:
 2552              	.L353:
1056:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2553              		.loc 1 1056 0 is_stmt 1
 2554 005e 7378     		ldrb	r3, [r6, #1]	@ zero_extendqisi2
 2555 0060 022B     		cmp	r3, #2
 2556 0062 04D9     		bls	.L354
1056:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2557              		.loc 1 1056 0 is_stmt 0 discriminator 1
 2558 0064 4548     		ldr	r0, .L377
 2559 0066 4FF48461 		mov	r1, #1056
 2560 006a 454B     		ldr	r3, .L377+4
 2561 006c 9847     		blx	r3
 2562              	.LVL263:
 2563              	.L354:
1059:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->rx_fifo_overflow));
 2564              		.loc 1 1059 0 is_stmt 1
 2565 006e E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 2566 0070 012B     		cmp	r3, #1
 2567 0072 04D9     		bls	.L355
1059:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->rx_fifo_overflow));
 2568              		.loc 1 1059 0 is_stmt 0 discriminator 1
 2569 0074 4148     		ldr	r0, .L377
 2570 0076 40F22341 		movw	r1, #1059
 2571 007a 414B     		ldr	r3, .L377+4
 2572 007c 9847     		blx	r3
 2573              	.LVL264:
 2574              	.L355:
1060:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->rx_fifo_underflow));
 2575              		.loc 1 1060 0 is_stmt 1
 2576 007e 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 2577 0080 012B     		cmp	r3, #1
 2578 0082 04D9     		bls	.L356
1060:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->rx_fifo_underflow));
 2579              		.loc 1 1060 0 is_stmt 0 discriminator 1
 2580 0084 3D48     		ldr	r0, .L377
 2581 0086 40F22441 		movw	r1, #1060
 2582 008a 3D4B     		ldr	r3, .L377+4
 2583 008c 9847     		blx	r3
 2584              	.LVL265:
 2585              	.L356:
1061:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->tx_fifo_empty));
 2586              		.loc 1 1061 0 is_stmt 1
 2587 008e 6379     		ldrb	r3, [r4, #5]	@ zero_extendqisi2
 2588 0090 012B     		cmp	r3, #1
 2589 0092 04D9     		bls	.L357
1061:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->tx_fifo_empty));
 2590              		.loc 1 1061 0 is_stmt 0 discriminator 1
 2591 0094 3948     		ldr	r0, .L377
 2592 0096 40F22541 		movw	r1, #1061
 2593 009a 394B     		ldr	r3, .L377+4
 2594 009c 9847     		blx	r3
 2595              	.LVL266:
 2596              	.L357:
1062:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->tx_fifo_overflow));
 2597              		.loc 1 1062 0 is_stmt 1
 2598 009e E379     		ldrb	r3, [r4, #7]	@ zero_extendqisi2
 2599 00a0 012B     		cmp	r3, #1
 2600 00a2 04D9     		bls	.L358
1062:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->tx_fifo_overflow));
 2601              		.loc 1 1062 0 is_stmt 0 discriminator 1
 2602 00a4 3548     		ldr	r0, .L377
 2603 00a6 40F22641 		movw	r1, #1062
 2604 00aa 354B     		ldr	r3, .L377+4
 2605 00ac 9847     		blx	r3
 2606              	.LVL267:
 2607              	.L358:
1063:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->multi_master_contention));
 2608              		.loc 1 1063 0 is_stmt 1
 2609 00ae A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 2610 00b0 012B     		cmp	r3, #1
 2611 00b2 04D9     		bls	.L359
1063:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->multi_master_contention));
 2612              		.loc 1 1063 0 is_stmt 0 discriminator 1
 2613 00b4 3148     		ldr	r0, .L377
 2614 00b6 40F22741 		movw	r1, #1063
 2615 00ba 314B     		ldr	r3, .L377+4
 2616 00bc 9847     		blx	r3
 2617              	.LVL268:
 2618              	.L359:
1064:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(interrupt->rx_fifo_threshold > 31));
 2619              		.loc 1 1064 0 is_stmt 1
 2620 00be A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 2621 00c0 012B     		cmp	r3, #1
 2622 00c2 04D9     		bls	.L360
1064:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(interrupt->rx_fifo_threshold > 31));
 2623              		.loc 1 1064 0 is_stmt 0 discriminator 1
 2624 00c4 2D48     		ldr	r0, .L377
 2625 00c6 4FF48561 		mov	r1, #1064
 2626 00ca 2D4B     		ldr	r3, .L377+4
 2627 00cc 9847     		blx	r3
 2628              	.LVL269:
 2629              	.L360:
1065:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(interrupt->tx_fifo_threshold > 31));
 2630              		.loc 1 1065 0 is_stmt 1
 2631 00ce 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 2632 00d0 1F2B     		cmp	r3, #31
 2633 00d2 04D9     		bls	.L361
1065:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(interrupt->tx_fifo_threshold > 31));
 2634              		.loc 1 1065 0 is_stmt 0 discriminator 1
 2635 00d4 2948     		ldr	r0, .L377
 2636 00d6 40F22941 		movw	r1, #1065
 2637 00da 294B     		ldr	r3, .L377+4
 2638 00dc 9847     		blx	r3
 2639              	.LVL270:
 2640              	.L361:
1066:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2641              		.loc 1 1066 0 is_stmt 1
 2642 00de 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 2643 00e0 1F2B     		cmp	r3, #31
 2644 00e2 04D9     		bls	.L362
1066:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2645              		.loc 1 1066 0 is_stmt 0 discriminator 1
 2646 00e4 2548     		ldr	r0, .L377
 2647 00e6 40F22A41 		movw	r1, #1066
 2648 00ea 254B     		ldr	r3, .L377+4
 2649 00ec 9847     		blx	r3
 2650              	.LVL271:
 2651              	.L362:
1070:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2652              		.loc 1 1070 0 is_stmt 1
 2653 00ee DFF8ACE0 		ldr	lr, .L377+32
 2654 00f2 7178     		ldrb	r1, [r6, #1]	@ zero_extendqisi2
 2655 00f4 2278     		ldrb	r2, [r4]	@ zero_extendqisi2
1086:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.multi_master_handler;
 2656              		.loc 1 1086 0
 2657 00f6 234F     		ldr	r7, .L377+8
 2658 00f8 A068     		ldr	r0, [r4, #8]
1104:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 2659              		.loc 1 1104 0
 2660 00fa 0129     		cmp	r1, #1
1070:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2661              		.loc 1 1070 0
 2662 00fc 5EF82130 		ldr	r3, [lr, r1, lsl #2]
 2663 0100 9A61     		str	r2, [r3, #24]
1073:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2664              		.loc 1 1073 0
 2665 0102 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 2666 0104 DA61     		str	r2, [r3, #28]
1077:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->rx_fifo_overflow << SPI_INT_RXOI_OFFSET)		|
 2667              		.loc 1 1077 0
 2668 0106 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 2669 0108 4FEA0313 		lsl	r3, r3, #4
1076:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->rx_fifo_full << SPI_INT_RXFI_OFFSET)			|
 2670              		.loc 1 1076 0
 2671 010c A578     		ldrb	r5, [r4, #2]	@ zero_extendqisi2
 2672 010e 43EA4513 		orr	r3, r3, r5, lsl #5
1081:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2673              		.loc 1 1081 0
 2674 0112 E279     		ldrb	r2, [r4, #7]	@ zero_extendqisi2
 2675 0114 43EA0203 		orr	r3, r3, r2
1078:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->rx_fifo_underflow << SPI_INT_RXUI_OFFSET)		|
 2676              		.loc 1 1078 0
 2677 0118 2579     		ldrb	r5, [r4, #4]	@ zero_extendqisi2
 2678 011a 43EAC505 		orr	r5, r3, r5, lsl #3
1079:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->tx_fifo_overflow << SPI_INT_TXOI_OFFSET)		|
 2679              		.loc 1 1079 0
 2680 011e 6379     		ldrb	r3, [r4, #5]	@ zero_extendqisi2
1083:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2681              		.loc 1 1083 0
 2682 0120 4FF00102 		mov	r2, #1
 2683 0124 45EA8303 		orr	r3, r5, r3, lsl #2
1080:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->tx_fifo_empty << SPI_INT_TXEI_OFFSET);
 2684              		.loc 1 1080 0
 2685 0128 A579     		ldrb	r5, [r4, #6]	@ zero_extendqisi2
 2686 012a 43EA4505 		orr	r5, r3, r5, lsl #1
 2687              	.LVL272:
1083:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2688              		.loc 1 1083 0
 2689 012e 164B     		ldr	r3, .L377+12
 2690 0130 5A54     		strb	r2, [r3, r1]
1086:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.multi_master_handler;
 2691              		.loc 1 1086 0
 2692 0132 4FF01802 		mov	r2, #24
 2693 0136 02FB01F2 		mul	r2, r2, r1
 2694 013a 07EB0203 		add	r3, r7, r2
 2695 013e B850     		str	r0, [r7, r2]
1090:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2696              		.loc 1 1090 0
 2697 0140 E268     		ldr	r2, [r4, #12]
1089:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.rx_fifo_full_handler;
 2698              		.loc 1 1089 0
 2699 0142 5A60     		str	r2, [r3, #4]
1093:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2700              		.loc 1 1093 0
 2701 0144 2269     		ldr	r2, [r4, #16]
1092:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.rx_fifo_overflow_handler;
 2702              		.loc 1 1092 0
 2703 0146 9A60     		str	r2, [r3, #8]
1096:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2704              		.loc 1 1096 0
 2705 0148 6269     		ldr	r2, [r4, #20]
1095:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.rx_fifo_underflow_handler;
 2706              		.loc 1 1095 0
 2707 014a DA60     		str	r2, [r3, #12]
1099:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2708              		.loc 1 1099 0
 2709 014c E269     		ldr	r2, [r4, #28]
1098:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.tx_fifo_empty_handler;
 2710              		.loc 1 1098 0
 2711 014e 5A61     		str	r2, [r3, #20]
1102:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2712              		.loc 1 1102 0
 2713 0150 A269     		ldr	r2, [r4, #24]
 2714 0152 7446     		mov	r4, lr
 2715              	.LVL273:
1101:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.tx_fifo_overflow_handler;
 2716              		.loc 1 1101 0
 2717 0154 1A61     		str	r2, [r3, #16]
1104:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 2718              		.loc 1 1104 0
 2719 0156 08D0     		beq	.L364
 2720 0158 04D3     		bcc	.L365
 2721 015a 0229     		cmp	r1, #2
 2722 015c 09D1     		bne	.L363
1113:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 2723              		.loc 1 1113 0
 2724 015e 0720     		movs	r0, #7
 2725 0160 0A49     		ldr	r1, .L377+16
 2726 0162 04E0     		b	.L376
 2727              	.L365:
1107:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 2728              		.loc 1 1107 0
 2729 0164 0020     		movs	r0, #0
 2730 0166 0A49     		ldr	r1, .L377+20
 2731 0168 01E0     		b	.L376
 2732              	.L364:
1110:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 2733              		.loc 1 1110 0
 2734 016a 0A49     		ldr	r1, .L377+24
 2735 016c 0820     		movs	r0, #8
 2736              	.L376:
1113:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 2737              		.loc 1 1113 0
 2738 016e 0A4B     		ldr	r3, .L377+28
 2739 0170 9847     		blx	r3
 2740              	.LVL274:
 2741              	.L363:
1120:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 2742              		.loc 1 1120 0
 2743 0172 7378     		ldrb	r3, [r6, #1]	@ zero_extendqisi2
 2744 0174 54F82330 		ldr	r3, [r4, r3, lsl #2]
 2745 0178 DD62     		str	r5, [r3, #44]
 2746 017a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2747              	.LVL275:
 2748              	.L378:
 2749              		.align	2
 2750              	.L377:
 2751 017c 00000000 		.word	.LANCHOR13
 2752 0180 00000000 		.word	assert_failed
 2753 0184 00000000 		.word	.LANCHOR1
 2754 0188 00000000 		.word	.LANCHOR14
 2755 018c 00000000 		.word	hal_spi_2_irq
 2756 0190 00000000 		.word	hal_spi_0_irq
 2757 0194 00000000 		.word	hal_spi_1_irq
 2758 0198 00000000 		.word	vic_register_irq
 2759 019c 00000000 		.word	.LANCHOR0
 2760              		.cfi_endproc
 2761              	.LFE18:
 2763              		.section	.text.hal_spi_interrupt_deinit,"ax",%progbits
 2764              		.align	1
 2765              		.global	hal_spi_interrupt_deinit
 2766              		.thumb
 2767              		.thumb_func
 2769              	hal_spi_interrupt_deinit:
 2770              	.LFB19:
1124:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 2771              		.loc 1 1124 0
 2772              		.cfi_startproc
 2773              		@ args = 0, pretend = 0, frame = 0
 2774              		@ frame_needed = 0, uses_anonymous_args = 0
 2775              	.LVL276:
1126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2776              		.loc 1 1126 0
 2777 0000 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 2778 0002 082B     		cmp	r3, #8
1124:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 2779              		.loc 1 1124 0
 2780 0004 10B5     		push	{r4, lr}
 2781              	.LCFI21:
 2782              		.cfi_def_cfa_offset 8
 2783              		.cfi_offset 4, -8
 2784              		.cfi_offset 14, -4
1124:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 2785              		.loc 1 1124 0
 2786 0006 0446     		mov	r4, r0
1126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2787              		.loc 1 1126 0
 2788 0008 08D0     		beq	.L380
1126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2789              		.loc 1 1126 0 is_stmt 0 discriminator 1
 2790 000a 102B     		cmp	r3, #16
 2791 000c 06D0     		beq	.L380
1126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2792              		.loc 1 1126 0 discriminator 2
 2793 000e 202B     		cmp	r3, #32
 2794 0010 04D0     		beq	.L380
1126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2795              		.loc 1 1126 0 discriminator 3
 2796 0012 2748     		ldr	r0, .L400
 2797              	.LVL277:
 2798 0014 40F26641 		movw	r1, #1126
 2799 0018 264B     		ldr	r3, .L400+4
 2800 001a 9847     		blx	r3
 2801              	.LVL278:
 2802              	.L380:
1127:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
 2803              		.loc 1 1127 0 is_stmt 1
 2804 001c E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 2805 001e 032B     		cmp	r3, #3
 2806 0020 04D9     		bls	.L381
1127:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
 2807              		.loc 1 1127 0 is_stmt 0 discriminator 1
 2808 0022 2348     		ldr	r0, .L400
 2809 0024 40F26741 		movw	r1, #1127
 2810 0028 224B     		ldr	r3, .L400+4
 2811 002a 9847     		blx	r3
 2812              	.LVL279:
 2813              	.L381:
1128:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 2814              		.loc 1 1128 0 is_stmt 1
 2815 002c 6379     		ldrb	r3, [r4, #5]	@ zero_extendqisi2
 2816 002e 032B     		cmp	r3, #3
 2817 0030 04D9     		bls	.L382
1128:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 2818              		.loc 1 1128 0 is_stmt 0 discriminator 1
 2819 0032 1F48     		ldr	r0, .L400
 2820 0034 4FF48D61 		mov	r1, #1128
 2821 0038 1E4B     		ldr	r3, .L400+4
 2822 003a 9847     		blx	r3
 2823              	.LVL280:
 2824              	.L382:
1129:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 2825              		.loc 1 1129 0 is_stmt 1
 2826 003c A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 2827 003e 022B     		cmp	r3, #2
 2828 0040 04D9     		bls	.L383
1129:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 2829              		.loc 1 1129 0 is_stmt 0 discriminator 1
 2830 0042 1B48     		ldr	r0, .L400
 2831 0044 40F26941 		movw	r1, #1129
 2832 0048 1A4B     		ldr	r3, .L400+4
 2833 004a 9847     		blx	r3
 2834              	.LVL281:
 2835              	.L383:
1130:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 2836              		.loc 1 1130 0 is_stmt 1
 2837 004c 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 2838 004e 022B     		cmp	r3, #2
 2839 0050 04D9     		bls	.L384
1130:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 2840              		.loc 1 1130 0 is_stmt 0 discriminator 1
 2841 0052 1748     		ldr	r0, .L400
 2842 0054 40F26A41 		movw	r1, #1130
 2843 0058 164B     		ldr	r3, .L400+4
 2844 005a 9847     		blx	r3
 2845              	.LVL282:
 2846              	.L384:
1131:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2847              		.loc 1 1131 0 is_stmt 1
 2848 005c 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 2849 005e 022B     		cmp	r3, #2
 2850 0060 04D9     		bls	.L385
1131:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2851              		.loc 1 1131 0 is_stmt 0 discriminator 1
 2852 0062 1348     		ldr	r0, .L400
 2853 0064 40F26B41 		movw	r1, #1131
 2854 0068 124B     		ldr	r3, .L400+4
 2855 006a 9847     		blx	r3
 2856              	.LVL283:
 2857              	.L385:
1134:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->TXFTLR = 0;
 2858              		.loc 1 1134 0 is_stmt 1
 2859 006c 124A     		ldr	r2, .L400+8
1138:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_full_handler = NULL;
 2860              		.loc 1 1138 0
 2861 006e 1821     		movs	r1, #24
1134:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->TXFTLR = 0;
 2862              		.loc 1 1134 0
 2863 0070 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 2864 0072 0020     		movs	r0, #0
1138:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_full_handler = NULL;
 2865              		.loc 1 1138 0
 2866 0074 5943     		muls	r1, r3, r1
1134:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->TXFTLR = 0;
 2867              		.loc 1 1134 0
 2868 0076 52F82320 		ldr	r2, [r2, r3, lsl #2]
1145:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 2869              		.loc 1 1145 0
 2870 007a 012B     		cmp	r3, #1
1138:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_full_handler = NULL;
 2871              		.loc 1 1138 0
 2872 007c 0F4C     		ldr	r4, .L400+12
 2873              	.LVL284:
1134:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->TXFTLR = 0;
 2874              		.loc 1 1134 0
 2875 007e D062     		str	r0, [r2, #44]
1135:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->RXFTLR = 0;
 2876              		.loc 1 1135 0
 2877 0080 9061     		str	r0, [r2, #24]
1136:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt_enable[spi->channel] = DISABLE;
 2878              		.loc 1 1136 0
 2879 0082 D061     		str	r0, [r2, #28]
1137:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].multi_master_handler = NULL;
 2880              		.loc 1 1137 0
 2881 0084 0E4A     		ldr	r2, .L400+16
 2882 0086 D054     		strb	r0, [r2, r3]
1138:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_full_handler = NULL;
 2883              		.loc 1 1138 0
 2884 0088 04EB0102 		add	r2, r4, r1
 2885 008c 6050     		str	r0, [r4, r1]
1139:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_overflow_handler = NULL;
 2886              		.loc 1 1139 0
 2887 008e 5060     		str	r0, [r2, #4]
1140:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_underflow_handler = NULL;
 2888              		.loc 1 1140 0
 2889 0090 9060     		str	r0, [r2, #8]
1141:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].tx_fifo_empty_handler = NULL;
 2890              		.loc 1 1141 0
 2891 0092 D060     		str	r0, [r2, #12]
1142:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].tx_fifo_overflow_handler = NULL;
 2892              		.loc 1 1142 0
 2893 0094 5061     		str	r0, [r2, #20]
1143:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2894              		.loc 1 1143 0
 2895 0096 1061     		str	r0, [r2, #16]
1145:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 2896              		.loc 1 1145 0
 2897 0098 03D0     		beq	.L387
 2898 009a 05D3     		bcc	.L399
 2899 009c 022B     		cmp	r3, #2
 2900 009e 02D0     		beq	.L389
 2901 00a0 10BD     		pop	{r4, pc}
 2902              	.L387:
1151:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 2903              		.loc 1 1151 0
 2904 00a2 0820     		movs	r0, #8
 2905 00a4 00E0     		b	.L399
 2906              	.L389:
1154:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 2907              		.loc 1 1154 0
 2908 00a6 0720     		movs	r0, #7
 2909              	.L399:
 2910 00a8 064B     		ldr	r3, .L400+20
 2911 00aa 9847     		blx	r3
 2912              	.LVL285:
 2913 00ac 10BD     		pop	{r4, pc}
 2914              	.L401:
 2915 00ae 00BF     		.align	2
 2916              	.L400:
 2917 00b0 00000000 		.word	.LANCHOR15
 2918 00b4 00000000 		.word	assert_failed
 2919 00b8 00000000 		.word	.LANCHOR0
 2920 00bc 00000000 		.word	.LANCHOR1
 2921 00c0 00000000 		.word	.LANCHOR14
 2922 00c4 00000000 		.word	vic_unregister_irq
 2923              		.cfi_endproc
 2924              	.LFE19:
 2926              		.global	spi_interrupt_enable
 2927              		.global	spi_interrupt
 2928              		.global	spi_hw
 2929              		.section	.rodata.__FUNCTION__.6620,"a",%progbits
 2930              		.set	.LANCHOR5,. + 0
 2933              	__FUNCTION__.6620:
 2934 0000 68616C5F 		.ascii	"hal_spi_reset\000"
 2934      7370695F 
 2934      72657365 
 2934      7400
 2935              		.section	.rodata.__FUNCTION__.6792,"a",%progbits
 2936              		.set	.LANCHOR6,. + 0
 2939              	__FUNCTION__.6792:
 2940 0000 68616C5F 		.ascii	"hal_spi_dma_init\000"
 2940      7370695F 
 2940      646D615F 
 2940      696E6974 
 2940      00
 2941              		.section	.rodata.__FUNCTION__.6692,"a",%progbits
 2942              		.set	.LANCHOR10,. + 0
 2945              	__FUNCTION__.6692:
 2946 0000 68616C5F 		.ascii	"hal_spi_transmit_buf_normal\000"
 2946      7370695F 
 2946      7472616E 
 2946      736D6974 
 2946      5F627566 
 2947              		.section	.bss.spi_interrupt,"aw",%nobits
 2948              		.align	2
 2949              		.set	.LANCHOR1,. + 0
 2952              	spi_interrupt:
 2953 0000 00000000 		.space	72
 2953      00000000 
 2953      00000000 
 2953      00000000 
 2953      00000000 
 2954              		.section	.rodata.__FUNCTION__.6628,"a",%progbits
 2955              		.set	.LANCHOR7,. + 0
 2958              	__FUNCTION__.6628:
 2959 0000 68616C5F 		.ascii	"hal_spi_receive_buf_dma\000"
 2959      7370695F 
 2959      72656365 
 2959      6976655F 
 2959      6275665F 
 2960              		.section	.bss.spi_interrupt_enable,"aw",%nobits
 2961              		.set	.LANCHOR14,. + 0
 2964              	spi_interrupt_enable:
 2965 0000 000000   		.space	3
 2966              		.section	.rodata.__FUNCTION__.6592,"a",%progbits
 2967              		.set	.LANCHOR2,. + 0
 2970              	__FUNCTION__.6592:
 2971 0000 68616C5F 		.ascii	"hal_spi_init\000"
 2971      7370695F 
 2971      696E6974 
 2971      00
 2972              		.section	.rodata.__FUNCTION__.6798,"a",%progbits
 2973              		.set	.LANCHOR13,. + 0
 2976              	__FUNCTION__.6798:
 2977 0000 68616C5F 		.ascii	"hal_spi_interrupt_init\000"
 2977      7370695F 
 2977      696E7465 
 2977      72727570 
 2977      745F696E 
 2978              		.section	.rodata.__FUNCTION__.6807,"a",%progbits
 2979              		.set	.LANCHOR15,. + 0
 2982              	__FUNCTION__.6807:
 2983 0000 68616C5F 		.ascii	"hal_spi_interrupt_deinit\000"
 2983      7370695F 
 2983      696E7465 
 2983      72727570 
 2983      745F6465 
 2984              		.section	.rodata.__FUNCTION__.6759,"a",%progbits
 2985              		.set	.LANCHOR12,. + 0
 2988              	__FUNCTION__.6759:
 2989 0000 68616C5F 		.ascii	"hal_spi_transceiver_normal\000"
 2989      7370695F 
 2989      7472616E 
 2989      73636569 
 2989      7665725F 
 2990              		.section	.rodata.__FUNCTION__.6649,"a",%progbits
 2991              		.set	.LANCHOR8,. + 0
 2994              	__FUNCTION__.6649:
 2995 0000 68616C5F 		.ascii	"hal_spi_receive_buf_normal\000"
 2995      7370695F 
 2995      72656365 
 2995      6976655F 
 2995      6275665F 
 2996              		.section	.rodata.__FUNCTION__.6671,"a",%progbits
 2997              		.set	.LANCHOR9,. + 0
 3000              	__FUNCTION__.6671:
 3001 0000 68616C5F 		.ascii	"hal_spi_transmit_buf_dma\000"
 3001      7370695F 
 3001      7472616E 
 3001      736D6974 
 3001      5F627566 
 3002              		.section	.rodata.__FUNCTION__.6612,"a",%progbits
 3003              		.set	.LANCHOR3,. + 0
 3006              	__FUNCTION__.6612:
 3007 0000 68616C5F 		.ascii	"hal_spi_disable\000"
 3007      7370695F 
 3007      64697361 
 3007      626C6500 
 3008              		.section	.rodata.__FUNCTION__.6725,"a",%progbits
 3009              		.set	.LANCHOR11,. + 0
 3012              	__FUNCTION__.6725:
 3013 0000 68616C5F 		.ascii	"hal_spi_transceiver_dma\000"
 3013      7370695F 
 3013      7472616E 
 3013      73636569 
 3013      7665725F 
 3014              		.section	.data.spi_hw,"aw",%progbits
 3015              		.align	2
 3016              		.set	.LANCHOR0,. + 0
 3019              	spi_hw:
 3020 0000 00C00102 		.word	33669120
 3021 0004 00D00102 		.word	33673216
 3022 0008 00E00102 		.word	33677312
 3023              		.section	.rodata.__FUNCTION__.6616,"a",%progbits
 3024              		.set	.LANCHOR4,. + 0
 3027              	__FUNCTION__.6616:
 3028 0000 68616C5F 		.ascii	"hal_spi_enable\000"
 3028      7370695F 
 3028      656E6162 
 3028      6C6500
 3029              		.text
 3030              	.Letext0:
 3031              		.file 2 "/opt/toolchains/gcc-arm-none-eabi-4_9-2015q1/arm-none-eabi/include/machine/_default_types
 3032              		.file 3 "/opt/toolchains/gcc-arm-none-eabi-4_9-2015q1/arm-none-eabi/include/stdint.h"
 3033              		.file 4 "/home/tienluong/workspace/atlantis_fw/platform/os/Source/portable/GCC/cortex-r4/portmacro
 3034              		.file 5 "/home/tienluong/workspace/atlantis_fw/platform/asic/hal/include/hal_vic.h"
 3035              		.file 6 "/home/tienluong/workspace/atlantis_fw/platform/asic/hal/include/hal_dma.h"
 3036              		.file 7 "/home/tienluong/workspace/atlantis_fw/platform/asic/hal/include/hal_spi.h"
DEFINED SYMBOLS
                            *ABS*:00000000 hal_spi.c
     /tmp/ccrEFL3K.s:19     .text.hal_spi_irq_handler:00000000 $t
     /tmp/ccrEFL3K.s:23     .text.hal_spi_irq_handler:00000000 hal_spi_irq_handler
     /tmp/ccrEFL3K.s:151    .text.hal_spi_irq_handler:000000a4 $d
     /tmp/ccrEFL3K.s:157    .text.hal_spi_2_irq:00000000 $t
     /tmp/ccrEFL3K.s:161    .text.hal_spi_2_irq:00000000 hal_spi_2_irq
     /tmp/ccrEFL3K.s:181    .text.hal_spi_2_irq:0000000c $d
     /tmp/ccrEFL3K.s:186    .text.hal_spi_1_irq:00000000 $t
     /tmp/ccrEFL3K.s:190    .text.hal_spi_1_irq:00000000 hal_spi_1_irq
     /tmp/ccrEFL3K.s:210    .text.hal_spi_1_irq:0000000c $d
     /tmp/ccrEFL3K.s:215    .text.hal_spi_0_irq:00000000 $t
     /tmp/ccrEFL3K.s:219    .text.hal_spi_0_irq:00000000 hal_spi_0_irq
     /tmp/ccrEFL3K.s:239    .text.hal_spi_0_irq:0000000c $d
     /tmp/ccrEFL3K.s:244    .text.hal_spi_init:00000000 $t
     /tmp/ccrEFL3K.s:249    .text.hal_spi_init:00000000 hal_spi_init
     /tmp/ccrEFL3K.s:415    .text.hal_spi_init:000000c8 $d
     /tmp/ccrEFL3K.s:419    .text.hal_spi_init:000000cc $t
     /tmp/ccrEFL3K.s:492    .text.hal_spi_init:00000110 $d
     /tmp/ccrEFL3K.s:502    .text.hal_spi_slave_select:00000000 $t
     /tmp/ccrEFL3K.s:507    .text.hal_spi_slave_select:00000000 hal_spi_slave_select
     /tmp/ccrEFL3K.s:571    .text.hal_spi_slave_select:00000034 $d
     /tmp/ccrEFL3K.s:576    .text.hal_spi_disable:00000000 $t
     /tmp/ccrEFL3K.s:581    .text.hal_spi_disable:00000000 hal_spi_disable
     /tmp/ccrEFL3K.s:620    .text.hal_spi_disable:00000024 $d
     /tmp/ccrEFL3K.s:627    .text.hal_spi_enable:00000000 $t
     /tmp/ccrEFL3K.s:632    .text.hal_spi_enable:00000000 hal_spi_enable
     /tmp/ccrEFL3K.s:671    .text.hal_spi_enable:00000024 $d
     /tmp/ccrEFL3K.s:678    .text.hal_spi_reset:00000000 $t
     /tmp/ccrEFL3K.s:683    .text.hal_spi_reset:00000000 hal_spi_reset
     /tmp/ccrEFL3K.s:738    .text.hal_spi_reset:00000030 $d
     /tmp/ccrEFL3K.s:745    .text.hal_spi_dma_init:00000000 $t
     /tmp/ccrEFL3K.s:750    .text.hal_spi_dma_init:00000000 hal_spi_dma_init
     /tmp/ccrEFL3K.s:887    .text.hal_spi_dma_init:000000ac $d
     /tmp/ccrEFL3K.s:894    .text.hal_spi_receive_buf:00000000 $t
     /tmp/ccrEFL3K.s:899    .text.hal_spi_receive_buf:00000000 hal_spi_receive_buf
     /tmp/ccrEFL3K.s:1255   .text.hal_spi_receive_buf:000001b4 $d
     /tmp/ccrEFL3K.s:1272   .text.hal_spi_transmit_buf:00000000 $t
     /tmp/ccrEFL3K.s:1277   .text.hal_spi_transmit_buf:00000000 hal_spi_transmit_buf
     /tmp/ccrEFL3K.s:1649   .text.hal_spi_transmit_buf:000001ac $d
     /tmp/ccrEFL3K.s:1667   .text.hal_spi_transceiver:00000000 $t
     /tmp/ccrEFL3K.s:1672   .text.hal_spi_transceiver:00000000 hal_spi_transceiver
     /tmp/ccrEFL3K.s:2101   .text.hal_spi_transceiver:0000023c $d
     /tmp/ccrEFL3K.s:2120   .text.hal_spi_transceiver:0000026c $t
     /tmp/ccrEFL3K.s:2458   .text.hal_spi_transceiver:00000400 $d
     /tmp/ccrEFL3K.s:2465   .text.hal_spi_interrupt_init:00000000 $t
     /tmp/ccrEFL3K.s:2470   .text.hal_spi_interrupt_init:00000000 hal_spi_interrupt_init
     /tmp/ccrEFL3K.s:2751   .text.hal_spi_interrupt_init:0000017c $d
     /tmp/ccrEFL3K.s:2764   .text.hal_spi_interrupt_deinit:00000000 $t
     /tmp/ccrEFL3K.s:2769   .text.hal_spi_interrupt_deinit:00000000 hal_spi_interrupt_deinit
     /tmp/ccrEFL3K.s:2917   .text.hal_spi_interrupt_deinit:000000b0 $d
     /tmp/ccrEFL3K.s:2964   .bss.spi_interrupt_enable:00000000 spi_interrupt_enable
     /tmp/ccrEFL3K.s:2952   .bss.spi_interrupt:00000000 spi_interrupt
     /tmp/ccrEFL3K.s:3019   .data.spi_hw:00000000 spi_hw
     /tmp/ccrEFL3K.s:2933   .rodata.__FUNCTION__.6620:00000000 __FUNCTION__.6620
     /tmp/ccrEFL3K.s:2939   .rodata.__FUNCTION__.6792:00000000 __FUNCTION__.6792
     /tmp/ccrEFL3K.s:2945   .rodata.__FUNCTION__.6692:00000000 __FUNCTION__.6692
     /tmp/ccrEFL3K.s:2948   .bss.spi_interrupt:00000000 $d
     /tmp/ccrEFL3K.s:2958   .rodata.__FUNCTION__.6628:00000000 __FUNCTION__.6628
     /tmp/ccrEFL3K.s:2965   .bss.spi_interrupt_enable:00000000 $d
     /tmp/ccrEFL3K.s:2970   .rodata.__FUNCTION__.6592:00000000 __FUNCTION__.6592
     /tmp/ccrEFL3K.s:2976   .rodata.__FUNCTION__.6798:00000000 __FUNCTION__.6798
     /tmp/ccrEFL3K.s:2982   .rodata.__FUNCTION__.6807:00000000 __FUNCTION__.6807
     /tmp/ccrEFL3K.s:2988   .rodata.__FUNCTION__.6759:00000000 __FUNCTION__.6759
     /tmp/ccrEFL3K.s:2994   .rodata.__FUNCTION__.6649:00000000 __FUNCTION__.6649
     /tmp/ccrEFL3K.s:3000   .rodata.__FUNCTION__.6671:00000000 __FUNCTION__.6671
     /tmp/ccrEFL3K.s:3006   .rodata.__FUNCTION__.6612:00000000 __FUNCTION__.6612
     /tmp/ccrEFL3K.s:3012   .rodata.__FUNCTION__.6725:00000000 __FUNCTION__.6725
     /tmp/ccrEFL3K.s:3015   .data.spi_hw:00000000 $d
     /tmp/ccrEFL3K.s:3027   .rodata.__FUNCTION__.6616:00000000 __FUNCTION__.6616
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
assert_failed
memset
hal_dma_enable_global_interrupt
hal_dma_init
flush_cache
hal_dma_channel_enable
hal_dma_deinit
vic_register_irq
vic_unregister_irq
