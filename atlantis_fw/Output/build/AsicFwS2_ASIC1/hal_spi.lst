   1              		.syntax unified
   2              		.cpu cortex-r4
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 4
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"hal_spi.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.text.hal_spi_irq_handler,"ax",%progbits
  19              		.align	1
  20              		.thumb
  21              		.thumb_func
  23              	hal_spi_irq_handler:
  24              	.LFB23:
  25              		.file 1 "/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c"
   1:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /*******************************************************************************
   2:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * Copyright (c) 2016, The LightCo
   3:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * All rights reserved.
   4:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * Redistribution and use in source and binary forms,
   5:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * with or without modification, are strictly prohibited without prior
   6:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * permission of The LightCo.
   7:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  *
   8:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * @file    hal_spi.c
   9:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * @author  The LightCo
  10:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * @version V1.0.0
  11:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * @date    01-Mar-2016
  12:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * @brief   This file provides firmware functions to manage the following
  13:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  *          functionalities of SPI peripheral:
  14:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  *			  + Initialization and Configuration
  15:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  *			  + Data transfers functions
  16:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  *			  + Interrupts management
  17:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  *
  18:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  ******************************************************************************/
  19:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Includes ------------------------------------------------------------------*/
  20:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #include "assert.h"
  21:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #include "board_config.h"
  22:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #include "cortex_r4.h"
  23:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #include "hal_vic.h"
  24:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #include "hal_spi.h"
  25:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #include "hal_cache.h"
  26:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  27:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Private macro -------------------------------------------------------------*/
  28:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* HW definition of Max size of XFER register */
  29:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #define SSI_MAX_XFER_SIZE_32_BIT
  30:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #define SPI_FIFO_DEPTH 32	/* The real FIFO is 32 data registers */
  31:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  32:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /*
  33:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * TODO: undefined MACRO below if you don't want to test SPI in loop back mode
  34:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  */
  35:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* #define TEST_LOOPBACK */
  36:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  37:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Private typedef -----------------------------------------------------------*/
  38:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** spi_hw_config_t spi_hw[3] =
  39:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
  40:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{.spix = SPI_MASTER},		/* SPI hardware channel 0 */
  41:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{.spix = SPI_SLAVE0},		/* SPI hardware channel 1 */
  42:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{.spix = SPI_SLAVE1}		/* SPI hardware channel 2 */
  43:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** };
  44:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  45:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Store interrupt handler function pointer */
  46:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** spi_interrupt_handle_t spi_interrupt[3] =
  47:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
  48:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Initializing default value for SPI CH0 interrupt */
  49:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
  50:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.multi_master_handler		= NULL,
  51:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.rx_fifo_full_handler		= NULL,
  52:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.rx_fifo_overflow_handler	= NULL,
  53:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.rx_fifo_underflow_handler	= NULL,
  54:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.tx_fifo_overflow_handler	= NULL
  55:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	},
  56:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  57:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Initializing default value for SPI CH1 interrupt */
  58:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
  59:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.multi_master_handler		= NULL,
  60:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.rx_fifo_full_handler		= NULL,
  61:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.rx_fifo_overflow_handler	= NULL,
  62:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.rx_fifo_underflow_handler	= NULL,
  63:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.tx_fifo_overflow_handler	= NULL
  64:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	},
  65:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  66:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Initializing default value for SPI CH2 interrupt */
  67:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
  68:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.multi_master_handler		= NULL,
  69:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.rx_fifo_full_handler		= NULL,
  70:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.rx_fifo_overflow_handler	= NULL,
  71:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.rx_fifo_underflow_handler	= NULL,
  72:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		.tx_fifo_overflow_handler	= NULL
  73:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
  74:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** };
  75:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  76:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** flag_status_t spi_interrupt_enable[3] = {DISABLE, DISABLE, DISABLE};
  77:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Private define ------------------------------------------------------------*/
  78:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  79:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Define time out for wait fifo */
  80:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #define TIME_OUT_WAIT_TX_FIFO 	20000
  81:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #define TIME_OUT_TX				50000
  82:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #define TIME_OUT_RX				2000
  83:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  84:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Private variables ---------------------------------------------------------*/
  85:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Private function prototypes -----------------------------------------------*/
  86:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static void hal_spi_0_irq(void);
  87:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static void hal_spi_1_irq(void);
  88:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static void hal_spi_2_irq(void);
  89:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static void hal_spi_irq_handler(ssi_channel_t channel);
  90:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
  91:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_transceiver_dma(spi_config_t *spi,
  92:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 											spi_buffer_t *buff);
  93:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_transceiver_normal(spi_config_t *spi,
  94:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 												spi_buffer_t *buff);
  95:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_transmit_buf_dma(spi_config_t *spi, uint8_t *tx_buf,
  96:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 												uint16_t len);
  97:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_transmit_buf_normal(spi_config_t *spi,
  98:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 												uint8_t *tx_buf, uint16_t len);
  99:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_receive_buf_dma(spi_config_t *spi, uint8_t *rx_buf,
 100:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 											uint16_t len);
 101:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_receive_buf_normal(spi_config_t *spi,
 102:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 												uint8_t *rx_buf, uint16_t len);
 103:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 104:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 105:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 106:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 107:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Private functions ---------------------------------------------------------*/
 108:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static void spi_delay(__IO uint32_t time)
 109:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 110:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	while(time > 0)
 111:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		time--;
 112:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 113:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 114:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static uint8_t wait_tx_fifo_empty(spi_config_t *spi)
 115:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 116:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/*
 117:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	 * TODO: have to calculate time out with other baud rate
 118:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	 */
 119:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	__IO uint32_t time_out = TIME_OUT_WAIT_TX_FIFO;
 120:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t status_reg = 0;
 121:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint8_t rx_fifo = 0;
 122:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check received data in fifo */
 123:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	do
 124:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 125:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		status_reg = spi_hw[spi->channel].spix->SR;
 126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		time_out--;
 127:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	} while(((status_reg & (SR_TF_EMPT | SR_BUSY)) != SR_TF_EMPT)
 128:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			&& (time_out > 0));
 129:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 130:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	rx_fifo = spi_hw[spi->channel].spix->RXFLR;
 131:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 132:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return rx_fifo;
 133:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 134:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 135:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /* Exported functions --------------------------------------------------------*/
 136:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** spi_status_t hal_spi_init(spi_config_t *spi)
 137:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 138:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t control_0_reg = 0;
 139:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 140:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check parameters */
 141:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_DATA_SIZE(spi->data_size));
 142:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 143:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
 144:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 145:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 146:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 147:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 148:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #if ((ASIC_NUM == ASIC2) || (ASIC_NUM == ASIC3))
 149:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if (SSI_CH2 == spi->channel)
 150:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 151:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Bit [5,7:8] of OxA8 register have to be high */
 152:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		*(volatile uint32_t*)(SCU_BASE + 0xA8) &= ~(0x000001A0);
 153:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 154:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #endif
 155:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Clear interrupt mark register */
 156:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->IMR = 0;
 157:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 158:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Disable SSI bit 0- Offset 0x08 - SSI Enable Register */
 159:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 160:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 161:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure baud rate
 162:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	 * Fclk_out = Fssi_clk/SCKDV Offset 0x14 - Baud Rate Select
 163:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	 */
 164:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->BAUDR = BOARD_PCLOCK / spi->master_clk_freq;
 165:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 166:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #ifdef TEST_LOOPBACK
 167:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	control_0_reg |= (uint32_t)(1 << 11);
 168:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** #endif
 169:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 170:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure SSI mode */
 171:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->ssi_mode)
 172:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 173:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_MOTO_SPI:
 174:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 175:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Configure SPI mode - bit 4 Offset 0x00 - Control Register 0  */
 176:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg |= SPI_FRF_SPI;
 177:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Configure SPI frame size 32bit mode - bit 20 : 16 */
 178:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg |= ((spi->data_size - 1) << SPI_DFS_32_OFFSET);
 179:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 180:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 181:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_TI_SSP:
 182:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 183:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg |= SPI_FRF_SSP;
 184:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 185:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 186:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_NS_MICROWIRE:
 187:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 188:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Configure Microwire mode */
 189:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg |= SPI_FRF_MICROWIRE;
 190:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 191:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Configure Microwire frame size */
 192:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			if (spi->data_size == DATASIZE_8BIT ||
 193:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					spi->data_size == DATASIZE_16BIT)
 194:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 195:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				control_0_reg |= ((spi->data_size - 1) << SPI_CFS_OFFSET);
 196:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			}
 197:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			else
 198:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 199:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				return SPI_ERROR;
 200:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			}
 201:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 202:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 203:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 204:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 205:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 206:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 207:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 208:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 209:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure SPI frame format type - bit [22:21] */
 210:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	control_0_reg |= (spi->spi_type << SPI_FRF_FRAME_OFFSET);
 211:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 212:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure transfer mode - bit[9:8] */
 213:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	control_0_reg |= (spi->transfer_mode << SPI_TMOD_OFFSET);
 214:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 215:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure clock polarity and phase */
 216:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch (spi->spi_mode)
 217:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 218:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* bit [7:6] */
 219:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SPI_MODE_0:
 220:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 221:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg &= ~SPI_SCOL;
 222:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg &= ~SPI_SCPH;
 223:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 224:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 225:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SPI_MODE_1:
 226:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 227:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg &= ~SPI_SCOL;
 228:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg |= SPI_SCPH;
 229:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 230:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 231:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SPI_MODE_2:
 232:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 233:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg |= SPI_SCOL;
 234:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg &= ~SPI_SCPH;
 235:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 236:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 237:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SPI_MODE_3:
 238:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 239:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg |= SPI_SCOL | SPI_SCPH;
 240:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 241:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 242:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 243:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 244:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 245:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 246:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 247:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 248:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Enable slave output function */
 249:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi_hw[spi->channel].spix != SPI_MASTER)
 250:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 251:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi->transfer_mode == RX_ONLY)
 252:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 253:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Bit 10 - offset 0 : disable TX */
 254:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg |= (SPI_SLVOE);
 255:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 256:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		else
 257:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 258:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Bit 10 - offset 0 : enable TX */
 259:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			control_0_reg &= ~(SPI_SLVOE);
 260:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 261:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 262:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 263:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->CTRL0 = control_0_reg;
 264:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 1;
 265:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 266:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure number of data frame Offset 0x04 - Control Register 1 */
 267:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi->channel == SSI_CH0
 268:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		&& (spi->transfer_mode == RX_ONLY
 269:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		|| spi->transfer_mode == EEPROM_READ))
 270:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 271:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Configure number of data frame */
 272:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		spi_hw[spi->channel].spix->CTRL1 = spi->master_data_frame;
 273:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 274:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 275:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return SPI_OK;
 276:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 277:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 278:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** spi_status_t hal_spi_slave_select(uint8_t cs_pin, flag_status_t value)
 279:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 280:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	__IO uint32_t tmp = 0;
 281:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 282:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(cs_pin >= 1 && cs_pin <= 32)
 283:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 284:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		tmp = spi_hw[SSI_CH0].spix->SER;
 285:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		tmp = (tmp & ~(1 << (cs_pin - 1))) | (value << (cs_pin - 1));
 286:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		spi_hw[SSI_CH0].spix->SER = tmp;
 287:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_OK;
 288:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 289:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return SPI_ERROR;
 290:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 291:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 292:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** void hal_spi_disable(spi_config_t *spi)
 293:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 294:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 295:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 296:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 297:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 298:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 299:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** void hal_spi_enable(spi_config_t *spi)
 300:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 301:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 302:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 303:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 1;
 304:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 305:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 306:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** void hal_spi_reset(spi_config_t *spi)
 307:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 308:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 309:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 310:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 311:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_delay(0xff);
 312:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 1;
 313:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 314:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 315:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_receive_buf_dma(spi_config_t *spi, uint8_t *rx_buf,
 316:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 											uint16_t len)
 317:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 318:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_init_type_t dma_rx = { 0 };
 319:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_config_t spi_dma;
 320:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 321:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check parameters */
 322:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 323:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(rx_buf == NULL));
 324:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 325:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_disable(spi);
 326:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_rx.chid);
 327:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 328:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure spi dma */
 329:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_receive_data_level = 0;
 330:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_data_level = 0;
 331:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_receive_enable = ENABLE;
 332:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_enable = DISABLE;
 333:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_dma_init(spi, &spi_dma);
 334:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_init(spi);
 335:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 336:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure DMA SPI RX */
 337:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.chid = spi->dma_rx.chid;
 338:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.length = len * (spi->data_size / 8);
 339:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.trans_type = PER_TO_MEM;
 340:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 341:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_addr = (uint32_t)rx_buf;
 342:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_bsize = BURST_SIZE_1;
 343:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_bsize = BURST_SIZE_1;
 344:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 345:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->data_size)
 346:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 347:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_8BIT:
 348:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 349:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.src_wdata = DATA_WIDTH_8;
 350:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_8;
 351:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 352:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 353:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_16BIT:
 354:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 355:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.src_wdata = DATA_WIDTH_16;
 356:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_16;
 357:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 358:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 359:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_32BIT:
 360:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 361:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.src_wdata = DATA_WIDTH_32;
 362:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_32;
 363:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 364:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 365:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 366:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 367:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_spi_disable(spi);
 368:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 369:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 370:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 371:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 372:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 373:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->channel)
 374:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 375:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH0:
 376:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.periph_type = SPI0_DMA_RX;
 377:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 378:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH1:
 379:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.periph_type = SPI1_DMA_RX;
 380:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 381:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH2:
 382:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.periph_type = SPI2_DMA_RX;
 383:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 384:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 385:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 386:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_spi_disable(spi);
 387:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 388:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 389:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 390:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 391:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 392:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.clb_func = spi->dma_rx.callback_func;
 393:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_enable_global_interrupt(0);
 394:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 395:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(hal_dma_init(&dma_rx) != HAL_DMA_OK)
 396:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 397:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 398:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	flush_cache((unsigned long)rx_buf, len);
 399:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(hal_dma_channel_enable(spi->dma_rx.chid) != HAL_DMA_OK)
 400:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 401:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 402:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return SPI_OK;
 403:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 404:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 405:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_receive_buf_normal(spi_config_t *spi,
 406:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 												uint8_t *rx_buf, uint16_t len)
 407:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 408:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	volatile uint8_t status = 0;
 409:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t time_out = 0;
 410:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t rx_tmp = 0;
 411:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint16_t index_rx = 0;
 412:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint16_t buff_index = 0;
 413:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 414:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check parameters */
 415:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 416:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(rx_buf == NULL));
 417:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 418:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi_hw[spi->channel].spix->SSIENR == 0)
 419:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 420:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Enable SPI if which is disable */
 421:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		spi_hw[spi->channel].spix->SSIENR = 1;
 422:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 423:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 424:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	time_out = TIME_OUT_RX;
 425:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 426:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	while(time_out)
 427:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 428:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		time_out--;
 429:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Read number of data in receiver FIFO */
 430:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		status = spi_hw[spi->channel].spix->RXFLR;
 431:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(status)
 432:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 433:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			time_out = TIME_OUT_RX;
 434:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Read data in RX FIFO */
 435:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			rx_tmp = spi_hw[spi->channel].spix->DR[0];
 436:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 437:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			switch(spi->data_size)
 438:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 439:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_8BIT:
 440:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 441:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					*(uint8_t *)(&rx_buf[index_rx]) = (uint8_t)rx_tmp;
 442:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_rx++;
 443:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 444:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 445:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_16BIT:
 446:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 447:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					*(uint16_t *)(&rx_buf[index_rx]) = (uint16_t)rx_tmp;
 448:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_rx += 2;
 449:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 450:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 451:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_32BIT:
 452:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 453:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					*(uint32_t *)(&rx_buf[index_rx]) = (uint32_t)rx_tmp;
 454:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_rx += 4;
 455:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 456:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 457:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				default:
 458:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 459:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					/* Disable SPI */
 460:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					spi_hw[spi->channel].spix->SSIENR = 0;
 461:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					return SPI_ERROR;
 462:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 463:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			}
 464:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			buff_index++;
 465:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 466:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			if(buff_index == len)
 467:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 468:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				/* Receive full data */
 469:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				break;
 470:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			}
 471:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 472:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 473:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 474:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(time_out != 0)
 475:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_OK;
 476:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	else
 477:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 478:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 479:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 480:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /*
 481:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * Data buffer need to receive has to typecast to uint8_t
 482:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * e.g: uint8_t rx_data[len]; // len is number of data
 483:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * 		hal_spi_receive_buf(spi, (uint8_t *)rx_buf, len);
 484:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 485:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * e.g: uint16_t rx_data[len]; // len is number of data
 486:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * 		hal_spi_receive_buf(spi, (uint8_t *)rx_buf, len);
 487:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 488:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * e.g: uint32_t rx_data[len]; // len is number of data
 489:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * 		hal_spi_receive_buf(spi, (uint8_t *)rx_buf, len);
 490:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  */
 491:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** spi_status_t hal_spi_receive_buf(spi_config_t *spi, uint8_t *rx_buf,
 492:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 									uint16_t len)
 493:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 494:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 495:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi->dma_rx.enable == ENABLE)
 496:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_receive_buf_dma(spi, rx_buf, len);
 497:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	else
 498:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_receive_buf_normal(spi, rx_buf, len);
 499:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 500:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return ret;
 501:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 502:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 503:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_transmit_buf_dma(spi_config_t *spi, uint8_t *tx_buf,
 504:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 												uint16_t len)
 505:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 506:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_init_type_t dma_tx = { 0 };
 507:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_config_t spi_dma;
 508:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 509:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check parameters */
 510:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 511:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(tx_buf == NULL));
 512:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 513:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_disable(spi);
 514:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_tx.chid);
 515:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 516:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure spi dma */
 517:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_receive_data_level = 0;
 518:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_data_level = 0;
 519:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_receive_enable = DISABLE;
 520:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_enable = ENABLE;
 521:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_dma_init(spi, &spi_dma);
 522:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_init(spi);
 523:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 524:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure DMA SPI TX */
 525:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.chid = spi->dma_tx.chid;
 526:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.length = len * (spi->data_size / 8);
 527:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.trans_type = MEM_TO_PER;
 528:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_addr = (uint32_t)tx_buf;
 529:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.dst_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 530:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_bsize = BURST_SIZE_1;
 531:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.dst_bsize = BURST_SIZE_1;
 532:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 533:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->data_size)
 534:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 535:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_8BIT:
 536:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 537:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.src_wdata = DATA_WIDTH_8;
 538:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_8;
 539:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 540:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 541:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_16BIT:
 542:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 543:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.src_wdata = DATA_WIDTH_16;
 544:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_16;
 545:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 546:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 547:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_32BIT:
 548:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 549:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.src_wdata = DATA_WIDTH_32;
 550:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_32;
 551:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 552:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 553:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 554:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 555:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_spi_disable(spi);
 556:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 557:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 558:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 559:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 560:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->channel)
 561:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 562:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH0:
 563:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.periph_type = SPI0_DMA_TX;
 564:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 565:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH1:
 566:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.periph_type = SPI1_DMA_TX;
 567:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 568:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH2:
 569:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.periph_type = SPI2_DMA_TX;
 570:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 571:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 572:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 573:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_spi_disable(spi);
 574:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 575:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 576:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 577:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 578:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 579:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.clb_func = spi->dma_tx.callback_func;
 580:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_enable_global_interrupt(0);
 581:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 582:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(hal_dma_init(&dma_tx) != HAL_DMA_OK)
 583:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 584:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 585:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	flush_cache((unsigned long)tx_buf, len);
 586:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(hal_dma_channel_enable(spi->dma_tx.chid) != HAL_DMA_OK)
 587:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 588:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 589:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return SPI_OK;
 590:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 591:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 592:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_transmit_buf_normal(spi_config_t *spi,
 593:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 												uint8_t *tx_buf, uint16_t len)
 594:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 595:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t time_out = 0;
 596:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t i = 0;
 597:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint16_t index_tx = 0;
 598:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint8_t count = 0;
 599:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t tx_tmp = 0;
 600:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 601:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check parameters */
 602:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 603:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(tx_buf == NULL));
 604:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 605:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	while(len > 0)
 606:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 607:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Check data length */
 608:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(len <= SPI_FIFO_DEPTH)
 609:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 610:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			count = len;
 611:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			len = 0;
 612:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 613:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		else
 614:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 615:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			count = SPI_FIFO_DEPTH;
 616:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			len -= SPI_FIFO_DEPTH;
 617:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 618:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 619:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/*
 620:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		 * Transmit data full buffer
 621:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		 */
 622:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		for(i = 0; i < count; i++)
 623:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 624:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Format transmit data */
 625:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			switch(spi->data_size)
 626:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 627:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_8BIT:
 628:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 629:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					tx_tmp = *(uint8_t *)(&tx_buf[index_tx]);
 630:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_tx++;
 631:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 632:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 633:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_16BIT:
 634:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 635:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					tx_tmp = *(uint16_t *)(&tx_buf[index_tx]);
 636:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_tx += 2;
 637:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 638:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 639:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_32BIT:
 640:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 641:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					tx_tmp = *(uint32_t *)(&tx_buf[index_tx]);
 642:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_tx += 4;
 643:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 644:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 645:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				default:
 646:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 647:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					return SPI_ERROR;
 648:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 649:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			}
 650:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Move data need to send to FIFO */
 651:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			spi_hw[spi->channel].spix->DR[0] = tx_tmp;
 652:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 653:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 654:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		time_out = TIME_OUT_TX * SPI_FIFO_DEPTH;
 655:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		while(spi_hw[spi->channel].spix->TXFLR != 0)
 656:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 657:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			time_out--;
 658:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			if(time_out == 0)
 659:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				return SPI_ERROR;
 660:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 661:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 662:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return SPI_OK;
 663:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 664:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 665:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /*
 666:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * Data buffer need to transmit has to typecast to uint8_t
 667:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * e.g: uint8_t tx_data[len]; // len is number of data
 668:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * 		hal_spi_transmit_buf(spi, (uint8_t *)tx_buf, len);
 669:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 670:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * e.g: uint16_t tx_data[len]; // len is number of data
 671:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * 		hal_spi_transmit_buf(spi, (uint8_t *)tx_buf, len);
 672:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 673:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * e.g: uint32_t tx_data[len]; // len is number of data
 674:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * 		hal_spi_transmit_buf(spi, (uint8_t *)tx_buf, len);
 675:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  */
 676:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** spi_status_t hal_spi_transmit_buf(spi_config_t *spi, uint8_t *tx_buf,
 677:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 									uint16_t len)
 678:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 679:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 680:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi->dma_tx.enable == ENABLE)
 681:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_transmit_buf_dma(spi, tx_buf, len);
 682:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	else
 683:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_transmit_buf_normal(spi, tx_buf, len);
 684:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 685:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return ret;
 686:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 687:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 688:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_transceiver_dma(spi_config_t *spi,
 689:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 											spi_buffer_t *buff)
 690:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 691:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint16_t ret = SPI_ERROR;
 692:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_init_type_t dma_rx = { 0 };
 693:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_init_type_t dma_tx = { 0 };
 694:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_config_t spi_dma;
 695:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint8_t *rx_buf, *tx_buf;
 696:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint16_t rx_len, tx_len;
 697:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 698:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check parameters */
 699:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_DATA_SIZE(spi->data_size));
 700:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 701:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 702:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 703:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 704:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 705:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(buff->txbuf.buf == NULL  || buff->txbuf.len == 0 ||
 706:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					buff->rxbuf.buf == NULL || buff->rxbuf.len == 0 ||
 707:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					buff->rxbuf.len != buff->txbuf.len));
 708:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 709:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	rx_buf = buff->rxbuf.buf;
 710:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	rx_len = buff->rxbuf.len * (spi->data_size / 8);
 711:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	tx_buf = buff->txbuf.buf;
 712:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	tx_len = buff->txbuf.len * (spi->data_size / 8);
 713:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 714:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_rx.chid);
 715:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_tx.chid);
 716:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_disable(spi);
 717:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 718:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure DMA for SPI */
 719:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_receive_data_level = 0;
 720:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_data_level = 0;
 721:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_receive_enable = ENABLE;
 722:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_enable = ENABLE;
 723:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_dma_init(spi, &spi_dma);
 724:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 725:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure DMA SPI RX */
 726:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.chid = spi->dma_rx.chid;
 727:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.length = rx_len;
 728:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.trans_type = PER_TO_MEM;
 729:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 730:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_addr = (uint32_t)rx_buf;
 731:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_bsize = BURST_SIZE_1;
 732:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_bsize = BURST_SIZE_1;
 733:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->data_size)
 734:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 735:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_8BIT:
 736:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 737:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.src_wdata = DATA_WIDTH_8;
 738:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_8;
 739:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 740:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 741:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_16BIT:
 742:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 743:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.src_wdata = DATA_WIDTH_16;
 744:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_16;
 745:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 746:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 747:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_32BIT:
 748:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 749:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.src_wdata = DATA_WIDTH_32;
 750:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_32;
 751:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 752:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 753:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 754:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 755:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_spi_disable(spi);
 756:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 757:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 758:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 759:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 760:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->channel)
 761:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 762:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH0:
 763:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.periph_type = SPI0_DMA_RX;
 764:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 765:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH1:
 766:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.periph_type = SPI1_DMA_RX;
 767:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 768:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH2:
 769:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.periph_type = SPI2_DMA_RX;
 770:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 771:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 772:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 773:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_spi_disable(spi);
 774:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 775:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 776:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 777:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 778:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.clb_func = spi->dma_rx.callback_func;
 779:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 780:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure DMA SPI TX */
 781:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.chid = spi->dma_tx.chid;
 782:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.length = tx_len;
 783:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.trans_type = MEM_TO_PER;
 784:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_addr = (uint32_t)tx_buf;
 785:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.dst_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 786:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->data_size)
 787:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 788:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_8BIT:
 789:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 790:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.src_wdata = DATA_WIDTH_8;
 791:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_8;
 792:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 793:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 794:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_16BIT:
 795:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 796:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.src_wdata = DATA_WIDTH_16;
 797:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_16;
 798:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 799:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 800:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case DATASIZE_32BIT:
 801:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 802:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.src_wdata = DATA_WIDTH_32;
 803:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_32;
 804:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 805:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 806:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 807:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 808:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_spi_disable(spi);
 809:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 810:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 811:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 812:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 813:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->channel)
 814:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 815:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH0:
 816:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.periph_type = SPI0_DMA_TX;
 817:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 818:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH1:
 819:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.periph_type = SPI1_DMA_TX;
 820:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 821:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH2:
 822:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.periph_type = SPI2_DMA_TX;
 823:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 824:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
 825:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 826:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_spi_disable(spi);
 827:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 828:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 829:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 830:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 831:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.clb_func = spi->dma_tx.callback_func;
 832:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 833:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_enable_global_interrupt(0);
 834:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	ret = hal_dma_init(&dma_rx);
 835:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != HAL_DMA_OK)
 836:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 837:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 838:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	ret = hal_dma_init(&dma_tx);
 839:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != HAL_DMA_OK)
 840:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 841:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 842:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	flush_cache((unsigned long)tx_buf, tx_len);
 843:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	flush_cache((unsigned long)rx_buf, rx_len);
 844:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	ret = hal_spi_init(spi);
 845:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != SPI_OK)
 846:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 847:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 848:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	ret = hal_dma_channel_enable(spi->dma_rx.chid);
 849:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != HAL_DMA_OK)
 850:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 851:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 852:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	ret = hal_dma_channel_enable(spi->dma_tx.chid);
 853:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != HAL_DMA_OK)
 854:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 855:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 856:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return SPI_OK;
 857:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 858:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 859:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static spi_status_t hal_spi_transceiver_normal(spi_config_t *spi,
 860:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 												spi_buffer_t *buff)
 861:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
 862:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	__IO uint32_t time_out = 0;
 863:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t buff_size = 0;
 864:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t tx_tmp = 0, rx_tmp = 0, i = 0;
 865:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	int idx_tx = 0, idx_rx = 0, count = 0;
 866:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	int rx_fifo = 0;
 867:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 868:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check parameters */
 869:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_DATA_SIZE(spi->data_size));
 870:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 871:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 872:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 873:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 874:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 875:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(buff->txbuf.buf == NULL  || buff->txbuf.len == 0 ||
 876:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					buff->rxbuf.buf == NULL || buff->rxbuf.len == 0 ||
 877:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					buff->rxbuf.len != buff->txbuf.len));
 878:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 879:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	buff_size = buff->txbuf.len;
 880:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	buff->rxbuf.counter = 0;
 881:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	buff->txbuf.counter = 0;
 882:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 883:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Enable SPI */
 884:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 1;
 885:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 886:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	while(buff_size != 0)
 887:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 888:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Check data length */
 889:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(buff_size <= SPI_FIFO_DEPTH)
 890:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 891:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			count = buff_size;
 892:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			buff_size = 0;
 893:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 894:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		else
 895:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 896:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			count = SPI_FIFO_DEPTH;
 897:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			buff_size -= SPI_FIFO_DEPTH;
 898:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 899:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 900:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/*
 901:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		 * Transmit data full buffer
 902:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		 */
 903:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		for(i = 0; i < count; i++)
 904:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 905:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Format transmit data */
 906:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			switch(spi->data_size)
 907:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 908:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_8BIT:
 909:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 910:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					tx_tmp = *(uint8_t *)(&buff->txbuf.buf[idx_tx]);
 911:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_tx++;
 912:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 913:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 914:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_16BIT:
 915:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 916:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					tx_tmp = *(uint16_t *)(&buff->txbuf.buf[idx_tx]);
 917:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_tx += 2;
 918:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 919:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 920:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_32BIT:
 921:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 922:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					tx_tmp = *(uint32_t *)(&buff->txbuf.buf[idx_tx]);
 923:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_tx += 4;
 924:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 925:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 926:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				default:
 927:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 928:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					spi_hw[spi->channel].spix->SSIENR = 0;
 929:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					return SPI_ERROR;
 930:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 931:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			}
 932:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Move data need to send to FIFO */
 933:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			spi_hw[spi->channel].spix->DR[0] = tx_tmp;
 934:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			buff->txbuf.counter = idx_tx;
 935:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 936:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 937:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi->channel == SSI_CH0)
 938:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 939:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Read all datas from Rx FIFO */
 940:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			rx_fifo = wait_tx_fifo_empty(spi);
 941:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 942:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		else
 943:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 944:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			/* Wait for SPI slave transmission complete all data */
 945:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			time_out = TIME_OUT_TX * SPI_FIFO_DEPTH;
 946:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			while(spi_hw[spi->channel].spix->RXFLR != count)
 947:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 948:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				time_out--;
 949:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				if(time_out == 0)
 950:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 951:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					spi_hw[spi->channel].spix->SSIENR = 0;
 952:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					return SPI_ERROR;
 953:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 954:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			}
 955:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			rx_fifo = spi_hw[spi->channel].spix->RXFLR;
 956:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 957:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 958:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		while(rx_fifo > 0)
 959:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 960:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			rx_tmp = spi_hw[spi->channel].spix->DR[0];
 961:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 962:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			switch(spi->data_size)
 963:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 964:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_8BIT:
 965:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 966:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					*(uint8_t *)(&buff->rxbuf.buf[idx_rx]) = (uint8_t)rx_tmp;
 967:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_rx++;
 968:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 969:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 970:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_16BIT:
 971:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 972:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					*(uint16_t *)(&buff->rxbuf.buf[idx_rx]) = (uint16_t)rx_tmp;
 973:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_rx += 2;
 974:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 975:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 976:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				case DATASIZE_32BIT:
 977:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 978:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					*(uint32_t *)(&buff->rxbuf.buf[idx_rx]) = (uint32_t)rx_tmp;
 979:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_rx += 4;
 980:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 981:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 982:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				default:
 983:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 984:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					/* Disable SPI */
 985:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					spi_hw[spi->channel].spix->SSIENR = 0;
 986:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					return SPI_ERROR;
 987:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 988:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			}
 989:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			buff->rxbuf.counter = idx_rx;
 990:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			rx_fifo--;
 991:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 992:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 993:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Disable SPI */
 994:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 995:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return SPI_OK;
 996:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 997:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 998:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** /*
 999:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * Data buffer need to transmit and receive has to typecast to uint8_t
1000:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * e.g: uint8_t tx_data[len]; // len is number of data
1001:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * 		spi_buf.txbuf.buf = (uint8_t *)tx_data;
1002:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1003:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * e.g: uint16_t tx_data[len]; // len is number of data
1004:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * 		spi_buf.txbuf.buf = (uint8_t *)tx_data;
1005:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1006:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * e.g: uint32_t tx_data[len]; // len is number of data
1007:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  * 		spi_buf.txbuf.buf = (uint8_t *)tx_data;
1008:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c ****  */
1009:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** spi_status_t hal_spi_transceiver(spi_config_t *spi, spi_buffer_t *buff)
1010:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
1011:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
1012:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi->dma_rx.enable == ENABLE && spi->dma_tx.enable == ENABLE)
1013:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_transceiver_dma(spi, buff);
1014:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	else
1015:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_transceiver_normal(spi, buff);
1016:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1017:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return ret;
1018:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
1019:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1020:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** void hal_spi_dma_init(spi_config_t *spi, dma_config_t *dma)
1021:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
1022:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t reg_tmp = 0;
1023:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1024:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check parameters */
1025:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_DATA_SIZE(spi->data_size));
1026:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
1027:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
1028:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
1029:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
1030:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
1031:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(dma->dma_receive_enable));
1032:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(dma->dma_transmit_enable));
1033:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1034:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure DMA transmit data level */
1035:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->DMATDLR = dma->dma_transmit_data_level;
1036:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure DMA receive / receive data level */
1037:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->DMARDLR = dma->dma_transmit_data_level;
1038:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Enable/Disable transmit DMA enable bit */
1039:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	reg_tmp = ((uint32_t)dma->dma_transmit_enable << 1) |
1040:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			((uint32_t)dma->dma_receive_enable << 0);
1041:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1042:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Initializing DMA controller */
1043:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->DMACR = reg_tmp;
1044:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
1045:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1046:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** void hal_spi_interrupt_init(spi_config_t *spi, spi_interrupt_init_t *interrupt)
1047:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
1048:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t reg_tmp = 0;
1049:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1050:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check parameters */
1051:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_DATA_SIZE(spi->data_size));
1052:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
1053:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
1054:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
1055:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
1056:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
1057:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1058:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Check interrupt parameters */
1059:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->rx_fifo_full));
1060:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->rx_fifo_overflow));
1061:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->rx_fifo_underflow));
1062:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->tx_fifo_empty));
1063:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->tx_fifo_overflow));
1064:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->multi_master_contention));
1065:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(interrupt->rx_fifo_threshold > 31));
1066:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(interrupt->tx_fifo_threshold > 31));
1067:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1068:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1069:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure transmit FIFO threshold */
1070:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->TXFTLR = interrupt->tx_fifo_threshold;
1071:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1072:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure receive FIFO threshold */
1073:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->RXFTLR = interrupt->rx_fifo_threshold;
1074:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1075:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure interrupts */
1076:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	reg_tmp = (interrupt->multi_master_contention << SPI_INT_MSTI_OFFSET)	|
1077:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->rx_fifo_full << SPI_INT_RXFI_OFFSET)			|
1078:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->rx_fifo_overflow << SPI_INT_RXOI_OFFSET)		|
1079:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->rx_fifo_underflow << SPI_INT_RXUI_OFFSET)		|
1080:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->tx_fifo_overflow << SPI_INT_TXOI_OFFSET)		|
1081:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->tx_fifo_empty << SPI_INT_TXEI_OFFSET);
1082:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1083:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt_enable[spi->channel] = ENABLE;
1084:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1085:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Copy interrupt function pointer to global variable */
1086:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].multi_master_handler =
1087:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.multi_master_handler;
1088:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1089:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_full_handler =
1090:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.rx_fifo_full_handler;
1091:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1092:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_overflow_handler =
1093:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.rx_fifo_overflow_handler;
1094:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1095:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_underflow_handler =
1096:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.rx_fifo_underflow_handler;
1097:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1098:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].tx_fifo_empty_handler =
1099:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.tx_fifo_empty_handler;
1100:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1101:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].tx_fifo_overflow_handler =
1102:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.tx_fifo_overflow_handler;
1103:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1104:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->channel)
1105:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
1106:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH0:
1107:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			vic_register_irq(SPI_IRQn, hal_spi_0_irq);
1108:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
1109:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH1:
1110:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			vic_register_irq(SPIS0_IRQn, hal_spi_1_irq);
1111:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
1112:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH2:
1113:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			vic_register_irq(SPIS1_IRQn, hal_spi_2_irq);
1114:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
1115:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
1116:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
1117:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
1118:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1119:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Init interrupt */
1120:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->IMR = reg_tmp;
1121:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
1122:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1123:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** void hal_spi_interrupt_deinit(spi_config_t *spi)
1124:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
1125:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
1126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_DATA_SIZE(spi->data_size));
1127:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
1128:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
1129:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
1130:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
1131:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
1132:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1133:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Disable all interrupt */
1134:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->IMR = 0;
1135:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->TXFTLR = 0;
1136:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->RXFTLR = 0;
1137:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt_enable[spi->channel] = DISABLE;
1138:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].multi_master_handler = NULL;
1139:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_full_handler = NULL;
1140:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_overflow_handler = NULL;
1141:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_underflow_handler = NULL;
1142:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].tx_fifo_empty_handler = NULL;
1143:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].tx_fifo_overflow_handler = NULL;
1144:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1145:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->channel)
1146:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
1147:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH0:
1148:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			vic_unregister_irq(SPI_IRQn);
1149:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
1150:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH1:
1151:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			vic_unregister_irq(SPIS0_IRQn);
1152:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
1153:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		case SSI_CH2:
1154:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			vic_unregister_irq(SPIS1_IRQn);
1155:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
1156:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		default:
1157:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
1158:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
1159:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
1160:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1161:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static void hal_spi_0_irq(void)
1162:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
1163:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_irq_handler(SSI_CH0);
1164:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
1165:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1166:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static void hal_spi_1_irq(void)
1167:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
1168:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_irq_handler(SSI_CH1);
1169:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
1170:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1171:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static void hal_spi_2_irq(void)
1172:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
1173:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_irq_handler(SSI_CH2);
1174:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
1175:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1176:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** static void hal_spi_irq_handler(ssi_channel_t channel)
1177:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** {
  26              		.loc 1 1177 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              	.LVL0:
  31 0000 38B5     		push	{r3, r4, r5, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 16
  34              		.cfi_offset 3, -16
  35              		.cfi_offset 4, -12
  36              		.cfi_offset 5, -8
  37              		.cfi_offset 14, -4
1178:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t tmp = 0;
1179:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
1180:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* 1. Check multi-master interrupt */
1181:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi_hw[channel].spix->ISR & SPI_INT_MSTI)
  38              		.loc 1 1181 0
  39 0002 284D     		ldr	r5, .L45
1177:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t tmp = 0;
  40              		.loc 1 1177 0
  41 0004 0446     		mov	r4, r0
  42              		.loc 1 1181 0
  43 0006 55F82030 		ldr	r3, [r5, r0, lsl #2]
  44 000a 1A6B     		ldr	r2, [r3, #48]
  45 000c 9206     		lsls	r2, r2, #26
  46 000e 06D5     		bpl	.L2
1182:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
1183:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Read multi-master interrupt clear register */
1184:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		tmp = spi_hw[channel].spix->MSTICR;
  47              		.loc 1 1184 0
  48 0010 5B6C     		ldr	r3, [r3, #68]
  49              	.LVL1:
1185:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi_interrupt[channel].multi_master_handler != NULL)
  50              		.loc 1 1185 0
  51 0012 1823     		movs	r3, #24
  52 0014 244A     		ldr	r2, .L45+4
  53 0016 4343     		muls	r3, r0, r3
  54 0018 D358     		ldr	r3, [r2, r3]
  55 001a 03B1     		cbz	r3, .L2
1186:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			spi_interrupt[channel].multi_master_handler();
  56              		.loc 1 1186 0
  57 001c 9847     		blx	r3
  58              	.LVL2:
  59              	.L2:
1187:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
1188:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* 2. Check receive FIFO full interrupt */
1189:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi_hw[channel].spix->ISR & SPI_INT_RXFI)
  60              		.loc 1 1189 0
  61 001e 55F82430 		ldr	r3, [r5, r4, lsl #2]
  62 0022 1B6B     		ldr	r3, [r3, #48]
  63 0024 DB06     		lsls	r3, r3, #27
  64 0026 06D5     		bpl	.L3
1190:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
1191:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi_interrupt[channel].rx_fifo_full_handler != NULL)
  65              		.loc 1 1191 0
  66 0028 1F4A     		ldr	r2, .L45+4
  67 002a 1823     		movs	r3, #24
  68 002c 03FB0423 		mla	r3, r3, r4, r2
  69 0030 5B68     		ldr	r3, [r3, #4]
  70 0032 03B1     		cbz	r3, .L3
1192:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			spi_interrupt[channel].rx_fifo_full_handler();
  71              		.loc 1 1192 0
  72 0034 9847     		blx	r3
  73              	.LVL3:
  74              	.L3:
1193:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
1194:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* 3. Check receive FIFO overflow interrupt */
1195:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi_hw[channel].spix->ISR & SPI_INT_RXOI)
  75              		.loc 1 1195 0
  76 0036 55F82430 		ldr	r3, [r5, r4, lsl #2]
  77 003a 1A6B     		ldr	r2, [r3, #48]
  78 003c 1007     		lsls	r0, r2, #28
  79 003e 07D5     		bpl	.L4
1196:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
1197:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Read RXOICR to clear SPI_INT_RXOI interrupt flag */
1198:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		tmp = spi_hw[channel].spix->RXOICR;
1199:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi_interrupt[channel].rx_fifo_overflow_handler != NULL)
  80              		.loc 1 1199 0
  81 0040 194A     		ldr	r2, .L45+4
1198:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi_interrupt[channel].rx_fifo_overflow_handler != NULL)
  82              		.loc 1 1198 0
  83 0042 DB6B     		ldr	r3, [r3, #60]
  84              		.loc 1 1199 0
  85 0044 1823     		movs	r3, #24
  86 0046 03FB0423 		mla	r3, r3, r4, r2
  87 004a 9B68     		ldr	r3, [r3, #8]
  88 004c 03B1     		cbz	r3, .L4
1200:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			spi_interrupt[channel].rx_fifo_overflow_handler();
  89              		.loc 1 1200 0
  90 004e 9847     		blx	r3
  91              	.LVL4:
  92              	.L4:
1201:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
1202:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* 4. Check receive FIFO underflow interrupt */
1203:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi_hw[channel].spix->ISR & SPI_INT_RXUI)
  93              		.loc 1 1203 0
  94 0050 55F82430 		ldr	r3, [r5, r4, lsl #2]
  95 0054 1A6B     		ldr	r2, [r3, #48]
  96 0056 5107     		lsls	r1, r2, #29
  97 0058 07D5     		bpl	.L5
1204:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
1205:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Read RXUICR to clear SPI_INT_RXUI interrupt flag */
1206:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		tmp = spi_hw[channel].spix->RXUICR;
1207:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi_interrupt[channel].rx_fifo_underflow_handler != NULL)
  98              		.loc 1 1207 0
  99 005a 134A     		ldr	r2, .L45+4
1206:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi_interrupt[channel].rx_fifo_underflow_handler != NULL)
 100              		.loc 1 1206 0
 101 005c 1B6C     		ldr	r3, [r3, #64]
 102              		.loc 1 1207 0
 103 005e 1823     		movs	r3, #24
 104 0060 03FB0423 		mla	r3, r3, r4, r2
 105 0064 DB68     		ldr	r3, [r3, #12]
 106 0066 03B1     		cbz	r3, .L5
1208:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			spi_interrupt[channel].rx_fifo_underflow_handler();
 107              		.loc 1 1208 0
 108 0068 9847     		blx	r3
 109              	.LVL5:
 110              	.L5:
1209:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
1210:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* 5. Check transmit FIFO overflow interrupt */
1211:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi_hw[channel].spix->ISR & SPI_INT_TXOI)
 111              		.loc 1 1211 0
 112 006a 55F82430 		ldr	r3, [r5, r4, lsl #2]
 113 006e 1A6B     		ldr	r2, [r3, #48]
 114 0070 9207     		lsls	r2, r2, #30
 115 0072 07D5     		bpl	.L6
1212:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
1213:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		/* Read TXOICR to clear SPI_INT_TXOI interrupt flag */
1214:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		tmp = spi_hw[channel].spix->TXOICR;
1215:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi_interrupt[channel].tx_fifo_overflow_handler != NULL)
 116              		.loc 1 1215 0
 117 0074 0C4A     		ldr	r2, .L45+4
1214:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi_interrupt[channel].tx_fifo_overflow_handler != NULL)
 118              		.loc 1 1214 0
 119 0076 9B6B     		ldr	r3, [r3, #56]
 120              		.loc 1 1215 0
 121 0078 1823     		movs	r3, #24
 122 007a 03FB0423 		mla	r3, r3, r4, r2
 123 007e 1B69     		ldr	r3, [r3, #16]
 124 0080 03B1     		cbz	r3, .L6
1216:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			spi_interrupt[channel].tx_fifo_overflow_handler();
 125              		.loc 1 1216 0
 126 0082 9847     		blx	r3
 127              	.LVL6:
 128              	.L6:
1217:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
1218:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* 6. Check transmit FIFO empty interrupt */
1219:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(spi_hw[channel].spix->ISR & SPI_INT_TXEI)
 129              		.loc 1 1219 0
 130 0084 55F82430 		ldr	r3, [r5, r4, lsl #2]
 131 0088 1B6B     		ldr	r3, [r3, #48]
 132 008a DB07     		lsls	r3, r3, #31
 133 008c 06D5     		bpl	.L7
1220:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
1221:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(spi_interrupt[channel].tx_fifo_empty_handler != NULL)
 134              		.loc 1 1221 0
 135 008e 064A     		ldr	r2, .L45+4
 136 0090 1823     		movs	r3, #24
 137 0092 03FB0423 		mla	r3, r3, r4, r2
 138 0096 5B69     		ldr	r3, [r3, #20]
 139 0098 03B1     		cbz	r3, .L7
1222:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			spi_interrupt[channel].tx_fifo_empty_handler();
 140              		.loc 1 1222 0
 141 009a 9847     		blx	r3
 142              	.LVL7:
 143              	.L7:
1223:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
1224:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Read to clear all interrupt flag */
1225:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	tmp |= spi_hw[channel].spix->ICR;
 144              		.loc 1 1225 0
 145 009c 55F82430 		ldr	r3, [r5, r4, lsl #2]
 146 00a0 9B6C     		ldr	r3, [r3, #72]
 147 00a2 38BD     		pop	{r3, r4, r5, pc}
 148              	.L46:
 149              		.align	2
 150              	.L45:
 151 00a4 00000000 		.word	.LANCHOR0
 152 00a8 00000000 		.word	.LANCHOR1
 153              		.cfi_endproc
 154              	.LFE23:
 156              		.section	.text.hal_spi_2_irq,"ax",%progbits
 157              		.align	1
 158              		.thumb
 159              		.thumb_func
 161              	hal_spi_2_irq:
 162              	.LFB22:
1172:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_irq_handler(SSI_CH2);
 163              		.loc 1 1172 0
 164              		.cfi_startproc
 165              		@ args = 0, pretend = 0, frame = 0
 166              		@ frame_needed = 0, uses_anonymous_args = 0
 167 0000 08B5     		push	{r3, lr}
 168              	.LCFI1:
 169              		.cfi_def_cfa_offset 8
 170              		.cfi_offset 3, -8
 171              		.cfi_offset 14, -4
1173:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 172              		.loc 1 1173 0
 173 0002 0220     		movs	r0, #2
 174 0004 014B     		ldr	r3, .L48
 175 0006 9847     		blx	r3
 176              	.LVL8:
 177 0008 08BD     		pop	{r3, pc}
 178              	.L49:
 179 000a 00BF     		.align	2
 180              	.L48:
 181 000c 00000000 		.word	hal_spi_irq_handler
 182              		.cfi_endproc
 183              	.LFE22:
 185              		.section	.text.hal_spi_1_irq,"ax",%progbits
 186              		.align	1
 187              		.thumb
 188              		.thumb_func
 190              	hal_spi_1_irq:
 191              	.LFB21:
1167:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_irq_handler(SSI_CH1);
 192              		.loc 1 1167 0
 193              		.cfi_startproc
 194              		@ args = 0, pretend = 0, frame = 0
 195              		@ frame_needed = 0, uses_anonymous_args = 0
 196 0000 08B5     		push	{r3, lr}
 197              	.LCFI2:
 198              		.cfi_def_cfa_offset 8
 199              		.cfi_offset 3, -8
 200              		.cfi_offset 14, -4
1168:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 201              		.loc 1 1168 0
 202 0002 0120     		movs	r0, #1
 203 0004 014B     		ldr	r3, .L51
 204 0006 9847     		blx	r3
 205              	.LVL9:
 206 0008 08BD     		pop	{r3, pc}
 207              	.L52:
 208 000a 00BF     		.align	2
 209              	.L51:
 210 000c 00000000 		.word	hal_spi_irq_handler
 211              		.cfi_endproc
 212              	.LFE21:
 214              		.section	.text.hal_spi_0_irq,"ax",%progbits
 215              		.align	1
 216              		.thumb
 217              		.thumb_func
 219              	hal_spi_0_irq:
 220              	.LFB20:
1162:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_irq_handler(SSI_CH0);
 221              		.loc 1 1162 0
 222              		.cfi_startproc
 223              		@ args = 0, pretend = 0, frame = 0
 224              		@ frame_needed = 0, uses_anonymous_args = 0
 225 0000 08B5     		push	{r3, lr}
 226              	.LCFI3:
 227              		.cfi_def_cfa_offset 8
 228              		.cfi_offset 3, -8
 229              		.cfi_offset 14, -4
1163:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 230              		.loc 1 1163 0
 231 0002 0020     		movs	r0, #0
 232 0004 014B     		ldr	r3, .L54
 233 0006 9847     		blx	r3
 234              	.LVL10:
 235 0008 08BD     		pop	{r3, pc}
 236              	.L55:
 237 000a 00BF     		.align	2
 238              	.L54:
 239 000c 00000000 		.word	hal_spi_irq_handler
 240              		.cfi_endproc
 241              	.LFE20:
 243              		.section	.text.hal_spi_init,"ax",%progbits
 244              		.align	1
 245              		.global	hal_spi_init
 246              		.thumb
 247              		.thumb_func
 249              	hal_spi_init:
 250              	.LFB3:
 137:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t control_0_reg = 0;
 251              		.loc 1 137 0
 252              		.cfi_startproc
 253              		@ args = 0, pretend = 0, frame = 0
 254              		@ frame_needed = 0, uses_anonymous_args = 0
 255              	.LVL11:
 256 0000 38B5     		push	{r3, r4, r5, lr}
 257              	.LCFI4:
 258              		.cfi_def_cfa_offset 16
 259              		.cfi_offset 3, -16
 260              		.cfi_offset 4, -12
 261              		.cfi_offset 5, -8
 262              		.cfi_offset 14, -4
 141:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 263              		.loc 1 141 0
 264 0002 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 265 0004 082B     		cmp	r3, #8
 137:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t control_0_reg = 0;
 266              		.loc 1 137 0
 267 0006 0446     		mov	r4, r0
 141:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 268              		.loc 1 141 0
 269 0008 07D0     		beq	.L57
 141:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 270              		.loc 1 141 0 is_stmt 0 discriminator 1
 271 000a 102B     		cmp	r3, #16
 272 000c 05D0     		beq	.L57
 141:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 273              		.loc 1 141 0 discriminator 2
 274 000e 202B     		cmp	r3, #32
 275 0010 03D0     		beq	.L57
 141:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 276              		.loc 1 141 0 discriminator 3
 277 0012 3C48     		ldr	r0, .L95
 278              	.LVL12:
 279 0014 8D21     		movs	r1, #141
 280 0016 3C4B     		ldr	r3, .L95+4
 281 0018 9847     		blx	r3
 282              	.LVL13:
 283              	.L57:
 142:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
 284              		.loc 1 142 0 is_stmt 1
 285 001a E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 286 001c 032B     		cmp	r3, #3
 287 001e 03D9     		bls	.L58
 142:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
 288              		.loc 1 142 0 is_stmt 0 discriminator 1
 289 0020 3848     		ldr	r0, .L95
 290 0022 8E21     		movs	r1, #142
 291 0024 384B     		ldr	r3, .L95+4
 292 0026 9847     		blx	r3
 293              	.LVL14:
 294              	.L58:
 143:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 295              		.loc 1 143 0 is_stmt 1
 296 0028 6379     		ldrb	r3, [r4, #5]	@ zero_extendqisi2
 297 002a 032B     		cmp	r3, #3
 298 002c 03D9     		bls	.L59
 143:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 299              		.loc 1 143 0 is_stmt 0 discriminator 1
 300 002e 3548     		ldr	r0, .L95
 301 0030 8F21     		movs	r1, #143
 302 0032 354B     		ldr	r3, .L95+4
 303 0034 9847     		blx	r3
 304              	.LVL15:
 305              	.L59:
 144:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 306              		.loc 1 144 0 is_stmt 1
 307 0036 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 308 0038 022B     		cmp	r3, #2
 309 003a 03D9     		bls	.L60
 144:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 310              		.loc 1 144 0 is_stmt 0 discriminator 1
 311 003c 3148     		ldr	r0, .L95
 312 003e 9021     		movs	r1, #144
 313 0040 314B     		ldr	r3, .L95+4
 314 0042 9847     		blx	r3
 315              	.LVL16:
 316              	.L60:
 145:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 317              		.loc 1 145 0 is_stmt 1
 318 0044 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 319 0046 022B     		cmp	r3, #2
 320 0048 03D9     		bls	.L61
 145:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 321              		.loc 1 145 0 is_stmt 0 discriminator 1
 322 004a 2E48     		ldr	r0, .L95
 323 004c 9121     		movs	r1, #145
 324 004e 2E4B     		ldr	r3, .L95+4
 325 0050 9847     		blx	r3
 326              	.LVL17:
 327              	.L61:
 146:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 328              		.loc 1 146 0 is_stmt 1
 329 0052 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 330 0054 022B     		cmp	r3, #2
 331 0056 03D9     		bls	.L62
 146:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 332              		.loc 1 146 0 is_stmt 0 discriminator 1
 333 0058 2A48     		ldr	r0, .L95
 334 005a 9221     		movs	r1, #146
 335 005c 2A4B     		ldr	r3, .L95+4
 336 005e 9847     		blx	r3
 337              	.LVL18:
 338              	.L62:
 156:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 339              		.loc 1 156 0 is_stmt 1
 340 0060 2A4B     		ldr	r3, .L95+8
 341 0062 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 164:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 342              		.loc 1 164 0
 343 0064 A268     		ldr	r2, [r4, #8]
 156:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 344              		.loc 1 156 0
 345 0066 53F82010 		ldr	r1, [r3, r0, lsl #2]
 346 006a 0023     		movs	r3, #0
 347 006c CB62     		str	r3, [r1, #44]
 159:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 348              		.loc 1 159 0
 349 006e 8B60     		str	r3, [r1, #8]
 164:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 350              		.loc 1 164 0
 351 0070 274B     		ldr	r3, .L95+12
 352 0072 B3FBF2F3 		udiv	r3, r3, r2
 353 0076 4B61     		str	r3, [r1, #20]
 171:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 354              		.loc 1 171 0
 355 0078 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 356 007a 012B     		cmp	r3, #1
 357 007c 11D0     		beq	.L77
 358 007e 02D3     		bcc	.L65
 359 0080 022B     		cmp	r3, #2
 360 0082 04D0     		beq	.L66
 361 0084 39E0     		b	.L79
 362              	.L65:
 178:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 363              		.loc 1 178 0
 364 0086 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 365 0088 013B     		subs	r3, r3, #1
 366 008a 1A04     		lsls	r2, r3, #16
 367              	.LVL19:
 179:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 368              		.loc 1 179 0
 369 008c 0AE0     		b	.L64
 370              	.LVL20:
 371              	.L66:
 192:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					spi->data_size == DATASIZE_16BIT)
 372              		.loc 1 192 0
 373 008e 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 374 0090 082B     		cmp	r3, #8
 375 0092 01D0     		beq	.L67
 192:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					spi->data_size == DATASIZE_16BIT)
 376              		.loc 1 192 0 is_stmt 0 discriminator 1
 377 0094 102B     		cmp	r3, #16
 378 0096 30D1     		bne	.L79
 379              	.L67:
 195:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			}
 380              		.loc 1 195 0 is_stmt 1
 381 0098 013B     		subs	r3, r3, #1
 382 009a 1B03     		lsls	r3, r3, #12
 383 009c 43F02002 		orr	r2, r3, #32
 384              	.LVL21:
 201:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 385              		.loc 1 201 0
 386 00a0 00E0     		b	.L64
 387              	.LVL22:
 388              	.L77:
 183:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 389              		.loc 1 183 0
 390 00a2 1022     		movs	r2, #16
 391              	.LVL23:
 392              	.L64:
 210:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 393              		.loc 1 210 0
 394 00a4 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 395 00a6 5B05     		lsls	r3, r3, #21
 213:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 396              		.loc 1 213 0
 397 00a8 6579     		ldrb	r5, [r4, #5]	@ zero_extendqisi2
 398 00aa 43EA0523 		orr	r3, r3, r5, lsl #8
 399 00ae 1343     		orrs	r3, r3, r2
 400              	.LVL24:
 216:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 401              		.loc 1 216 0
 402 00b0 E278     		ldrb	r2, [r4, #3]	@ zero_extendqisi2
 403 00b2 032A     		cmp	r2, #3
 404 00b4 21D8     		bhi	.L79
 405 00b6 DFE802F0 		tbb	[pc, r2]
 406              	.L69:
 407 00ba 02       		.byte	(.L68-.L69)/2
 408 00bb 05       		.byte	(.L70-.L69)/2
 409 00bc 08       		.byte	(.L71-.L69)/2
 410 00bd 0B       		.byte	(.L72-.L69)/2
 411              		.p2align 1
 412              	.L68:
 413              	.LVL25:
 222:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 414              		.loc 1 222 0
 415 00be 23F0C003 		bic	r3, r3, #192
 416              	.LVL26:
 223:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 417              		.loc 1 223 0
 418 00c2 07E0     		b	.L73
 419              	.L70:
 228:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 420              		.loc 1 228 0
 421 00c4 43F04003 		orr	r3, r3, #64
 422              	.LVL27:
 229:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 423              		.loc 1 229 0
 424 00c8 04E0     		b	.L73
 425              	.L71:
 426              	.LVL28:
 234:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 427              		.loc 1 234 0
 428 00ca 43F08003 		orr	r3, r3, #128
 429              	.LVL29:
 235:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 430              		.loc 1 235 0
 431 00ce 01E0     		b	.L73
 432              	.L72:
 239:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 433              		.loc 1 239 0
 434 00d0 43F0C003 		orr	r3, r3, #192
 435              	.LVL30:
 436              	.L73:
 249:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 437              		.loc 1 249 0
 438 00d4 0F4A     		ldr	r2, .L95+16
 439 00d6 9142     		cmp	r1, r2
 440 00d8 05D0     		beq	.L74
 251:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 441              		.loc 1 251 0
 442 00da 022D     		cmp	r5, #2
 254:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 443              		.loc 1 254 0
 444 00dc 0CBF     		ite	eq
 445 00de 43F48063 		orreq	r3, r3, #1024
 446              	.LVL31:
 259:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 447              		.loc 1 259 0
 448 00e2 23F48063 		bicne	r3, r3, #1024
 449              	.LVL32:
 450              	.L74:
 263:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 1;
 451              		.loc 1 263 0
 452 00e6 0B60     		str	r3, [r1]
 264:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 453              		.loc 1 264 0
 454 00e8 0123     		movs	r3, #1
 455              	.LVL33:
 456 00ea 8B60     		str	r3, [r1, #8]
 457              	.LVL34:
 267:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		&& (spi->transfer_mode == RX_ONLY
 458              		.loc 1 267 0
 459 00ec 38B9     		cbnz	r0, .L80
 268:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		|| spi->transfer_mode == EEPROM_READ))
 460              		.loc 1 268 0
 461 00ee 023D     		subs	r5, r5, #2
 462 00f0 9D42     		cmp	r5, r3
 463 00f2 05D8     		bhi	.L63
 272:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 464              		.loc 1 272 0
 465 00f4 E388     		ldrh	r3, [r4, #6]
 466 00f6 4B60     		str	r3, [r1, #4]
 467 00f8 38BD     		pop	{r3, r4, r5, pc}
 468              	.LVL35:
 469              	.L79:
 244:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 470              		.loc 1 244 0
 471 00fa 0E20     		movs	r0, #14
 472 00fc 38BD     		pop	{r3, r4, r5, pc}
 473              	.LVL36:
 474              	.L80:
 275:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 475              		.loc 1 275 0
 476 00fe 0020     		movs	r0, #0
 477              	.L63:
 276:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 478              		.loc 1 276 0
 479 0100 38BD     		pop	{r3, r4, r5, pc}
 480              	.LVL37:
 481              	.L96:
 482 0102 00BF     		.align	2
 483              	.L95:
 484 0104 00000000 		.word	.LANCHOR2
 485 0108 00000000 		.word	assert_failed
 486 010c 00000000 		.word	.LANCHOR0
 487 0110 40EFC41F 		.word	533000000
 488 0114 00C00102 		.word	33669120
 489              		.cfi_endproc
 490              	.LFE3:
 492              		.section	.text.hal_spi_slave_select,"ax",%progbits
 493              		.align	1
 494              		.global	hal_spi_slave_select
 495              		.thumb
 496              		.thumb_func
 498              	hal_spi_slave_select:
 499              	.LFB4:
 279:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	__IO uint32_t tmp = 0;
 500              		.loc 1 279 0
 501              		.cfi_startproc
 502              		@ args = 0, pretend = 0, frame = 8
 503              		@ frame_needed = 0, uses_anonymous_args = 0
 504              	.LVL38:
 505 0000 37B5     		push	{r0, r1, r2, r4, r5, lr}
 506              	.LCFI5:
 507              		.cfi_def_cfa_offset 24
 508              		.cfi_offset 4, -12
 509              		.cfi_offset 5, -8
 510              		.cfi_offset 14, -4
 282:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 511              		.loc 1 282 0
 512 0002 0138     		subs	r0, r0, #1
 513              	.LVL39:
 280:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 514              		.loc 1 280 0
 515 0004 0023     		movs	r3, #0
 282:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 516              		.loc 1 282 0
 517 0006 C2B2     		uxtb	r2, r0
 518 0008 1F2A     		cmp	r2, #31
 280:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 519              		.loc 1 280 0
 520 000a 0193     		str	r3, [sp, #4]
 282:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 521              		.loc 1 282 0
 522 000c 0FD8     		bhi	.L99
 284:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		tmp = (tmp & ~(1 << (cs_pin - 1))) | (value << (cs_pin - 1));
 523              		.loc 1 284 0
 524 000e 094A     		ldr	r2, .L100
 285:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		spi_hw[SSI_CH0].spix->SER = tmp;
 525              		.loc 1 285 0
 526 0010 8140     		lsls	r1, r1, r0
 527              	.LVL40:
 284:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		tmp = (tmp & ~(1 << (cs_pin - 1))) | (value << (cs_pin - 1));
 528              		.loc 1 284 0
 529 0012 1568     		ldr	r5, [r2]
 530 0014 2A69     		ldr	r2, [r5, #16]
 531 0016 0192     		str	r2, [sp, #4]
 285:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		spi_hw[SSI_CH0].spix->SER = tmp;
 532              		.loc 1 285 0
 533 0018 0122     		movs	r2, #1
 534 001a 019C     		ldr	r4, [sp, #4]
 535 001c 8240     		lsls	r2, r2, r0
 536 001e 24EA0202 		bic	r2, r4, r2
 537 0022 1143     		orrs	r1, r1, r2
 287:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 538              		.loc 1 287 0
 539 0024 1846     		mov	r0, r3
 285:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		spi_hw[SSI_CH0].spix->SER = tmp;
 540              		.loc 1 285 0
 541 0026 0191     		str	r1, [sp, #4]
 286:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_OK;
 542              		.loc 1 286 0
 543 0028 019A     		ldr	r2, [sp, #4]
 544 002a 2A61     		str	r2, [r5, #16]
 287:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 545              		.loc 1 287 0
 546 002c 00E0     		b	.L98
 547              	.LVL41:
 548              	.L99:
 289:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 549              		.loc 1 289 0
 550 002e 0E20     		movs	r0, #14
 551              	.LVL42:
 552              	.L98:
 290:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 553              		.loc 1 290 0
 554 0030 03B0     		add	sp, sp, #12
 555              	.LCFI6:
 556              		.cfi_def_cfa_offset 12
 557              		@ sp needed
 558 0032 30BD     		pop	{r4, r5, pc}
 559              	.L101:
 560              		.align	2
 561              	.L100:
 562 0034 00000000 		.word	.LANCHOR0
 563              		.cfi_endproc
 564              	.LFE4:
 566              		.section	.text.hal_spi_disable,"ax",%progbits
 567              		.align	1
 568              		.global	hal_spi_disable
 569              		.thumb
 570              		.thumb_func
 572              	hal_spi_disable:
 573              	.LFB5:
 293:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 574              		.loc 1 293 0
 575              		.cfi_startproc
 576              		@ args = 0, pretend = 0, frame = 0
 577              		@ frame_needed = 0, uses_anonymous_args = 0
 578              	.LVL43:
 295:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 579              		.loc 1 295 0
 580 0000 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 581 0002 022B     		cmp	r3, #2
 293:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 582              		.loc 1 293 0
 583 0004 10B5     		push	{r4, lr}
 584              	.LCFI7:
 585              		.cfi_def_cfa_offset 8
 586              		.cfi_offset 4, -8
 587              		.cfi_offset 14, -4
 293:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 588              		.loc 1 293 0
 589 0006 0446     		mov	r4, r0
 295:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 590              		.loc 1 295 0
 591 0008 04D9     		bls	.L103
 295:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 592              		.loc 1 295 0 is_stmt 0 discriminator 1
 593 000a 0648     		ldr	r0, .L104
 594              	.LVL44:
 595 000c 40F22711 		movw	r1, #295
 596 0010 054B     		ldr	r3, .L104+4
 597 0012 9847     		blx	r3
 598              	.LVL45:
 599              	.L103:
 296:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 600              		.loc 1 296 0 is_stmt 1
 601 0014 054B     		ldr	r3, .L104+8
 602 0016 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 603 0018 53F82230 		ldr	r3, [r3, r2, lsl #2]
 604 001c 0022     		movs	r2, #0
 605 001e 9A60     		str	r2, [r3, #8]
 606 0020 10BD     		pop	{r4, pc}
 607              	.LVL46:
 608              	.L105:
 609 0022 00BF     		.align	2
 610              	.L104:
 611 0024 00000000 		.word	.LANCHOR3
 612 0028 00000000 		.word	assert_failed
 613 002c 00000000 		.word	.LANCHOR0
 614              		.cfi_endproc
 615              	.LFE5:
 617              		.section	.text.hal_spi_enable,"ax",%progbits
 618              		.align	1
 619              		.global	hal_spi_enable
 620              		.thumb
 621              		.thumb_func
 623              	hal_spi_enable:
 624              	.LFB6:
 300:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 625              		.loc 1 300 0
 626              		.cfi_startproc
 627              		@ args = 0, pretend = 0, frame = 0
 628              		@ frame_needed = 0, uses_anonymous_args = 0
 629              	.LVL47:
 302:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 1;
 630              		.loc 1 302 0
 631 0000 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 632 0002 022B     		cmp	r3, #2
 300:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 633              		.loc 1 300 0
 634 0004 10B5     		push	{r4, lr}
 635              	.LCFI8:
 636              		.cfi_def_cfa_offset 8
 637              		.cfi_offset 4, -8
 638              		.cfi_offset 14, -4
 300:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 639              		.loc 1 300 0
 640 0006 0446     		mov	r4, r0
 302:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 1;
 641              		.loc 1 302 0
 642 0008 04D9     		bls	.L107
 302:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 1;
 643              		.loc 1 302 0 is_stmt 0 discriminator 1
 644 000a 0648     		ldr	r0, .L108
 645              	.LVL48:
 646 000c 4FF49771 		mov	r1, #302
 647 0010 054B     		ldr	r3, .L108+4
 648 0012 9847     		blx	r3
 649              	.LVL49:
 650              	.L107:
 303:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 651              		.loc 1 303 0 is_stmt 1
 652 0014 054B     		ldr	r3, .L108+8
 653 0016 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 654 0018 53F82230 		ldr	r3, [r3, r2, lsl #2]
 655 001c 0122     		movs	r2, #1
 656 001e 9A60     		str	r2, [r3, #8]
 657 0020 10BD     		pop	{r4, pc}
 658              	.LVL50:
 659              	.L109:
 660 0022 00BF     		.align	2
 661              	.L108:
 662 0024 00000000 		.word	.LANCHOR4
 663 0028 00000000 		.word	assert_failed
 664 002c 00000000 		.word	.LANCHOR0
 665              		.cfi_endproc
 666              	.LFE6:
 668              		.section	.text.hal_spi_reset,"ax",%progbits
 669              		.align	1
 670              		.global	hal_spi_reset
 671              		.thumb
 672              		.thumb_func
 674              	hal_spi_reset:
 675              	.LFB7:
 307:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 676              		.loc 1 307 0
 677              		.cfi_startproc
 678              		@ args = 0, pretend = 0, frame = 0
 679              		@ frame_needed = 0, uses_anonymous_args = 0
 680              	.LVL51:
 309:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 681              		.loc 1 309 0
 682 0000 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 683 0002 022B     		cmp	r3, #2
 307:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 684              		.loc 1 307 0
 685 0004 10B5     		push	{r4, lr}
 686              	.LCFI9:
 687              		.cfi_def_cfa_offset 8
 688              		.cfi_offset 4, -8
 689              		.cfi_offset 14, -4
 307:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 690              		.loc 1 307 0
 691 0006 0446     		mov	r4, r0
 309:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 692              		.loc 1 309 0
 693 0008 04D9     		bls	.L111
 309:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->SSIENR = 0;
 694              		.loc 1 309 0 is_stmt 0 discriminator 1
 695 000a 0948     		ldr	r0, .L115
 696              	.LVL52:
 697 000c 40F23511 		movw	r1, #309
 698 0010 084B     		ldr	r3, .L115+4
 699 0012 9847     		blx	r3
 700              	.LVL53:
 701              	.L111:
 310:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_delay(0xff);
 702              		.loc 1 310 0 is_stmt 1
 703 0014 084B     		ldr	r3, .L115+8
 704 0016 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 705 0018 53F82220 		ldr	r2, [r3, r2, lsl #2]
 706 001c 0023     		movs	r3, #0
 707 001e 9360     		str	r3, [r2, #8]
 708 0020 FF23     		movs	r3, #255
 709              	.LVL54:
 710              	.L112:
 711              	.LBB4:
 712              	.LBB5:
 110:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		time--;
 713              		.loc 1 110 0
 714 0022 0BB1     		cbz	r3, .L114
 111:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 715              		.loc 1 111 0
 716 0024 013B     		subs	r3, r3, #1
 717 0026 FCE7     		b	.L112
 718              	.L114:
 719              	.LBE5:
 720              	.LBE4:
 312:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 721              		.loc 1 312 0
 722 0028 0123     		movs	r3, #1
 723 002a 9360     		str	r3, [r2, #8]
 724 002c 10BD     		pop	{r4, pc}
 725              	.LVL55:
 726              	.L116:
 727 002e 00BF     		.align	2
 728              	.L115:
 729 0030 00000000 		.word	.LANCHOR5
 730 0034 00000000 		.word	assert_failed
 731 0038 00000000 		.word	.LANCHOR0
 732              		.cfi_endproc
 733              	.LFE7:
 735              		.section	.text.hal_spi_dma_init,"ax",%progbits
 736              		.align	1
 737              		.global	hal_spi_dma_init
 738              		.thumb
 739              		.thumb_func
 741              	hal_spi_dma_init:
 742              	.LFB17:
1021:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t reg_tmp = 0;
 743              		.loc 1 1021 0
 744              		.cfi_startproc
 745              		@ args = 0, pretend = 0, frame = 0
 746              		@ frame_needed = 0, uses_anonymous_args = 0
 747              	.LVL56:
 748 0000 38B5     		push	{r3, r4, r5, lr}
 749              	.LCFI10:
 750              		.cfi_def_cfa_offset 16
 751              		.cfi_offset 3, -16
 752              		.cfi_offset 4, -12
 753              		.cfi_offset 5, -8
 754              		.cfi_offset 14, -4
1025:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 755              		.loc 1 1025 0
 756 0002 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 757 0004 082B     		cmp	r3, #8
1021:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t reg_tmp = 0;
 758              		.loc 1 1021 0
 759 0006 0446     		mov	r4, r0
 760 0008 0D46     		mov	r5, r1
1025:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 761              		.loc 1 1025 0
 762 000a 08D0     		beq	.L118
1025:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 763              		.loc 1 1025 0 is_stmt 0 discriminator 1
 764 000c 102B     		cmp	r3, #16
 765 000e 06D0     		beq	.L118
1025:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 766              		.loc 1 1025 0 discriminator 2
 767 0010 202B     		cmp	r3, #32
 768 0012 04D0     		beq	.L118
1025:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 769              		.loc 1 1025 0 discriminator 3
 770 0014 2548     		ldr	r0, .L135
 771              	.LVL57:
 772 0016 40F20141 		movw	r1, #1025
 773              	.LVL58:
 774 001a 254B     		ldr	r3, .L135+4
 775 001c 9847     		blx	r3
 776              	.LVL59:
 777              	.L118:
1026:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
 778              		.loc 1 1026 0 is_stmt 1
 779 001e E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 780 0020 032B     		cmp	r3, #3
 781 0022 04D9     		bls	.L119
1026:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
 782              		.loc 1 1026 0 is_stmt 0 discriminator 1
 783 0024 2148     		ldr	r0, .L135
 784 0026 40F20241 		movw	r1, #1026
 785 002a 214B     		ldr	r3, .L135+4
 786 002c 9847     		blx	r3
 787              	.LVL60:
 788              	.L119:
1027:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 789              		.loc 1 1027 0 is_stmt 1
 790 002e 6379     		ldrb	r3, [r4, #5]	@ zero_extendqisi2
 791 0030 032B     		cmp	r3, #3
 792 0032 04D9     		bls	.L120
1027:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 793              		.loc 1 1027 0 is_stmt 0 discriminator 1
 794 0034 1D48     		ldr	r0, .L135
 795 0036 40F20341 		movw	r1, #1027
 796 003a 1D4B     		ldr	r3, .L135+4
 797 003c 9847     		blx	r3
 798              	.LVL61:
 799              	.L120:
1028:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 800              		.loc 1 1028 0 is_stmt 1
 801 003e A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 802 0040 022B     		cmp	r3, #2
 803 0042 04D9     		bls	.L121
1028:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 804              		.loc 1 1028 0 is_stmt 0 discriminator 1
 805 0044 1948     		ldr	r0, .L135
 806 0046 40F20441 		movw	r1, #1028
 807 004a 194B     		ldr	r3, .L135+4
 808 004c 9847     		blx	r3
 809              	.LVL62:
 810              	.L121:
1029:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 811              		.loc 1 1029 0 is_stmt 1
 812 004e 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 813 0050 022B     		cmp	r3, #2
 814 0052 04D9     		bls	.L122
1029:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 815              		.loc 1 1029 0 is_stmt 0 discriminator 1
 816 0054 1548     		ldr	r0, .L135
 817 0056 40F20541 		movw	r1, #1029
 818 005a 154B     		ldr	r3, .L135+4
 819 005c 9847     		blx	r3
 820              	.LVL63:
 821              	.L122:
1030:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(dma->dma_receive_enable));
 822              		.loc 1 1030 0 is_stmt 1
 823 005e 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 824 0060 022B     		cmp	r3, #2
 825 0062 04D9     		bls	.L123
1030:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(dma->dma_receive_enable));
 826              		.loc 1 1030 0 is_stmt 0 discriminator 1
 827 0064 1148     		ldr	r0, .L135
 828 0066 40F20641 		movw	r1, #1030
 829 006a 114B     		ldr	r3, .L135+4
 830 006c 9847     		blx	r3
 831              	.LVL64:
 832              	.L123:
1031:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(dma->dma_transmit_enable));
 833              		.loc 1 1031 0 is_stmt 1
 834 006e EB78     		ldrb	r3, [r5, #3]	@ zero_extendqisi2
 835 0070 012B     		cmp	r3, #1
 836 0072 04D9     		bls	.L124
1031:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(dma->dma_transmit_enable));
 837              		.loc 1 1031 0 is_stmt 0 discriminator 1
 838 0074 0D48     		ldr	r0, .L135
 839 0076 40F20741 		movw	r1, #1031
 840 007a 0D4B     		ldr	r3, .L135+4
 841 007c 9847     		blx	r3
 842              	.LVL65:
 843              	.L124:
1032:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 844              		.loc 1 1032 0 is_stmt 1
 845 007e AB78     		ldrb	r3, [r5, #2]	@ zero_extendqisi2
 846 0080 012B     		cmp	r3, #1
 847 0082 04D9     		bls	.L125
1032:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 848              		.loc 1 1032 0 is_stmt 0 discriminator 1
 849 0084 0948     		ldr	r0, .L135
 850 0086 4FF48161 		mov	r1, #1032
 851 008a 094B     		ldr	r3, .L135+4
 852 008c 9847     		blx	r3
 853              	.LVL66:
 854              	.L125:
1035:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Configure DMA receive / receive data level */
 855              		.loc 1 1035 0 is_stmt 1
 856 008e 094B     		ldr	r3, .L135+8
 857 0090 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 858 0092 53F82230 		ldr	r3, [r3, r2, lsl #2]
 859 0096 2A78     		ldrb	r2, [r5]	@ zero_extendqisi2
 860 0098 1A65     		str	r2, [r3, #80]
1037:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* Enable/Disable transmit DMA enable bit */
 861              		.loc 1 1037 0
 862 009a 2A78     		ldrb	r2, [r5]	@ zero_extendqisi2
 863 009c 5A65     		str	r2, [r3, #84]
1039:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			((uint32_t)dma->dma_receive_enable << 0);
 864              		.loc 1 1039 0
 865 009e A978     		ldrb	r1, [r5, #2]	@ zero_extendqisi2
1040:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 866              		.loc 1 1040 0
 867 00a0 EA78     		ldrb	r2, [r5, #3]	@ zero_extendqisi2
1039:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			((uint32_t)dma->dma_receive_enable << 0);
 868              		.loc 1 1039 0
 869 00a2 42EA4102 		orr	r2, r2, r1, lsl #1
 870              	.LVL67:
1043:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 871              		.loc 1 1043 0
 872 00a6 DA64     		str	r2, [r3, #76]
 873 00a8 38BD     		pop	{r3, r4, r5, pc}
 874              	.LVL68:
 875              	.L136:
 876 00aa 00BF     		.align	2
 877              	.L135:
 878 00ac 00000000 		.word	.LANCHOR6
 879 00b0 00000000 		.word	assert_failed
 880 00b4 00000000 		.word	.LANCHOR0
 881              		.cfi_endproc
 882              	.LFE17:
 884              		.section	.text.hal_spi_receive_buf,"ax",%progbits
 885              		.align	1
 886              		.global	hal_spi_receive_buf
 887              		.thumb
 888              		.thumb_func
 890              	hal_spi_receive_buf:
 891              	.LFB10:
 493:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 892              		.loc 1 493 0
 893              		.cfi_startproc
 894              		@ args = 0, pretend = 0, frame = 40
 895              		@ frame_needed = 0, uses_anonymous_args = 0
 896              	.LVL69:
 897 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 898              	.LCFI11:
 899              		.cfi_def_cfa_offset 36
 900              		.cfi_offset 4, -36
 901              		.cfi_offset 5, -32
 902              		.cfi_offset 6, -28
 903              		.cfi_offset 7, -24
 904              		.cfi_offset 8, -20
 905              		.cfi_offset 9, -16
 906              		.cfi_offset 10, -12
 907              		.cfi_offset 11, -8
 908              		.cfi_offset 14, -4
 495:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_receive_buf_dma(spi, rx_buf, len);
 909              		.loc 1 495 0
 910 0004 037D     		ldrb	r3, [r0, #20]	@ zero_extendqisi2
 911 0006 012B     		cmp	r3, #1
 493:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 912              		.loc 1 493 0
 913 0008 8BB0     		sub	sp, sp, #44
 914              	.LCFI12:
 915              		.cfi_def_cfa_offset 80
 493:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 916              		.loc 1 493 0
 917 000a 0446     		mov	r4, r0
 918 000c 0D46     		mov	r5, r1
 919 000e 9046     		mov	r8, r2
 920 0010 684F     		ldr	r7, .L175
 495:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_receive_buf_dma(spi, rx_buf, len);
 921              		.loc 1 495 0
 922 0012 40F08380 		bne	.L138
 923              	.LVL70:
 924              	.LBB10:
 925              	.LBB11:
 318:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_config_t spi_dma;
 926              		.loc 1 318 0
 927 0016 684B     		ldr	r3, .L175+4
 928 0018 01A8     		add	r0, sp, #4
 929              	.LVL71:
 930 001a 0021     		movs	r1, #0
 931              	.LVL72:
 932 001c 2422     		movs	r2, #36
 933              	.LVL73:
 934 001e 9847     		blx	r3
 935              	.LVL74:
 322:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(rx_buf == NULL));
 936              		.loc 1 322 0
 937 0020 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 938 0022 022B     		cmp	r3, #2
 939 0024 04D9     		bls	.L139
 940 0026 6548     		ldr	r0, .L175+8
 941 0028 4FF4A171 		mov	r1, #322
 942 002c 644B     		ldr	r3, .L175+12
 943 002e 9847     		blx	r3
 944              	.LVL75:
 945              	.L139:
 323:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 946              		.loc 1 323 0
 947 0030 25B9     		cbnz	r5, .L140
 948 0032 6248     		ldr	r0, .L175+8
 949 0034 40F24311 		movw	r1, #323
 950 0038 614B     		ldr	r3, .L175+12
 951 003a 9847     		blx	r3
 952              	.LVL76:
 953              	.L140:
 325:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_rx.chid);
 954              		.loc 1 325 0
 955 003c 2046     		mov	r0, r4
 329:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_data_level = 0;
 956              		.loc 1 329 0
 957 003e 0026     		movs	r6, #0
 325:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_rx.chid);
 958              		.loc 1 325 0
 959 0040 DFF89CA1 		ldr	r10, .L175+44
 331:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_enable = DISABLE;
 960              		.loc 1 331 0
 961 0044 4FF0010B 		mov	fp, #1
 325:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_rx.chid);
 962              		.loc 1 325 0
 963 0048 D047     		blx	r10
 964              	.LVL77:
 326:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 965              		.loc 1 326 0
 966 004a DFF89891 		ldr	r9, .L175+48
 967 004e 607D     		ldrb	r0, [r4, #21]	@ zero_extendqisi2
 968 0050 C847     		blx	r9
 969              	.LVL78:
 333:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_init(spi);
 970              		.loc 1 333 0
 971 0052 6946     		mov	r1, sp
 972 0054 2046     		mov	r0, r4
 973 0056 5B4B     		ldr	r3, .L175+16
 329:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_data_level = 0;
 974              		.loc 1 329 0
 975 0058 8DF80160 		strb	r6, [sp, #1]
 330:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_receive_enable = ENABLE;
 976              		.loc 1 330 0
 977 005c 8DF80060 		strb	r6, [sp]
 331:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_enable = DISABLE;
 978              		.loc 1 331 0
 979 0060 8DF803B0 		strb	fp, [sp, #3]
 332:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_dma_init(spi, &spi_dma);
 980              		.loc 1 332 0
 981 0064 8DF80260 		strb	r6, [sp, #2]
 333:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_init(spi);
 982              		.loc 1 333 0
 983 0068 9847     		blx	r3
 984              	.LVL79:
 334:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 985              		.loc 1 334 0
 986 006a 574B     		ldr	r3, .L175+20
 987 006c 2046     		mov	r0, r4
 988 006e 9847     		blx	r3
 989              	.LVL80:
 337:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.length = len * (spi->data_size / 8);
 990              		.loc 1 337 0
 991 0070 637D     		ldrb	r3, [r4, #21]	@ zero_extendqisi2
 992 0072 8DF80430 		strb	r3, [sp, #4]
 338:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.trans_type = PER_TO_MEM;
 993              		.loc 1 338 0
 994 0076 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 995 0078 DA08     		lsrs	r2, r3, #3
 339:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 996              		.loc 1 339 0
 997 007a 0221     		movs	r1, #2
 338:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.trans_type = PER_TO_MEM;
 998              		.loc 1 338 0
 999 007c 02FB08F2 		mul	r2, r2, r8
 345:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1000              		.loc 1 345 0
 1001 0080 102B     		cmp	r3, #16
 339:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 1002              		.loc 1 339 0
 1003 0082 8DF81810 		strb	r1, [sp, #24]
 1004 0086 D446     		mov	ip, r10
 338:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.trans_type = PER_TO_MEM;
 1005              		.loc 1 338 0
 1006 0088 0492     		str	r2, [sp, #16]
 340:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_addr = (uint32_t)rx_buf;
 1007              		.loc 1 340 0
 1008 008a 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 1009 008c 57F82200 		ldr	r0, [r7, r2, lsl #2]
 1010 0090 4F46     		mov	r7, r9
 341:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_bsize = BURST_SIZE_1;
 1011              		.loc 1 341 0
 1012 0092 0395     		str	r5, [sp, #12]
 340:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_addr = (uint32_t)rx_buf;
 1013              		.loc 1 340 0
 1014 0094 00F16000 		add	r0, r0, #96
 342:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_bsize = BURST_SIZE_1;
 1015              		.loc 1 342 0
 1016 0098 8DF81460 		strb	r6, [sp, #20]
 340:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_addr = (uint32_t)rx_buf;
 1017              		.loc 1 340 0
 1018 009c 0290     		str	r0, [sp, #8]
 343:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1019              		.loc 1 343 0
 1020 009e 8DF81560 		strb	r6, [sp, #21]
 345:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1021              		.loc 1 345 0
 1022 00a2 08D0     		beq	.L142
 1023 00a4 202B     		cmp	r3, #32
 1024 00a6 0BD0     		beq	.L143
 1025 00a8 082B     		cmp	r3, #8
 1026 00aa 0ED1     		bne	.L168
 349:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_8;
 1027              		.loc 1 349 0
 1028 00ac 8DF81660 		strb	r6, [sp, #22]
 350:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1029              		.loc 1 350 0
 1030 00b0 8DF81760 		strb	r6, [sp, #23]
 1031 00b4 0EE0     		b	.L145
 1032              	.L142:
 355:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_16;
 1033              		.loc 1 355 0
 1034 00b6 8DF816B0 		strb	fp, [sp, #22]
 356:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1035              		.loc 1 356 0
 1036 00ba 8DF817B0 		strb	fp, [sp, #23]
 1037 00be 09E0     		b	.L145
 1038              	.L143:
 361:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_32;
 1039              		.loc 1 361 0
 1040 00c0 8DF81610 		strb	r1, [sp, #22]
 362:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1041              		.loc 1 362 0
 1042 00c4 8DF81710 		strb	r1, [sp, #23]
 1043 00c8 04E0     		b	.L145
 1044              	.L168:
 367:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 1045              		.loc 1 367 0
 1046 00ca 2046     		mov	r0, r4
 1047 00cc D047     		blx	r10
 1048              	.LVL81:
 368:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 1049              		.loc 1 368 0
 1050 00ce 607D     		ldrb	r0, [r4, #21]	@ zero_extendqisi2
 1051 00d0 C847     		blx	r9
 1052              	.LVL82:
 1053 00d2 3EE0     		b	.L173
 1054              	.L145:
 373:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1055              		.loc 1 373 0
 1056 00d4 012A     		cmp	r2, #1
 1057 00d6 06D0     		beq	.L148
 1058 00d8 03D3     		bcc	.L149
 1059 00da 022A     		cmp	r2, #2
 1060 00dc 10D1     		bne	.L174
 382:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1061              		.loc 1 382 0
 1062 00de 0423     		movs	r3, #4
 1063 00e0 02E0     		b	.L171
 1064              	.L149:
 376:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1065              		.loc 1 376 0
 1066 00e2 0023     		movs	r3, #0
 1067 00e4 00E0     		b	.L171
 1068              	.L148:
 379:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1069              		.loc 1 379 0
 1070 00e6 0223     		movs	r3, #2
 1071              	.L171:
 382:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1072              		.loc 1 382 0
 1073 00e8 8DF81B30 		strb	r3, [sp, #27]
 393:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1074              		.loc 1 393 0
 1075 00ec 0020     		movs	r0, #0
 392:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_enable_global_interrupt(0);
 1076              		.loc 1 392 0
 1077 00ee A369     		ldr	r3, [r4, #24]
 1078 00f0 0993     		str	r3, [sp, #36]
 393:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1079              		.loc 1 393 0
 1080 00f2 364B     		ldr	r3, .L175+24
 1081 00f4 9847     		blx	r3
 1082              	.LVL83:
 395:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 1083              		.loc 1 395 0
 1084 00f6 01A8     		add	r0, sp, #4
 1085 00f8 354B     		ldr	r3, .L175+28
 1086 00fa 9847     		blx	r3
 1087              	.LVL84:
 1088 00fc 48BB     		cbnz	r0, .L173
 1089 00fe 04E0     		b	.L152
 1090              	.L174:
 386:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 1091              		.loc 1 386 0
 1092 0100 2046     		mov	r0, r4
 1093 0102 E047     		blx	ip
 1094              	.LVL85:
 387:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 1095              		.loc 1 387 0
 1096 0104 607D     		ldrb	r0, [r4, #21]	@ zero_extendqisi2
 1097 0106 B847     		blx	r7
 1098              	.LVL86:
 1099 0108 23E0     		b	.L173
 1100              	.L152:
 398:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(hal_dma_channel_enable(spi->dma_rx.chid) != HAL_DMA_OK)
 1101              		.loc 1 398 0
 1102 010a 2846     		mov	r0, r5
 1103 010c 4146     		mov	r1, r8
 1104 010e 314B     		ldr	r3, .L175+32
 1105 0110 9847     		blx	r3
 1106              	.LVL87:
 399:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 1107              		.loc 1 399 0
 1108 0112 607D     		ldrb	r0, [r4, #21]	@ zero_extendqisi2
 1109 0114 304B     		ldr	r3, .L175+36
 1110 0116 9847     		blx	r3
 1111              	.LVL88:
 1112 0118 D8B9     		cbnz	r0, .L173
 1113 011a 47E0     		b	.L154
 1114              	.LVL89:
 1115              	.L138:
 1116              	.LBE11:
 1117              	.LBE10:
 1118              	.LBB12:
 1119              	.LBB13:
 408:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t time_out = 0;
 1120              		.loc 1 408 0
 1121 011c 0023     		movs	r3, #0
 1122 011e 8DF80430 		strb	r3, [sp, #4]
 1123              	.LVL90:
 415:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(rx_buf == NULL));
 1124              		.loc 1 415 0
 1125 0122 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 1126 0124 022B     		cmp	r3, #2
 1127 0126 04D9     		bls	.L155
 1128 0128 2C48     		ldr	r0, .L175+40
 1129              	.LVL91:
 1130 012a 40F29F11 		movw	r1, #415
 1131              	.LVL92:
 1132 012e 244B     		ldr	r3, .L175+12
 1133 0130 9847     		blx	r3
 1134              	.LVL93:
 1135              	.L155:
 416:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1136              		.loc 1 416 0
 1137 0132 25B9     		cbnz	r5, .L156
 1138 0134 2948     		ldr	r0, .L175+40
 1139 0136 4FF4D071 		mov	r1, #416
 1140 013a 214B     		ldr	r3, .L175+12
 1141 013c 9847     		blx	r3
 1142              	.LVL94:
 1143              	.L156:
 418:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1144              		.loc 1 418 0
 1145 013e 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 1146 0140 57F82330 		ldr	r3, [r7, r3, lsl #2]
 1147 0144 9A68     		ldr	r2, [r3, #8]
 1148 0146 32B9     		cbnz	r2, .L157
 421:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	}
 1149              		.loc 1 421 0
 1150 0148 0122     		movs	r2, #1
 1151 014a 9A60     		str	r2, [r3, #8]
 1152 014c 03E0     		b	.L157
 1153              	.LVL95:
 1154              	.L170:
 460:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					return SPI_ERROR;
 1155              		.loc 1 460 0
 1156 014e 0023     		movs	r3, #0
 1157 0150 B360     		str	r3, [r6, #8]
 1158              	.LVL96:
 1159              	.L173:
 461:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 1160              		.loc 1 461 0
 1161 0152 0E20     		movs	r0, #14
 1162 0154 2AE0     		b	.L154
 1163              	.LVL97:
 1164              	.L157:
 430:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		if(status)
 1165              		.loc 1 430 0
 1166 0156 0022     		movs	r2, #0
 1167 0158 1346     		mov	r3, r2
 1168              	.LVL98:
 1169              	.L164:
 1170 015a 94F801E0 		ldrb	lr, [r4, #1]	@ zero_extendqisi2
 1171 015e 57F82E60 		ldr	r6, [r7, lr, lsl #2]
 1172 0162 4FF4FA61 		mov	r1, #2000
 1173              	.LVL99:
 1174              	.L165:
 1175 0166 706A     		ldr	r0, [r6, #36]
 1176 0168 C0B2     		uxtb	r0, r0
 1177 016a 8DF80400 		strb	r0, [sp, #4]
 431:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 1178              		.loc 1 431 0
 1179 016e 9DF80400 		ldrb	r0, [sp, #4]	@ zero_extendqisi2
 1180 0172 C0B1     		cbz	r0, .L158
 1181              	.LVL100:
 435:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1182              		.loc 1 435 0
 1183 0174 57F82E10 		ldr	r1, [r7, lr, lsl #2]
 437:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 1184              		.loc 1 437 0
 1185 0178 2079     		ldrb	r0, [r4, #4]	@ zero_extendqisi2
 1186 017a 1028     		cmp	r0, #16
 435:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1187              		.loc 1 435 0
 1188 017c 096E     		ldr	r1, [r1, #96]
 1189              	.LVL101:
 437:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 1190              		.loc 1 437 0
 1191 017e 06D0     		beq	.L160
 1192 0180 2028     		cmp	r0, #32
 1193 0182 07D0     		beq	.L161
 1194 0184 0828     		cmp	r0, #8
 1195 0186 E2D1     		bne	.L170
 441:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_rx++;
 1196              		.loc 1 441 0
 1197 0188 E954     		strb	r1, [r5, r3]
 442:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 1198              		.loc 1 442 0
 1199 018a 0133     		adds	r3, r3, #1
 1200 018c 04E0     		b	.L172
 1201              	.L160:
 447:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_rx += 2;
 1202              		.loc 1 447 0
 1203 018e E952     		strh	r1, [r5, r3]	@ movhi
 448:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 1204              		.loc 1 448 0
 1205 0190 0233     		adds	r3, r3, #2
 1206 0192 01E0     		b	.L172
 1207              	.L161:
 453:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_rx += 4;
 1208              		.loc 1 453 0
 1209 0194 E950     		str	r1, [r5, r3]
 454:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 1210              		.loc 1 454 0
 1211 0196 0433     		adds	r3, r3, #4
 1212              	.L172:
 1213 0198 0132     		adds	r2, r2, #1
 1214              	.LVL102:
 1215 019a 9BB2     		uxth	r3, r3
 1216              	.LVL103:
 466:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 1217              		.loc 1 466 0
 1218 019c 91B2     		uxth	r1, r2
 1219              	.LVL104:
 1220 019e 4145     		cmp	r1, r8
 1221 01a0 DBD1     		bne	.L164
 475:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	else
 1222              		.loc 1 475 0
 1223 01a2 0020     		movs	r0, #0
 1224 01a4 02E0     		b	.L154
 1225              	.LVL105:
 1226              	.L158:
 426:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1227              		.loc 1 426 0
 1228 01a6 0139     		subs	r1, r1, #1
 1229              	.LVL106:
 1230 01a8 DDD1     		bne	.L165
 1231 01aa D2E7     		b	.L173
 1232              	.LVL107:
 1233              	.L154:
 1234              	.LBE13:
 1235              	.LBE12:
 501:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1236              		.loc 1 501 0
 1237 01ac 0BB0     		add	sp, sp, #44
 1238              	.LCFI13:
 1239              		.cfi_def_cfa_offset 36
 1240              		@ sp needed
 1241 01ae BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1242              	.LVL108:
 1243              	.L176:
 1244 01b2 00BF     		.align	2
 1245              	.L175:
 1246 01b4 00000000 		.word	.LANCHOR0
 1247 01b8 00000000 		.word	memset
 1248 01bc 00000000 		.word	.LANCHOR7
 1249 01c0 00000000 		.word	assert_failed
 1250 01c4 00000000 		.word	hal_spi_dma_init
 1251 01c8 00000000 		.word	hal_spi_init
 1252 01cc 00000000 		.word	hal_dma_enable_global_interrupt
 1253 01d0 00000000 		.word	hal_dma_init
 1254 01d4 00000000 		.word	flush_cache
 1255 01d8 00000000 		.word	hal_dma_channel_enable
 1256 01dc 00000000 		.word	.LANCHOR8
 1257 01e0 00000000 		.word	hal_spi_disable
 1258 01e4 00000000 		.word	hal_dma_deinit
 1259              		.cfi_endproc
 1260              	.LFE10:
 1262              		.section	.text.hal_spi_transmit_buf,"ax",%progbits
 1263              		.align	1
 1264              		.global	hal_spi_transmit_buf
 1265              		.thumb
 1266              		.thumb_func
 1268              	hal_spi_transmit_buf:
 1269              	.LFB13:
 678:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 1270              		.loc 1 678 0
 1271              		.cfi_startproc
 1272              		@ args = 0, pretend = 0, frame = 40
 1273              		@ frame_needed = 0, uses_anonymous_args = 0
 1274              	.LVL109:
 1275 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1276              	.LCFI14:
 1277              		.cfi_def_cfa_offset 36
 1278              		.cfi_offset 4, -36
 1279              		.cfi_offset 5, -32
 1280              		.cfi_offset 6, -28
 1281              		.cfi_offset 7, -24
 1282              		.cfi_offset 8, -20
 1283              		.cfi_offset 9, -16
 1284              		.cfi_offset 10, -12
 1285              		.cfi_offset 11, -8
 1286              		.cfi_offset 14, -4
 680:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_transmit_buf_dma(spi, tx_buf, len);
 1287              		.loc 1 680 0
 1288 0004 037B     		ldrb	r3, [r0, #12]	@ zero_extendqisi2
 1289 0006 012B     		cmp	r3, #1
 678:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 1290              		.loc 1 678 0
 1291 0008 8BB0     		sub	sp, sp, #44
 1292              	.LCFI15:
 1293              		.cfi_def_cfa_offset 80
 678:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 1294              		.loc 1 678 0
 1295 000a 0546     		mov	r5, r0
 1296 000c 0E46     		mov	r6, r1
 1297 000e 1446     		mov	r4, r2
 680:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_transmit_buf_dma(spi, tx_buf, len);
 1298              		.loc 1 680 0
 1299 0010 40F08680 		bne	.L178
 1300              	.LVL110:
 1301              	.LBB18:
 1302              	.LBB19:
 506:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_config_t spi_dma;
 1303              		.loc 1 506 0
 1304 0014 654B     		ldr	r3, .L220
 1305 0016 01A8     		add	r0, sp, #4
 1306              	.LVL111:
 1307 0018 0021     		movs	r1, #0
 1308              	.LVL112:
 1309 001a 2422     		movs	r2, #36
 1310              	.LVL113:
 1311 001c 9847     		blx	r3
 1312              	.LVL114:
 510:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(tx_buf == NULL));
 1313              		.loc 1 510 0
 1314 001e 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 1315 0020 022B     		cmp	r3, #2
 1316 0022 04D9     		bls	.L179
 1317 0024 6248     		ldr	r0, .L220+4
 1318 0026 4FF4FF71 		mov	r1, #510
 1319 002a 624B     		ldr	r3, .L220+8
 1320 002c 9847     		blx	r3
 1321              	.LVL115:
 1322              	.L179:
 511:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1323              		.loc 1 511 0
 1324 002e 26B9     		cbnz	r6, .L180
 1325 0030 5F48     		ldr	r0, .L220+4
 1326 0032 40F2FF11 		movw	r1, #511
 1327 0036 5F4B     		ldr	r3, .L220+8
 1328 0038 9847     		blx	r3
 1329              	.LVL116:
 1330              	.L180:
 513:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_tx.chid);
 1331              		.loc 1 513 0
 1332 003a 2846     		mov	r0, r5
 517:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_data_level = 0;
 1333              		.loc 1 517 0
 1334 003c 0027     		movs	r7, #0
 513:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_tx.chid);
 1335              		.loc 1 513 0
 1336 003e DFF89CA1 		ldr	r10, .L220+48
 520:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_dma_init(spi, &spi_dma);
 1337              		.loc 1 520 0
 1338 0042 4FF00108 		mov	r8, #1
 513:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_tx.chid);
 1339              		.loc 1 513 0
 1340 0046 D047     		blx	r10
 1341              	.LVL117:
 514:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1342              		.loc 1 514 0
 1343 0048 DFF89491 		ldr	r9, .L220+52
 1344 004c 687B     		ldrb	r0, [r5, #13]	@ zero_extendqisi2
 1345 004e CB46     		mov	fp, r9
 1346 0050 C847     		blx	r9
 1347              	.LVL118:
 521:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_init(spi);
 1348              		.loc 1 521 0
 1349 0052 6946     		mov	r1, sp
 1350 0054 2846     		mov	r0, r5
 1351 0056 584B     		ldr	r3, .L220+12
 517:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_data_level = 0;
 1352              		.loc 1 517 0
 1353 0058 8DF80170 		strb	r7, [sp, #1]
 518:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_receive_enable = DISABLE;
 1354              		.loc 1 518 0
 1355 005c 8DF80070 		strb	r7, [sp]
 519:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_enable = ENABLE;
 1356              		.loc 1 519 0
 1357 0060 8DF80370 		strb	r7, [sp, #3]
 520:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_dma_init(spi, &spi_dma);
 1358              		.loc 1 520 0
 1359 0064 8DF80280 		strb	r8, [sp, #2]
 521:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_init(spi);
 1360              		.loc 1 521 0
 1361 0068 9847     		blx	r3
 1362              	.LVL119:
 522:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1363              		.loc 1 522 0
 1364 006a 544B     		ldr	r3, .L220+16
 1365 006c 2846     		mov	r0, r5
 1366 006e 9847     		blx	r3
 1367              	.LVL120:
 525:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.length = len * (spi->data_size / 8);
 1368              		.loc 1 525 0
 1369 0070 6B7B     		ldrb	r3, [r5, #13]	@ zero_extendqisi2
 1370 0072 8DF80430 		strb	r3, [sp, #4]
 526:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.trans_type = MEM_TO_PER;
 1371              		.loc 1 526 0
 1372 0076 2B79     		ldrb	r3, [r5, #4]	@ zero_extendqisi2
 1373 0078 DA08     		lsrs	r2, r3, #3
 529:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_bsize = BURST_SIZE_1;
 1374              		.loc 1 529 0
 1375 007a 5149     		ldr	r1, .L220+20
 533:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1376              		.loc 1 533 0
 1377 007c 102B     		cmp	r3, #16
 526:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.trans_type = MEM_TO_PER;
 1378              		.loc 1 526 0
 1379 007e 02FB04F2 		mul	r2, r2, r4
 527:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_addr = (uint32_t)tx_buf;
 1380              		.loc 1 527 0
 1381 0082 8DF81880 		strb	r8, [sp, #24]
 528:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.dst_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 1382              		.loc 1 528 0
 1383 0086 0296     		str	r6, [sp, #8]
 526:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.trans_type = MEM_TO_PER;
 1384              		.loc 1 526 0
 1385 0088 0492     		str	r2, [sp, #16]
 529:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_bsize = BURST_SIZE_1;
 1386              		.loc 1 529 0
 1387 008a 6A78     		ldrb	r2, [r5, #1]	@ zero_extendqisi2
 1388 008c 51F82210 		ldr	r1, [r1, r2, lsl #2]
 530:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.dst_bsize = BURST_SIZE_1;
 1389              		.loc 1 530 0
 1390 0090 8DF81470 		strb	r7, [sp, #20]
 529:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_bsize = BURST_SIZE_1;
 1391              		.loc 1 529 0
 1392 0094 01F16001 		add	r1, r1, #96
 531:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1393              		.loc 1 531 0
 1394 0098 8DF81570 		strb	r7, [sp, #21]
 529:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_bsize = BURST_SIZE_1;
 1395              		.loc 1 529 0
 1396 009c 0391     		str	r1, [sp, #12]
 1397 009e 5146     		mov	r1, r10
 533:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1398              		.loc 1 533 0
 1399 00a0 08D0     		beq	.L182
 1400 00a2 202B     		cmp	r3, #32
 1401 00a4 0BD0     		beq	.L183
 1402 00a6 082B     		cmp	r3, #8
 1403 00a8 0FD1     		bne	.L212
 537:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_8;
 1404              		.loc 1 537 0
 1405 00aa 8DF81670 		strb	r7, [sp, #22]
 538:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1406              		.loc 1 538 0
 1407 00ae 8DF81770 		strb	r7, [sp, #23]
 1408 00b2 0FE0     		b	.L185
 1409              	.L182:
 543:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_16;
 1410              		.loc 1 543 0
 1411 00b4 8DF81680 		strb	r8, [sp, #22]
 544:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1412              		.loc 1 544 0
 1413 00b8 8DF81780 		strb	r8, [sp, #23]
 1414 00bc 0AE0     		b	.L185
 1415              	.L183:
 549:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_32;
 1416              		.loc 1 549 0
 1417 00be 0223     		movs	r3, #2
 1418 00c0 8DF81630 		strb	r3, [sp, #22]
 550:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1419              		.loc 1 550 0
 1420 00c4 8DF81730 		strb	r3, [sp, #23]
 1421 00c8 04E0     		b	.L185
 1422              	.L212:
 555:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 1423              		.loc 1 555 0
 1424 00ca 2846     		mov	r0, r5
 1425 00cc D047     		blx	r10
 1426              	.LVL121:
 556:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 1427              		.loc 1 556 0
 1428 00ce 687D     		ldrb	r0, [r5, #21]	@ zero_extendqisi2
 1429 00d0 C847     		blx	r9
 1430              	.LVL122:
 1431 00d2 66E0     		b	.L210
 1432              	.L185:
 560:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1433              		.loc 1 560 0
 1434 00d4 012A     		cmp	r2, #1
 1435 00d6 06D0     		beq	.L188
 1436 00d8 03D3     		bcc	.L189
 1437 00da 022A     		cmp	r2, #2
 1438 00dc 11D1     		bne	.L217
 569:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1439              		.loc 1 569 0
 1440 00de 0523     		movs	r3, #5
 1441 00e0 02E0     		b	.L215
 1442              	.L189:
 563:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1443              		.loc 1 563 0
 1444 00e2 0123     		movs	r3, #1
 1445 00e4 00E0     		b	.L215
 1446              	.L188:
 566:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1447              		.loc 1 566 0
 1448 00e6 0323     		movs	r3, #3
 1449              	.L215:
 569:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1450              		.loc 1 569 0
 1451 00e8 8DF81B30 		strb	r3, [sp, #27]
 580:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1452              		.loc 1 580 0
 1453 00ec 0020     		movs	r0, #0
 579:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_enable_global_interrupt(0);
 1454              		.loc 1 579 0
 1455 00ee 2B69     		ldr	r3, [r5, #16]
 1456 00f0 0993     		str	r3, [sp, #36]
 580:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1457              		.loc 1 580 0
 1458 00f2 344B     		ldr	r3, .L220+24
 1459 00f4 9847     		blx	r3
 1460              	.LVL123:
 582:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 1461              		.loc 1 582 0
 1462 00f6 01A8     		add	r0, sp, #4
 1463 00f8 334B     		ldr	r3, .L220+28
 1464 00fa 9847     		blx	r3
 1465              	.LVL124:
 1466 00fc 0028     		cmp	r0, #0
 1467 00fe 50D1     		bne	.L210
 1468 0100 04E0     		b	.L192
 1469              	.L217:
 573:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 1470              		.loc 1 573 0
 1471 0102 2846     		mov	r0, r5
 1472 0104 8847     		blx	r1
 1473              	.LVL125:
 574:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 1474              		.loc 1 574 0
 1475 0106 687D     		ldrb	r0, [r5, #21]	@ zero_extendqisi2
 1476 0108 D847     		blx	fp
 1477              	.LVL126:
 1478 010a 4AE0     		b	.L210
 1479              	.L192:
 585:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(hal_dma_channel_enable(spi->dma_tx.chid) != HAL_DMA_OK)
 1480              		.loc 1 585 0
 1481 010c 3046     		mov	r0, r6
 1482 010e 2146     		mov	r1, r4
 1483 0110 2E4B     		ldr	r3, .L220+32
 1484 0112 9847     		blx	r3
 1485              	.LVL127:
 586:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 1486              		.loc 1 586 0
 1487 0114 687B     		ldrb	r0, [r5, #13]	@ zero_extendqisi2
 1488 0116 2E4B     		ldr	r3, .L220+36
 1489 0118 9847     		blx	r3
 1490              	.LVL128:
 1491 011a 0028     		cmp	r0, #0
 1492 011c 41D1     		bne	.L210
 1493 011e 41E0     		b	.L194
 1494              	.LVL129:
 1495              	.L178:
 1496              	.LBE19:
 1497              	.LBE18:
 1498              	.LBB20:
 1499              	.LBB21:
 602:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(tx_buf == NULL));
 1500              		.loc 1 602 0
 1501 0120 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 1502 0122 022B     		cmp	r3, #2
 1503 0124 04D9     		bls	.L195
 1504 0126 2B48     		ldr	r0, .L220+40
 1505              	.LVL130:
 1506 0128 40F25A21 		movw	r1, #602
 1507              	.LVL131:
 1508 012c 214B     		ldr	r3, .L220+8
 1509 012e 9847     		blx	r3
 1510              	.LVL132:
 1511              	.L195:
 603:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1512              		.loc 1 603 0
 1513 0130 26B9     		cbnz	r6, .L196
 1514 0132 2848     		ldr	r0, .L220+40
 1515 0134 40F25B21 		movw	r1, #603
 1516 0138 1E4B     		ldr	r3, .L220+8
 1517 013a 9847     		blx	r3
 1518              	.LVL133:
 1519              	.L196:
 655:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 1520              		.loc 1 655 0
 1521 013c 0023     		movs	r3, #0
 1522              	.LVL134:
 1523              	.L207:
 605:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1524              		.loc 1 605 0
 1525 013e 002C     		cmp	r4, #0
 1526 0140 2DD0     		beq	.L218
 608:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 1527              		.loc 1 608 0
 1528 0142 202C     		cmp	r4, #32
 616:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 1529              		.loc 1 616 0
 1530 0144 8BBF     		itete	hi
 1531 0146 203C     		subhi	r4, r4, #32
 1532              	.LVL135:
 610:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			len = 0;
 1533              		.loc 1 610 0
 1534 0148 E0B2     		uxtbls	r0, r4
 1535              	.LVL136:
 616:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 1536              		.loc 1 616 0
 1537 014a A4B2     		uxthhi	r4, r4
 611:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 1538              		.loc 1 611 0
 1539 014c 0024     		movls	r4, #0
 1540              	.LVL137:
 615:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			len -= SPI_FIFO_DEPTH;
 1541              		.loc 1 615 0
 1542 014e 88BF     		it	hi
 1543 0150 2020     		movhi	r0, #32
 1544              	.LVL138:
 622:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 1545              		.loc 1 622 0
 1546 0152 0022     		movs	r2, #0
 1547              	.LVL139:
 1548              	.L199:
 1549 0154 8242     		cmp	r2, r0
 1550 0156 17D2     		bcs	.L219
 625:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 1551              		.loc 1 625 0
 1552 0158 2979     		ldrb	r1, [r5, #4]	@ zero_extendqisi2
 1553 015a 1029     		cmp	r1, #16
 1554 015c 06D0     		beq	.L200
 1555 015e 2029     		cmp	r1, #32
 1556 0160 07D0     		beq	.L201
 1557 0162 0829     		cmp	r1, #8
 1558 0164 1DD1     		bne	.L210
 629:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_tx++;
 1559              		.loc 1 629 0
 1560 0166 F15C     		ldrb	r1, [r6, r3]	@ zero_extendqisi2
 1561              	.LVL140:
 630:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 1562              		.loc 1 630 0
 1563 0168 0133     		adds	r3, r3, #1
 1564              	.LVL141:
 1565 016a 04E0     		b	.L216
 1566              	.LVL142:
 1567              	.L200:
 635:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_tx += 2;
 1568              		.loc 1 635 0
 1569 016c F15A     		ldrh	r1, [r6, r3]
 1570              	.LVL143:
 636:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 1571              		.loc 1 636 0
 1572 016e 0233     		adds	r3, r3, #2
 1573              	.LVL144:
 1574 0170 01E0     		b	.L216
 1575              	.LVL145:
 1576              	.L201:
 641:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					index_tx += 4;
 1577              		.loc 1 641 0
 1578 0172 F158     		ldr	r1, [r6, r3]
 1579              	.LVL146:
 642:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 1580              		.loc 1 642 0
 1581 0174 0433     		adds	r3, r3, #4
 1582              	.LVL147:
 1583              	.L216:
 651:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 1584              		.loc 1 651 0
 1585 0176 124F     		ldr	r7, .L220+20
 1586 0178 95F801E0 		ldrb	lr, [r5, #1]	@ zero_extendqisi2
 642:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 1587              		.loc 1 642 0
 1588 017c 9BB2     		uxth	r3, r3
 1589              	.LVL148:
 622:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 1590              		.loc 1 622 0
 1591 017e 0132     		adds	r2, r2, #1
 1592              	.LVL149:
 651:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 1593              		.loc 1 651 0
 1594 0180 57F82E70 		ldr	r7, [r7, lr, lsl #2]
 1595 0184 3966     		str	r1, [r7, #96]
 1596 0186 E5E7     		b	.L199
 1597              	.LVL150:
 1598              	.L219:
 655:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 1599              		.loc 1 655 0
 1600 0188 0D4A     		ldr	r2, .L220+20
 1601              	.LVL151:
 1602 018a 6978     		ldrb	r1, [r5, #1]	@ zero_extendqisi2
 1603 018c 52F82100 		ldr	r0, [r2, r1, lsl #2]
 1604              	.LVL152:
 1605 0190 114A     		ldr	r2, .L220+44
 1606              	.L205:
 1607              	.LVL153:
 1608 0192 016A     		ldr	r1, [r0, #32]
 1609 0194 0029     		cmp	r1, #0
 1610 0196 D2D0     		beq	.L207
 1611              	.LVL154:
 658:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				return SPI_ERROR;
 1612              		.loc 1 658 0
 1613 0198 013A     		subs	r2, r2, #1
 1614              	.LVL155:
 1615 019a FAD1     		bne	.L205
 1616 019c 01E0     		b	.L210
 1617              	.LVL156:
 1618              	.L218:
 662:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 1619              		.loc 1 662 0
 1620 019e 2046     		mov	r0, r4
 1621 01a0 00E0     		b	.L194
 1622              	.LVL157:
 1623              	.L210:
 659:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 1624              		.loc 1 659 0
 1625 01a2 0E20     		movs	r0, #14
 1626              	.L194:
 1627              	.LVL158:
 1628              	.LBE21:
 1629              	.LBE20:
 686:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1630              		.loc 1 686 0
 1631 01a4 0BB0     		add	sp, sp, #44
 1632              	.LCFI16:
 1633              		.cfi_def_cfa_offset 36
 1634              		@ sp needed
 1635 01a6 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1636              	.LVL159:
 1637              	.L221:
 1638 01aa 00BF     		.align	2
 1639              	.L220:
 1640 01ac 00000000 		.word	memset
 1641 01b0 00000000 		.word	.LANCHOR9
 1642 01b4 00000000 		.word	assert_failed
 1643 01b8 00000000 		.word	hal_spi_dma_init
 1644 01bc 00000000 		.word	hal_spi_init
 1645 01c0 00000000 		.word	.LANCHOR0
 1646 01c4 00000000 		.word	hal_dma_enable_global_interrupt
 1647 01c8 00000000 		.word	hal_dma_init
 1648 01cc 00000000 		.word	flush_cache
 1649 01d0 00000000 		.word	hal_dma_channel_enable
 1650 01d4 00000000 		.word	.LANCHOR10
 1651 01d8 006A1800 		.word	1600000
 1652 01dc 00000000 		.word	hal_spi_disable
 1653 01e0 00000000 		.word	hal_dma_deinit
 1654              		.cfi_endproc
 1655              	.LFE13:
 1657              		.section	.text.hal_spi_transceiver,"ax",%progbits
 1658              		.align	1
 1659              		.global	hal_spi_transceiver
 1660              		.thumb
 1661              		.thumb_func
 1663              	hal_spi_transceiver:
 1664              	.LFB16:
1010:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 1665              		.loc 1 1010 0
 1666              		.cfi_startproc
 1667              		@ args = 0, pretend = 0, frame = 96
 1668              		@ frame_needed = 0, uses_anonymous_args = 0
 1669              	.LVL160:
 1670 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1671              	.LCFI17:
 1672              		.cfi_def_cfa_offset 36
 1673              		.cfi_offset 4, -36
 1674              		.cfi_offset 5, -32
 1675              		.cfi_offset 6, -28
 1676              		.cfi_offset 7, -24
 1677              		.cfi_offset 8, -20
 1678              		.cfi_offset 9, -16
 1679              		.cfi_offset 10, -12
 1680              		.cfi_offset 11, -8
 1681              		.cfi_offset 14, -4
1012:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_transceiver_dma(spi, buff);
 1682              		.loc 1 1012 0
 1683 0004 037D     		ldrb	r3, [r0, #20]	@ zero_extendqisi2
 1684 0006 012B     		cmp	r3, #1
1010:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 1685              		.loc 1 1010 0
 1686 0008 99B0     		sub	sp, sp, #100
 1687              	.LCFI18:
 1688              		.cfi_def_cfa_offset 136
1010:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_status_t ret;
 1689              		.loc 1 1010 0
 1690 000a 0446     		mov	r4, r0
 1691 000c 0F46     		mov	r7, r1
 1692 000e 8B4D     		ldr	r5, .L343
1012:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_transceiver_dma(spi, buff);
 1693              		.loc 1 1012 0
 1694 0010 40F02C81 		bne	.L223
1012:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		ret = hal_spi_transceiver_dma(spi, buff);
 1695              		.loc 1 1012 0 is_stmt 0 discriminator 1
 1696 0014 037B     		ldrb	r3, [r0, #12]	@ zero_extendqisi2
 1697 0016 012B     		cmp	r3, #1
 1698 0018 40F02881 		bne	.L223
 1699              	.LVL161:
 1700              	.LBB28:
 1701              	.LBB29:
 692:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_init_type_t dma_tx = { 0 };
 1702              		.loc 1 692 0 is_stmt 1
 1703 001c 0021     		movs	r1, #0
 1704              	.LVL162:
 1705 001e 2422     		movs	r2, #36
 1706 0020 874E     		ldr	r6, .L343+4
 1707 0022 06A8     		add	r0, sp, #24
 1708              	.LVL163:
 1709 0024 B047     		blx	r6
 1710              	.LVL164:
 693:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_config_t spi_dma;
 1711              		.loc 1 693 0
 1712 0026 0FA8     		add	r0, sp, #60
 1713 0028 0021     		movs	r1, #0
 1714 002a 2422     		movs	r2, #36
 1715 002c B047     		blx	r6
 1716              	.LVL165:
 699:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 1717              		.loc 1 699 0
 1718 002e 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 1719 0030 082B     		cmp	r3, #8
 1720 0032 08D0     		beq	.L224
 1721 0034 102B     		cmp	r3, #16
 1722 0036 06D0     		beq	.L224
 1723 0038 202B     		cmp	r3, #32
 1724 003a 04D0     		beq	.L224
 1725 003c 8148     		ldr	r0, .L343+8
 1726 003e 40F2BB21 		movw	r1, #699
 1727 0042 814B     		ldr	r3, .L343+12
 1728 0044 9847     		blx	r3
 1729              	.LVL166:
 1730              	.L224:
 700:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 1731              		.loc 1 700 0
 1732 0046 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 1733 0048 032B     		cmp	r3, #3
 1734 004a 04D9     		bls	.L225
 1735 004c 7D48     		ldr	r0, .L343+8
 1736 004e 4FF42F71 		mov	r1, #700
 1737 0052 7D4B     		ldr	r3, .L343+12
 1738 0054 9847     		blx	r3
 1739              	.LVL167:
 1740              	.L225:
 701:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 1741              		.loc 1 701 0
 1742 0056 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 1743 0058 022B     		cmp	r3, #2
 1744 005a 04D9     		bls	.L226
 1745 005c 7948     		ldr	r0, .L343+8
 1746 005e 40F2BD21 		movw	r1, #701
 1747 0062 794B     		ldr	r3, .L343+12
 1748 0064 9847     		blx	r3
 1749              	.LVL168:
 1750              	.L226:
 702:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 1751              		.loc 1 702 0
 1752 0066 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 1753 0068 022B     		cmp	r3, #2
 1754 006a 04D9     		bls	.L227
 1755 006c 7548     		ldr	r0, .L343+8
 1756 006e 40F2BE21 		movw	r1, #702
 1757 0072 754B     		ldr	r3, .L343+12
 1758 0074 9847     		blx	r3
 1759              	.LVL169:
 1760              	.L227:
 703:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1761              		.loc 1 703 0
 1762 0076 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 1763 0078 022B     		cmp	r3, #2
 1764 007a 04D9     		bls	.L228
 1765 007c 7148     		ldr	r0, .L343+8
 1766 007e 40F2BF21 		movw	r1, #703
 1767 0082 714B     		ldr	r3, .L343+12
 1768 0084 9847     		blx	r3
 1769              	.LVL170:
 1770              	.L228:
 705:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					buff->rxbuf.buf == NULL || buff->rxbuf.len == 0 ||
 1771              		.loc 1 705 0
 1772 0086 FB68     		ldr	r3, [r7, #12]
 1773 0088 3BB1     		cbz	r3, .L229
 1774 008a 3B89     		ldrh	r3, [r7, #8]
 1775 008c 2BB1     		cbz	r3, .L229
 1776 008e 7A68     		ldr	r2, [r7, #4]
 1777 0090 1AB1     		cbz	r2, .L229
 1778 0092 3A88     		ldrh	r2, [r7]
 1779 0094 0AB1     		cbz	r2, .L229
 1780 0096 9A42     		cmp	r2, r3
 1781 0098 04D0     		beq	.L230
 1782              	.L229:
 1783 009a 6A48     		ldr	r0, .L343+8
 1784 009c 40F2C321 		movw	r1, #707
 1785 00a0 694B     		ldr	r3, .L343+12
 1786 00a2 9847     		blx	r3
 1787              	.LVL171:
 1788              	.L230:
 710:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	tx_buf = buff->txbuf.buf;
 1789              		.loc 1 710 0
 1790 00a4 2679     		ldrb	r6, [r4, #4]	@ zero_extendqisi2
 1791 00a6 4FEAD609 		lsr	r9, r6, #3
 709:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	rx_len = buff->rxbuf.len * (spi->data_size / 8);
 1792              		.loc 1 709 0
 1793 00aa 7B68     		ldr	r3, [r7, #4]
 714:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_tx.chid);
 1794              		.loc 1 714 0
 1795 00ac 607D     		ldrb	r0, [r4, #21]	@ zero_extendqisi2
 709:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	rx_len = buff->rxbuf.len * (spi->data_size / 8);
 1796              		.loc 1 709 0
 1797 00ae 0093     		str	r3, [sp]
 1798              	.LVL172:
 710:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	tx_buf = buff->txbuf.buf;
 1799              		.loc 1 710 0
 1800 00b0 3B88     		ldrh	r3, [r7]
 1801              	.LVL173:
 1802 00b2 13FB09F3 		smulbb	r3, r3, r9
 714:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_tx.chid);
 1803              		.loc 1 714 0
 1804 00b6 DFF8B0A1 		ldr	r10, .L343+44
 719:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_data_level = 0;
 1805              		.loc 1 719 0
 1806 00ba 0026     		movs	r6, #0
 721:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_enable = ENABLE;
 1807              		.loc 1 721 0
 1808 00bc 4FF0010B 		mov	fp, #1
 710:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	tx_buf = buff->txbuf.buf;
 1809              		.loc 1 710 0
 1810 00c0 1FFA83F8 		uxth	r8, r3
 1811              	.LVL174:
 711:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	tx_len = buff->txbuf.len * (spi->data_size / 8);
 1812              		.loc 1 711 0
 1813 00c4 FB68     		ldr	r3, [r7, #12]
 1814 00c6 0193     		str	r3, [sp, #4]
 1815              	.LVL175:
 712:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1816              		.loc 1 712 0
 1817 00c8 3B89     		ldrh	r3, [r7, #8]
 1818              	.LVL176:
 1819 00ca 0293     		str	r3, [sp, #8]
 1820              	.LVL177:
 714:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_dma_deinit(spi->dma_tx.chid);
 1821              		.loc 1 714 0
 1822 00cc D047     		blx	r10
 1823              	.LVL178:
 715:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_disable(spi);
 1824              		.loc 1 715 0
 1825 00ce 607B     		ldrb	r0, [r4, #13]	@ zero_extendqisi2
 1826 00d0 5746     		mov	r7, r10
 1827              	.LVL179:
 1828 00d2 D047     		blx	r10
 1829              	.LVL180:
 716:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1830              		.loc 1 716 0
 1831 00d4 DFF880C1 		ldr	ip, .L343+28
 1832 00d8 2046     		mov	r0, r4
 1833 00da CDF80CC0 		str	ip, [sp, #12]
 1834 00de E047     		blx	ip
 1835              	.LVL181:
 723:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1836              		.loc 1 723 0
 1837 00e0 2046     		mov	r0, r4
 1838 00e2 05A9     		add	r1, sp, #20
 1839 00e4 594B     		ldr	r3, .L343+16
 719:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_data_level = 0;
 1840              		.loc 1 719 0
 1841 00e6 8DF81560 		strb	r6, [sp, #21]
 720:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_receive_enable = ENABLE;
 1842              		.loc 1 720 0
 1843 00ea 8DF81460 		strb	r6, [sp, #20]
 721:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_dma.dma_transmit_enable = ENABLE;
 1844              		.loc 1 721 0
 1845 00ee 8DF817B0 		strb	fp, [sp, #23]
 722:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	hal_spi_dma_init(spi, &spi_dma);
 1846              		.loc 1 722 0
 1847 00f2 8DF816B0 		strb	fp, [sp, #22]
 723:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1848              		.loc 1 723 0
 1849 00f6 9847     		blx	r3
 1850              	.LVL182:
 726:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.length = rx_len;
 1851              		.loc 1 726 0
 1852 00f8 637D     		ldrb	r3, [r4, #21]	@ zero_extendqisi2
 1853 00fa 8DF81830 		strb	r3, [sp, #24]
 729:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_addr = (uint32_t)rx_buf;
 1854              		.loc 1 729 0
 1855 00fe 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 1856 0100 55F82320 		ldr	r2, [r5, r3, lsl #2]
 728:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 1857              		.loc 1 728 0
 1858 0104 0220     		movs	r0, #2
 733:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1859              		.loc 1 733 0
 1860 0106 2179     		ldrb	r1, [r4, #4]	@ zero_extendqisi2
 729:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_addr = (uint32_t)rx_buf;
 1861              		.loc 1 729 0
 1862 0108 6032     		adds	r2, r2, #96
 733:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1863              		.loc 1 733 0
 1864 010a 1029     		cmp	r1, #16
 729:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_addr = (uint32_t)rx_buf;
 1865              		.loc 1 729 0
 1866 010c 0792     		str	r2, [sp, #28]
 730:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_bsize = BURST_SIZE_1;
 1867              		.loc 1 730 0
 1868 010e 009A     		ldr	r2, [sp]
 727:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.trans_type = PER_TO_MEM;
 1869              		.loc 1 727 0
 1870 0110 CDF82480 		str	r8, [sp, #36]
 728:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 1871              		.loc 1 728 0
 1872 0114 8DF82C00 		strb	r0, [sp, #44]
 730:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.src_bsize = BURST_SIZE_1;
 1873              		.loc 1 730 0
 1874 0118 0892     		str	r2, [sp, #32]
 731:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_rx.dst_bsize = BURST_SIZE_1;
 1875              		.loc 1 731 0
 1876 011a 8DF82860 		strb	r6, [sp, #40]
 732:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->data_size)
 1877              		.loc 1 732 0
 1878 011e 8DF82960 		strb	r6, [sp, #41]
 1879 0122 DDF80CC0 		ldr	ip, [sp, #12]
 733:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1880              		.loc 1 733 0
 1881 0126 08D0     		beq	.L232
 1882 0128 2029     		cmp	r1, #32
 1883 012a 0BD0     		beq	.L233
 1884 012c 0829     		cmp	r1, #8
 1885 012e 0ED1     		bne	.L331
 737:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_8;
 1886              		.loc 1 737 0
 1887 0130 8DF82A60 		strb	r6, [sp, #42]
 738:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1888              		.loc 1 738 0
 1889 0134 8DF82B60 		strb	r6, [sp, #43]
 1890 0138 0EE0     		b	.L235
 1891              	.L232:
 743:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_16;
 1892              		.loc 1 743 0
 1893 013a 8DF82AB0 		strb	fp, [sp, #42]
 744:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1894              		.loc 1 744 0
 1895 013e 8DF82BB0 		strb	fp, [sp, #43]
 1896 0142 09E0     		b	.L235
 1897              	.L233:
 749:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_rx.dst_wdata = DATA_WIDTH_32;
 1898              		.loc 1 749 0
 1899 0144 8DF82A00 		strb	r0, [sp, #42]
 750:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1900              		.loc 1 750 0
 1901 0148 8DF82B00 		strb	r0, [sp, #43]
 1902 014c 04E0     		b	.L235
 1903              	.L331:
 755:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 1904              		.loc 1 755 0
 1905 014e 2046     		mov	r0, r4
 1906 0150 E047     		blx	ip
 1907              	.LVL183:
 756:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 1908              		.loc 1 756 0
 1909 0152 607D     		ldrb	r0, [r4, #21]	@ zero_extendqisi2
 1910 0154 D047     		blx	r10
 1911              	.LVL184:
 1912 0156 D5E0     		b	.L340
 1913              	.L235:
 760:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1914              		.loc 1 760 0
 1915 0158 012B     		cmp	r3, #1
 1916 015a 06D0     		beq	.L238
 1917 015c 03D3     		bcc	.L239
 1918 015e 022B     		cmp	r3, #2
 1919 0160 47D1     		bne	.L334
 769:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1920              		.loc 1 769 0
 1921 0162 0420     		movs	r0, #4
 1922 0164 02E0     		b	.L337
 1923              	.L239:
 763:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1924              		.loc 1 763 0
 1925 0166 0020     		movs	r0, #0
 1926 0168 00E0     		b	.L337
 1927              	.L238:
 766:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1928              		.loc 1 766 0
 1929 016a 0220     		movs	r0, #2
 1930              	.L337:
 712:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1931              		.loc 1 712 0
 1932 016c BDF80820 		ldrh	r2, [sp, #8]
 1933 0170 19FB02F6 		smulbb	r6, r9, r2
 785:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->data_size)
 1934              		.loc 1 785 0
 1935 0174 55F82350 		ldr	r5, [r5, r3, lsl #2]
 786:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1936              		.loc 1 786 0
 1937 0178 1029     		cmp	r1, #16
 769:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1938              		.loc 1 769 0
 1939 017a 8DF82F00 		strb	r0, [sp, #47]
 778:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1940              		.loc 1 778 0
 1941 017e A069     		ldr	r0, [r4, #24]
 782:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.trans_type = MEM_TO_PER;
 1942              		.loc 1 782 0
 1943 0180 B6B2     		uxth	r6, r6
 778:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 1944              		.loc 1 778 0
 1945 0182 0E90     		str	r0, [sp, #56]
 785:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->data_size)
 1946              		.loc 1 785 0
 1947 0184 05F16005 		add	r5, r5, #96
 781:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.length = tx_len;
 1948              		.loc 1 781 0
 1949 0188 607B     		ldrb	r0, [r4, #13]	@ zero_extendqisi2
 1950 018a 8DF83C00 		strb	r0, [sp, #60]
 783:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_addr = (uint32_t)tx_buf;
 1951              		.loc 1 783 0
 1952 018e 4FF00100 		mov	r0, #1
 784:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.dst_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 1953              		.loc 1 784 0
 1954 0192 019A     		ldr	r2, [sp, #4]
 782:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.trans_type = MEM_TO_PER;
 1955              		.loc 1 782 0
 1956 0194 1296     		str	r6, [sp, #72]
 783:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.src_addr = (uint32_t)tx_buf;
 1957              		.loc 1 783 0
 1958 0196 8DF85000 		strb	r0, [sp, #80]
 784:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	dma_tx.dst_addr = (uint32_t)&(spi_hw[spi->channel].spix->DR[0]);
 1959              		.loc 1 784 0
 1960 019a 1092     		str	r2, [sp, #64]
 785:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	switch(spi->data_size)
 1961              		.loc 1 785 0
 1962 019c 1195     		str	r5, [sp, #68]
 786:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1963              		.loc 1 786 0
 1964 019e 05D0     		beq	.L243
 1965 01a0 2029     		cmp	r1, #32
 1966 01a2 08D0     		beq	.L244
 1967 01a4 0829     		cmp	r1, #8
 1968 01a6 24D1     		bne	.L334
 790:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_8;
 1969              		.loc 1 790 0
 1970 01a8 0021     		movs	r1, #0
 1971 01aa 05E0     		b	.L338
 1972              	.L243:
 796:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_16;
 1973              		.loc 1 796 0
 1974 01ac 8DF84E00 		strb	r0, [sp, #78]
 797:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1975              		.loc 1 797 0
 1976 01b0 8DF84F00 		strb	r0, [sp, #79]
 1977 01b4 04E0     		b	.L246
 1978              	.L244:
 802:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			dma_tx.dst_wdata = DATA_WIDTH_32;
 1979              		.loc 1 802 0
 1980 01b6 0221     		movs	r1, #2
 1981              	.L338:
 1982 01b8 8DF84E10 		strb	r1, [sp, #78]
 803:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1983              		.loc 1 803 0
 1984 01bc 8DF84F10 		strb	r1, [sp, #79]
 1985              	.L246:
 813:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 1986              		.loc 1 813 0
 1987 01c0 012B     		cmp	r3, #1
 1988 01c2 06D0     		beq	.L248
 1989 01c4 03D3     		bcc	.L249
 1990 01c6 022B     		cmp	r3, #2
 1991 01c8 13D1     		bne	.L334
 822:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1992              		.loc 1 822 0
 1993 01ca 0523     		movs	r3, #5
 1994 01cc 02E0     		b	.L339
 1995              	.L249:
 816:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 1996              		.loc 1 816 0
 1997 01ce 0123     		movs	r3, #1
 1998 01d0 00E0     		b	.L339
 1999              	.L248:
 819:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 2000              		.loc 1 819 0
 2001 01d2 0323     		movs	r3, #3
 2002              	.L339:
 822:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 2003              		.loc 1 822 0
 2004 01d4 8DF85330 		strb	r3, [sp, #83]
 833:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	ret = hal_dma_init(&dma_rx);
 2005              		.loc 1 833 0
 2006 01d8 0020     		movs	r0, #0
 831:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2007              		.loc 1 831 0
 2008 01da 2369     		ldr	r3, [r4, #16]
 2009 01dc 1793     		str	r3, [sp, #92]
 833:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	ret = hal_dma_init(&dma_rx);
 2010              		.loc 1 833 0
 2011 01de 1C4B     		ldr	r3, .L343+20
 2012 01e0 9847     		blx	r3
 2013              	.LVL185:
 834:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != HAL_DMA_OK)
 2014              		.loc 1 834 0
 2015 01e2 1C4D     		ldr	r5, .L343+24
 2016 01e4 06A8     		add	r0, sp, #24
 2017 01e6 A847     		blx	r5
 2018              	.LVL186:
 835:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 2019              		.loc 1 835 0
 2020 01e8 80B2     		uxth	r0, r0
 2021              	.LVL187:
 2022 01ea 0028     		cmp	r0, #0
 2023 01ec 40F08A80 		bne	.L340
 2024 01f0 05E0     		b	.L252
 2025              	.LVL188:
 2026              	.L334:
 826:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			hal_dma_deinit(spi->dma_rx.chid);
 2027              		.loc 1 826 0
 2028 01f2 2046     		mov	r0, r4
 2029 01f4 184B     		ldr	r3, .L343+28
 2030 01f6 9847     		blx	r3
 2031              	.LVL189:
 827:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			return SPI_ERROR;
 2032              		.loc 1 827 0
 2033 01f8 607D     		ldrb	r0, [r4, #21]	@ zero_extendqisi2
 2034 01fa B847     		blx	r7
 2035              	.LVL190:
 2036 01fc 82E0     		b	.L340
 2037              	.LVL191:
 2038              	.L252:
 838:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != HAL_DMA_OK)
 2039              		.loc 1 838 0
 2040 01fe 0FA8     		add	r0, sp, #60
 2041 0200 A847     		blx	r5
 2042              	.LVL192:
 839:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 2043              		.loc 1 839 0
 2044 0202 80B2     		uxth	r0, r0
 2045              	.LVL193:
 2046 0204 0028     		cmp	r0, #0
 2047 0206 7DD1     		bne	.L340
 842:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	flush_cache((unsigned long)rx_buf, rx_len);
 2048              		.loc 1 842 0
 2049 0208 0198     		ldr	r0, [sp, #4]
 2050 020a 3146     		mov	r1, r6
 2051 020c 134D     		ldr	r5, .L343+32
 2052 020e A847     		blx	r5
 2053              	.LVL194:
 843:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	ret = hal_spi_init(spi);
 2054              		.loc 1 843 0
 2055 0210 0098     		ldr	r0, [sp]
 2056 0212 4146     		mov	r1, r8
 2057 0214 A847     		blx	r5
 2058              	.LVL195:
 844:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != SPI_OK)
 2059              		.loc 1 844 0
 2060 0216 2046     		mov	r0, r4
 2061 0218 114B     		ldr	r3, .L343+36
 2062 021a 9847     		blx	r3
 2063              	.LVL196:
 845:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 2064              		.loc 1 845 0
 2065 021c 80B2     		uxth	r0, r0
 2066              	.LVL197:
 2067 021e 0028     		cmp	r0, #0
 2068 0220 70D1     		bne	.L340
 848:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != HAL_DMA_OK)
 2069              		.loc 1 848 0
 2070 0222 607D     		ldrb	r0, [r4, #21]	@ zero_extendqisi2
 2071 0224 0F4D     		ldr	r5, .L343+40
 2072 0226 A847     		blx	r5
 2073              	.LVL198:
 849:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 2074              		.loc 1 849 0
 2075 0228 80B2     		uxth	r0, r0
 2076              	.LVL199:
 2077 022a 0028     		cmp	r0, #0
 2078 022c 6AD1     		bne	.L340
 852:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	if(ret != HAL_DMA_OK)
 2079              		.loc 1 852 0
 2080 022e 607B     		ldrb	r0, [r4, #13]	@ zero_extendqisi2
 2081 0230 A847     		blx	r5
 2082              	.LVL200:
 853:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		return SPI_ERROR;
 2083              		.loc 1 853 0
 2084 0232 80B2     		uxth	r0, r0
 2085              	.LVL201:
 2086 0234 0028     		cmp	r0, #0
 2087 0236 65D1     		bne	.L340
 2088 0238 DFE0     		b	.L254
 2089              	.L344:
 2090 023a 00BF     		.align	2
 2091              	.L343:
 2092 023c 00000000 		.word	.LANCHOR0
 2093 0240 00000000 		.word	memset
 2094 0244 00000000 		.word	.LANCHOR11
 2095 0248 00000000 		.word	assert_failed
 2096 024c 00000000 		.word	hal_spi_dma_init
 2097 0250 00000000 		.word	hal_dma_enable_global_interrupt
 2098 0254 00000000 		.word	hal_dma_init
 2099 0258 00000000 		.word	hal_spi_disable
 2100 025c 00000000 		.word	flush_cache
 2101 0260 00000000 		.word	hal_spi_init
 2102 0264 00000000 		.word	hal_dma_channel_enable
 2103 0268 00000000 		.word	hal_dma_deinit
 2104              	.LVL202:
 2105              	.L223:
 2106              	.LBE29:
 2107              	.LBE28:
 2108              	.LBB30:
 2109              	.LBB31:
 862:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t buff_size = 0;
 2110              		.loc 1 862 0
 2111 026c 0023     		movs	r3, #0
 2112 026e 0693     		str	r3, [sp, #24]
 2113              	.LVL203:
 869:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2114              		.loc 1 869 0
 2115 0270 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 2116 0272 082B     		cmp	r3, #8
 2117 0274 08D0     		beq	.L255
 2118 0276 102B     		cmp	r3, #16
 2119 0278 06D0     		beq	.L255
 2120 027a 202B     		cmp	r3, #32
 2121 027c 04D0     		beq	.L255
 2122 027e 6048     		ldr	r0, .L345
 2123              	.LVL204:
 2124 0280 40F26531 		movw	r1, #869
 2125              	.LVL205:
 2126 0284 5F4B     		ldr	r3, .L345+4
 2127 0286 9847     		blx	r3
 2128              	.LVL206:
 2129              	.L255:
 870:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 2130              		.loc 1 870 0
 2131 0288 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 2132 028a 032B     		cmp	r3, #3
 2133 028c 04D9     		bls	.L256
 2134 028e 5C48     		ldr	r0, .L345
 2135 0290 40F26631 		movw	r1, #870
 2136 0294 5B4B     		ldr	r3, .L345+4
 2137 0296 9847     		blx	r3
 2138              	.LVL207:
 2139              	.L256:
 871:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 2140              		.loc 1 871 0
 2141 0298 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 2142 029a 022B     		cmp	r3, #2
 2143 029c 04D9     		bls	.L257
 2144 029e 5848     		ldr	r0, .L345
 2145 02a0 40F26731 		movw	r1, #871
 2146 02a4 574B     		ldr	r3, .L345+4
 2147 02a6 9847     		blx	r3
 2148              	.LVL208:
 2149              	.L257:
 872:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 2150              		.loc 1 872 0
 2151 02a8 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 2152 02aa 022B     		cmp	r3, #2
 2153 02ac 04D9     		bls	.L258
 2154 02ae 5448     		ldr	r0, .L345
 2155 02b0 4FF45A71 		mov	r1, #872
 2156 02b4 534B     		ldr	r3, .L345+4
 2157 02b6 9847     		blx	r3
 2158              	.LVL209:
 2159              	.L258:
 873:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2160              		.loc 1 873 0
 2161 02b8 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 2162 02ba 022B     		cmp	r3, #2
 2163 02bc 04D9     		bls	.L259
 2164 02be 5048     		ldr	r0, .L345
 2165 02c0 40F26931 		movw	r1, #873
 2166 02c4 4F4B     		ldr	r3, .L345+4
 2167 02c6 9847     		blx	r3
 2168              	.LVL210:
 2169              	.L259:
 875:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					buff->rxbuf.buf == NULL || buff->rxbuf.len == 0 ||
 2170              		.loc 1 875 0
 2171 02c8 FB68     		ldr	r3, [r7, #12]
 2172 02ca 3BB1     		cbz	r3, .L260
 2173 02cc 3B89     		ldrh	r3, [r7, #8]
 2174 02ce 2BB1     		cbz	r3, .L260
 2175 02d0 7A68     		ldr	r2, [r7, #4]
 2176 02d2 1AB1     		cbz	r2, .L260
 2177 02d4 3A88     		ldrh	r2, [r7]
 2178 02d6 0AB1     		cbz	r2, .L260
 2179 02d8 9A42     		cmp	r2, r3
 2180 02da 04D0     		beq	.L261
 2181              	.L260:
 2182 02dc 4848     		ldr	r0, .L345
 2183 02de 40F26D31 		movw	r1, #877
 2184 02e2 484B     		ldr	r3, .L345+4
 2185 02e4 9847     		blx	r3
 2186              	.LVL211:
 2187              	.L261:
 880:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	buff->txbuf.counter = 0;
 2188              		.loc 1 880 0
 2189 02e6 0023     		movs	r3, #0
 884:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2190              		.loc 1 884 0
 2191 02e8 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 2192 02ea 0121     		movs	r1, #1
 879:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	buff->rxbuf.counter = 0;
 2193              		.loc 1 879 0
 2194 02ec 3889     		ldrh	r0, [r7, #8]
 2195              	.LVL212:
 884:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2196              		.loc 1 884 0
 2197 02ee 55F82220 		ldr	r2, [r5, r2, lsl #2]
 880:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	buff->txbuf.counter = 0;
 2198              		.loc 1 880 0
 2199 02f2 7B80     		strh	r3, [r7, #2]	@ movhi
 881:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2200              		.loc 1 881 0
 2201 02f4 7B81     		strh	r3, [r7, #10]	@ movhi
 884:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2202              		.loc 1 884 0
 2203 02f6 9160     		str	r1, [r2, #8]
 865:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	int rx_fifo = 0;
 2204              		.loc 1 865 0
 2205 02f8 1A46     		mov	r2, r3
 2206 02fa 2DE0     		b	.L262
 2207              	.LVL213:
 2208              	.L335:
 928:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					return SPI_ERROR;
 2209              		.loc 1 928 0
 2210 02fc 0022     		movs	r2, #0
 2211              	.LVL214:
 2212 02fe 55F82130 		ldr	r3, [r5, r1, lsl #2]
 2213              	.LVL215:
 2214 0302 9A60     		str	r2, [r3, #8]
 2215              	.LVL216:
 2216              	.L340:
 929:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				}
 2217              		.loc 1 929 0
 2218 0304 0E20     		movs	r0, #14
 2219 0306 78E0     		b	.L254
 2220              	.LVL217:
 2221              	.L271:
 906:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 2222              		.loc 1 906 0
 2223 0308 2679     		ldrb	r6, [r4, #4]	@ zero_extendqisi2
 2224 030a 102E     		cmp	r6, #16
 2225 030c 31D0     		beq	.L267
 2226 030e 202E     		cmp	r6, #32
 2227 0310 34D0     		beq	.L268
 2228 0312 082E     		cmp	r6, #8
 2229 0314 F2D1     		bne	.L335
 910:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_tx++;
 2230              		.loc 1 910 0
 2231 0316 FE68     		ldr	r6, [r7, #12]
 2232 0318 16F80280 		ldrb	r8, [r6, r2]	@ zero_extendqisi2
 2233              	.LVL218:
 911:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 2234              		.loc 1 911 0
 2235 031c 0132     		adds	r2, r2, #1
 2236              	.LVL219:
 2237              	.L270:
 903:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 2238              		.loc 1 903 0
 2239 031e 0CF1010C 		add	ip, ip, #1
 2240              	.LVL220:
 933:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			buff->txbuf.counter = idx_tx;
 2241              		.loc 1 933 0
 2242 0322 55F82160 		ldr	r6, [r5, r1, lsl #2]
 2243 0326 C6F86080 		str	r8, [r6, #96]
 934:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 2244              		.loc 1 934 0
 2245 032a 7A81     		strh	r2, [r7, #10]	@ movhi
 2246              	.LVL221:
 2247              	.L265:
 903:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 2248              		.loc 1 903 0
 2249 032c F445     		cmp	ip, lr
 2250 032e EBD1     		bne	.L271
 937:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 2251              		.loc 1 937 0
 2252 0330 69BB     		cbnz	r1, .L272
 2253              	.LVL222:
 2254              	.LBB32:
 2255              	.LBB33:
 125:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		time_out--;
 2256              		.loc 1 125 0
 2257 0332 D5F800E0 		ldr	lr, [r5]
 2258              	.LVL223:
 119:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t status_reg = 0;
 2259              		.loc 1 119 0
 2260 0336 44F62061 		movw	r1, #20000
 2261 033a 0F91     		str	r1, [sp, #60]
 2262              	.LVL224:
 2263              	.L275:
 125:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		time_out--;
 2264              		.loc 1 125 0
 2265 033c DEF82810 		ldr	r1, [lr, #40]
 2266              	.LVL225:
 126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	} while(((status_reg & (SR_TF_EMPT | SR_BUSY)) != SR_TF_EMPT)
 2267              		.loc 1 126 0
 2268 0340 0F9E     		ldr	r6, [sp, #60]
 127:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			&& (time_out > 0));
 2269              		.loc 1 127 0
 2270 0342 01F00501 		and	r1, r1, #5
 2271              	.LVL226:
 126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	} while(((status_reg & (SR_TF_EMPT | SR_BUSY)) != SR_TF_EMPT)
 2272              		.loc 1 126 0
 2273 0346 013E     		subs	r6, r6, #1
 128:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2274              		.loc 1 128 0
 2275 0348 0429     		cmp	r1, #4
 126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	} while(((status_reg & (SR_TF_EMPT | SR_BUSY)) != SR_TF_EMPT)
 2276              		.loc 1 126 0
 2277 034a 0F96     		str	r6, [sp, #60]
 128:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2278              		.loc 1 128 0
 2279 034c 1BD1     		bne	.L273
 2280              	.L276:
 130:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2281              		.loc 1 130 0
 2282 034e DEF82410 		ldr	r1, [lr, #36]
 2283              	.LVL227:
 2284 0352 C9B2     		uxtb	r1, r1
 2285              	.LVL228:
 2286              	.L277:
 2287              	.LBE33:
 2288              	.LBE32:
 958:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 2289              		.loc 1 958 0
 2290 0354 0029     		cmp	r1, #0
 2291 0356 2BDC     		bgt	.L285
 2292              	.LVL229:
 2293              	.L262:
 2294 0358 6178     		ldrb	r1, [r4, #1]	@ zero_extendqisi2
 886:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 2295              		.loc 1 886 0
 2296 035a 0028     		cmp	r0, #0
 2297 035c 4AD0     		beq	.L341
 889:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 2298              		.loc 1 889 0
 2299 035e 2028     		cmp	r0, #32
 891:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			buff_size = 0;
 2300              		.loc 1 891 0
 2301 0360 95BF     		itete	ls
 2302 0362 8646     		movls	lr, r0
 2303              	.LVL230:
 897:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 2304              		.loc 1 897 0
 2305 0364 2038     		subhi	r0, r0, #32
 2306              	.LVL231:
 892:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 2307              		.loc 1 892 0
 2308 0366 0020     		movls	r0, #0
 2309              	.LVL232:
 896:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			buff_size -= SPI_FIFO_DEPTH;
 2310              		.loc 1 896 0
 2311 0368 4FF0200E 		movhi	lr, #32
 2312              	.LVL233:
 903:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		{
 2313              		.loc 1 903 0
 2314 036c 4FF0000C 		mov	ip, #0
 2315 0370 DCE7     		b	.L265
 2316              	.LVL234:
 2317              	.L267:
 916:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_tx += 2;
 2318              		.loc 1 916 0
 2319 0372 FE68     		ldr	r6, [r7, #12]
 2320 0374 36F80280 		ldrh	r8, [r6, r2]
 2321              	.LVL235:
 917:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 2322              		.loc 1 917 0
 2323 0378 0232     		adds	r2, r2, #2
 2324              	.LVL236:
 2325 037a D0E7     		b	.L270
 2326              	.LVL237:
 2327              	.L268:
 922:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_tx += 4;
 2328              		.loc 1 922 0
 2329 037c FE68     		ldr	r6, [r7, #12]
 2330 037e 56F80280 		ldr	r8, [r6, r2]
 2331              	.LVL238:
 923:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 2332              		.loc 1 923 0
 2333 0382 0432     		adds	r2, r2, #4
 2334              	.LVL239:
 2335 0384 CBE7     		b	.L270
 2336              	.LVL240:
 2337              	.L273:
 2338              	.LBB35:
 2339              	.LBB34:
 128:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2340              		.loc 1 128 0
 2341 0386 0F99     		ldr	r1, [sp, #60]
 2342 0388 0029     		cmp	r1, #0
 2343 038a D7D1     		bne	.L275
 2344 038c DFE7     		b	.L276
 2345              	.LVL241:
 2346              	.L272:
 2347              	.LBE34:
 2348              	.LBE35:
 946:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 2349              		.loc 1 946 0
 2350 038e 55F82110 		ldr	r1, [r5, r1, lsl #2]
 945:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			while(spi_hw[spi->channel].spix->RXFLR != count)
 2351              		.loc 1 945 0
 2352 0392 1D4E     		ldr	r6, .L345+8
 2353 0394 0696     		str	r6, [sp, #24]
 2354              	.L278:
 946:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 2355              		.loc 1 946 0
 2356 0396 4E6A     		ldr	r6, [r1, #36]
 2357 0398 7645     		cmp	r6, lr
 2358 039a 07D0     		beq	.L342
 948:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				if(time_out == 0)
 2359              		.loc 1 948 0
 2360 039c 069E     		ldr	r6, [sp, #24]
 2361 039e 013E     		subs	r6, r6, #1
 2362 03a0 0696     		str	r6, [sp, #24]
 949:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				{
 2363              		.loc 1 949 0
 2364 03a2 069E     		ldr	r6, [sp, #24]
 2365 03a4 002E     		cmp	r6, #0
 2366 03a6 F6D1     		bne	.L278
 951:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					return SPI_ERROR;
 2367              		.loc 1 951 0
 2368 03a8 8E60     		str	r6, [r1, #8]
 2369 03aa ABE7     		b	.L340
 2370              	.L342:
 955:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 2371              		.loc 1 955 0
 2372 03ac 496A     		ldr	r1, [r1, #36]
 2373              	.LVL242:
 2374 03ae D1E7     		b	.L277
 2375              	.LVL243:
 2376              	.L285:
 960:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2377              		.loc 1 960 0
 2378 03b0 6678     		ldrb	r6, [r4, #1]	@ zero_extendqisi2
 2379 03b2 55F826C0 		ldr	ip, [r5, r6, lsl #2]
 962:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 2380              		.loc 1 962 0
 2381 03b6 2679     		ldrb	r6, [r4, #4]	@ zero_extendqisi2
 2382 03b8 102E     		cmp	r6, #16
 960:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2383              		.loc 1 960 0
 2384 03ba DCF860E0 		ldr	lr, [ip, #96]
 2385              	.LVL244:
 962:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			{
 2386              		.loc 1 962 0
 2387 03be 08D0     		beq	.L281
 2388 03c0 202E     		cmp	r6, #32
 2389 03c2 0BD0     		beq	.L282
 2390 03c4 082E     		cmp	r6, #8
 2391 03c6 0ED1     		bne	.L336
 966:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_rx++;
 2392              		.loc 1 966 0
 2393 03c8 7E68     		ldr	r6, [r7, #4]
 2394 03ca 06F803E0 		strb	lr, [r6, r3]
 967:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 2395              		.loc 1 967 0
 2396 03ce 0133     		adds	r3, r3, #1
 2397              	.LVL245:
 2398 03d0 0DE0     		b	.L284
 2399              	.L281:
 972:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_rx += 2;
 2400              		.loc 1 972 0
 2401 03d2 7E68     		ldr	r6, [r7, #4]
 2402 03d4 26F803E0 		strh	lr, [r6, r3]	@ movhi
 973:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 2403              		.loc 1 973 0
 2404 03d8 0233     		adds	r3, r3, #2
 2405              	.LVL246:
 2406 03da 08E0     		b	.L284
 2407              	.L282:
 978:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					idx_rx += 4;
 2408              		.loc 1 978 0
 2409 03dc 7E68     		ldr	r6, [r7, #4]
 2410 03de 46F803E0 		str	lr, [r6, r3]
 979:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					break;
 2411              		.loc 1 979 0
 2412 03e2 0433     		adds	r3, r3, #4
 2413              	.LVL247:
 2414 03e4 03E0     		b	.L284
 2415              	.L336:
 985:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 					return SPI_ERROR;
 2416              		.loc 1 985 0
 2417 03e6 0023     		movs	r3, #0
 2418              	.LVL248:
 2419 03e8 CCF80830 		str	r3, [ip, #8]
 2420 03ec 8AE7     		b	.L340
 2421              	.LVL249:
 2422              	.L284:
 989:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			rx_fifo--;
 2423              		.loc 1 989 0
 2424 03ee 7B80     		strh	r3, [r7, #2]	@ movhi
 990:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 		}
 2425              		.loc 1 990 0
 2426 03f0 0139     		subs	r1, r1, #1
 2427              	.LVL250:
 2428 03f2 AFE7     		b	.L277
 2429              	.LVL251:
 2430              	.L341:
 994:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	return SPI_OK;
 2431              		.loc 1 994 0
 2432 03f4 55F82130 		ldr	r3, [r5, r1, lsl #2]
 2433              	.LVL252:
 2434 03f8 9860     		str	r0, [r3, #8]
 2435              	.LVL253:
 2436              	.L254:
 2437              	.LBE31:
 2438              	.LBE30:
1018:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2439              		.loc 1 1018 0
 2440 03fa 19B0     		add	sp, sp, #100
 2441              	.LCFI19:
 2442              		.cfi_def_cfa_offset 36
 2443              		@ sp needed
 2444 03fc BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2445              	.LVL254:
 2446              	.L346:
 2447              		.align	2
 2448              	.L345:
 2449 0400 00000000 		.word	.LANCHOR12
 2450 0404 00000000 		.word	assert_failed
 2451 0408 006A1800 		.word	1600000
 2452              		.cfi_endproc
 2453              	.LFE16:
 2455              		.section	.text.hal_spi_interrupt_init,"ax",%progbits
 2456              		.align	1
 2457              		.global	hal_spi_interrupt_init
 2458              		.thumb
 2459              		.thumb_func
 2461              	hal_spi_interrupt_init:
 2462              	.LFB18:
1047:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t reg_tmp = 0;
 2463              		.loc 1 1047 0
 2464              		.cfi_startproc
 2465              		@ args = 0, pretend = 0, frame = 0
 2466              		@ frame_needed = 0, uses_anonymous_args = 0
 2467              	.LVL255:
 2468 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2469              	.LCFI20:
 2470              		.cfi_def_cfa_offset 24
 2471              		.cfi_offset 3, -24
 2472              		.cfi_offset 4, -20
 2473              		.cfi_offset 5, -16
 2474              		.cfi_offset 6, -12
 2475              		.cfi_offset 7, -8
 2476              		.cfi_offset 14, -4
1051:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2477              		.loc 1 1051 0
 2478 0002 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 2479 0004 082B     		cmp	r3, #8
1047:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	uint32_t reg_tmp = 0;
 2480              		.loc 1 1047 0
 2481 0006 0646     		mov	r6, r0
 2482 0008 0C46     		mov	r4, r1
1051:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2483              		.loc 1 1051 0
 2484 000a 08D0     		beq	.L348
1051:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2485              		.loc 1 1051 0 is_stmt 0 discriminator 1
 2486 000c 102B     		cmp	r3, #16
 2487 000e 06D0     		beq	.L348
1051:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2488              		.loc 1 1051 0 discriminator 2
 2489 0010 202B     		cmp	r3, #32
 2490 0012 04D0     		beq	.L348
1051:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2491              		.loc 1 1051 0 discriminator 3
 2492 0014 5948     		ldr	r0, .L376
 2493              	.LVL256:
 2494 0016 40F21B41 		movw	r1, #1051
 2495              	.LVL257:
 2496 001a 594B     		ldr	r3, .L376+4
 2497 001c 9847     		blx	r3
 2498              	.LVL258:
 2499              	.L348:
1052:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
 2500              		.loc 1 1052 0 is_stmt 1
 2501 001e F378     		ldrb	r3, [r6, #3]	@ zero_extendqisi2
 2502 0020 032B     		cmp	r3, #3
 2503 0022 04D9     		bls	.L349
1052:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
 2504              		.loc 1 1052 0 is_stmt 0 discriminator 1
 2505 0024 5548     		ldr	r0, .L376
 2506 0026 40F21C41 		movw	r1, #1052
 2507 002a 554B     		ldr	r3, .L376+4
 2508 002c 9847     		blx	r3
 2509              	.LVL259:
 2510              	.L349:
1053:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 2511              		.loc 1 1053 0 is_stmt 1
 2512 002e 7379     		ldrb	r3, [r6, #5]	@ zero_extendqisi2
 2513 0030 032B     		cmp	r3, #3
 2514 0032 04D9     		bls	.L350
1053:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 2515              		.loc 1 1053 0 is_stmt 0 discriminator 1
 2516 0034 5148     		ldr	r0, .L376
 2517 0036 40F21D41 		movw	r1, #1053
 2518 003a 514B     		ldr	r3, .L376+4
 2519 003c 9847     		blx	r3
 2520              	.LVL260:
 2521              	.L350:
1054:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 2522              		.loc 1 1054 0 is_stmt 1
 2523 003e B378     		ldrb	r3, [r6, #2]	@ zero_extendqisi2
 2524 0040 022B     		cmp	r3, #2
 2525 0042 04D9     		bls	.L351
1054:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 2526              		.loc 1 1054 0 is_stmt 0 discriminator 1
 2527 0044 4D48     		ldr	r0, .L376
 2528 0046 40F21E41 		movw	r1, #1054
 2529 004a 4D4B     		ldr	r3, .L376+4
 2530 004c 9847     		blx	r3
 2531              	.LVL261:
 2532              	.L351:
1055:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 2533              		.loc 1 1055 0 is_stmt 1
 2534 004e 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 2535 0050 022B     		cmp	r3, #2
 2536 0052 04D9     		bls	.L352
1055:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 2537              		.loc 1 1055 0 is_stmt 0 discriminator 1
 2538 0054 4948     		ldr	r0, .L376
 2539 0056 40F21F41 		movw	r1, #1055
 2540 005a 494B     		ldr	r3, .L376+4
 2541 005c 9847     		blx	r3
 2542              	.LVL262:
 2543              	.L352:
1056:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2544              		.loc 1 1056 0 is_stmt 1
 2545 005e 7378     		ldrb	r3, [r6, #1]	@ zero_extendqisi2
 2546 0060 022B     		cmp	r3, #2
 2547 0062 04D9     		bls	.L353
1056:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2548              		.loc 1 1056 0 is_stmt 0 discriminator 1
 2549 0064 4548     		ldr	r0, .L376
 2550 0066 4FF48461 		mov	r1, #1056
 2551 006a 454B     		ldr	r3, .L376+4
 2552 006c 9847     		blx	r3
 2553              	.LVL263:
 2554              	.L353:
1059:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->rx_fifo_overflow));
 2555              		.loc 1 1059 0 is_stmt 1
 2556 006e E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 2557 0070 012B     		cmp	r3, #1
 2558 0072 04D9     		bls	.L354
1059:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->rx_fifo_overflow));
 2559              		.loc 1 1059 0 is_stmt 0 discriminator 1
 2560 0074 4148     		ldr	r0, .L376
 2561 0076 40F22341 		movw	r1, #1059
 2562 007a 414B     		ldr	r3, .L376+4
 2563 007c 9847     		blx	r3
 2564              	.LVL264:
 2565              	.L354:
1060:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->rx_fifo_underflow));
 2566              		.loc 1 1060 0 is_stmt 1
 2567 007e 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 2568 0080 012B     		cmp	r3, #1
 2569 0082 04D9     		bls	.L355
1060:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->rx_fifo_underflow));
 2570              		.loc 1 1060 0 is_stmt 0 discriminator 1
 2571 0084 3D48     		ldr	r0, .L376
 2572 0086 40F22441 		movw	r1, #1060
 2573 008a 3D4B     		ldr	r3, .L376+4
 2574 008c 9847     		blx	r3
 2575              	.LVL265:
 2576              	.L355:
1061:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->tx_fifo_empty));
 2577              		.loc 1 1061 0 is_stmt 1
 2578 008e 6379     		ldrb	r3, [r4, #5]	@ zero_extendqisi2
 2579 0090 012B     		cmp	r3, #1
 2580 0092 04D9     		bls	.L356
1061:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->tx_fifo_empty));
 2581              		.loc 1 1061 0 is_stmt 0 discriminator 1
 2582 0094 3948     		ldr	r0, .L376
 2583 0096 40F22541 		movw	r1, #1061
 2584 009a 394B     		ldr	r3, .L376+4
 2585 009c 9847     		blx	r3
 2586              	.LVL266:
 2587              	.L356:
1062:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->tx_fifo_overflow));
 2588              		.loc 1 1062 0 is_stmt 1
 2589 009e E379     		ldrb	r3, [r4, #7]	@ zero_extendqisi2
 2590 00a0 012B     		cmp	r3, #1
 2591 00a2 04D9     		bls	.L357
1062:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->tx_fifo_overflow));
 2592              		.loc 1 1062 0 is_stmt 0 discriminator 1
 2593 00a4 3548     		ldr	r0, .L376
 2594 00a6 40F22641 		movw	r1, #1062
 2595 00aa 354B     		ldr	r3, .L376+4
 2596 00ac 9847     		blx	r3
 2597              	.LVL267:
 2598              	.L357:
1063:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->multi_master_contention));
 2599              		.loc 1 1063 0 is_stmt 1
 2600 00ae A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 2601 00b0 012B     		cmp	r3, #1
 2602 00b2 04D9     		bls	.L358
1063:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_STATUS(interrupt->multi_master_contention));
 2603              		.loc 1 1063 0 is_stmt 0 discriminator 1
 2604 00b4 3148     		ldr	r0, .L376
 2605 00b6 40F22741 		movw	r1, #1063
 2606 00ba 314B     		ldr	r3, .L376+4
 2607 00bc 9847     		blx	r3
 2608              	.LVL268:
 2609              	.L358:
1064:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(interrupt->rx_fifo_threshold > 31));
 2610              		.loc 1 1064 0 is_stmt 1
 2611 00be A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 2612 00c0 012B     		cmp	r3, #1
 2613 00c2 04D9     		bls	.L359
1064:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(interrupt->rx_fifo_threshold > 31));
 2614              		.loc 1 1064 0 is_stmt 0 discriminator 1
 2615 00c4 2D48     		ldr	r0, .L376
 2616 00c6 4FF48561 		mov	r1, #1064
 2617 00ca 2D4B     		ldr	r3, .L376+4
 2618 00cc 9847     		blx	r3
 2619              	.LVL269:
 2620              	.L359:
1065:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(interrupt->tx_fifo_threshold > 31));
 2621              		.loc 1 1065 0 is_stmt 1
 2622 00ce 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 2623 00d0 1F2B     		cmp	r3, #31
 2624 00d2 04D9     		bls	.L360
1065:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(!(interrupt->tx_fifo_threshold > 31));
 2625              		.loc 1 1065 0 is_stmt 0 discriminator 1
 2626 00d4 2948     		ldr	r0, .L376
 2627 00d6 40F22941 		movw	r1, #1065
 2628 00da 294B     		ldr	r3, .L376+4
 2629 00dc 9847     		blx	r3
 2630              	.LVL270:
 2631              	.L360:
1066:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2632              		.loc 1 1066 0 is_stmt 1
 2633 00de 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 2634 00e0 1F2B     		cmp	r3, #31
 2635 00e2 04D9     		bls	.L361
1066:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2636              		.loc 1 1066 0 is_stmt 0 discriminator 1
 2637 00e4 2548     		ldr	r0, .L376
 2638 00e6 40F22A41 		movw	r1, #1066
 2639 00ea 254B     		ldr	r3, .L376+4
 2640 00ec 9847     		blx	r3
 2641              	.LVL271:
 2642              	.L361:
1070:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2643              		.loc 1 1070 0 is_stmt 1
 2644 00ee DFF8ACE0 		ldr	lr, .L376+32
 2645 00f2 7178     		ldrb	r1, [r6, #1]	@ zero_extendqisi2
 2646 00f4 2278     		ldrb	r2, [r4]	@ zero_extendqisi2
1086:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.multi_master_handler;
 2647              		.loc 1 1086 0
 2648 00f6 234F     		ldr	r7, .L376+8
 2649 00f8 A068     		ldr	r0, [r4, #8]
1104:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 2650              		.loc 1 1104 0
 2651 00fa 0129     		cmp	r1, #1
1070:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2652              		.loc 1 1070 0
 2653 00fc 5EF82130 		ldr	r3, [lr, r1, lsl #2]
 2654 0100 9A61     		str	r2, [r3, #24]
1073:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2655              		.loc 1 1073 0
 2656 0102 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 2657 0104 DA61     		str	r2, [r3, #28]
1077:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->rx_fifo_overflow << SPI_INT_RXOI_OFFSET)		|
 2658              		.loc 1 1077 0
 2659 0106 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 2660 0108 4FEA0313 		lsl	r3, r3, #4
1076:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->rx_fifo_full << SPI_INT_RXFI_OFFSET)			|
 2661              		.loc 1 1076 0
 2662 010c A578     		ldrb	r5, [r4, #2]	@ zero_extendqisi2
 2663 010e 43EA4513 		orr	r3, r3, r5, lsl #5
1081:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2664              		.loc 1 1081 0
 2665 0112 E279     		ldrb	r2, [r4, #7]	@ zero_extendqisi2
 2666 0114 43EA0203 		orr	r3, r3, r2
1078:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->rx_fifo_underflow << SPI_INT_RXUI_OFFSET)		|
 2667              		.loc 1 1078 0
 2668 0118 2579     		ldrb	r5, [r4, #4]	@ zero_extendqisi2
 2669 011a 43EAC505 		orr	r5, r3, r5, lsl #3
1079:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->tx_fifo_overflow << SPI_INT_TXOI_OFFSET)		|
 2670              		.loc 1 1079 0
 2671 011e 6379     		ldrb	r3, [r4, #5]	@ zero_extendqisi2
1083:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2672              		.loc 1 1083 0
 2673 0120 4FF00102 		mov	r2, #1
 2674 0124 45EA8303 		orr	r3, r5, r3, lsl #2
1080:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 				(interrupt->tx_fifo_empty << SPI_INT_TXEI_OFFSET);
 2675              		.loc 1 1080 0
 2676 0128 A579     		ldrb	r5, [r4, #6]	@ zero_extendqisi2
 2677 012a 43EA4505 		orr	r5, r3, r5, lsl #1
 2678              	.LVL272:
1083:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2679              		.loc 1 1083 0
 2680 012e 164B     		ldr	r3, .L376+12
 2681 0130 5A54     		strb	r2, [r3, r1]
1086:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.multi_master_handler;
 2682              		.loc 1 1086 0
 2683 0132 4FF01802 		mov	r2, #24
 2684 0136 02FB01F2 		mul	r2, r2, r1
 2685 013a 07EB0203 		add	r3, r7, r2
 2686 013e B850     		str	r0, [r7, r2]
1090:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2687              		.loc 1 1090 0
 2688 0140 E268     		ldr	r2, [r4, #12]
1089:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.rx_fifo_full_handler;
 2689              		.loc 1 1089 0
 2690 0142 5A60     		str	r2, [r3, #4]
1093:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2691              		.loc 1 1093 0
 2692 0144 2269     		ldr	r2, [r4, #16]
1092:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.rx_fifo_overflow_handler;
 2693              		.loc 1 1092 0
 2694 0146 9A60     		str	r2, [r3, #8]
1096:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2695              		.loc 1 1096 0
 2696 0148 6269     		ldr	r2, [r4, #20]
1095:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.rx_fifo_underflow_handler;
 2697              		.loc 1 1095 0
 2698 014a DA60     		str	r2, [r3, #12]
1099:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2699              		.loc 1 1099 0
 2700 014c E269     		ldr	r2, [r4, #28]
1098:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.tx_fifo_empty_handler;
 2701              		.loc 1 1098 0
 2702 014e 5A61     		str	r2, [r3, #20]
1102:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2703              		.loc 1 1102 0
 2704 0150 A269     		ldr	r2, [r4, #24]
 2705 0152 7446     		mov	r4, lr
 2706              	.LVL273:
1101:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			interrupt->callback_handler.tx_fifo_overflow_handler;
 2707              		.loc 1 1101 0
 2708 0154 1A61     		str	r2, [r3, #16]
1104:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 2709              		.loc 1 1104 0
 2710 0156 08D0     		beq	.L363
 2711 0158 04D3     		bcc	.L364
 2712 015a 0229     		cmp	r1, #2
 2713 015c 09D1     		bne	.L362
1113:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 2714              		.loc 1 1113 0
 2715 015e 0720     		movs	r0, #7
 2716 0160 0A49     		ldr	r1, .L376+16
 2717 0162 04E0     		b	.L375
 2718              	.L364:
1107:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 2719              		.loc 1 1107 0
 2720 0164 0020     		movs	r0, #0
 2721 0166 0A49     		ldr	r1, .L376+20
 2722 0168 01E0     		b	.L375
 2723              	.L363:
1110:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 2724              		.loc 1 1110 0
 2725 016a 0A49     		ldr	r1, .L376+24
 2726 016c 0820     		movs	r0, #8
 2727              	.L375:
1113:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 2728              		.loc 1 1113 0
 2729 016e 0A4B     		ldr	r3, .L376+28
 2730 0170 9847     		blx	r3
 2731              	.LVL274:
 2732              	.L362:
1120:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** }
 2733              		.loc 1 1120 0
 2734 0172 7378     		ldrb	r3, [r6, #1]	@ zero_extendqisi2
 2735 0174 54F82330 		ldr	r3, [r4, r3, lsl #2]
 2736 0178 DD62     		str	r5, [r3, #44]
 2737 017a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2738              	.LVL275:
 2739              	.L377:
 2740              		.align	2
 2741              	.L376:
 2742 017c 00000000 		.word	.LANCHOR13
 2743 0180 00000000 		.word	assert_failed
 2744 0184 00000000 		.word	.LANCHOR1
 2745 0188 00000000 		.word	.LANCHOR14
 2746 018c 00000000 		.word	hal_spi_2_irq
 2747 0190 00000000 		.word	hal_spi_0_irq
 2748 0194 00000000 		.word	hal_spi_1_irq
 2749 0198 00000000 		.word	vic_register_irq
 2750 019c 00000000 		.word	.LANCHOR0
 2751              		.cfi_endproc
 2752              	.LFE18:
 2754              		.section	.text.hal_spi_interrupt_deinit,"ax",%progbits
 2755              		.align	1
 2756              		.global	hal_spi_interrupt_deinit
 2757              		.thumb
 2758              		.thumb_func
 2760              	hal_spi_interrupt_deinit:
 2761              	.LFB19:
1124:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 2762              		.loc 1 1124 0
 2763              		.cfi_startproc
 2764              		@ args = 0, pretend = 0, frame = 0
 2765              		@ frame_needed = 0, uses_anonymous_args = 0
 2766              	.LVL276:
1126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2767              		.loc 1 1126 0
 2768 0000 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 2769 0002 082B     		cmp	r3, #8
1124:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 2770              		.loc 1 1124 0
 2771 0004 10B5     		push	{r4, lr}
 2772              	.LCFI21:
 2773              		.cfi_def_cfa_offset 8
 2774              		.cfi_offset 4, -8
 2775              		.cfi_offset 14, -4
1124:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	/* check parameters */
 2776              		.loc 1 1124 0
 2777 0006 0446     		mov	r4, r0
1126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2778              		.loc 1 1126 0
 2779 0008 08D0     		beq	.L379
1126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2780              		.loc 1 1126 0 is_stmt 0 discriminator 1
 2781 000a 102B     		cmp	r3, #16
 2782 000c 06D0     		beq	.L379
1126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2783              		.loc 1 1126 0 discriminator 2
 2784 000e 202B     		cmp	r3, #32
 2785 0010 04D0     		beq	.L379
1126:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_PHASE_MODE(spi->spi_mode));
 2786              		.loc 1 1126 0 discriminator 3
 2787 0012 2748     		ldr	r0, .L399
 2788              	.LVL277:
 2789 0014 40F26641 		movw	r1, #1126
 2790 0018 264B     		ldr	r3, .L399+4
 2791 001a 9847     		blx	r3
 2792              	.LVL278:
 2793              	.L379:
1127:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
 2794              		.loc 1 1127 0 is_stmt 1
 2795 001c E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 2796 001e 032B     		cmp	r3, #3
 2797 0020 04D9     		bls	.L380
1127:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TRANSFER_MODE(spi->transfer_mode));
 2798              		.loc 1 1127 0 is_stmt 0 discriminator 1
 2799 0022 2348     		ldr	r0, .L399
 2800 0024 40F26741 		movw	r1, #1127
 2801 0028 224B     		ldr	r3, .L399+4
 2802 002a 9847     		blx	r3
 2803              	.LVL279:
 2804              	.L380:
1128:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 2805              		.loc 1 1128 0 is_stmt 1
 2806 002c 6379     		ldrb	r3, [r4, #5]	@ zero_extendqisi2
 2807 002e 032B     		cmp	r3, #3
 2808 0030 04D9     		bls	.L381
1128:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SPI_TYPE(spi->spi_type));
 2809              		.loc 1 1128 0 is_stmt 0 discriminator 1
 2810 0032 1F48     		ldr	r0, .L399
 2811 0034 4FF48D61 		mov	r1, #1128
 2812 0038 1E4B     		ldr	r3, .L399+4
 2813 003a 9847     		blx	r3
 2814              	.LVL280:
 2815              	.L381:
1129:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 2816              		.loc 1 1129 0 is_stmt 1
 2817 003c A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 2818 003e 022B     		cmp	r3, #2
 2819 0040 04D9     		bls	.L382
1129:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_MODE(spi->ssi_mode));
 2820              		.loc 1 1129 0 is_stmt 0 discriminator 1
 2821 0042 1B48     		ldr	r0, .L399
 2822 0044 40F26941 		movw	r1, #1129
 2823 0048 1A4B     		ldr	r3, .L399+4
 2824 004a 9847     		blx	r3
 2825              	.LVL281:
 2826              	.L382:
1130:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 2827              		.loc 1 1130 0 is_stmt 1
 2828 004c 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 2829 004e 022B     		cmp	r3, #2
 2830 0050 04D9     		bls	.L383
1130:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	assert_param(IS_SSI_CHANNEL(spi->channel));
 2831              		.loc 1 1130 0 is_stmt 0 discriminator 1
 2832 0052 1748     		ldr	r0, .L399
 2833 0054 40F26A41 		movw	r1, #1130
 2834 0058 164B     		ldr	r3, .L399+4
 2835 005a 9847     		blx	r3
 2836              	.LVL282:
 2837              	.L383:
1131:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2838              		.loc 1 1131 0 is_stmt 1
 2839 005c 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 2840 005e 022B     		cmp	r3, #2
 2841 0060 04D9     		bls	.L384
1131:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2842              		.loc 1 1131 0 is_stmt 0 discriminator 1
 2843 0062 1348     		ldr	r0, .L399
 2844 0064 40F26B41 		movw	r1, #1131
 2845 0068 124B     		ldr	r3, .L399+4
 2846 006a 9847     		blx	r3
 2847              	.LVL283:
 2848              	.L384:
1134:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->TXFTLR = 0;
 2849              		.loc 1 1134 0 is_stmt 1
 2850 006c 124A     		ldr	r2, .L399+8
1138:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_full_handler = NULL;
 2851              		.loc 1 1138 0
 2852 006e 1821     		movs	r1, #24
1134:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->TXFTLR = 0;
 2853              		.loc 1 1134 0
 2854 0070 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 2855 0072 0020     		movs	r0, #0
1138:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_full_handler = NULL;
 2856              		.loc 1 1138 0
 2857 0074 5943     		muls	r1, r3, r1
1134:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->TXFTLR = 0;
 2858              		.loc 1 1134 0
 2859 0076 52F82320 		ldr	r2, [r2, r3, lsl #2]
1145:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 2860              		.loc 1 1145 0
 2861 007a 012B     		cmp	r3, #1
1138:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_full_handler = NULL;
 2862              		.loc 1 1138 0
 2863 007c 0F4C     		ldr	r4, .L399+12
 2864              	.LVL284:
1134:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->TXFTLR = 0;
 2865              		.loc 1 1134 0
 2866 007e D062     		str	r0, [r2, #44]
1135:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_hw[spi->channel].spix->RXFTLR = 0;
 2867              		.loc 1 1135 0
 2868 0080 9061     		str	r0, [r2, #24]
1136:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt_enable[spi->channel] = DISABLE;
 2869              		.loc 1 1136 0
 2870 0082 D061     		str	r0, [r2, #28]
1137:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].multi_master_handler = NULL;
 2871              		.loc 1 1137 0
 2872 0084 0E4A     		ldr	r2, .L399+16
 2873 0086 D054     		strb	r0, [r2, r3]
1138:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_full_handler = NULL;
 2874              		.loc 1 1138 0
 2875 0088 04EB0102 		add	r2, r4, r1
 2876 008c 6050     		str	r0, [r4, r1]
1139:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_overflow_handler = NULL;
 2877              		.loc 1 1139 0
 2878 008e 5060     		str	r0, [r2, #4]
1140:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].rx_fifo_underflow_handler = NULL;
 2879              		.loc 1 1140 0
 2880 0090 9060     		str	r0, [r2, #8]
1141:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].tx_fifo_empty_handler = NULL;
 2881              		.loc 1 1141 0
 2882 0092 D060     		str	r0, [r2, #12]
1142:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	spi_interrupt[spi->channel].tx_fifo_overflow_handler = NULL;
 2883              		.loc 1 1142 0
 2884 0094 5061     		str	r0, [r2, #20]
1143:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 
 2885              		.loc 1 1143 0
 2886 0096 1061     		str	r0, [r2, #16]
1145:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 	{
 2887              		.loc 1 1145 0
 2888 0098 03D0     		beq	.L386
 2889 009a 05D3     		bcc	.L398
 2890 009c 022B     		cmp	r3, #2
 2891 009e 02D0     		beq	.L388
 2892 00a0 10BD     		pop	{r4, pc}
 2893              	.L386:
1151:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 2894              		.loc 1 1151 0
 2895 00a2 0820     		movs	r0, #8
 2896 00a4 00E0     		b	.L398
 2897              	.L388:
1154:/home/tienluong/workspace/atlantis_fw/platform/asic/hal/src/hal_spi.c **** 			break;
 2898              		.loc 1 1154 0
 2899 00a6 0720     		movs	r0, #7
 2900              	.L398:
 2901 00a8 064B     		ldr	r3, .L399+20
 2902 00aa 9847     		blx	r3
 2903              	.LVL285:
 2904 00ac 10BD     		pop	{r4, pc}
 2905              	.L400:
 2906 00ae 00BF     		.align	2
 2907              	.L399:
 2908 00b0 00000000 		.word	.LANCHOR15
 2909 00b4 00000000 		.word	assert_failed
 2910 00b8 00000000 		.word	.LANCHOR0
 2911 00bc 00000000 		.word	.LANCHOR1
 2912 00c0 00000000 		.word	.LANCHOR14
 2913 00c4 00000000 		.word	vic_unregister_irq
 2914              		.cfi_endproc
 2915              	.LFE19:
 2917              		.global	spi_interrupt_enable
 2918              		.global	spi_interrupt
 2919              		.global	spi_hw
 2920              		.section	.rodata.__FUNCTION__.6620,"a",%progbits
 2921              		.set	.LANCHOR5,. + 0
 2924              	__FUNCTION__.6620:
 2925 0000 68616C5F 		.ascii	"hal_spi_reset\000"
 2925      7370695F 
 2925      72657365 
 2925      7400
 2926              		.section	.rodata.__FUNCTION__.6792,"a",%progbits
 2927              		.set	.LANCHOR6,. + 0
 2930              	__FUNCTION__.6792:
 2931 0000 68616C5F 		.ascii	"hal_spi_dma_init\000"
 2931      7370695F 
 2931      646D615F 
 2931      696E6974 
 2931      00
 2932              		.section	.rodata.__FUNCTION__.6692,"a",%progbits
 2933              		.set	.LANCHOR10,. + 0
 2936              	__FUNCTION__.6692:
 2937 0000 68616C5F 		.ascii	"hal_spi_transmit_buf_normal\000"
 2937      7370695F 
 2937      7472616E 
 2937      736D6974 
 2937      5F627566 
 2938              		.section	.bss.spi_interrupt,"aw",%nobits
 2939              		.align	2
 2940              		.set	.LANCHOR1,. + 0
 2943              	spi_interrupt:
 2944 0000 00000000 		.space	72
 2944      00000000 
 2944      00000000 
 2944      00000000 
 2944      00000000 
 2945              		.section	.rodata.__FUNCTION__.6628,"a",%progbits
 2946              		.set	.LANCHOR7,. + 0
 2949              	__FUNCTION__.6628:
 2950 0000 68616C5F 		.ascii	"hal_spi_receive_buf_dma\000"
 2950      7370695F 
 2950      72656365 
 2950      6976655F 
 2950      6275665F 
 2951              		.section	.bss.spi_interrupt_enable,"aw",%nobits
 2952              		.set	.LANCHOR14,. + 0
 2955              	spi_interrupt_enable:
 2956 0000 000000   		.space	3
 2957              		.section	.rodata.__FUNCTION__.6592,"a",%progbits
 2958              		.set	.LANCHOR2,. + 0
 2961              	__FUNCTION__.6592:
 2962 0000 68616C5F 		.ascii	"hal_spi_init\000"
 2962      7370695F 
 2962      696E6974 
 2962      00
 2963              		.section	.rodata.__FUNCTION__.6798,"a",%progbits
 2964              		.set	.LANCHOR13,. + 0
 2967              	__FUNCTION__.6798:
 2968 0000 68616C5F 		.ascii	"hal_spi_interrupt_init\000"
 2968      7370695F 
 2968      696E7465 
 2968      72727570 
 2968      745F696E 
 2969              		.section	.rodata.__FUNCTION__.6807,"a",%progbits
 2970              		.set	.LANCHOR15,. + 0
 2973              	__FUNCTION__.6807:
 2974 0000 68616C5F 		.ascii	"hal_spi_interrupt_deinit\000"
 2974      7370695F 
 2974      696E7465 
 2974      72727570 
 2974      745F6465 
 2975              		.section	.rodata.__FUNCTION__.6759,"a",%progbits
 2976              		.set	.LANCHOR12,. + 0
 2979              	__FUNCTION__.6759:
 2980 0000 68616C5F 		.ascii	"hal_spi_transceiver_normal\000"
 2980      7370695F 
 2980      7472616E 
 2980      73636569 
 2980      7665725F 
 2981              		.section	.rodata.__FUNCTION__.6649,"a",%progbits
 2982              		.set	.LANCHOR8,. + 0
 2985              	__FUNCTION__.6649:
 2986 0000 68616C5F 		.ascii	"hal_spi_receive_buf_normal\000"
 2986      7370695F 
 2986      72656365 
 2986      6976655F 
 2986      6275665F 
 2987              		.section	.rodata.__FUNCTION__.6671,"a",%progbits
 2988              		.set	.LANCHOR9,. + 0
 2991              	__FUNCTION__.6671:
 2992 0000 68616C5F 		.ascii	"hal_spi_transmit_buf_dma\000"
 2992      7370695F 
 2992      7472616E 
 2992      736D6974 
 2992      5F627566 
 2993              		.section	.rodata.__FUNCTION__.6612,"a",%progbits
 2994              		.set	.LANCHOR3,. + 0
 2997              	__FUNCTION__.6612:
 2998 0000 68616C5F 		.ascii	"hal_spi_disable\000"
 2998      7370695F 
 2998      64697361 
 2998      626C6500 
 2999              		.section	.rodata.__FUNCTION__.6725,"a",%progbits
 3000              		.set	.LANCHOR11,. + 0
 3003              	__FUNCTION__.6725:
 3004 0000 68616C5F 		.ascii	"hal_spi_transceiver_dma\000"
 3004      7370695F 
 3004      7472616E 
 3004      73636569 
 3004      7665725F 
 3005              		.section	.data.spi_hw,"aw",%progbits
 3006              		.align	2
 3007              		.set	.LANCHOR0,. + 0
 3010              	spi_hw:
 3011 0000 00C00102 		.word	33669120
 3012 0004 00D00102 		.word	33673216
 3013 0008 00E00102 		.word	33677312
 3014              		.section	.rodata.__FUNCTION__.6616,"a",%progbits
 3015              		.set	.LANCHOR4,. + 0
 3018              	__FUNCTION__.6616:
 3019 0000 68616C5F 		.ascii	"hal_spi_enable\000"
 3019      7370695F 
 3019      656E6162 
 3019      6C6500
 3020              		.text
 3021              	.Letext0:
 3022              		.file 2 "/opt/toolchains/gcc-arm-none-eabi-4_9-2015q1/arm-none-eabi/include/machine/_default_types
 3023              		.file 3 "/opt/toolchains/gcc-arm-none-eabi-4_9-2015q1/arm-none-eabi/include/stdint.h"
 3024              		.file 4 "/home/tienluong/workspace/atlantis_fw/platform/os/Source/portable/GCC/cortex-r4/portmacro
 3025              		.file 5 "/home/tienluong/workspace/atlantis_fw/platform/asic/hal/include/hal_vic.h"
 3026              		.file 6 "/home/tienluong/workspace/atlantis_fw/platform/asic/hal/include/hal_dma.h"
 3027              		.file 7 "/home/tienluong/workspace/atlantis_fw/platform/asic/hal/include/hal_spi.h"
DEFINED SYMBOLS
                            *ABS*:00000000 hal_spi.c
     /tmp/cc59IWBW.s:19     .text.hal_spi_irq_handler:00000000 $t
     /tmp/cc59IWBW.s:23     .text.hal_spi_irq_handler:00000000 hal_spi_irq_handler
     /tmp/cc59IWBW.s:151    .text.hal_spi_irq_handler:000000a4 $d
     /tmp/cc59IWBW.s:157    .text.hal_spi_2_irq:00000000 $t
     /tmp/cc59IWBW.s:161    .text.hal_spi_2_irq:00000000 hal_spi_2_irq
     /tmp/cc59IWBW.s:181    .text.hal_spi_2_irq:0000000c $d
     /tmp/cc59IWBW.s:186    .text.hal_spi_1_irq:00000000 $t
     /tmp/cc59IWBW.s:190    .text.hal_spi_1_irq:00000000 hal_spi_1_irq
     /tmp/cc59IWBW.s:210    .text.hal_spi_1_irq:0000000c $d
     /tmp/cc59IWBW.s:215    .text.hal_spi_0_irq:00000000 $t
     /tmp/cc59IWBW.s:219    .text.hal_spi_0_irq:00000000 hal_spi_0_irq
     /tmp/cc59IWBW.s:239    .text.hal_spi_0_irq:0000000c $d
     /tmp/cc59IWBW.s:244    .text.hal_spi_init:00000000 $t
     /tmp/cc59IWBW.s:249    .text.hal_spi_init:00000000 hal_spi_init
     /tmp/cc59IWBW.s:407    .text.hal_spi_init:000000ba $d
     /tmp/cc59IWBW.s:411    .text.hal_spi_init:000000be $t
     /tmp/cc59IWBW.s:484    .text.hal_spi_init:00000104 $d
     /tmp/cc59IWBW.s:493    .text.hal_spi_slave_select:00000000 $t
     /tmp/cc59IWBW.s:498    .text.hal_spi_slave_select:00000000 hal_spi_slave_select
     /tmp/cc59IWBW.s:562    .text.hal_spi_slave_select:00000034 $d
     /tmp/cc59IWBW.s:567    .text.hal_spi_disable:00000000 $t
     /tmp/cc59IWBW.s:572    .text.hal_spi_disable:00000000 hal_spi_disable
     /tmp/cc59IWBW.s:611    .text.hal_spi_disable:00000024 $d
     /tmp/cc59IWBW.s:618    .text.hal_spi_enable:00000000 $t
     /tmp/cc59IWBW.s:623    .text.hal_spi_enable:00000000 hal_spi_enable
     /tmp/cc59IWBW.s:662    .text.hal_spi_enable:00000024 $d
     /tmp/cc59IWBW.s:669    .text.hal_spi_reset:00000000 $t
     /tmp/cc59IWBW.s:674    .text.hal_spi_reset:00000000 hal_spi_reset
     /tmp/cc59IWBW.s:729    .text.hal_spi_reset:00000030 $d
     /tmp/cc59IWBW.s:736    .text.hal_spi_dma_init:00000000 $t
     /tmp/cc59IWBW.s:741    .text.hal_spi_dma_init:00000000 hal_spi_dma_init
     /tmp/cc59IWBW.s:878    .text.hal_spi_dma_init:000000ac $d
     /tmp/cc59IWBW.s:885    .text.hal_spi_receive_buf:00000000 $t
     /tmp/cc59IWBW.s:890    .text.hal_spi_receive_buf:00000000 hal_spi_receive_buf
     /tmp/cc59IWBW.s:1246   .text.hal_spi_receive_buf:000001b4 $d
     /tmp/cc59IWBW.s:1263   .text.hal_spi_transmit_buf:00000000 $t
     /tmp/cc59IWBW.s:1268   .text.hal_spi_transmit_buf:00000000 hal_spi_transmit_buf
     /tmp/cc59IWBW.s:1640   .text.hal_spi_transmit_buf:000001ac $d
     /tmp/cc59IWBW.s:1658   .text.hal_spi_transceiver:00000000 $t
     /tmp/cc59IWBW.s:1663   .text.hal_spi_transceiver:00000000 hal_spi_transceiver
     /tmp/cc59IWBW.s:2092   .text.hal_spi_transceiver:0000023c $d
     /tmp/cc59IWBW.s:2111   .text.hal_spi_transceiver:0000026c $t
     /tmp/cc59IWBW.s:2449   .text.hal_spi_transceiver:00000400 $d
     /tmp/cc59IWBW.s:2456   .text.hal_spi_interrupt_init:00000000 $t
     /tmp/cc59IWBW.s:2461   .text.hal_spi_interrupt_init:00000000 hal_spi_interrupt_init
     /tmp/cc59IWBW.s:2742   .text.hal_spi_interrupt_init:0000017c $d
     /tmp/cc59IWBW.s:2755   .text.hal_spi_interrupt_deinit:00000000 $t
     /tmp/cc59IWBW.s:2760   .text.hal_spi_interrupt_deinit:00000000 hal_spi_interrupt_deinit
     /tmp/cc59IWBW.s:2908   .text.hal_spi_interrupt_deinit:000000b0 $d
     /tmp/cc59IWBW.s:2955   .bss.spi_interrupt_enable:00000000 spi_interrupt_enable
     /tmp/cc59IWBW.s:2943   .bss.spi_interrupt:00000000 spi_interrupt
     /tmp/cc59IWBW.s:3010   .data.spi_hw:00000000 spi_hw
     /tmp/cc59IWBW.s:2924   .rodata.__FUNCTION__.6620:00000000 __FUNCTION__.6620
     /tmp/cc59IWBW.s:2930   .rodata.__FUNCTION__.6792:00000000 __FUNCTION__.6792
     /tmp/cc59IWBW.s:2936   .rodata.__FUNCTION__.6692:00000000 __FUNCTION__.6692
     /tmp/cc59IWBW.s:2939   .bss.spi_interrupt:00000000 $d
     /tmp/cc59IWBW.s:2949   .rodata.__FUNCTION__.6628:00000000 __FUNCTION__.6628
     /tmp/cc59IWBW.s:2956   .bss.spi_interrupt_enable:00000000 $d
     /tmp/cc59IWBW.s:2961   .rodata.__FUNCTION__.6592:00000000 __FUNCTION__.6592
     /tmp/cc59IWBW.s:2967   .rodata.__FUNCTION__.6798:00000000 __FUNCTION__.6798
     /tmp/cc59IWBW.s:2973   .rodata.__FUNCTION__.6807:00000000 __FUNCTION__.6807
     /tmp/cc59IWBW.s:2979   .rodata.__FUNCTION__.6759:00000000 __FUNCTION__.6759
     /tmp/cc59IWBW.s:2985   .rodata.__FUNCTION__.6649:00000000 __FUNCTION__.6649
     /tmp/cc59IWBW.s:2991   .rodata.__FUNCTION__.6671:00000000 __FUNCTION__.6671
     /tmp/cc59IWBW.s:2997   .rodata.__FUNCTION__.6612:00000000 __FUNCTION__.6612
     /tmp/cc59IWBW.s:3003   .rodata.__FUNCTION__.6725:00000000 __FUNCTION__.6725
     /tmp/cc59IWBW.s:3006   .data.spi_hw:00000000 $d
     /tmp/cc59IWBW.s:3018   .rodata.__FUNCTION__.6616:00000000 __FUNCTION__.6616
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
assert_failed
memset
hal_dma_enable_global_interrupt
hal_dma_init
flush_cache
hal_dma_channel_enable
hal_dma_deinit
vic_register_irq
vic_unregister_irq
