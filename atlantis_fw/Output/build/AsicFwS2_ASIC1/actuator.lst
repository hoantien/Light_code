   1              		.syntax unified
   2              		.cpu cortex-r4
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 4
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"actuator.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.text.print_calib_info,"ax",%progbits
  19              		.align	1
  20              		.thumb
  21              		.thumb_func
  23              	print_calib_info:
  24              	.LFB16:
  25              		.file 1 "/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c"
   1:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /*******************************************************************************
   2:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * Copyright (c) 2016, The LightCo
   3:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * All rights reserved.
   4:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * Redistribution and use in source and binary forms, with or without
   5:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * modification, are strictly prohibited without prior permission
   6:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * of The LightCo.
   7:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  *
   8:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @file    actuator.c
   9:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @author  The LightCo
  10:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @version V1.0.0
  11:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @date    Jul-08-2016
  12:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @brief   This file contains actuator piezoelectric control source code
  13:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  *
  14:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  ******************************************************************************/
  15:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /* Includes ------------------------------------------------------------------*/
  16:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #include <stdarg.h>
  17:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #include <string.h>
  18:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #include <stdbool.h>
  19:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #include "std_type.h"
  20:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #include "os.h"
  21:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #include "log.h"
  22:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #include "actuator.h"
  23:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #include "i2cm.h"
  24:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #include "eeprom.h"
  25:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #include "assert.h"
  26:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #include "timer.h"
  27:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #include "af_lens_calib.h"
  28:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #include "flash.h"
  29:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
  30:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /* Private define ------------------------------------------------------------*/
  31:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
  32:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define SLOGF_ID						SLOG_ID_ACTUATOR_LOG
  33:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
  34:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define ACTUATOR_LENS_HARD_STOP_BUFFER      0x50
  35:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define ACTUATOR_MIRROR_HARD_STOP_BUFFER    0x30
  36:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
  37:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define FINE_CONTROL_THRESHOLD			10
  38:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define MAX_CONTROL_LOOP_TICKS		    250
  39:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define PIEZO_INERTIA_DELTA_MOVE        8
  40:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define NUDGE_FINE_DELAY_PERIOD			32
  41:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define MIN_PIEZO_LOOP_WEIGHT           0.5f
  42:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define MAX_PIEZO_LOOP_WEIGHT           50.0f
  43:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define PIEZO_TOLERANCE_MIN             2
  44:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define PIEZO_MIN_EXTRA_PULSES          -20
  45:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define PIEZO_MAX_EXTRA_PULSES          40
  46:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define PIEZO_PWM_FREQ_MIN              90000
  47:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define PIEZO_PWM_FREQ_MAX              155000
  48:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
  49:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define ACTUATOR_DUTY_MOVE_LENS			30
  50:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define ACTUATOR_DUTY_MOVE_MIRR			30
  51:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define ACTUATOR_DUTY_LOW				30
  52:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define ACTUATOR_DUTY_HIGH				30
  53:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define ACTUATOR_DUTY_NUDGE				16
  54:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
  55:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define ACTUATOR_MIN_STROKE				100
  56:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define ACTUATOR_MIN_STEP				3
  57:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
  58:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define EEPROM_AF_LENS_OFFSET			0x0023
  59:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define EEPROM_AF_MIRR_OFFSET			0x0017
  60:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define EEPROM_AF_LENS_FREQ_REG			0xAF
  61:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define EEPROM_AF_MIRR_BACKUP_OFFSET	0x002C
  62:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define EEPROM_AF_MIRR_VALID_VALUE		0xDB
  63:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
  64:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define FLASH_SUB_SECTOR_SIZE			0x00001000
  65:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define FLASH_CALIB_SUB_SECTOR			0x0150
  66:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define FLASH_CALIB_VERIFICATION		0xDEADBEEF
  67:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
  68:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define ACTUATOR_NUM_CALIB_POINTS		4
  69:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
  70:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define IS_ACTUATOR_TYPE(TYPE)			((TYPE == ACTUATOR_LENS) || \
  71:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 										(TYPE == ACTUATOR_MIRROR))
  72:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
  73:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define IS_ACTUATOR_DIR(DIR)			((DIR == ACTUATOR_DIR_RETRACT_NARROW) || \
  74:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 										(DIR == ACTUATOR_DIR_EXTEND_WIDE))
  75:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
  76:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #define IS_ACTUATOR_FREQ(FREQ)			((FREQ >= PIEZO_PWM_FREQ_MIN) && (FREQ <= PIEZO_PWM_FREQ_MAX))
  77:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
  78:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /* Private typedef -----------------------------------------------------------*/
  79:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /*
  80:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @brief actuator_data_valid_t
  81:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  *
  82:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * PIEZO EEPROM calibration data validation type
  83:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  */
  84:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** typedef enum
  85:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
  86:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	ACTUATOR_DATA_OK				= 0,
  87:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	ACTUATOR_INVALID_FREQ			= 1 << 0,
  88:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	ACTUATOR_INVALID_POLARITY		= 1 << 1,
  89:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	ACTUATOR_INVALID_SENSITIVITY	= 1 << 2,
  90:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	ACTUATOR_INVALID_HARD_STOP		= 1 << 3,
  91:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	ACTUATOR_NO_DATA				= 1 << 4
  92:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** } data_valid_t;
  93:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
  94:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /*
  95:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @brief eeprom_af_lens_reg_t
  96:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  *
  97:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * EEPROM AF lens registers structure
  98:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  */
  99:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** typedef struct
 100:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
 101:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		POSITION_MACRO_H;
 102:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		POSITION_MACRO_L;
 103:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		POSITION_1M_H;
 104:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		POSITION_1M_L;
 105:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		POSITION_2M_H;
 106:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		POSITION_2M_L;
 107:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		POSITION_INFINITY_H;
 108:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		POSITION_INFINITY_L;
 109:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		Reserved[16];
 110:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		HARD_STOP_MACRO_H;
 111:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		HARD_STOP_MACRO_L;
 112:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		HARD_STOP_INFINITY_H;
 113:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		HARD_STOP_INFINITY_L;
 114:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		HOME_POSITION_H;
 115:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		HOME_POSITION_L;
 116:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		FULL_STROKE_H;
 117:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		FULL_STROKE_L;
 118:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		TEMPERATURE;
 119:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		POLARITY;
 120:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		SENSITIVITY;
 121:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** } eeprom_af_lens_reg_t;
 122:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 123:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /*
 124:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @brief eeprom_af_mirr_reg_t
 125:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  *
 126:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * EEPROM AF mirror registers structure
 127:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  */
 128:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** typedef struct
 129:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
 130:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		HARD_STOP_MACRO_H;
 131:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		HARD_STOP_MACRO_L;
 132:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		HARD_STOP_INFINITY_H;
 133:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		HARD_STOP_INFINITY_L;
 134:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		POSITION_45DEGREE_H;
 135:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		POSITION_45DEGREE_L;
 136:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		POLARITY;
 137:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		SENSITIVITY;
 138:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		Reserved[39];
 139:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	__I uint8_t		FREQUENCY;
 140:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** } eeprom_af_mirr_reg_t;
 141:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 142:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /*
 143:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @brief lens_calib_data_t
 144:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  *
 145:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * Lens calibration data structure
 146:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  */
 147:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** typedef struct
 148:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
 149:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	uint32_t	pwm_freq;
 150:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	af_calib_point_t  af_calib_points[ACTUATOR_NUM_CALIB_POINTS];
 151:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	af_calib_t  af_calib;
 152:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	uint16_t	hard_stop[2];
 153:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	uint8_t		polarity;
 154:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	uint8_t		sensitivity;
 155:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** } lens_calib_data_t;
 156:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 157:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /*
 158:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @brief mirr_calib_data_t
 159:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  *
 160:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * Mirror calibration data structure
 161:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  */
 162:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** typedef struct
 163:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
 164:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	uint32_t	verification;
 165:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	uint32_t	pwm_freq;
 166:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	uint16_t	position_45d;
 167:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	uint16_t	hard_stop[2];
 168:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	uint8_t		polarity;
 169:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	uint8_t		sensitivity;
 170:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** } mirr_calib_data_t;
 171:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 172:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /* Private function prototype ------------------------------------------------*/
 173:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** static actuator_return_t read_eeprom(actuator_t *piezo,
 174:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 										data_valid_t *data_valid);
 175:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** static void log_piezo_msg(actuator_t *piezo, uint8_t header,
 176:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							const char *format, ...);
 177:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** static data_valid_t check_calib_info_validation(actuator_t *piezo);
 178:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** static void print_calib_info(actuator_t *piezo);
 179:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** static uint16_t convert_to_position(lens_calib_data_t *calib_data,
 180:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									uint32_t distance);
 181:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** //static hall_return_t move_to_end(actuator_t *piezo, actuator_dir_t direction);
 182:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** static actuator_return_t actuator_calibrate_hard_stop(actuator_t *piezo,
 183:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 											uint16_t target_position);
 184:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** static inline uint8_t get_derived_pwm_duty(uint8_t duty_cycle,
 185:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 											actuator_dir_t direction);
 186:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** static void pwm_pattern_callback(void *cb_param);
 187:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** static actuator_return_t actuator_do_move_to_position(actuator_t *piezo,
 188:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                                             uint16_t *target_position,
 189:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                                             uint16_t tolerance,
 190:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                                             bool is_hard_stop_calibration);
 191:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 192:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /* Private variable ----------------------------------------------------------*/
 193:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /* Exported function ---------------------------------------------------------*/
 194:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /*
 195:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @brief actuator_init
 196:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * Initializes independent piezo module
 197:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  */
 198:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** actuator_return_t actuator_init(actuator_t *piezo)
 199:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
 200:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	actuator_return_t piezo_ret = ACTUATOR_OK;
 201:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	hall_return_t	hall_ret = HALL_OK;
 202:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 203:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	/* assert parameters */
 204:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	assert_param(piezo != NULL);
 205:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	assert_param(IS_ACTUATOR_TYPE(piezo->type));
 206:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 207:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	/* Do nothing if the actuator has already been initialized */
 208:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if (piezo->is_initialized == FALSE)
 209:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 210:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		data_valid_t data_valid;
 211:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 212:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		/* initialize I2C channels */
 213:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		i2cm.init(piezo->hall_i2c);
 214:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		i2cm.init(piezo->eeprom_i2c);
 215:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 216:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		/* assign hall object */
 217:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo->hall_obj = (piezo->type == ACTUATOR_LENS) ? &a1457 : &as5510;
 218:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		/* reset the calibration status */
 219:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo->is_calibrated = FALSE;
 220:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		/* update the initialization status */
 221:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo->is_initialized = TRUE;
 222:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		for (size_t i = 0; i < ACTUATOR_NUM_DIR; ++i)
 223:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		{
 224:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             piezo->piezo_param.per_dir_param[i].weight_coarse = (piezo->type == ACTUATOR_LENS) ? 4.
 225:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             piezo->piezo_param.per_dir_param[i].extra_num_pulses = 5;
 226:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		}
 227:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		/* allocate memory for storing calibration data */
 228:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo->af_calib = assert_malloc(piezo->af_calib,
 229:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							(piezo->type == ACTUATOR_LENS) ?
 230:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							sizeof(lens_calib_data_t) :
 231:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							sizeof(mirr_calib_data_t));
 232:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		if (piezo->type == ACTUATOR_LENS)
 233:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		{
 234:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			/* read preset calibration data from EEPROM */
 235:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			piezo_ret = read_eeprom(piezo, &data_valid);
 236:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			if (piezo_ret == ACTUATOR_OK)
 237:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 238:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* if the preset calibration data are invalid */
 239:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				if (data_valid != ACTUATOR_DATA_OK)
 240:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 241:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					/* if lens frequency is invalid */
 242:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					if ((data_valid & ACTUATOR_INVALID_FREQ) ==
 243:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							ACTUATOR_INVALID_FREQ)
 244:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					{
 245:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						/* hard code lens frequency */
 246:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((lens_calib_data_t *)piezo->af_calib)->pwm_freq =
 247:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 												128000;
 248:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						/* clear this error flag from data_valid */
 249:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						data_valid &= ~ACTUATOR_INVALID_FREQ;
 250:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					}
 251:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				}
 252:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* if there are no other invalidations */
 253:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				if (data_valid != ACTUATOR_DATA_OK)
 254:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					piezo_ret = ACTUATOR_EEPROM_INVALID_DATA;
 255:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			}
 256:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 257:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			if (piezo_ret == ACTUATOR_OK)
 258:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 259:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* set the sensitivity level and polarity of magnet */
 260:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hall_ret = piezo->hall_obj->init(piezo->hall_i2c,
 261:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((lens_calib_data_t *)piezo->af_calib)->polarity);
 262:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hall_ret |= piezo->hall_obj->set_sensitivity(piezo->hall_i2c,
 263:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((lens_calib_data_t *)piezo->af_calib)->sensitivity);
 264:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 265:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				if (hall_ret == HALL_OK)
 266:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					piezo->is_calibrated = TRUE;
 267:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				else
 268:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					piezo_ret = ACTUATOR_HALL_TIMED_OUT;
 269:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			}
 270:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		}
 271:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		else
 272:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		{
 273:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #ifndef ALWAYS_CALIB_MIRROR
 274:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			/* read preset calibration data from EEPROM */
 275:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			piezo_ret = read_eeprom(piezo, &data_valid);
 276:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			if (piezo_ret == ACTUATOR_OK && data_valid == ACTUATOR_DATA_OK)
 277:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 278:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* Initialize the mirror */
 279:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hall_ret = piezo->hall_obj->init(piezo->hall_i2c,
 280:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((mirr_calib_data_t *)piezo->af_calib)->polarity);
 281:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hall_ret |= piezo->hall_obj->set_sensitivity(piezo->hall_i2c,
 282:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((mirr_calib_data_t *)piezo->af_calib)->sensitivity);
 283:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 284:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				if (hall_ret == HALL_OK)
 285:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					piezo->is_calibrated = TRUE;
 286:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				else
 287:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					piezo_ret = ACTUATOR_HALL_TIMED_OUT;
 288:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			}
 289:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			else
 290:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 291:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* read calibration data from FLASH */
 292:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				log_piezo_msg(piezo, SLOG_DEBUG, "Prepare to read from FLASH");
 293:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				flash_read((FLASH_CALIB_SUB_SECTOR + piezo->cam_info.idx - 1) *
 294:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						FLASH_SUB_SECTOR_SIZE,
 295:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						sizeof(mirr_calib_data_t), piezo->af_calib, QSPI_MODE);
 296:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 297:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				if (((mirr_calib_data_t *)piezo->af_calib)->verification
 298:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						== FLASH_CALIB_VERIFICATION)
 299:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 300:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					/* print the calibration info from FLASH */
 301:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					log_piezo_msg(piezo, SLOG_DEBUG,
 302:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							"Calibration info from FLASH:");
 303:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					print_calib_info(piezo);
 304:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 305:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					/* set the sensitivity level and polarity of magnet */
 306:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					hall_ret = piezo->hall_obj->init(piezo->hall_i2c,
 307:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((mirr_calib_data_t *)piezo->af_calib)->polarity);
 308:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					hall_ret |=
 309:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						piezo->hall_obj->set_sensitivity(piezo->hall_i2c,
 310:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((mirr_calib_data_t *)piezo->af_calib)->sensitivity);
 311:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 312:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					if (hall_ret == HALL_OK)
 313:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						piezo->is_calibrated = TRUE;
 314:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					else
 315:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						piezo_ret = ACTUATOR_HALL_TIMED_OUT;
 316:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				}
 317:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/*
 318:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				 * do calibration
 319:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				 * as the data are not valid in EEPROM and FLASH
 320:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				 */
 321:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				else
 322:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 323:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					log_piezo_msg(piezo, SLOG_DEBUG,
 324:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							"There is no calibration info from FLASH");
 325:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #endif
 326:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					log_piezo_msg(piezo, SLOG_DEBUG,
 327:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							"Prepare to calibrate actuator");
 328:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					/* calibrate mirror */
 329:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					piezo_ret = actuator_calibrate(piezo);
 330:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #ifndef ALWAYS_CALIB_MIRROR
 331:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				}
 332:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			}
 333:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #endif
 334:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		}
 335:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo->piezo_param.pwm_freq = (piezo->type == ACTUATOR_LENS) ?
 336:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 ((lens_calib_data_t *)piezo->af_calib)->pwm_freq :
 337:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 ((mirr_calib_data_t *)piezo->af_calib)->pwm_freq;
 338:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo->piezo_param.freq_search_step = 1;
 339:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         piezo->piezo_param.last_move_dir = ACTUATOR_NUM_DIR;
 340:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 341:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 342:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	return piezo_ret;
 343:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 344:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 345:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /*
 346:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @brief actuator_calibrate
 347:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * Calibrates independent piezo module
 348:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  */
 349:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** actuator_return_t actuator_calibrate(actuator_t *piezo)
 350:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
 351:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	actuator_return_t piezo_ret = ACTUATOR_OK;
 352:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 353:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	/* check parameter validation */
 354:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if (piezo == NULL)
 355:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_NULL_PTR;
 356:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else if (!IS_ACTUATOR_TYPE(piezo->type))
 357:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_INVALID_TYPE;
 358:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else if (piezo->cam_info.grp == GRP_A)
 359:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_UNSUPPORTED_CAM_GROUP;
 360:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else if (piezo->is_initialized == FALSE)
 361:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_UNINITIALIZED;
 362:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else
 363:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 364:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		if (piezo->type == ACTUATOR_LENS)
 365:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		{
 366:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			/* do nothing */
 367:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		}
 368:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		/* if (piezo->type == ACTUATOR_MIRROR) */
 369:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		else
 370:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		{
 371:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			mirr_calib_data_t	*calib_data = piezo->af_calib;
 372:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			hall_return_t	hall_ret = HALL_OK;
 373:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			hall_t		*hall_obj = piezo->hall_obj;
 374:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			i2c_t		i2c_chid = piezo->hall_i2c;
 375:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			uint16_t	near_positions[hall_obj->nbo_sensitivities];
 376:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			uint16_t	far_positions[hall_obj->nbo_sensitivities];
 377:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #if(LOG_VERBOSE == STD_ON)
 378:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			uint16_t	nearest_position = 0;
 379:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			uint16_t	farthest_position = 0;
 380:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #endif
 381:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			uint16_t	best_hall_stroke = ACTUATOR_MIN_STROKE;
 382:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			uint8_t		best_sensitivity = 0;
 383:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			bool		best_polarity_reversal = FALSE;
 384:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 385:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			if (!IS_ACTUATOR_FREQ(calib_data->pwm_freq))
 386:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 387:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* hard code mirror frequency */
 388:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				calib_data->pwm_freq = 135000;
 389:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			}
 390:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			/* reset the polarity */
 391:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			hall_ret = hall_obj->init(i2c_chid, FALSE);
 392:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			/* sensitivity hard coded to 1 */
 393:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			hall_ret = hall_obj->set_sensitivity(i2c_chid, 1);
 394:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 395:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			if (hall_ret == HALL_OK)
 396:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 397:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				piezo->piezo_param.pwm_freq = calib_data->pwm_freq;
 398:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* read hall sensor at the nearest position */
 399:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hall_ret = actuator_calibrate_hard_stop(piezo,0xFFFF);
 400:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hall_ret |= hall_obj->scan_sensitivities(i2c_chid,
 401:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 														near_positions);
 402:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* read hall sensor at the farthest position */
 403:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hall_ret |= actuator_calibrate_hard_stop(piezo,0x0000);
 404:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hall_ret |= hall_obj->scan_sensitivities(i2c_chid,
 405:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 														far_positions);
 406:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			}
 407:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 408:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			if (hall_ret == HALL_OK)
 409:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 410:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				uint16_t	near_position;
 411:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				uint16_t	far_position;
 412:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				uint16_t	hall_stroke;
 413:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				uint8_t		sensitivity;
 414:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				bool		polarity_reversal;
 415:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 416:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* invalidate best hall stroke */
 417:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				best_hall_stroke = 0;
 418:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/*
 419:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				 * analyze the data
 420:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				 * to select the best sensitivity & polarity
 421:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				 * for full-range operation
 422:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				 */
 423:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #ifdef MIRROR_HARD_CODE_SENSITIVITY
 424:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				sensitivity = 1;
 425:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #else
 426:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				for (sensitivity = 0;
 427:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						sensitivity < hall_obj->nbo_sensitivities;
 428:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						sensitivity++)
 429:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #endif
 430:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 431:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					near_position = near_positions[sensitivity];
 432:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					far_position = far_positions[sensitivity];
 433:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 434:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					if (near_position > far_position)
 435:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						polarity_reversal = FALSE;
 436:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					else
 437:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					{
 438:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						/* change polarity & invert data */
 439:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						polarity_reversal = TRUE;
 440:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						near_position = hall_obj->max_position - near_position;
 441:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						far_position = hall_obj->max_position - far_position;
 442:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					}
 443:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 444:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					hall_stroke = near_position - far_position;
 445:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 446:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					/*
 447:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					 * check to see that
 448:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					 * the stroke is neither too wide nor too narrow
 449:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					 */
 450:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #ifndef MIRROR_HARD_CODE_SENSITIVITY
 451:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					if ((far_position > 0) &&
 452:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						(near_position < hall_obj->max_position) &&
 453:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						(hall_stroke > best_hall_stroke))
 454:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #endif
 455:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					{
 456:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						best_hall_stroke = hall_stroke;
 457:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #if(LOG_VERBOSE == STD_ON)
 458:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						nearest_position = near_position;
 459:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						farthest_position = far_position;
 460:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #endif
 461:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						best_sensitivity = sensitivity;
 462:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						best_polarity_reversal = polarity_reversal;
 463:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					}
 464:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				}
 465:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			}
 466:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 467:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #if(LOG_VERBOSE == STD_ON)
 468:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			/* print calibration data */
 469:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			if (hall_ret == HALL_OK)
 470:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 471:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				log_piezo_msg(piezo, SLOG_DEBUG, "Calibration data:");
 472:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				SLOGF(SLOG_INFO, "Best hall polarity reversal: %d",
 473:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						best_polarity_reversal);
 474:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				SLOGF(SLOG_INFO, "Best hall sensitivity: %d",
 475:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						best_sensitivity);
 476:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				SLOGF((best_hall_stroke >= ACTUATOR_MIN_STROKE) ?
 477:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							SLOG_INFO : SLOG_ERROR,
 478:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							"Narrowest position: 0x%X", farthest_position);
 479:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				SLOGF((best_hall_stroke >= ACTUATOR_MIN_STROKE) ?
 480:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							SLOG_INFO : SLOG_ERROR,
 481:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							"Widest position: 0x%X", nearest_position);
 482:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			}
 483:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			else
 484:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				log_piezo_msg(piezo, SLOG_ERROR, "Hall access timed out");
 485:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #endif
 486:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			/* if the calibration was successful */
 487:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			if ((hall_ret == HALL_OK) &&
 488:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				(best_hall_stroke >= ACTUATOR_MIN_STROKE))
 489:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 490:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* store the calibration data to buffer */
 491:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				calib_data->hard_stop[0] = nearest_position;
 492:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				calib_data->hard_stop[1] = farthest_position;
 493:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				calib_data->polarity = best_polarity_reversal;
 494:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				calib_data->sensitivity = best_sensitivity;
 495:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				calib_data->verification = FLASH_CALIB_VERIFICATION;
 496:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* and write into the FLASH */
 497:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				flash_sub_sector_erase(FLASH_CALIB_SUB_SECTOR +
 498:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 											piezo->cam_info.idx - 1, 1);
 499:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				flash_write((FLASH_CALIB_SUB_SECTOR + piezo->cam_info.idx - 1) *
 500:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 								FLASH_SUB_SECTOR_SIZE,
 501:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					sizeof(mirr_calib_data_t), piezo->af_calib, QSPI_MODE);
 502:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				log_piezo_msg(piezo, SLOG_DEBUG,
 503:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 								"Wring to FLASH was successful");
 504:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* set the sensitivity level and polarity of magnet */
 505:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hall_ret = hall_obj->init(i2c_chid,
 506:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 											best_polarity_reversal);
 507:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hall_ret |= hall_obj->set_sensitivity(i2c_chid,
 508:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 											best_sensitivity);
 509:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			}
 510:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 511:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			piezo_ret = (hall_ret == HALL_OK) ?
 512:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							((best_hall_stroke >= ACTUATOR_MIN_STROKE) ?
 513:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 								ACTUATOR_OK : ACTUATOR_MOVE_TIMED_OUT) :
 514:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						ACTUATOR_HALL_TIMED_OUT;
 515:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		}
 516:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 517:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		/* update calibration status */
 518:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo->is_calibrated = (piezo_ret == ACTUATOR_OK) ? TRUE : FALSE;
 519:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 520:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 521:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #if(LOG_VERBOSE == STD_ON)
 522:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if (piezo_ret == ACTUATOR_OK)
 523:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_DEBUG, "Piezo calibration was successful");
 524:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else
 525:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_ERROR, "Piezo calibration was failed");
 526:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #endif
 527:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 528:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	return piezo_ret;
 529:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 530:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 531:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** actuator_return_t actuator_get_hard_stop_hall(actuator_t *piezo,
 532:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 											uint16_t *hall_min,
 533:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 											uint16_t *hall_max)
 534:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
 535:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if (NULL == piezo || hall_min == NULL || hall_max == NULL)
 536:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 537:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		SLOGF(SLOG_ERROR, "%s: Null pointer", __FUNCTION__);
 538:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		return ACTUATOR_NULL_PTR;
 539:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 540:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else if (!IS_ACTUATOR_TYPE(piezo->type))
 541:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 542:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_ERROR, "Invalid type");
 543:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		return ACTUATOR_INVALID_TYPE;
 544:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 545:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else if (piezo->is_initialized == FALSE)
 546:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 547:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_ERROR, "Uninitialized");
 548:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		return ACTUATOR_UNINITIALIZED;
 549:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 550:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else if (piezo->is_calibrated == FALSE)
 551:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 552:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_ERROR, "Not calibrated yet");
 553:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		return ACTUATOR_NOT_CALIBRATED;
 554:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 555:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 556:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if (piezo->type == ACTUATOR_LENS)
 557:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 558:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		*hall_min = (((lens_calib_data_t *)piezo->af_calib)->hard_stop[1] +
 559:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 													ACTUATOR_LENS_HARD_STOP_BUFFER);
 560:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		*hall_max = (((lens_calib_data_t *)piezo->af_calib)->hard_stop[0] -
 561:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 													ACTUATOR_LENS_HARD_STOP_BUFFER);
 562:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 563:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else
 564:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 565:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		*hall_min = (((mirr_calib_data_t *)piezo->af_calib)->hard_stop[1] +
 566:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 													ACTUATOR_MIRROR_HARD_STOP_BUFFER);
 567:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		*hall_max = (((mirr_calib_data_t *)piezo->af_calib)->hard_stop[0] -
 568:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 													ACTUATOR_MIRROR_HARD_STOP_BUFFER);
 569:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 570:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 571:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	return ACTUATOR_OK;
 572:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 573:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 574:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** static actuator_return_t actuator_calibrate_hard_stop(actuator_t *piezo,
 575:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 											uint16_t target_position)
 576:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
 577:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     return actuator_do_move_to_position(piezo, &target_position, 0, true);
 578:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 579:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 580:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** actuator_return_t actuator_read_position(actuator_t *piezo, uint16_t *hallcode)
 581:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
 582:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     actuator_return_t   piezo_ret = ACTUATOR_OK;
 583:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     hall_return_t       hall_ret;
 584:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     hall_ret = piezo->hall_obj->read_position(piezo->hall_i2c, hallcode);
 585:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     if (hall_ret != HALL_OK)
 586:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         piezo_ret = ACTUATOR_HALL_TIMED_OUT;
 587:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     return piezo_ret;
 588:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 589:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 590:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /*
 591:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @brief actuator_move_to_position
 592:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * Moves independent piezo module to a position
 593:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  */
 594:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** actuator_return_t actuator_move_to_position(actuator_t *piezo,
 595:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                                             uint16_t *target_position,
 596:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                                             uint16_t tolerance)
 597:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
 598:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	return actuator_do_move_to_position(piezo, target_position, tolerance, false);
 599:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 600:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 601:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** static uint32_t actuator_get_pwm_freq(piezo_cl_param_t *piezo_param, actuator_dir_t direction)
 602:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
 603:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     uint32_t pwm_freq = piezo_param->pwm_freq;
 604:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     if (direction != piezo_param->last_move_dir)
 605:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         return pwm_freq;
 606:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     if (pwm_freq <= PIEZO_PWM_FREQ_MIN)
 607:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         piezo_param->freq_search_step = 1;
 608:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     else if (pwm_freq >= PIEZO_PWM_FREQ_MAX)
 609:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         piezo_param->freq_search_step = -1;
 610:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     return pwm_freq + 1000 * piezo_param->freq_search_step;
 611:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 612:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 613:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /*
 614:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @brief actuator_move_to_position
 615:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * Moves independent piezo module to a position
 616:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  */
 617:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** static actuator_return_t actuator_do_move_to_position(actuator_t *piezo,
 618:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 											uint16_t *target_position,
 619:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 											uint16_t tolerance,
 620:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 											bool is_hard_stop_calibration)
 621:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
 622:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     if (tolerance < PIEZO_TOLERANCE_MIN)
 623:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         tolerance = PIEZO_TOLERANCE_MIN;
 624:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	actuator_return_t	piezo_ret = ACTUATOR_OK;
 625:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	hall_return_t		hall_ret;
 626:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 627:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	/* check parameter validation */
 628:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if ((piezo == NULL) || (target_position == NULL))
 629:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 630:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		SLOGF(SLOG_ERROR, "%s: Null pointer", __FUNCTION__);
 631:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_NULL_PTR;
 632:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 633:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else if (!IS_ACTUATOR_TYPE(piezo->type))
 634:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 635:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_ERROR, "Invalid type");
 636:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_INVALID_TYPE;
 637:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 638:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else if (piezo->is_initialized == FALSE)
 639:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 640:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_ERROR, "Uninitialized");
 641:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_UNINITIALIZED;
 642:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 643:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else if ((!is_hard_stop_calibration) && (piezo->is_calibrated == FALSE))
 644:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 645:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		/* update the current position to upper layer */
 646:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hall_ret = piezo->hall_obj->read_position(piezo->hall_i2c,
 647:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				target_position);
 648:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		if (hall_ret != HALL_OK)
 649:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			*target_position = 0;
 650:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo->last_move_hall_code = *target_position;
 651:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_ERROR, "Not calibrated yet");
 652:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_NOT_CALIBRATED;
 653:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 654:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 655:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	/* check whether the piezo module channel was calibrated */
 656:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if (piezo_ret == ACTUATOR_OK)
 657:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 658:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	    uint16_t target_pos = *target_position;
 659:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		uint16_t current_position;
 660:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 661:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		/* read current position of actuator */
 662:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hall_ret = piezo->hall_obj->read_position(piezo->hall_i2c, &current_position);
 663:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 664:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		if (hall_ret == HALL_OK)
 665:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		{
 666:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			hal_pwm_init_t pwm_cfg;
 667:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			hal_pwm_output_t pwm_value;
 668:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		    uint16_t actual_move = 1;
 669:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		    uint16_t remaining_distance;
 670:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			uint16_t start_position;
 671:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			uint8_t duty_cycle;
 672:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			actuator_dir_t direction;
 673:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 674:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			/* PWM channel config */
 675:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			pwm_cfg.align_mode = PWM_ALIGN_RIGHT;
 676:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			pwm_cfg.output_gen_mode = PWM_FIXED_PATTERNS;
 677:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			pwm_value.pattern.num_pairs = 2;
 678:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			pwm_value.pattern.pair[0].duty = 0;
 679:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             pwm_value.pattern.pair[0].num_pulses = 1;
 680:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             pwm_value.pattern.pair[1].duty = 0;
 681:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             pwm_value.pattern.pair[1].num_pulses = 1;
 682:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 683:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			/* Enable IRQ */
 684:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			hal_pwm_irq_t pwm_irq;
 685:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			pwm_irq.irq_mode = PWM_IRQ_ONE_PATTERN_GENERATED;
 686:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			pwm_irq.callback_handler = pwm_pattern_callback;
 687:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			pwm_irq.cb_param = piezo;
 688:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			hal_pwm_enable_irq(piezo->pwm, &pwm_irq);
 689:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 690:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			if (!is_hard_stop_calibration)
 691:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 692:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			    uint16_t hc_min;
 693:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			    uint16_t hc_max;
 694:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			    actuator_get_hard_stop_hall(piezo, &hc_min, &hc_max);
 695:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 /* Clamp the target position */
 696:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 target_pos = CLAMP(target_pos, hc_min, hc_max);
 697:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			}
 698:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			/* Save the target position after clamping */
 699:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			*target_position = target_pos;
 700:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			/* Compute the remaining distance */
 701:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			remaining_distance = abs(target_pos - current_position);
 702:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 703:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			TickType_t start_tick_count = xTaskGetTickCount();
 704:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			TickType_t end_tick_count = start_tick_count;
 705:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 706:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			while ((remaining_distance > tolerance) &&
 707:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					((end_tick_count - start_tick_count) <= MAX_CONTROL_LOOP_TICKS) &&
 708:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					(hall_ret == HALL_OK))
 709:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 710:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* Store the start position */
 711:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				start_position = current_position;
 712:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 713:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* Adjust duty cycle and weight based on the remaining distance */
 714:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 bool is_fine_mode;
 715:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				if (remaining_distance > FINE_CONTROL_THRESHOLD)
 716:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 717:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    is_fine_mode = false;
 718:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    duty_cycle = (piezo->type == ACTUATOR_LENS) ? ACTUATOR_DUTY_MOVE_LENS : ACTUATOR_DUTY_MOVE_
 719:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				}
 720:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				else
 721:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 722:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    is_fine_mode = true;
 723:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					duty_cycle = ACTUATOR_DUTY_LOW;
 724:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				}
 725:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 726:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* Program the PWM block to send the correct number of pulses in a single pattern */
 727:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				float distance_factor = 1.0f;
 728:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				if (remaining_distance > 2000)
 729:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    distance_factor = 0.3f;
 730:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				else if (remaining_distance > 500)
 731:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    distance_factor = 0.7f;
 732:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				else if (remaining_distance > 100)
 733:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    distance_factor = 0.9f;
 734:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				float expected_move = distance_factor * remaining_distance;
 735:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* Calculate direction for the next movement */
 736:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #ifdef EVT3_NEW_MIRR_MODULE
 737:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				if (piezo->type == ACTUATOR_LENS)
 738:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 739:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					direction = target_pos > current_position ?
 740:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							ACTUATOR_DIR_EXTEND_WIDE : ACTUATOR_DIR_RETRACT_NARROW;
 741:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				}
 742:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				else
 743:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 744:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					direction = target_pos > current_position ?
 745:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							ACTUATOR_DIR_RETRACT_NARROW : ACTUATOR_DIR_EXTEND_WIDE;
 746:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				}
 747:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #else
 748:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				direction = target_pos > current_position ?
 749:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						ACTUATOR_DIR_EXTEND_WIDE : ACTUATOR_DIR_RETRACT_NARROW;
 750:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #endif
 751:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				piezo_cl_per_dir_param_t* cl_param = &piezo->piezo_param.per_dir_param[direction];
 752:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* Update PWM duty cycle and start moving actuator */
 753:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				float weight = cl_param->weight_coarse;
 754:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				int32_t num_pulses = weight * expected_move + cl_param->extra_num_pulses;
 755:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				if (num_pulses < 1)
 756:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    num_pulses = 1;
 757:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				pwm_value.pattern.pair[0].num_pulses = num_pulses;
 758:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				pwm_value.pattern.pair[0].duty =
 759:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									get_derived_pwm_duty(duty_cycle, direction);
 760:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	            uint32_t pwm_freq = actuator_get_pwm_freq(&piezo->piezo_param, direction);
 761:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	            /* Add 1ms of time at the end to ensure that piezo has come to a stop when we read the
 762:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	            pwm_value.pattern.pair[1].num_pulses = pwm_freq / 1000;
 763:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	            pwm_value.freq = pwm_freq;
 764:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	            hal_pwm_init(piezo->pwm, &pwm_cfg, &pwm_value);
 765:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hal_pwm_start(piezo->pwm);
 766:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #if 0
 767:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				SLOGF(SLOG_DEBUG, "Piezo move loop, is_fine_mode: %d, num_pulses: %d, remaining_distance: %u, w
 768:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				        is_fine_mode, num_pulses, remaining_distance, weight, expected_move);
 769:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #endif
 770:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				if (xSemaphoreTake(piezo->pwm_semaphore, portMAX_DELAY) != pdTRUE )
 771:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 772:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					hal_pwm_stop(piezo->pwm);
 773:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                     log_piezo_msg(piezo, SLOG_ERROR, "Error in piezo control, giving up");
 774:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                     piezo_ret = ACTUATOR_MOVE_TIMED_OUT;
 775:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					break;
 776:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				}
 777:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 778:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* Read the current position */
 779:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hall_ret = piezo->hall_obj->read_position(piezo->hall_i2c, &current_position);
 780:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				actual_move = abs(current_position - start_position);
 781:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 782:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				if (direction == piezo->piezo_param.last_move_dir)
 783:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 784:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                     if (actual_move >= expected_move)
 785:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                         piezo->piezo_param.pwm_freq = pwm_freq;
 786:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                     else
 787:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                         piezo->piezo_param.freq_search_step *= -1;
 788:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				}
 789:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				piezo->piezo_param.last_move_dir = direction;
 790:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				float extra_pulses_comp = cl_param->extra_num_pulses;
 791:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				if (is_fine_mode)
 792:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 793:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    /* Adjust min number of pulses */
 794:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    extra_pulses_comp = num_pulses - weight * actual_move;
 795:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    if (extra_pulses_comp < PIEZO_MIN_EXTRA_PULSES)
 796:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				        extra_pulses_comp = PIEZO_MIN_EXTRA_PULSES;
 797:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    else if (extra_pulses_comp > PIEZO_MAX_EXTRA_PULSES)
 798:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				        extra_pulses_comp = PIEZO_MAX_EXTRA_PULSES;
 799:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    cl_param->extra_num_pulses = 0.5f * cl_param->extra_num_pulses + 0.5f * extra_pulses_comp;
 800:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				}
 801:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 /* Update weight */
 802:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				if ((actual_move > 0) || !is_fine_mode) {
 803:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                     if (actual_move == 0) {
 804:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                         weight = MAX_PIEZO_LOOP_WEIGHT;
 805:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                     } else {
 806:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                         weight = (float)(num_pulses - extra_pulses_comp) / actual_move;
 807:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                         if (weight > MAX_PIEZO_LOOP_WEIGHT)
 808:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                             weight = MAX_PIEZO_LOOP_WEIGHT;
 809:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                         else if (weight < MIN_PIEZO_LOOP_WEIGHT)
 810:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                             weight = MIN_PIEZO_LOOP_WEIGHT;
 811:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                     }
 812:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                     cl_param->weight_coarse = 0.5f * cl_param->weight_coarse + 0.5f * weight;
 813:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				}
 814:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 815:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #if 0
 816:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 SLOGF(SLOG_DEBUG, "Piezo move loop, start_pos: %u, current_pos: %u, new_pwm_freq; %
 817:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                         start_position, current_position, piezo->piezo_param.pwm_freq,
 818:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                         cl_param->weight_coarse, cl_param->extra_num_pulses);
 819:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #endif
 820:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 /* Update the remaining distance */
 821:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				remaining_distance = abs(target_pos - current_position);
 822:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 823:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	            end_tick_count = xTaskGetTickCount();
 824:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			}
 825:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			log_piezo_msg(piezo, SLOG_DEBUG, "Total move time (end_tick - start_tick) = %d",
 826:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					(end_tick_count - start_tick_count));
 827:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 828:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			/* Update the target position to upper layer */
 829:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			*target_position = current_position;
 830:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			piezo->last_move_hall_code = current_position;
 831:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		}
 832:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 833:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		if (hall_ret != HALL_OK)
 834:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		{
 835:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			*target_position = 0;
 836:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			piezo->last_move_hall_code = *target_position;
 837:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			log_piezo_msg(piezo, SLOG_ERROR, "Hall access timed out");
 838:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			piezo_ret = ACTUATOR_HALL_TIMED_OUT;
 839:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		}
 840:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		else if (abs(target_pos - current_position) > tolerance)
 841:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		{
 842:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             if (!is_hard_stop_calibration)
 843:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             {
 844:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 log_piezo_msg(piezo, SLOG_ERROR, "Movement timed out");
 845:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 piezo_ret = ACTUATOR_MOVE_TIMED_OUT;
 846:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             }
 847:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		}
 848:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 849:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         /* Debug logs */
 850:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         log_piezo_msg(piezo, SLOG_INFO, "Stopped at position: %u", current_position);
 851:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         log_piezo_msg(piezo, SLOG_DEBUG, "PWM frequency: %u, Weight/extra_num_pulses: %f, %i; %f, %
 852:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 piezo->piezo_param.pwm_freq,
 853:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 piezo->piezo_param.per_dir_param[0].weight_coarse, piezo->piezo_param.per_dir_param
 854:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 piezo->piezo_param.per_dir_param[1].weight_coarse, piezo->piezo_param.per_dir_param
 855:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 856:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 857:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	return piezo_ret;
 858:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 859:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 860:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /*
 861:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @brief actuator_move_to_distance
 862:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * Focuses independent lens piezo module to a distance
 863:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  */
 864:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** actuator_return_t actuator_move_to_distance(actuator_t *piezo,
 865:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 											uint32_t *distance)
 866:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
 867:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	actuator_return_t	piezo_ret = ACTUATOR_OK;
 868:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 869:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	/* check parameter validation */
 870:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if ((piezo == NULL) || (distance == NULL))
 871:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 872:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		SLOGF(SLOG_ERROR, "%s: Null pointer", __FUNCTION__);
 873:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_NULL_PTR;
 874:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 875:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else
 876:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 877:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		uint16_t	target_position;
 878:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 879:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		/* compute lens position from distance */
 880:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		target_position = convert_to_position(piezo->af_calib, *distance);
 881:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		SLOGF(SLOG_INFO, "Target position: 0x%X", target_position);
 882:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 883:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		/* move the lens to this position */
 884:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = actuator_move_to_position(piezo, &target_position, 3);
 885:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 886:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 887:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	return piezo_ret;
 888:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 889:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 890:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /*
 891:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @brief actuator_nudge
 892:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * Nudges independent piezo module in the desired direction
 893:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * 		with a little burst of PWM.
 894:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  */
 895:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** actuator_return_t actuator_nudge(actuator_t *piezo, actuator_dir_t direction,
 896:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				uint16_t multiplier, void (*cb_func)(void *), void *cb_param)
 897:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
 898:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	actuator_return_t	piezo_ret;
 899:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 900:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	/* check parameter validation */
 901:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if (piezo == NULL)
 902:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 903:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		SLOGF(SLOG_ERROR, "%s: Null pointer", __FUNCTION__);
 904:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_NULL_PTR;
 905:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 906:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else if (!IS_ACTUATOR_TYPE(piezo->type))
 907:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 908:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_ERROR, "Invalid type");
 909:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_INVALID_TYPE;
 910:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 911:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else if (piezo->is_initialized == FALSE)
 912:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 913:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_ERROR, "Uninitialized");
 914:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_UNINITIALIZED;
 915:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 916:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else if (piezo->is_calibrated == FALSE)
 917:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 918:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_ERROR, "Not calibrated yet");
 919:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_NOT_CALIBRATED;
 920:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 921:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else if (!IS_ACTUATOR_DIR(direction))
 922:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 923:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_ERROR, "Invalid direction");
 924:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_INVALID_DIR;
 925:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 926:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else
 927:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 928:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hal_pwm_init_t		pwm_cfg;
 929:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hal_pwm_output_t	pwm_value;
 930:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hal_pwm_irq_t		pwm_irq;
 931:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 932:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		/* configure PWM parameters */
 933:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_cfg.align_mode = PWM_ALIGN_RIGHT;
 934:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_cfg.output_gen_mode = PWM_FIXED_PATTERNS;
 935:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_value.freq = piezo->piezo_param.pwm_freq;
 936:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_value.num_patterns = 1;
 937:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_value.pattern.num_pairs = 1;
 938:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_value.pattern.pair[0].num_pulses = multiplier;
 939:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_value.pattern.pair[0].duty =
 940:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						get_derived_pwm_duty(ACTUATOR_DUTY_NUDGE, direction);
 941:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_irq.irq_mode = PWM_IRQ_ALL_PATTERNS_GENERATED;
 942:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_irq.callback_handler = cb_func;
 943:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_irq.cb_param = cb_param;
 944:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hal_pwm_init(piezo->pwm, &pwm_cfg, &pwm_value);
 945:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hal_pwm_enable_irq(piezo->pwm, &pwm_irq);
 946:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		/* start moving actuator */
 947:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hal_pwm_start(piezo->pwm);
 948:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 949:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_OK;
 950:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 951:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 952:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	return piezo_ret;
 953:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 954:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 955:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** actuator_return_t actuator_object_distance_to_lens_hallcode(actuator_t *piezo,
 956:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 uint32_t object_distance_mm, uint16_t *hallcode)
 957:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
 958:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     *hallcode = convert_to_position(piezo->af_calib, object_distance_mm);
 959:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     return ACTUATOR_OK;
 960:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 961:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 962:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** actuator_return_t actuator_lens_hallcode_to_object_distance(actuator_t *piezo,
 963:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 uint16_t hallcode, uint32_t *object_distance_mm)
 964:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
 965:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     *object_distance_mm = hallcode_to_object_distance(&((lens_calib_data_t *)piezo->af_calib)->af_c
 966:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     return ACTUATOR_OK;
 967:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 968:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 969:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /* Private function --------------------------------------------------------- */
 970:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 971:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /*
 972:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @brief read_eeprom
 973:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * Reads and checks the calibration data from EEPROM of independent piezo module
 974:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  */
 975:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** static actuator_return_t read_eeprom(actuator_t *piezo,
 976:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 										data_valid_t *data_valid)
 977:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
 978:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	actuator_return_t piezo_ret = ACTUATOR_OK;
 979:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	eeprom_status_t eeprom_ret;
 980:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	hall_return_t hall_ret = HALL_OK;
 981:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	uint32_t	pwm_freq = 0;
 982:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 983:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	/* read preset calibration data for actuator from the EEPROM */
 984:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if (piezo->type == ACTUATOR_LENS)
 985:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 986:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		eeprom_af_lens_reg_t	lens_regs;
 987:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 988:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		eeprom_ret = eeprom_read(piezo->eeprom_i2c, EEPROM_AF_LENS_OFFSET,
 989:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						sizeof(eeprom_af_lens_reg_t), (void *)&lens_regs);
 990:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hall_ret = piezo->hall_obj->read_register(piezo->hall_i2c,
 991:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						EEPROM_AF_LENS_FREQ_REG, 1, (uint8_t *)&pwm_freq);
 992:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		if (eeprom_ret == EEPROM_OK && hall_ret == HALL_OK)
 993:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		{
 994:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			lens_calib_data_t	*lens_calib_data = piezo->af_calib;
 995:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 996:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			lens_calib_data->pwm_freq = pwm_freq * 1000;
 997:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			lens_calib_data->af_calib_points[0].hallcode =
 998:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									(lens_regs.POSITION_MACRO_H << 8) |
 999:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									lens_regs.POSITION_MACRO_L;
1000:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             lens_calib_data->af_calib_points[1].hallcode =
1001:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                                     (lens_regs.POSITION_1M_H << 8) |
1002:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									lens_regs.POSITION_1M_L;
1003:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             lens_calib_data->af_calib_points[2].hallcode =
1004:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                                     (lens_regs.POSITION_2M_H << 8) |
1005:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									lens_regs.POSITION_2M_L;
1006:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             lens_calib_data->af_calib_points[3].hallcode =
1007:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									(lens_regs.POSITION_INFINITY_H << 8) |
1008:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									lens_regs.POSITION_INFINITY_L;
1009:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			lens_calib_data->hard_stop[0] = (lens_regs.HARD_STOP_MACRO_H << 8) |
1010:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									lens_regs.HARD_STOP_MACRO_L;
1011:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			lens_calib_data->hard_stop[1] =
1012:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									(lens_regs.HARD_STOP_INFINITY_H << 8) |
1013:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									lens_regs.HARD_STOP_INFINITY_L;
1014:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			lens_calib_data->polarity = lens_regs.POLARITY;
1015:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			lens_calib_data->sensitivity = lens_regs.SENSITIVITY;
1016:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1017:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             if (piezo->cam_info.grp == GRP_B)   /* CAM_TYPE_70MM */
1018:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             {
1019:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib_points[0].object_distance_mm = 400;
1020:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib_points[1].object_distance_mm = 1000;
1021:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib_points[2].object_distance_mm = 2000;
1022:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib_points[3].object_distance_mm = 12000;
1023:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib.focal_length_mm = 9.19f;
1024:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             }
1025:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             else
1026:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             {
1027:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib_points[0].object_distance_mm = 1000;
1028:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib_points[1].object_distance_mm = 2000;
1029:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib_points[2].object_distance_mm = 4000;
1030:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib_points[3].object_distance_mm = 54000;
1031:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib.focal_length_mm = 19.77f;
1032:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             }
1033:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             lens_calib_data->af_calib.num_calib_points = ACTUATOR_NUM_CALIB_POINTS;
1034:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             lens_calib_data->af_calib.calib_point_arr = lens_calib_data->af_calib_points;
1035:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		}
1036:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
1037:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else
1038:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
1039:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		eeprom_af_mirr_reg_t	mirr_regs;
1040:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1041:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		eeprom_ret = eeprom_read(piezo->eeprom_i2c,
1042:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									EEPROM_AF_MIRR_OFFSET,
1043:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									sizeof(eeprom_af_mirr_reg_t),
1044:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									(void *)&mirr_regs);
1045:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		if (eeprom_ret == EEPROM_OK)
1046:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		{
1047:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			mirr_calib_data_t	*mirr_calib_data = piezo->af_calib;
1048:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1049:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			mirr_calib_data->pwm_freq = mirr_regs.FREQUENCY * 1000;
1050:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			mirr_calib_data->position_45d =
1051:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									(mirr_regs.POSITION_45DEGREE_H << 8) |
1052:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									mirr_regs.POSITION_45DEGREE_L;
1053:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			mirr_calib_data->hard_stop[0] = (mirr_regs.HARD_STOP_MACRO_H << 8) |
1054:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									mirr_regs.HARD_STOP_MACRO_L;
1055:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			mirr_calib_data->hard_stop[1] =
1056:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									(mirr_regs.HARD_STOP_INFINITY_H << 8) |
1057:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									mirr_regs.HARD_STOP_INFINITY_L;
1058:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			mirr_calib_data->polarity = mirr_regs.POLARITY;
1059:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			mirr_calib_data->sensitivity = mirr_regs.SENSITIVITY;
1060:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			pwm_freq = mirr_regs.FREQUENCY * 1000;
1061:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #ifdef EVT3_REWORK
1062:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			/* this patch is used for from EVT3 to later only */
1063:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			mirr_calib_data->hard_stop[0] =
1064:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					(mirr_regs.HARD_STOP_INFINITY_H << 8) |
1065:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					mirr_regs.HARD_STOP_INFINITY_L;
1066:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			mirr_calib_data->hard_stop[1] =
1067:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					(mirr_regs.HARD_STOP_MACRO_H << 8) |
1068:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					mirr_regs.HARD_STOP_MACRO_L;
1069:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #endif
1070:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		}
1071:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
1072:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1073:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if (eeprom_ret == EEPROM_OK && hall_ret == HALL_OK)
1074:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
1075:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		/* print EEPROM calibration data */
1076:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_DEBUG, "Calibration data from EEPROM:");
1077:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		print_calib_info(piezo);
1078:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1079:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		/* check data validation */
1080:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		*data_valid = check_calib_info_validation(piezo);
1081:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
1082:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else if (eeprom_ret == EEPROM_OK)
1083:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
1084:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_ERROR, "Reading camera EEPROM timed out");
1085:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_EEPROM_TIMED_OUT;
1086:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
1087:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else
1088:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
1089:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_ERROR, "Reading lens EEPROM timed out");
1090:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_HALL_TIMED_OUT;
1091:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
1092:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1093:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	return piezo_ret;
1094:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
1095:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1096:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /*
1097:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @brief log_msg
1098:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * Prints message with actuator information
1099:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  */
1100:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** static void log_piezo_msg(actuator_t *piezo, uint8_t header,
1101:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							const char *format, ...)
1102:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
1103:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #if(LOG_VERBOSE == STD_ON)
1104:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	char		*msg;
1105:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	va_list		argptr;
1106:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	uint16_t	msg_size;
1107:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	char		msg_body[128];
1108:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	char		piezo_info[16] = "CAM-";
1109:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	char		cam_module[3];
1110:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1111:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	/* get actuator information */
1112:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	sprintf(cam_module, "%X", piezo->cam_info.module);
1113:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	strcat(piezo_info, cam_module);
1114:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	strcat(piezo_info, (piezo->type == ACTUATOR_LENS) ?
1115:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							"-Lens, " : "-Mirror, ");
1116:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	/* get message body */
1117:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	va_start(argptr, format);
1118:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	msg_size = strlen(piezo_info) + vsprintf(msg_body, format, argptr) + 1;
1119:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	va_end(argptr);
1120:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	/* print message */
1121:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	msg = pvPortMalloc(msg_size * sizeof(char));
1122:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if (msg)
1123:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
1124:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		memcpy(msg, piezo_info, strlen(piezo_info) + 1);
1125:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		strcat(msg, msg_body);
1126:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		SLOGF(header, msg);
1127:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		vPortFree(msg);
1128:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
1129:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #endif
1130:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
1131:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1132:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /*
1133:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @brief check_calib_info_validation
1134:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * Checks the calibration info validation of independent piezo module
1135:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  */
1136:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** static data_valid_t check_calib_info_validation(actuator_t *piezo)
1137:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
1138:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	data_valid_t data_valid = ACTUATOR_DATA_OK;
1139:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	uint32_t pwm_freq;
1140:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	uint16_t hard_stop_macro, hard_stop_infinity;
1141:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	uint8_t sensitivity, polarity;
1142:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1143:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if (piezo->type == ACTUATOR_LENS)
1144:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
1145:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		lens_calib_data_t *lens_calib_data = piezo->af_calib;
1146:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1147:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_freq = lens_calib_data->pwm_freq;
1148:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hard_stop_macro = lens_calib_data->hard_stop[0];
1149:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hard_stop_infinity = lens_calib_data->hard_stop[1];
1150:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		sensitivity = lens_calib_data->sensitivity;
1151:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		polarity = lens_calib_data->polarity;
1152:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
1153:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else
1154:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
1155:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		mirr_calib_data_t *lens_calib_data = piezo->af_calib;
1156:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1157:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_freq = lens_calib_data->pwm_freq;
1158:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hard_stop_macro = lens_calib_data->hard_stop[0];
1159:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hard_stop_infinity = lens_calib_data->hard_stop[1];
1160:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		sensitivity = lens_calib_data->sensitivity;
1161:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		polarity = lens_calib_data->polarity;
1162:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
1163:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1164:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	/* check data validation */
1165:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if (!IS_ACTUATOR_FREQ(pwm_freq))
1166:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
1167:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_ERROR, "Invalid PWM frequency");
1168:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		data_valid |= ACTUATOR_INVALID_FREQ;
1169:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
1170:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if ((polarity != 0) && (polarity != 1))
1171:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
1172:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_ERROR, "Invalid hall polarity");
1173:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		data_valid |= ACTUATOR_INVALID_POLARITY;
1174:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
1175:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if (sensitivity >= piezo->hall_obj->nbo_sensitivities)
1176:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
1177:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_ERROR, "Invalid hall sensitivity");
1178:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		data_valid |= ACTUATOR_INVALID_SENSITIVITY;
1179:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
1180:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if ((hard_stop_macro == 0x0000) ||
1181:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		(hard_stop_macro == 0xFFFF) ||
1182:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		(hard_stop_infinity == 0x0000) ||
1183:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		(hard_stop_infinity == 0xFFFF) ||
1184:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		(hard_stop_macro <
1185:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hard_stop_infinity + ACTUATOR_MIN_STROKE))
1186:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
1187:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_ERROR, "Invalid hard stop positions");
1188:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		data_valid |= ACTUATOR_INVALID_HARD_STOP;
1189:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
1190:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1191:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	return data_valid;
1192:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
1193:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1194:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /*
1195:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @brief print_calib_info
1196:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * Prints the calibration info of independent piezo module
1197:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  */
1198:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** static void print_calib_info(actuator_t *piezo)
1199:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
  26              		.loc 1 1199 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              	.LVL0:
  31 0000 2DE9F347 		push	{r0, r1, r4, r5, r6, r7, r8, r9, r10, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 40
  34              		.cfi_offset 4, -32
  35              		.cfi_offset 5, -28
  36              		.cfi_offset 6, -24
  37              		.cfi_offset 7, -20
  38              		.cfi_offset 8, -16
  39              		.cfi_offset 9, -12
  40              		.cfi_offset 10, -8
  41              		.cfi_offset 14, -4
1200:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #if(LOG_VERBOSE == STD_ON)
1201:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	uint32_t pwm_freq;
1202:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	uint16_t hard_stop_macro, hard_stop_infinity;
1203:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	uint8_t sensitivity, polarity;
1204:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1205:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if (piezo->type == ACTUATOR_LENS)
  42              		.loc 1 1205 0
  43 0004 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
1199:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #if(LOG_VERBOSE == STD_ON)
  44              		.loc 1 1199 0
  45 0006 0546     		mov	r5, r0
  46 0008 026A     		ldr	r2, [r0, #32]
  47              		.loc 1 1205 0
  48 000a 43B9     		cbnz	r3, .L2
  49              	.LVL1:
  50              	.LBB11:
1206:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
1207:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		lens_calib_data_t *lens_calib_data = piezo->af_calib;
1208:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1209:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_freq = lens_calib_data->pwm_freq;
  51              		.loc 1 1209 0
  52 000c 1368     		ldr	r3, [r2]
  53              	.LVL2:
1210:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hard_stop_macro = lens_calib_data->hard_stop[0];
  54              		.loc 1 1210 0
  55 000e B2F82080 		ldrh	r8, [r2, #32]
  56              	.LVL3:
1211:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hard_stop_infinity = lens_calib_data->hard_stop[1];
  57              		.loc 1 1211 0
  58 0012 578C     		ldrh	r7, [r2, #34]
  59              	.LVL4:
1212:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		sensitivity = lens_calib_data->sensitivity;
  60              		.loc 1 1212 0
  61 0014 92F82560 		ldrb	r6, [r2, #37]	@ zero_extendqisi2
  62              	.LVL5:
1213:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		polarity = lens_calib_data->polarity;
  63              		.loc 1 1213 0
  64 0018 92F82490 		ldrb	r9, [r2, #36]	@ zero_extendqisi2
  65              	.LVL6:
  66              	.LBE11:
  67 001c 06E0     		b	.L3
  68              	.LVL7:
  69              	.L2:
  70              	.LBB12:
1214:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
1215:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else
1216:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
1217:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		mirr_calib_data_t *lens_calib_data = piezo->af_calib;
1218:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1219:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_freq = lens_calib_data->pwm_freq;
  71              		.loc 1 1219 0
  72 001e 5368     		ldr	r3, [r2, #4]
  73              	.LVL8:
1220:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hard_stop_macro = lens_calib_data->hard_stop[0];
  74              		.loc 1 1220 0
  75 0020 B2F80A80 		ldrh	r8, [r2, #10]
  76              	.LVL9:
1221:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hard_stop_infinity = lens_calib_data->hard_stop[1];
  77              		.loc 1 1221 0
  78 0024 9789     		ldrh	r7, [r2, #12]
  79              	.LVL10:
1222:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		sensitivity = lens_calib_data->sensitivity;
  80              		.loc 1 1222 0
  81 0026 D67B     		ldrb	r6, [r2, #15]	@ zero_extendqisi2
  82              	.LVL11:
1223:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		polarity = lens_calib_data->polarity;
  83              		.loc 1 1223 0
  84 0028 92F80E90 		ldrb	r9, [r2, #14]	@ zero_extendqisi2
  85              	.LVL12:
  86              	.L3:
  87              	.LBE12:
1224:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
1225:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1226:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	SLOGF(SLOG_INFO, "PWM frequency: %d", pwm_freq);
  88              		.loc 1 1226 0
  89 002c 2720     		movs	r0, #39
  90              	.LVL13:
  91 002e 0821     		movs	r1, #8
  92 0030 194A     		ldr	r2, .L9
  93 0032 1A4C     		ldr	r4, .L9+4
  94 0034 A047     		blx	r4
  95              	.LVL14:
1227:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if (piezo->type == ACTUATOR_LENS)
  96              		.loc 1 1227 0
  97 0036 AB78     		ldrb	r3, [r5, #2]	@ zero_extendqisi2
  98 0038 D5F820A0 		ldr	r10, [r5, #32]
  99 003c 73B9     		cbnz	r3, .L4
 100              	.LVL15:
 101              	.LBB13:
1228:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
1229:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         lens_calib_data_t *lens_calib_data = piezo->af_calib;
 102              		.loc 1 1229 0
 103 003e 0125     		movs	r5, #1
 104              	.LVL16:
 105              	.L5:
 106 0040 0AEB8503 		add	r3, r10, r5, lsl #2
 107              	.LBB14:
1230:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		for (uint8_t i = 0; i < ACTUATOR_NUM_CALIB_POINTS; i++)
1231:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			SLOGF(SLOG_INFO, "Position %d: 0x%04X", i + 1, lens_calib_data->af_calib_points[i].hallcode);
 108              		.loc 1 1231 0 discriminator 3
 109 0044 B3F90230 		ldrsh	r3, [r3, #2]
 110 0048 2720     		movs	r0, #39
 111 004a 0093     		str	r3, [sp]
 112 004c 0821     		movs	r1, #8
 113 004e 2B46     		mov	r3, r5
 114 0050 0135     		adds	r5, r5, #1
 115              	.LVL17:
 116 0052 134A     		ldr	r2, .L9+8
 117 0054 A047     		blx	r4
 118              	.LVL18:
1230:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		for (uint8_t i = 0; i < ACTUATOR_NUM_CALIB_POINTS; i++)
 119              		.loc 1 1230 0 discriminator 3
 120 0056 052D     		cmp	r5, #5
 121 0058 F2D1     		bne	.L5
 122 005a 05E0     		b	.L6
 123              	.LVL19:
 124              	.L4:
 125              	.LBE14:
 126              	.LBE13:
 127              	.LBB15:
1232:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
1233:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else
1234:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
1235:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         mirr_calib_data_t *lens_calib_data = piezo->af_calib;
1236:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		SLOGF(SLOG_INFO, "Position at 45 degree: 0x%04X", lens_calib_data->position_45d);
 128              		.loc 1 1236 0
 129 005c 2720     		movs	r0, #39
 130 005e BAF80830 		ldrh	r3, [r10, #8]
 131 0062 0821     		movs	r1, #8
 132 0064 0F4A     		ldr	r2, .L9+12
 133 0066 A047     		blx	r4
 134              	.LVL20:
 135              	.L6:
 136              	.LBE15:
1237:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
1238:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	SLOGF(SLOG_INFO, "Macro hard stop: 0x%04X", hard_stop_macro);
 137              		.loc 1 1238 0
 138 0068 4346     		mov	r3, r8
 139 006a 2720     		movs	r0, #39
 140 006c 0821     		movs	r1, #8
 141 006e 0E4A     		ldr	r2, .L9+16
 142 0070 A047     		blx	r4
 143              	.LVL21:
1239:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	SLOGF(SLOG_INFO, "Infinity hard stop: 0x%04X", hard_stop_infinity);
 144              		.loc 1 1239 0
 145 0072 3B46     		mov	r3, r7
 146 0074 2720     		movs	r0, #39
 147 0076 0821     		movs	r1, #8
 148 0078 0C4A     		ldr	r2, .L9+20
 149 007a A047     		blx	r4
 150              	.LVL22:
1240:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	SLOGF(SLOG_INFO, "Polarity: %d", polarity);
 151              		.loc 1 1240 0
 152 007c 4B46     		mov	r3, r9
 153 007e 2720     		movs	r0, #39
 154 0080 0821     		movs	r1, #8
 155 0082 0B4A     		ldr	r2, .L9+24
 156 0084 A047     		blx	r4
 157              	.LVL23:
1241:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	SLOGF(SLOG_INFO, "Sensitivity: %d", sensitivity);
 158              		.loc 1 1241 0
 159 0086 2720     		movs	r0, #39
 160 0088 0821     		movs	r1, #8
 161 008a 0A4A     		ldr	r2, .L9+28
 162 008c 3346     		mov	r3, r6
 163 008e A047     		blx	r4
 164              	.LVL24:
1242:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #endif
1243:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 165              		.loc 1 1243 0
 166 0090 02B0     		add	sp, sp, #8
 167              	.LCFI1:
 168              		.cfi_def_cfa_offset 32
 169              		@ sp needed
 170 0092 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 171              	.LVL25:
 172              	.L10:
 173 0096 00BF     		.align	2
 174              	.L9:
 175 0098 00000000 		.word	.LC0
 176 009c 00000000 		.word	slogf
 177 00a0 12000000 		.word	.LC1
 178 00a4 26000000 		.word	.LC2
 179 00a8 44000000 		.word	.LC3
 180 00ac 5C000000 		.word	.LC4
 181 00b0 77000000 		.word	.LC5
 182 00b4 84000000 		.word	.LC6
 183              		.cfi_endproc
 184              	.LFE16:
 186              		.section	.text.log_piezo_msg,"ax",%progbits
 187              		.align	1
 188              		.thumb
 189              		.thumb_func
 191              	log_piezo_msg:
 192              	.LFB14:
1102:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #if(LOG_VERBOSE == STD_ON)
 193              		.loc 1 1102 0
 194              		.cfi_startproc
 195              		@ args = 4, pretend = 8, frame = 152
 196              		@ frame_needed = 0, uses_anonymous_args = 1
 197              	.LVL26:
 198 0000 0CB4     		push	{r2, r3}
 199              	.LCFI2:
 200              		.cfi_def_cfa_offset 8
 201              		.cfi_offset 2, -8
 202              		.cfi_offset 3, -4
1108:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	char		cam_module[3];
 203              		.loc 1 1108 0
 204 0002 2A4B     		ldr	r3, .L18
 205 0004 0B22     		movs	r2, #11
1102:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #if(LOG_VERBOSE == STD_ON)
 206              		.loc 1 1102 0
 207 0006 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 208              	.LCFI3:
 209              		.cfi_def_cfa_offset 36
 210              		.cfi_offset 4, -36
 211              		.cfi_offset 5, -32
 212              		.cfi_offset 6, -28
 213              		.cfi_offset 7, -24
 214              		.cfi_offset 8, -20
 215              		.cfi_offset 9, -16
 216              		.cfi_offset 14, -12
 217 000a A7B0     		sub	sp, sp, #156
 218              	.LCFI4:
 219              		.cfi_def_cfa_offset 192
1102:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #if(LOG_VERBOSE == STD_ON)
 220              		.loc 1 1102 0
 221 000c 2EAD     		add	r5, sp, #184
 222 000e 0446     		mov	r4, r0
 223 0010 8846     		mov	r8, r1
1108:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	char		cam_module[3];
 224              		.loc 1 1108 0
 225 0012 1868     		ldr	r0, [r3]	@ unaligned
 226              	.LVL27:
 227 0014 0021     		movs	r1, #0
 228              	.LVL28:
 229 0016 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 230 0018 0290     		str	r0, [sp, #8]	@ unaligned
 231 001a 8DF80C30 		strb	r3, [sp, #12]
 232 001e 0DF10D00 		add	r0, sp, #13
 233 0022 234B     		ldr	r3, .L18+4
1102:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #if(LOG_VERBOSE == STD_ON)
 234              		.loc 1 1102 0
 235 0024 55F8049B 		ldr	r9, [r5], #4
1108:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	char		cam_module[3];
 236              		.loc 1 1108 0
 237 0028 9847     		blx	r3
 238              	.LVL29:
1112:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	strcat(piezo_info, cam_module);
 239              		.loc 1 1112 0
 240 002a 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 241 002c 214B     		ldr	r3, .L18+8
 242 002e 2249     		ldr	r1, .L18+12
 243 0030 6846     		mov	r0, sp
 244 0032 9847     		blx	r3
 245              	.LVL30:
1113:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	strcat(piezo_info, (piezo->type == ACTUATOR_LENS) ?
 246              		.loc 1 1113 0
 247 0034 214E     		ldr	r6, .L18+16
 248 0036 6946     		mov	r1, sp
 249 0038 02A8     		add	r0, sp, #8
 250 003a B047     		blx	r6
 251              	.LVL31:
1114:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							"-Lens, " : "-Mirror, ");
 252              		.loc 1 1114 0
 253 003c 204B     		ldr	r3, .L18+20
 254 003e 214A     		ldr	r2, .L18+24
 255 0040 A178     		ldrb	r1, [r4, #2]	@ zero_extendqisi2
 256 0042 02A8     		add	r0, sp, #8
1118:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	va_end(argptr);
 257              		.loc 1 1118 0
 258 0044 204F     		ldr	r7, .L18+28
1114:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							"-Lens, " : "-Mirror, ");
 259              		.loc 1 1114 0
 260 0046 0029     		cmp	r1, #0
 261 0048 0CBF     		ite	eq
 262 004a 1146     		moveq	r1, r2
 263 004c 1946     		movne	r1, r3
 264 004e B047     		blx	r6
 265              	.LVL32:
1117:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	msg_size = strlen(piezo_info) + vsprintf(msg_body, format, argptr) + 1;
 266              		.loc 1 1117 0
 267 0050 0195     		str	r5, [sp, #4]
1118:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	va_end(argptr);
 268              		.loc 1 1118 0
 269 0052 02A8     		add	r0, sp, #8
 270 0054 B847     		blx	r7
 271              	.LVL33:
 272 0056 4946     		mov	r1, r9
 273 0058 2A46     		mov	r2, r5
 274 005a 1C4B     		ldr	r3, .L18+32
 275 005c 0446     		mov	r4, r0
 276              	.LVL34:
 277 005e 06A8     		add	r0, sp, #24
 278 0060 9847     		blx	r3
 279              	.LVL35:
1121:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if (msg)
 280              		.loc 1 1121 0
 281 0062 1B49     		ldr	r1, .L18+36
 282 0064 40F26142 		movw	r2, #1121
 283 0068 1A4B     		ldr	r3, .L18+40
1118:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	va_end(argptr);
 284              		.loc 1 1118 0
 285 006a 2044     		add	r0, r0, r4
 286              	.LVL36:
 287 006c 0130     		adds	r0, r0, #1
1121:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if (msg)
 288              		.loc 1 1121 0
 289 006e 80B2     		uxth	r0, r0
 290 0070 9847     		blx	r3
 291              	.LVL37:
1122:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 292              		.loc 1 1122 0
 293 0072 0446     		mov	r4, r0
 294 0074 A0B1     		cbz	r0, .L11
1124:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		strcat(msg, msg_body);
 295              		.loc 1 1124 0
 296 0076 02A8     		add	r0, sp, #8
 297              	.LVL38:
 298 0078 B847     		blx	r7
 299              	.LVL39:
 300 007a 174B     		ldr	r3, .L18+44
 301 007c 02A9     		add	r1, sp, #8
 302 007e 421C     		adds	r2, r0, #1
 303 0080 2046     		mov	r0, r4
 304 0082 9847     		blx	r3
 305              	.LVL40:
1125:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		SLOGF(header, msg);
 306              		.loc 1 1125 0
 307 0084 06A9     		add	r1, sp, #24
 308 0086 2046     		mov	r0, r4
 309 0088 B047     		blx	r6
 310              	.LVL41:
1126:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		vPortFree(msg);
 311              		.loc 1 1126 0
 312 008a 2720     		movs	r0, #39
 313 008c 4146     		mov	r1, r8
 314 008e 2246     		mov	r2, r4
 315 0090 124B     		ldr	r3, .L18+48
 316 0092 9847     		blx	r3
 317              	.LVL42:
1127:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 318              		.loc 1 1127 0
 319 0094 2046     		mov	r0, r4
 320 0096 0E49     		ldr	r1, .L18+36
 321 0098 40F26742 		movw	r2, #1127
 322 009c 104B     		ldr	r3, .L18+52
 323 009e 9847     		blx	r3
 324              	.LVL43:
 325              	.L11:
1130:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 326              		.loc 1 1130 0
 327 00a0 27B0     		add	sp, sp, #156
 328              	.LCFI5:
 329              		.cfi_def_cfa_offset 36
 330              		@ sp needed
 331 00a2 BDE8F043 		pop	{r4, r5, r6, r7, r8, r9, lr}
 332              	.LCFI6:
 333              		.cfi_restore 14
 334              		.cfi_restore 9
 335              		.cfi_restore 8
 336              		.cfi_restore 7
 337              		.cfi_restore 6
 338              		.cfi_restore 5
 339              		.cfi_restore 4
 340              		.cfi_def_cfa_offset 8
 341              	.LVL44:
 342 00a6 02B0     		add	sp, sp, #8
 343              	.LCFI7:
 344              		.cfi_restore 3
 345              		.cfi_restore 2
 346              		.cfi_def_cfa_offset 0
 347 00a8 7047     		bx	lr
 348              	.L19:
 349 00aa 00BF     		.align	2
 350              	.L18:
 351 00ac 00000000 		.word	.LANCHOR0
 352 00b0 00000000 		.word	memset
 353 00b4 00000000 		.word	sprintf
 354 00b8 A6000000 		.word	.LC10
 355 00bc 00000000 		.word	strcat
 356 00c0 9C000000 		.word	.LC8
 357 00c4 94000000 		.word	.LC7
 358 00c8 00000000 		.word	strlen
 359 00cc 00000000 		.word	vsprintf
 360 00d0 00000000 		.word	.LANCHOR1
 361 00d4 00000000 		.word	pvPortMalloc1
 362 00d8 00000000 		.word	memcpy
 363 00dc 00000000 		.word	slogf
 364 00e0 00000000 		.word	vPortFree1
 365              		.cfi_endproc
 366              	.LFE14:
 368              		.section	.text.read_eeprom,"ax",%progbits
 369              		.align	1
 370              		.thumb
 371              		.thumb_func
 373              	read_eeprom:
 374              	.LFB13:
 977:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	actuator_return_t piezo_ret = ACTUATOR_OK;
 375              		.loc 1 977 0
 376              		.cfi_startproc
 377              		@ args = 0, pretend = 0, frame = 56
 378              		@ frame_needed = 0, uses_anonymous_args = 0
 379              	.LVL45:
 380 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 381              	.LCFI8:
 382              		.cfi_def_cfa_offset 36
 383              		.cfi_offset 4, -36
 384              		.cfi_offset 5, -32
 385              		.cfi_offset 6, -28
 386              		.cfi_offset 7, -24
 387              		.cfi_offset 8, -20
 388              		.cfi_offset 9, -16
 389              		.cfi_offset 10, -12
 390              		.cfi_offset 11, -8
 391              		.cfi_offset 14, -4
 981:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 392              		.loc 1 981 0
 393 0004 0023     		movs	r3, #0
 977:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	actuator_return_t piezo_ret = ACTUATOR_OK;
 394              		.loc 1 977 0
 395 0006 8FB0     		sub	sp, sp, #60
 396              	.LCFI9:
 397              		.cfi_def_cfa_offset 96
 977:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	actuator_return_t piezo_ret = ACTUATOR_OK;
 398              		.loc 1 977 0
 399 0008 0446     		mov	r4, r0
 400 000a 8846     		mov	r8, r1
 981:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 401              		.loc 1 981 0
 402 000c 0193     		str	r3, [sp, #4]
 984:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 403              		.loc 1 984 0
 404 000e 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 405 0010 864D     		ldr	r5, .L46
 406 0012 0079     		ldrb	r0, [r0, #4]	@ zero_extendqisi2
 407              	.LVL46:
 408 0014 864E     		ldr	r6, .L46+4
 409 0016 002B     		cmp	r3, #0
 410 0018 69D1     		bne	.L21
 411              	.LBB24:
 988:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						sizeof(eeprom_af_lens_reg_t), (void *)&lens_regs);
 412              		.loc 1 988 0
 413 001a 2321     		movs	r1, #35
 414              	.LVL47:
 415 001c 0A46     		mov	r2, r1
 416 001e 02AB     		add	r3, sp, #8
 417 0020 A847     		blx	r5
 418              	.LVL48:
 990:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						EEPROM_AF_LENS_FREQ_REG, 1, (uint8_t *)&pwm_freq);
 419              		.loc 1 990 0
 420 0022 636A     		ldr	r3, [r4, #36]
 421 0024 AF21     		movs	r1, #175
 422 0026 0122     		movs	r2, #1
 423 0028 5F69     		ldr	r7, [r3, #20]
 424 002a 01AB     		add	r3, sp, #4
 988:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						sizeof(eeprom_af_lens_reg_t), (void *)&lens_regs);
 425              		.loc 1 988 0
 426 002c 0546     		mov	r5, r0
 427              	.LVL49:
 990:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						EEPROM_AF_LENS_FREQ_REG, 1, (uint8_t *)&pwm_freq);
 428              		.loc 1 990 0
 429 002e E078     		ldrb	r0, [r4, #3]	@ zero_extendqisi2
 430 0030 B847     		blx	r7
 431              	.LVL50:
 992:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		{
 432              		.loc 1 992 0
 433 0032 002D     		cmp	r5, #0
 434 0034 40F0F180 		bne	.L26
 992:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		{
 435              		.loc 1 992 0 is_stmt 0 discriminator 1
 436 0038 0028     		cmp	r0, #0
 437 003a 40F0E880 		bne	.L43
 438              	.LBB25:
 996:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			lens_calib_data->af_calib_points[0].hallcode =
 439              		.loc 1 996 0 is_stmt 1
 440 003e 0199     		ldr	r1, [sp, #4]
 441 0040 4FF47A72 		mov	r2, #1000
 994:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 442              		.loc 1 994 0
 443 0044 236A     		ldr	r3, [r4, #32]
 444              	.LVL51:
 996:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			lens_calib_data->af_calib_points[0].hallcode =
 445              		.loc 1 996 0
 446 0046 5143     		muls	r1, r2, r1
 447 0048 1960     		str	r1, [r3]
 998:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									lens_regs.POSITION_MACRO_L;
 448              		.loc 1 998 0
 449 004a 9DF80800 		ldrb	r0, [sp, #8]	@ zero_extendqisi2
 999:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             lens_calib_data->af_calib_points[1].hallcode =
 450              		.loc 1 999 0
 451 004e 9DF80910 		ldrb	r1, [sp, #9]	@ zero_extendqisi2
 997:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									(lens_regs.POSITION_MACRO_H << 8) |
 452              		.loc 1 997 0
 453 0052 41EA0021 		orr	r1, r1, r0, lsl #8
 454 0056 D980     		strh	r1, [r3, #6]	@ movhi
1001:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									lens_regs.POSITION_1M_L;
 455              		.loc 1 1001 0
 456 0058 9DF80A00 		ldrb	r0, [sp, #10]	@ zero_extendqisi2
1002:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             lens_calib_data->af_calib_points[2].hallcode =
 457              		.loc 1 1002 0
 458 005c 9DF80B10 		ldrb	r1, [sp, #11]	@ zero_extendqisi2
1000:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                                     (lens_regs.POSITION_1M_H << 8) |
 459              		.loc 1 1000 0
 460 0060 41EA0021 		orr	r1, r1, r0, lsl #8
 461 0064 5981     		strh	r1, [r3, #10]	@ movhi
1004:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									lens_regs.POSITION_2M_L;
 462              		.loc 1 1004 0
 463 0066 9DF80C00 		ldrb	r0, [sp, #12]	@ zero_extendqisi2
1005:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             lens_calib_data->af_calib_points[3].hallcode =
 464              		.loc 1 1005 0
 465 006a 9DF80D10 		ldrb	r1, [sp, #13]	@ zero_extendqisi2
1003:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                                     (lens_regs.POSITION_2M_H << 8) |
 466              		.loc 1 1003 0
 467 006e 41EA0021 		orr	r1, r1, r0, lsl #8
 468 0072 D981     		strh	r1, [r3, #14]	@ movhi
1007:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									lens_regs.POSITION_INFINITY_L;
 469              		.loc 1 1007 0
 470 0074 9DF80E00 		ldrb	r0, [sp, #14]	@ zero_extendqisi2
1008:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			lens_calib_data->hard_stop[0] = (lens_regs.HARD_STOP_MACRO_H << 8) |
 471              		.loc 1 1008 0
 472 0078 9DF80F10 		ldrb	r1, [sp, #15]	@ zero_extendqisi2
1006:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									(lens_regs.POSITION_INFINITY_H << 8) |
 473              		.loc 1 1006 0
 474 007c 41EA0021 		orr	r1, r1, r0, lsl #8
 475 0080 5982     		strh	r1, [r3, #18]	@ movhi
1009:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									lens_regs.HARD_STOP_MACRO_L;
 476              		.loc 1 1009 0
 477 0082 9DF82000 		ldrb	r0, [sp, #32]	@ zero_extendqisi2
1010:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			lens_calib_data->hard_stop[1] =
 478              		.loc 1 1010 0
 479 0086 9DF82110 		ldrb	r1, [sp, #33]	@ zero_extendqisi2
1009:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									lens_regs.HARD_STOP_MACRO_L;
 480              		.loc 1 1009 0
 481 008a 41EA0021 		orr	r1, r1, r0, lsl #8
 482 008e 1984     		strh	r1, [r3, #32]	@ movhi
1012:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									lens_regs.HARD_STOP_INFINITY_L;
 483              		.loc 1 1012 0
 484 0090 9DF82200 		ldrb	r0, [sp, #34]	@ zero_extendqisi2
1013:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			lens_calib_data->polarity = lens_regs.POLARITY;
 485              		.loc 1 1013 0
 486 0094 9DF82310 		ldrb	r1, [sp, #35]	@ zero_extendqisi2
1011:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									(lens_regs.HARD_STOP_INFINITY_H << 8) |
 487              		.loc 1 1011 0
 488 0098 41EA0021 		orr	r1, r1, r0, lsl #8
 489 009c 5984     		strh	r1, [r3, #34]	@ movhi
1014:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			lens_calib_data->sensitivity = lens_regs.SENSITIVITY;
 490              		.loc 1 1014 0
 491 009e 9DF82910 		ldrb	r1, [sp, #41]	@ zero_extendqisi2
 492 00a2 83F82410 		strb	r1, [r3, #36]
1015:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 493              		.loc 1 1015 0
 494 00a6 9DF82A10 		ldrb	r1, [sp, #42]	@ zero_extendqisi2
 495 00aa 83F82510 		strb	r1, [r3, #37]
1017:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             {
 496              		.loc 1 1017 0
 497 00ae 6178     		ldrb	r1, [r4, #1]	@ zero_extendqisi2
 498 00b0 01F0F001 		and	r1, r1, #240
 499 00b4 B029     		cmp	r1, #176
 500 00b6 4FF4FA61 		mov	r1, #2000
 501 00ba 09D1     		bne	.L23
1019:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib_points[1].object_distance_mm = 1000;
 502              		.loc 1 1019 0
 503 00bc 4FF4C870 		mov	r0, #400
1020:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib_points[2].object_distance_mm = 2000;
 504              		.loc 1 1020 0
 505 00c0 1A81     		strh	r2, [r3, #8]	@ movhi
1022:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib.focal_length_mm = 9.19f;
 506              		.loc 1 1022 0
 507 00c2 42F6E062 		movw	r2, #12000
1019:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib_points[1].object_distance_mm = 1000;
 508              		.loc 1 1019 0
 509 00c6 9880     		strh	r0, [r3, #4]	@ movhi
1022:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib.focal_length_mm = 9.19f;
 510              		.loc 1 1022 0
 511 00c8 1A82     		strh	r2, [r3, #16]	@ movhi
1021:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib_points[3].object_distance_mm = 12000;
 512              		.loc 1 1021 0
 513 00ca 9981     		strh	r1, [r3, #12]	@ movhi
1023:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             }
 514              		.loc 1 1023 0
 515 00cc 594A     		ldr	r2, .L46+8
 516 00ce 08E0     		b	.L45
 517              	.L23:
1027:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib_points[1].object_distance_mm = 2000;
 518              		.loc 1 1027 0
 519 00d0 9A80     		strh	r2, [r3, #4]	@ movhi
1029:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib_points[3].object_distance_mm = 54000;
 520              		.loc 1 1029 0
 521 00d2 4FF47A62 		mov	r2, #4000
1028:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib_points[2].object_distance_mm = 4000;
 522              		.loc 1 1028 0
 523 00d6 1981     		strh	r1, [r3, #8]	@ movhi
1029:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib_points[3].object_distance_mm = 54000;
 524              		.loc 1 1029 0
 525 00d8 9A81     		strh	r2, [r3, #12]	@ movhi
1030:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 lens_calib_data->af_calib.focal_length_mm = 19.77f;
 526              		.loc 1 1030 0
 527 00da 4DF2F022 		movw	r2, #54000
 528 00de 1A82     		strh	r2, [r3, #16]	@ movhi
1031:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             }
 529              		.loc 1 1031 0
 530 00e0 554A     		ldr	r2, .L46+12
 531              	.L45:
 532 00e2 DA61     		str	r2, [r3, #28]	@ float
1033:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             lens_calib_data->af_calib.calib_point_arr = lens_calib_data->af_calib_points;
 533              		.loc 1 1033 0
 534 00e4 0422     		movs	r2, #4
 535 00e6 1A76     		strb	r2, [r3, #24]
1034:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		}
 536              		.loc 1 1034 0
 537 00e8 9A18     		adds	r2, r3, r2
 538 00ea 5A61     		str	r2, [r3, #20]
 539 00ec 3AE0     		b	.L30
 540              	.LVL52:
 541              	.L21:
 542              	.LBE25:
 543              	.LBE24:
 544              	.LBB26:
1041:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									EEPROM_AF_MIRR_OFFSET,
 545              		.loc 1 1041 0
 546 00ee 1721     		movs	r1, #23
 547              	.LVL53:
 548 00f0 3022     		movs	r2, #48
 549 00f2 02AB     		add	r3, sp, #8
 550 00f4 A847     		blx	r5
 551              	.LVL54:
1045:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		{
 552              		.loc 1 1045 0
 553 00f6 0028     		cmp	r0, #0
 554 00f8 40F08F80 		bne	.L26
 555              	.LBB27:
1049:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			mirr_calib_data->position_45d =
 556              		.loc 1 1049 0
 557 00fc 4FF47A72 		mov	r2, #1000
 558 0100 9DF83710 		ldrb	r1, [sp, #55]	@ zero_extendqisi2
1047:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 559              		.loc 1 1047 0
 560 0104 236A     		ldr	r3, [r4, #32]
 561              	.LVL55:
1049:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			mirr_calib_data->position_45d =
 562              		.loc 1 1049 0
 563 0106 5143     		muls	r1, r2, r1
 564 0108 5960     		str	r1, [r3, #4]
1051:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									mirr_regs.POSITION_45DEGREE_L;
 565              		.loc 1 1051 0
 566 010a 9DF80C00 		ldrb	r0, [sp, #12]	@ zero_extendqisi2
 567              	.LVL56:
1052:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			mirr_calib_data->hard_stop[0] = (mirr_regs.HARD_STOP_MACRO_H << 8) |
 568              		.loc 1 1052 0
 569 010e 9DF80D10 		ldrb	r1, [sp, #13]	@ zero_extendqisi2
1050:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									(mirr_regs.POSITION_45DEGREE_H << 8) |
 570              		.loc 1 1050 0
 571 0112 41EA0021 		orr	r1, r1, r0, lsl #8
 572 0116 1981     		strh	r1, [r3, #8]	@ movhi
1053:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									mirr_regs.HARD_STOP_MACRO_L;
 573              		.loc 1 1053 0
 574 0118 9DF80800 		ldrb	r0, [sp, #8]	@ zero_extendqisi2
1054:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			mirr_calib_data->hard_stop[1] =
 575              		.loc 1 1054 0
 576 011c 9DF80910 		ldrb	r1, [sp, #9]	@ zero_extendqisi2
1053:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									mirr_regs.HARD_STOP_MACRO_L;
 577              		.loc 1 1053 0
 578 0120 41EA0021 		orr	r1, r1, r0, lsl #8
 579 0124 5981     		strh	r1, [r3, #10]	@ movhi
1056:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									mirr_regs.HARD_STOP_INFINITY_L;
 580              		.loc 1 1056 0
 581 0126 9DF80A00 		ldrb	r0, [sp, #10]	@ zero_extendqisi2
1057:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			mirr_calib_data->polarity = mirr_regs.POLARITY;
 582              		.loc 1 1057 0
 583 012a 9DF80B10 		ldrb	r1, [sp, #11]	@ zero_extendqisi2
1055:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									(mirr_regs.HARD_STOP_INFINITY_H << 8) |
 584              		.loc 1 1055 0
 585 012e 41EA0021 		orr	r1, r1, r0, lsl #8
 586 0132 9981     		strh	r1, [r3, #12]	@ movhi
1058:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			mirr_calib_data->sensitivity = mirr_regs.SENSITIVITY;
 587              		.loc 1 1058 0
 588 0134 9DF80E10 		ldrb	r1, [sp, #14]	@ zero_extendqisi2
 589 0138 9973     		strb	r1, [r3, #14]
1059:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			pwm_freq = mirr_regs.FREQUENCY * 1000;
 590              		.loc 1 1059 0
 591 013a 9DF80F10 		ldrb	r1, [sp, #15]	@ zero_extendqisi2
 592 013e D973     		strb	r1, [r3, #15]
1060:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #ifdef EVT3_REWORK
 593              		.loc 1 1060 0
 594 0140 9DF83710 		ldrb	r1, [sp, #55]	@ zero_extendqisi2
 595 0144 4A43     		muls	r2, r1, r2
1064:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					mirr_regs.HARD_STOP_INFINITY_L;
 596              		.loc 1 1064 0
 597 0146 9DF80A10 		ldrb	r1, [sp, #10]	@ zero_extendqisi2
1060:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #ifdef EVT3_REWORK
 598              		.loc 1 1060 0
 599 014a 0192     		str	r2, [sp, #4]
1065:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			mirr_calib_data->hard_stop[1] =
 600              		.loc 1 1065 0
 601 014c 9DF80B20 		ldrb	r2, [sp, #11]	@ zero_extendqisi2
1063:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					(mirr_regs.HARD_STOP_INFINITY_H << 8) |
 602              		.loc 1 1063 0
 603 0150 42EA0122 		orr	r2, r2, r1, lsl #8
 604 0154 5A81     		strh	r2, [r3, #10]	@ movhi
1067:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					mirr_regs.HARD_STOP_MACRO_L;
 605              		.loc 1 1067 0
 606 0156 9DF80810 		ldrb	r1, [sp, #8]	@ zero_extendqisi2
1068:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #endif
 607              		.loc 1 1068 0
 608 015a 9DF80920 		ldrb	r2, [sp, #9]	@ zero_extendqisi2
1066:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					(mirr_regs.HARD_STOP_MACRO_H << 8) |
 609              		.loc 1 1066 0
 610 015e 42EA0122 		orr	r2, r2, r1, lsl #8
 611 0162 9A81     		strh	r2, [r3, #12]	@ movhi
 612              	.LVL57:
 613              	.L30:
 614              	.LBE27:
 615              	.LBE26:
1076:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		print_calib_info(piezo);
 616              		.loc 1 1076 0
 617 0164 354A     		ldr	r2, .L46+16
 618 0166 2046     		mov	r0, r4
 619 0168 1021     		movs	r1, #16
 620 016a B047     		blx	r6
 621              	.LVL58:
1077:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 622              		.loc 1 1077 0
 623 016c 344B     		ldr	r3, .L46+20
 624 016e 2046     		mov	r0, r4
 625 0170 9847     		blx	r3
 626              	.LVL59:
 627              	.LBB28:
 628              	.LBB29:
1143:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 629              		.loc 1 1143 0
 630 0172 A278     		ldrb	r2, [r4, #2]	@ zero_extendqisi2
 631 0174 236A     		ldr	r3, [r4, #32]
 632 0176 42B9     		cbnz	r2, .L44
 633              	.LVL60:
 634              	.LBB30:
1147:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hard_stop_macro = lens_calib_data->hard_stop[0];
 635              		.loc 1 1147 0
 636 0178 1A68     		ldr	r2, [r3]
 637              	.LVL61:
1148:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hard_stop_infinity = lens_calib_data->hard_stop[1];
 638              		.loc 1 1148 0
 639 017a B3F82090 		ldrh	r9, [r3, #32]
 640              	.LVL62:
1149:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		sensitivity = lens_calib_data->sensitivity;
 641              		.loc 1 1149 0
 642 017e 5F8C     		ldrh	r7, [r3, #34]
 643              	.LVL63:
1150:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		polarity = lens_calib_data->polarity;
 644              		.loc 1 1150 0
 645 0180 93F825A0 		ldrb	r10, [r3, #37]	@ zero_extendqisi2
 646              	.LVL64:
1151:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 647              		.loc 1 1151 0
 648 0184 93F824B0 		ldrb	fp, [r3, #36]	@ zero_extendqisi2
 649              	.LVL65:
 650 0188 07E0     		b	.L32
 651              	.LVL66:
 652              	.L44:
 653              	.LBE30:
 654              	.LBB31:
1157:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hard_stop_macro = lens_calib_data->hard_stop[0];
 655              		.loc 1 1157 0
 656 018a 5A68     		ldr	r2, [r3, #4]
 657              	.LVL67:
1158:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hard_stop_infinity = lens_calib_data->hard_stop[1];
 658              		.loc 1 1158 0
 659 018c B3F80A90 		ldrh	r9, [r3, #10]
 660              	.LVL68:
1159:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		sensitivity = lens_calib_data->sensitivity;
 661              		.loc 1 1159 0
 662 0190 9F89     		ldrh	r7, [r3, #12]
 663              	.LVL69:
1160:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		polarity = lens_calib_data->polarity;
 664              		.loc 1 1160 0
 665 0192 93F80FA0 		ldrb	r10, [r3, #15]	@ zero_extendqisi2
 666              	.LVL70:
1161:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 667              		.loc 1 1161 0
 668 0196 93F80EB0 		ldrb	fp, [r3, #14]	@ zero_extendqisi2
 669              	.LVL71:
 670              	.L32:
 671              	.LBE31:
1165:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 672              		.loc 1 1165 0
 673 019a A2F5AF33 		sub	r3, r2, #89600
 674 019e A3F5C873 		sub	r3, r3, #400
 675 01a2 4FF6E852 		movw	r2, #65000
 676              	.LVL72:
 677 01a6 9342     		cmp	r3, r2
 678 01a8 05D9     		bls	.L39
1167:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		data_valid |= ACTUATOR_INVALID_FREQ;
 679              		.loc 1 1167 0
 680 01aa 2046     		mov	r0, r4
 681 01ac 0221     		movs	r1, #2
 682 01ae 254A     		ldr	r2, .L46+24
1168:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 683              		.loc 1 1168 0
 684 01b0 0125     		movs	r5, #1
1167:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		data_valid |= ACTUATOR_INVALID_FREQ;
 685              		.loc 1 1167 0
 686 01b2 B047     		blx	r6
 687              	.LVL73:
 688 01b4 00E0     		b	.L33
 689              	.LVL74:
 690              	.L39:
1138:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	uint32_t pwm_freq;
 691              		.loc 1 1138 0
 692 01b6 0025     		movs	r5, #0
 693              	.LVL75:
 694              	.L33:
1170:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 695              		.loc 1 1170 0
 696 01b8 BBF1010F 		cmp	fp, #1
 697 01bc 05D9     		bls	.L34
1172:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		data_valid |= ACTUATOR_INVALID_POLARITY;
 698              		.loc 1 1172 0
 699 01be 2046     		mov	r0, r4
 700 01c0 0221     		movs	r1, #2
 701 01c2 214A     		ldr	r2, .L46+28
1173:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 702              		.loc 1 1173 0
 703 01c4 45F00205 		orr	r5, r5, #2
 704              	.LVL76:
1172:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		data_valid |= ACTUATOR_INVALID_POLARITY;
 705              		.loc 1 1172 0
 706 01c8 B047     		blx	r6
 707              	.LVL77:
 708              	.L34:
1175:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 709              		.loc 1 1175 0
 710 01ca 636A     		ldr	r3, [r4, #36]
 711 01cc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 712 01ce 5345     		cmp	r3, r10
 713 01d0 05D8     		bhi	.L35
1177:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		data_valid |= ACTUATOR_INVALID_SENSITIVITY;
 714              		.loc 1 1177 0
 715 01d2 2046     		mov	r0, r4
 716 01d4 0221     		movs	r1, #2
 717 01d6 1D4A     		ldr	r2, .L46+32
1178:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 718              		.loc 1 1178 0
 719 01d8 45F00405 		orr	r5, r5, #4
 720              	.LVL78:
1177:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		data_valid |= ACTUATOR_INVALID_SENSITIVITY;
 721              		.loc 1 1177 0
 722 01dc B047     		blx	r6
 723              	.LVL79:
 724              	.L35:
1180:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		(hard_stop_macro == 0xFFFF) ||
 725              		.loc 1 1180 0
 726 01de 09F1FF33 		add	r3, r9, #-1
 727 01e2 4FF6FD72 		movw	r2, #65533
 728 01e6 9BB2     		uxth	r3, r3
 729 01e8 9342     		cmp	r3, r2
 730 01ea 06D8     		bhi	.L36
1181:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		(hard_stop_infinity == 0x0000) ||
 731              		.loc 1 1181 0
 732 01ec 7B1E     		subs	r3, r7, #1
 733 01ee 9BB2     		uxth	r3, r3
 734 01f0 9342     		cmp	r3, r2
 735 01f2 02D8     		bhi	.L36
1184:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hard_stop_infinity + ACTUATOR_MIN_STROKE))
 736              		.loc 1 1184 0
 737 01f4 6337     		adds	r7, r7, #99
 738              	.LVL80:
1183:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		(hard_stop_macro <
 739              		.loc 1 1183 0
 740 01f6 4F45     		cmp	r7, r9
 741 01f8 05DB     		blt	.L37
 742              	.L36:
1187:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		data_valid |= ACTUATOR_INVALID_HARD_STOP;
 743              		.loc 1 1187 0
 744 01fa 2046     		mov	r0, r4
 745 01fc 0221     		movs	r1, #2
 746 01fe 144A     		ldr	r2, .L46+36
1188:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 747              		.loc 1 1188 0
 748 0200 45F00805 		orr	r5, r5, #8
 749              	.LVL81:
1187:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		data_valid |= ACTUATOR_INVALID_HARD_STOP;
 750              		.loc 1 1187 0
 751 0204 B047     		blx	r6
 752              	.LVL82:
 753              	.L37:
 754              	.LBE29:
 755              	.LBE28:
1080:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 756              		.loc 1 1080 0
 757 0206 88F80050 		strb	r5, [r8]
 978:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	eeprom_status_t eeprom_ret;
 758              		.loc 1 978 0
 759 020a 0020     		movs	r0, #0
1080:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 760              		.loc 1 1080 0
 761 020c 0AE0     		b	.L38
 762              	.LVL83:
 763              	.L43:
1084:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_EEPROM_TIMED_OUT;
 764              		.loc 1 1084 0
 765 020e 2046     		mov	r0, r4
 766 0210 0221     		movs	r1, #2
 767 0212 104A     		ldr	r2, .L46+40
 768 0214 B047     		blx	r6
 769              	.LVL84:
1085:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 770              		.loc 1 1085 0
 771 0216 0620     		movs	r0, #6
 772 0218 04E0     		b	.L38
 773              	.LVL85:
 774              	.L26:
1089:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_HALL_TIMED_OUT;
 775              		.loc 1 1089 0
 776 021a 2046     		mov	r0, r4
 777 021c 0221     		movs	r1, #2
 778 021e 0E4A     		ldr	r2, .L46+44
 779 0220 B047     		blx	r6
 780              	.LVL86:
1090:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 781              		.loc 1 1090 0
 782 0222 0820     		movs	r0, #8
 783              	.LVL87:
 784              	.L38:
1094:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 785              		.loc 1 1094 0
 786 0224 0FB0     		add	sp, sp, #60
 787              	.LCFI10:
 788              		.cfi_def_cfa_offset 36
 789              		@ sp needed
 790 0226 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 791              	.LVL88:
 792              	.L47:
 793 022a 00BF     		.align	2
 794              	.L46:
 795 022c 00000000 		.word	eeprom_read
 796 0230 00000000 		.word	log_piezo_msg
 797 0234 3D0A1341 		.word	1091766845
 798 0238 F6289E41 		.word	1100884214
 799 023c A9000000 		.word	.LC11
 800 0240 00000000 		.word	print_calib_info
 801 0244 C7000000 		.word	.LC12
 802 0248 DD000000 		.word	.LC13
 803 024c F3000000 		.word	.LC14
 804 0250 0C010000 		.word	.LC15
 805 0254 28010000 		.word	.LC16
 806 0258 48010000 		.word	.LC17
 807              		.cfi_endproc
 808              	.LFE13:
 810              		.section	.text.pwm_pattern_callback,"ax",%progbits
 811              		.align	1
 812              		.thumb
 813              		.thumb_func
 815              	pwm_pattern_callback:
 816              	.LFB19:
1244:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1245:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /*
1246:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @brief convert_to_position
1247:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * Converts from distance to position
1248:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  */
1249:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** static uint16_t convert_to_position(lens_calib_data_t *calib_data,
1250:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									uint32_t distance)
1251:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
1252:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     uint16_t d;
1253:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     if (distance > 65535)
1254:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         d = 65535;
1255:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     else
1256:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         d = (uint16_t)distance;
1257:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     return object_distance_to_hallcode(&calib_data->af_calib, d);
1258:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
1259:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1260:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /*
1261:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * @brief get_derived_pwm_duty
1262:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * Computes the derived pwm duty cycle from actuator duty cycle
1263:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  */
1264:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** static inline uint8_t get_derived_pwm_duty(uint8_t duty_cycle,
1265:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 										actuator_dir_t direction)
1266:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
1267:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	return (direction == ACTUATOR_DIR_EXTEND_WIDE) ?
1268:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 								duty_cycle : (100 - duty_cycle);
1269:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
1270:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1271:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** /*
1272:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * This function is called by the PWM hardware block's ISR when it
1273:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  * finishes generating a pattern.
1274:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****  */
1275:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** static void pwm_pattern_callback(void *cb_param)
1276:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** {
 817              		.loc 1 1276 0
 818              		.cfi_startproc
 819              		@ args = 0, pretend = 0, frame = 8
 820              		@ frame_needed = 0, uses_anonymous_args = 0
 821              	.LVL89:
 822 0000 37B5     		push	{r0, r1, r2, r4, r5, lr}
 823              	.LCFI11:
 824              		.cfi_def_cfa_offset 24
 825              		.cfi_offset 4, -12
 826              		.cfi_offset 5, -8
 827              		.cfi_offset 14, -4
1277:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	BaseType_t higher_pri_task_woken = pdFALSE;
 828              		.loc 1 1277 0
 829 0002 0023     		movs	r3, #0
1276:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	BaseType_t higher_pri_task_woken = pdFALSE;
 830              		.loc 1 1276 0
 831 0004 0546     		mov	r5, r0
 832              		.loc 1 1277 0
 833 0006 02AC     		add	r4, sp, #8
1278:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1279:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	hal_pwm_stop(((actuator_t*)cb_param)->pwm);
 834              		.loc 1 1279 0
 835 0008 4079     		ldrb	r0, [r0, #5]	@ zero_extendqisi2
 836              	.LVL90:
1277:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 837              		.loc 1 1277 0
 838 000a 44F8043D 		str	r3, [r4, #-4]!
 839              		.loc 1 1279 0
 840 000e 064B     		ldr	r3, .L53
 841 0010 9847     		blx	r3
 842              	.LVL91:
1280:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
1281:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	xSemaphoreGiveFromISR(((actuator_t*)cb_param)->pwm_semaphore,
 843              		.loc 1 1281 0
 844 0012 064B     		ldr	r3, .L53+4
 845 0014 E86A     		ldr	r0, [r5, #44]
 846 0016 2146     		mov	r1, r4
 847 0018 9847     		blx	r3
 848              	.LVL92:
 849              	.LBB32:
1282:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				&higher_pri_task_woken);
1283:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	portEND_SWITCHING_ISR(higher_pri_task_woken);
 850              		.loc 1 1283 0
 851 001a 019B     		ldr	r3, [sp, #4]
 852 001c 13B1     		cbz	r3, .L48
 853              		.loc 1 1283 0 is_stmt 0 discriminator 1
 854 001e 0122     		movs	r2, #1
 855 0020 034B     		ldr	r3, .L53+8
 856 0022 1A60     		str	r2, [r3]
 857              	.L48:
 858              	.LBE32:
1284:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 859              		.loc 1 1284 0 is_stmt 1
 860 0024 03B0     		add	sp, sp, #12
 861              	.LCFI12:
 862              		.cfi_def_cfa_offset 12
 863              		@ sp needed
 864 0026 30BD     		pop	{r4, r5, pc}
 865              	.LVL93:
 866              	.L54:
 867              		.align	2
 868              	.L53:
 869 0028 00000000 		.word	hal_pwm_stop
 870 002c 00000000 		.word	xQueueGiveFromISR
 871 0030 00000000 		.word	ulPortYieldRequired
 872              		.cfi_endproc
 873              	.LFE19:
 875              		.section	.text.actuator_get_hard_stop_hall,"ax",%progbits
 876              		.align	1
 877              		.global	actuator_get_hard_stop_hall
 878              		.thumb
 879              		.thumb_func
 881              	actuator_get_hard_stop_hall:
 882              	.LFB3:
 534:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	if (NULL == piezo || hall_min == NULL || hall_max == NULL)
 883              		.loc 1 534 0
 884              		.cfi_startproc
 885              		@ args = 0, pretend = 0, frame = 0
 886              		@ frame_needed = 0, uses_anonymous_args = 0
 887              	.LVL94:
 888 0000 38B5     		push	{r3, r4, r5, lr}
 889              	.LCFI13:
 890              		.cfi_def_cfa_offset 16
 891              		.cfi_offset 3, -16
 892              		.cfi_offset 4, -12
 893              		.cfi_offset 5, -8
 894              		.cfi_offset 14, -4
 535:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 895              		.loc 1 535 0
 896 0002 08B1     		cbz	r0, .L56
 535:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 897              		.loc 1 535 0 is_stmt 0 discriminator 1
 898 0004 01B1     		cbz	r1, .L56
 535:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 899              		.loc 1 535 0 discriminator 2
 900 0006 3AB9     		cbnz	r2, .L57
 901              	.L56:
 537:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		return ACTUATOR_NULL_PTR;
 902              		.loc 1 537 0 is_stmt 1
 903 0008 2720     		movs	r0, #39
 904              	.LVL95:
 905 000a 0221     		movs	r1, #2
 906              	.LVL96:
 907 000c 184A     		ldr	r2, .L70
 908              	.LVL97:
 909 000e 194B     		ldr	r3, .L70+4
 910 0010 194C     		ldr	r4, .L70+8
 911 0012 A047     		blx	r4
 912              	.LVL98:
 538:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 913              		.loc 1 538 0
 914 0014 0220     		movs	r0, #2
 915 0016 38BD     		pop	{r3, r4, r5, pc}
 916              	.LVL99:
 917              	.L57:
 918              	.LBB35:
 919              	.LBB36:
 540:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 920              		.loc 1 540 0
 921 0018 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 922 001a 012B     		cmp	r3, #1
 923 001c 05D9     		bls	.L59
 542:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		return ACTUATOR_INVALID_TYPE;
 924              		.loc 1 542 0
 925 001e 0221     		movs	r1, #2
 926              	.LVL100:
 927 0020 164A     		ldr	r2, .L70+12
 928              	.LVL101:
 929 0022 174B     		ldr	r3, .L70+16
 930 0024 9847     		blx	r3
 931              	.LVL102:
 543:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 932              		.loc 1 543 0
 933 0026 0320     		movs	r0, #3
 934 0028 38BD     		pop	{r3, r4, r5, pc}
 935              	.LVL103:
 936              	.L59:
 545:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 937              		.loc 1 545 0
 938 002a 90F82850 		ldrb	r5, [r0, #40]	@ zero_extendqisi2
 939 002e 2DB9     		cbnz	r5, .L60
 547:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		return ACTUATOR_UNINITIALIZED;
 940              		.loc 1 547 0
 941 0030 0221     		movs	r1, #2
 942              	.LVL104:
 943 0032 144A     		ldr	r2, .L70+20
 944              	.LVL105:
 945 0034 124B     		ldr	r3, .L70+16
 946 0036 9847     		blx	r3
 947              	.LVL106:
 548:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 948              		.loc 1 548 0
 949 0038 0120     		movs	r0, #1
 950 003a 38BD     		pop	{r3, r4, r5, pc}
 951              	.LVL107:
 952              	.L60:
 550:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 953              		.loc 1 550 0
 954 003c 90F82950 		ldrb	r5, [r0, #41]	@ zero_extendqisi2
 955 0040 2DB9     		cbnz	r5, .L61
 552:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		return ACTUATOR_NOT_CALIBRATED;
 956              		.loc 1 552 0
 957 0042 0221     		movs	r1, #2
 958              	.LVL108:
 959 0044 104A     		ldr	r2, .L70+24
 960              	.LVL109:
 961 0046 0E4B     		ldr	r3, .L70+16
 962 0048 9847     		blx	r3
 963              	.LVL110:
 553:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 964              		.loc 1 553 0
 965 004a 0920     		movs	r0, #9
 966 004c 38BD     		pop	{r3, r4, r5, pc}
 967              	.LVL111:
 968              	.L61:
 969 004e 006A     		ldr	r0, [r0, #32]
 970              	.LVL112:
 556:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 971              		.loc 1 556 0
 972 0050 33B9     		cbnz	r3, .L62
 558:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 													ACTUATOR_LENS_HARD_STOP_BUFFER);
 973              		.loc 1 558 0
 974 0052 448C     		ldrh	r4, [r0, #34]
 975 0054 5034     		adds	r4, r4, #80
 976 0056 0C80     		strh	r4, [r1]	@ movhi
 560:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 													ACTUATOR_LENS_HARD_STOP_BUFFER);
 977              		.loc 1 560 0
 978 0058 018C     		ldrh	r1, [r0, #32]
 979              	.LVL113:
 980 005a 5039     		subs	r1, r1, #80
 981 005c 1180     		strh	r1, [r2]	@ movhi
 982 005e 05E0     		b	.L69
 983              	.LVL114:
 984              	.L62:
 565:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 													ACTUATOR_MIRROR_HARD_STOP_BUFFER);
 985              		.loc 1 565 0
 986 0060 8389     		ldrh	r3, [r0, #12]
 987 0062 3033     		adds	r3, r3, #48
 988 0064 0B80     		strh	r3, [r1]	@ movhi
 567:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 													ACTUATOR_MIRROR_HARD_STOP_BUFFER);
 989              		.loc 1 567 0
 990 0066 4389     		ldrh	r3, [r0, #10]
 991 0068 303B     		subs	r3, r3, #48
 992 006a 1380     		strh	r3, [r2]	@ movhi
 993              	.LVL115:
 994              	.L69:
 571:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 995              		.loc 1 571 0
 996 006c 0020     		movs	r0, #0
 997              	.LBE36:
 998              	.LBE35:
 572:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 999              		.loc 1 572 0
 1000 006e 38BD     		pop	{r3, r4, r5, pc}
 1001              	.L71:
 1002              		.align	2
 1003              	.L70:
 1004 0070 66010000 		.word	.LC18
 1005 0074 00000000 		.word	.LANCHOR2
 1006 0078 00000000 		.word	slogf
 1007 007c 77010000 		.word	.LC19
 1008 0080 00000000 		.word	log_piezo_msg
 1009 0084 84010000 		.word	.LC20
 1010 0088 92010000 		.word	.LC21
 1011              		.cfi_endproc
 1012              	.LFE3:
 1014              		.global	__aeabi_i2f
 1015              		.global	__aeabi_fmul
 1016              		.global	__aeabi_fadd
 1017              		.global	__aeabi_f2iz
 1018              		.global	__aeabi_fcmpge
 1019              		.global	__aeabi_fsub
 1020              		.global	__aeabi_fcmplt
 1021              		.global	__aeabi_fcmpgt
 1022              		.global	__aeabi_fdiv
 1023              		.global	__aeabi_f2d
 1024              		.section	.text.actuator_do_move_to_position,"ax",%progbits
 1025              		.align	1
 1026              		.thumb
 1027              		.thumb_func
 1029              	actuator_do_move_to_position:
 1030              	.LFB8:
 621:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     if (tolerance < PIEZO_TOLERANCE_MIN)
 1031              		.loc 1 621 0
 1032              		.cfi_startproc
 1033              		@ args = 0, pretend = 0, frame = 88
 1034              		@ frame_needed = 0, uses_anonymous_args = 0
 1035              	.LVL116:
 1036 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1037              	.LCFI14:
 1038              		.cfi_def_cfa_offset 36
 1039              		.cfi_offset 4, -36
 1040              		.cfi_offset 5, -32
 1041              		.cfi_offset 6, -28
 1042              		.cfi_offset 7, -24
 1043              		.cfi_offset 8, -20
 1044              		.cfi_offset 9, -16
 1045              		.cfi_offset 10, -12
 1046              		.cfi_offset 11, -8
 1047              		.cfi_offset 14, -4
 1048 0004 9FB0     		sub	sp, sp, #124
 1049              	.LCFI15:
 1050              		.cfi_def_cfa_offset 160
 621:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     if (tolerance < PIEZO_TOLERANCE_MIN)
 1051              		.loc 1 621 0
 1052 0006 8946     		mov	r9, r1
 628:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 1053              		.loc 1 628 0
 1054 0008 0446     		mov	r4, r0
 621:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     if (tolerance < PIEZO_TOLERANCE_MIN)
 1055              		.loc 1 621 0
 1056 000a 0A93     		str	r3, [sp, #40]
 623:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	actuator_return_t	piezo_ret = ACTUATOR_OK;
 1057              		.loc 1 623 0
 1058 000c 1346     		mov	r3, r2
 1059              	.LVL117:
 1060 000e 012A     		cmp	r2, #1
 1061 0010 98BF     		it	ls
 1062 0012 0223     		movls	r3, #2
 1063 0014 0F93     		str	r3, [sp, #60]
 1064              	.LVL118:
 628:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 1065              		.loc 1 628 0
 1066 0016 00B1     		cbz	r0, .L74
 628:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 1067              		.loc 1 628 0 is_stmt 0 discriminator 1
 1068 0018 39B9     		cbnz	r1, .L75
 1069              	.L74:
 630:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_NULL_PTR;
 1070              		.loc 1 630 0 is_stmt 1
 1071 001a 2720     		movs	r0, #39
 1072              	.LVL119:
 1073 001c 0221     		movs	r1, #2
 1074              	.LVL120:
 1075 001e 924A     		ldr	r2, .L133
 631:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 1076              		.loc 1 631 0
 1077 0020 0227     		movs	r7, #2
 630:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_NULL_PTR;
 1078              		.loc 1 630 0
 1079 0022 924B     		ldr	r3, .L133+4
 1080 0024 924C     		ldr	r4, .L133+8
 1081              	.LVL121:
 1082 0026 A047     		blx	r4
 1083              	.LVL122:
 631:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 1084              		.loc 1 631 0
 1085 0028 15E2     		b	.L130
 1086              	.LVL123:
 1087              	.L75:
 633:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 1088              		.loc 1 633 0
 1089 002a 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 1090 002c 012B     		cmp	r3, #1
 1091 002e 05D9     		bls	.L77
 635:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_INVALID_TYPE;
 1092              		.loc 1 635 0
 1093 0030 0221     		movs	r1, #2
 1094              	.LVL124:
 1095 0032 904A     		ldr	r2, .L133+12
 636:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 1096              		.loc 1 636 0
 1097 0034 0327     		movs	r7, #3
 635:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_INVALID_TYPE;
 1098              		.loc 1 635 0
 1099 0036 904B     		ldr	r3, .L133+16
 1100 0038 9847     		blx	r3
 1101              	.LVL125:
 1102 003a 0CE2     		b	.L130
 1103              	.LVL126:
 1104              	.L77:
 638:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 1105              		.loc 1 638 0
 1106 003c 90F82830 		ldrb	r3, [r0, #40]	@ zero_extendqisi2
 1107 0040 2BB9     		cbnz	r3, .L78
 640:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_UNINITIALIZED;
 1108              		.loc 1 640 0
 1109 0042 0221     		movs	r1, #2
 1110              	.LVL127:
 1111 0044 8D4A     		ldr	r2, .L133+20
 641:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 1112              		.loc 1 641 0
 1113 0046 0127     		movs	r7, #1
 640:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_UNINITIALIZED;
 1114              		.loc 1 640 0
 1115 0048 8B4B     		ldr	r3, .L133+16
 1116 004a 9847     		blx	r3
 1117              	.LVL128:
 1118 004c 03E2     		b	.L130
 1119              	.LVL129:
 1120              	.L78:
 643:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 1121              		.loc 1 643 0
 1122 004e 0A9A     		ldr	r2, [sp, #40]
 1123 0050 436A     		ldr	r3, [r0, #36]
 1124 0052 C078     		ldrb	r0, [r0, #3]	@ zero_extendqisi2
 1125              	.LVL130:
 1126 0054 8AB9     		cbnz	r2, .L79
 643:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 1127              		.loc 1 643 0 is_stmt 0 discriminator 1
 1128 0056 94F82950 		ldrb	r5, [r4, #41]	@ zero_extendqisi2
 1129 005a 75B9     		cbnz	r5, .L79
 646:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				target_position);
 1130              		.loc 1 646 0 is_stmt 1
 1131 005c DB68     		ldr	r3, [r3, #12]
 1132 005e 9847     		blx	r3
 1133              	.LVL131:
 648:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			*target_position = 0;
 1134              		.loc 1 648 0
 1135 0060 08B1     		cbz	r0, .L80
 649:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo->last_move_hall_code = *target_position;
 1136              		.loc 1 649 0
 1137 0062 A9F80050 		strh	r5, [r9]	@ movhi
 1138              	.L80:
 650:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_ERROR, "Not calibrated yet");
 1139              		.loc 1 650 0
 1140 0066 B9F80030 		ldrh	r3, [r9]
 651:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_NOT_CALIBRATED;
 1141              		.loc 1 651 0
 1142 006a 2046     		mov	r0, r4
 1143              	.LVL132:
 650:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_ERROR, "Not calibrated yet");
 1144              		.loc 1 650 0
 1145 006c 6385     		strh	r3, [r4, #42]	@ movhi
 651:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_NOT_CALIBRATED;
 1146              		.loc 1 651 0
 1147 006e 0221     		movs	r1, #2
 1148 0070 834A     		ldr	r2, .L133+24
 652:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 1149              		.loc 1 652 0
 1150 0072 0927     		movs	r7, #9
 651:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_NOT_CALIBRATED;
 1151              		.loc 1 651 0
 1152 0074 804B     		ldr	r3, .L133+16
 1153 0076 9847     		blx	r3
 1154              	.LVL133:
 1155 0078 EDE1     		b	.L130
 1156              	.LVL134:
 1157              	.L79:
 1158              	.LBB45:
 662:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 1159              		.loc 1 662 0
 1160 007a DB68     		ldr	r3, [r3, #12]
 1161 007c 0DF14201 		add	r1, sp, #66
 1162              	.LVL135:
 658:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		uint16_t current_position;
 1163              		.loc 1 658 0
 1164 0080 B9F80060 		ldrh	r6, [r9]
 1165              	.LVL136:
 662:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 1166              		.loc 1 662 0
 1167 0084 9847     		blx	r3
 1168              	.LVL137:
 664:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		{
 1169              		.loc 1 664 0
 1170 0086 8046     		mov	r8, r0
 1171 0088 0028     		cmp	r0, #0
 1172 008a 40F0AC81 		bne	.L109
 1173              	.LVL138:
 1174              	.LBB46:
 675:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			pwm_cfg.output_gen_mode = PWM_FIXED_PATTERNS;
 1175              		.loc 1 675 0
 1176 008e 0123     		movs	r3, #1
 688:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 1177              		.loc 1 688 0
 1178 0090 6079     		ldrb	r0, [r4, #5]	@ zero_extendqisi2
 1179              	.LVL139:
 676:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			pwm_value.pattern.num_pairs = 2;
 1180              		.loc 1 676 0
 1181 0092 0222     		movs	r2, #2
 675:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			pwm_cfg.output_gen_mode = PWM_FIXED_PATTERNS;
 1182              		.loc 1 675 0
 1183 0094 8DF84030 		strb	r3, [sp, #64]
 688:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 1184              		.loc 1 688 0
 1185 0098 12A9     		add	r1, sp, #72
 679:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             pwm_value.pattern.pair[1].duty = 0;
 1186              		.loc 1 679 0
 1187 009a 1693     		str	r3, [sp, #88]
 681:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 1188              		.loc 1 681 0
 1189 009c 1893     		str	r3, [sp, #96]
 685:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			pwm_irq.callback_handler = pwm_pattern_callback;
 1190              		.loc 1 685 0
 1191 009e 4FF48073 		mov	r3, #256
 678:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             pwm_value.pattern.pair[0].num_pulses = 1;
 1192              		.loc 1 678 0
 1193 00a2 8DF85480 		strb	r8, [sp, #84]
 685:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			pwm_irq.callback_handler = pwm_pattern_callback;
 1194              		.loc 1 685 0
 1195 00a6 ADF84830 		strh	r3, [sp, #72]	@ movhi
 686:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			pwm_irq.cb_param = piezo;
 1196              		.loc 1 686 0
 1197 00aa 764B     		ldr	r3, .L133+28
 1198 00ac 1393     		str	r3, [sp, #76]
 680:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             pwm_value.pattern.pair[1].num_pulses = 1;
 1199              		.loc 1 680 0
 1200 00ae 8DF85C80 		strb	r8, [sp, #92]
 688:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 1201              		.loc 1 688 0
 1202 00b2 754B     		ldr	r3, .L133+32
 676:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			pwm_value.pattern.num_pairs = 2;
 1203              		.loc 1 676 0
 1204 00b4 8DF84120 		strb	r2, [sp, #65]
 677:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			pwm_value.pattern.pair[0].duty = 0;
 1205              		.loc 1 677 0
 1206 00b8 8DF86C20 		strb	r2, [sp, #108]
 687:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			hal_pwm_enable_irq(piezo->pwm, &pwm_irq);
 1207              		.loc 1 687 0
 1208 00bc 1494     		str	r4, [sp, #80]
 688:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 1209              		.loc 1 688 0
 1210 00be 9847     		blx	r3
 1211              	.LVL140:
 690:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 1212              		.loc 1 690 0
 1213 00c0 0A9B     		ldr	r3, [sp, #40]
 1214 00c2 7BB9     		cbnz	r3, .L81
 1215              	.LBB47:
 694:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 /* Clamp the target position */
 1216              		.loc 1 694 0
 1217 00c4 714B     		ldr	r3, .L133+36
 1218 00c6 2046     		mov	r0, r4
 1219 00c8 11A9     		add	r1, sp, #68
 1220 00ca 0DF14602 		add	r2, sp, #70
 1221 00ce 9847     		blx	r3
 1222              	.LVL141:
 696:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			}
 1223              		.loc 1 696 0
 1224 00d0 BDF84430 		ldrh	r3, [sp, #68]
 1225 00d4 9E42     		cmp	r6, r3
 1226 00d6 38BF     		it	cc
 1227 00d8 1E46     		movcc	r6, r3
 1228              	.LVL142:
 1229 00da BDF84630 		ldrh	r3, [sp, #70]
 1230              	.LVL143:
 1231 00de 9E42     		cmp	r6, r3
 1232 00e0 28BF     		it	cs
 1233 00e2 1E46     		movcs	r6, r3
 1234              	.LVL144:
 1235              	.L81:
 1236              	.LBE47:
 701:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 1237              		.loc 1 701 0
 1238 00e4 BDF84270 		ldrh	r7, [sp, #66]
 1239 00e8 F71B     		subs	r7, r6, r7
 1240 00ea 002F     		cmp	r7, #0
 699:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			/* Compute the remaining distance */
 1241              		.loc 1 699 0
 1242 00ec A9F80060 		strh	r6, [r9]	@ movhi
 701:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 1243              		.loc 1 701 0
 1244 00f0 B8BF     		it	lt
 1245 00f2 7F42     		rsblt	r7, r7, #0
 703:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			TickType_t end_tick_count = start_tick_count;
 1246              		.loc 1 703 0
 1247 00f4 664B     		ldr	r3, .L133+40
 1248 00f6 9847     		blx	r3
 1249              	.LVL145:
 701:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 1250              		.loc 1 701 0
 1251 00f8 BFB2     		uxth	r7, r7
 1252              	.LVL146:
 703:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			TickType_t end_tick_count = start_tick_count;
 1253              		.loc 1 703 0
 1254 00fa 0B90     		str	r0, [sp, #44]
 1255              	.LVL147:
 1256              	.L82:
 706:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					((end_tick_count - start_tick_count) <= MAX_CONTROL_LOOP_TICKS) &&
 1257              		.loc 1 706 0
 1258 00fc 0F9B     		ldr	r3, [sp, #60]
 1259 00fe 9F42     		cmp	r7, r3
 1260 0100 0B9B     		ldr	r3, [sp, #44]
 1261 0102 A0EB0303 		sub	r3, r0, r3
 1262 0106 0E93     		str	r3, [sp, #56]
 1263 0108 40F25E81 		bls	.L120
 706:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					((end_tick_count - start_tick_count) <= MAX_CONTROL_LOOP_TICKS) &&
 1264              		.loc 1 706 0 is_stmt 0 discriminator 1
 1265 010c FA2B     		cmp	r3, #250
 1266 010e 00F25B81 		bhi	.L120
 707:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					(hall_ret == HALL_OK))
 1267              		.loc 1 707 0 is_stmt 1
 1268 0112 B8F1000F 		cmp	r8, #0
 1269 0116 40F05781 		bne	.L120
 1270              	.LBB48:
 715:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 1271              		.loc 1 715 0
 1272 011a 0A2F     		cmp	r7, #10
 711:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 1273              		.loc 1 711 0
 1274 011c BDF842A0 		ldrh	r10, [sp, #66]
 1275              	.LVL148:
 715:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 1276              		.loc 1 715 0
 1277 0120 40F29681 		bls	.L83
 1278              	.LVL149:
 728:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    distance_factor = 0.3f;
 1279              		.loc 1 728 0
 1280 0124 B7F5FA6F 		cmp	r7, #2000
 717:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    duty_cycle = (piezo->type == ACTUATOR_LENS) ? ACTUATOR_DUTY_MOVE_LENS : ACTUATOR_DUTY_MOVE_
 1281              		.loc 1 717 0
 1282 0128 CDF82480 		str	r8, [sp, #36]
 728:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    distance_factor = 0.3f;
 1283              		.loc 1 728 0
 1284 012c 07D8     		bhi	.L112
 1285              	.LVL150:
 730:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    distance_factor = 0.7f;
 1286              		.loc 1 730 0
 1287 012e B7F5FA7F 		cmp	r7, #500
 1288 0132 07D8     		bhi	.L113
 1289              	.L111:
 1290              	.LVL151:
 732:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    distance_factor = 0.9f;
 1291              		.loc 1 732 0
 1292 0134 642F     		cmp	r7, #100
 1293 0136 08D9     		bls	.L114
 733:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				float expected_move = distance_factor * remaining_distance;
 1294              		.loc 1 733 0
 1295 0138 DFF884B1 		ldr	fp, .L133+88
 1296 013c 07E0     		b	.L84
 1297              	.LVL152:
 1298              	.L112:
 729:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				else if (remaining_distance > 500)
 1299              		.loc 1 729 0
 1300 013e DFF884B1 		ldr	fp, .L133+92
 1301 0142 04E0     		b	.L84
 1302              	.LVL153:
 1303              	.L113:
 731:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				else if (remaining_distance > 100)
 1304              		.loc 1 731 0
 1305 0144 DFF880B1 		ldr	fp, .L133+96
 1306 0148 01E0     		b	.L84
 1307              	.LVL154:
 1308              	.L114:
 727:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				if (remaining_distance > 2000)
 1309              		.loc 1 727 0
 1310 014a 4FF07E5B 		mov	fp, #1065353216
 1311              	.LVL155:
 1312              	.L84:
 734:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* Calculate direction for the next movement */
 1313              		.loc 1 734 0
 1314 014e 514B     		ldr	r3, .L133+44
 1315 0150 3846     		mov	r0, r7
 1316              	.LVL156:
 1317 0152 9847     		blx	r3
 1318              	.LVL157:
 1319 0154 504F     		ldr	r7, .L133+48
 1320              	.LVL158:
 1321 0156 0146     		mov	r1, r0
 1322 0158 5846     		mov	r0, fp
 1323 015a B847     		blx	r7
 1324              	.LVL159:
 737:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 1325              		.loc 1 737 0
 1326 015c A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 734:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* Calculate direction for the next movement */
 1327              		.loc 1 734 0
 1328 015e 0C90     		str	r0, [sp, #48]	@ float
 1329              	.LVL160:
 737:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 1330              		.loc 1 737 0
 1331 0160 33B9     		cbnz	r3, .L85
 739:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							ACTUATOR_DIR_EXTEND_WIDE : ACTUATOR_DIR_RETRACT_NARROW;
 1332              		.loc 1 739 0
 1333 0162 5645     		cmp	r6, r10
 1334 0164 94BF     		ite	ls
 1335 0166 4FF0000B 		movls	fp, #0
 1336              	.LVL161:
 1337 016a 4FF0010B 		movhi	fp, #1
 1338              	.LVL162:
 1339 016e 05E0     		b	.L86
 1340              	.LVL163:
 1341              	.L85:
 744:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							ACTUATOR_DIR_RETRACT_NARROW : ACTUATOR_DIR_EXTEND_WIDE;
 1342              		.loc 1 744 0
 1343 0170 5645     		cmp	r6, r10
 1344 0172 8CBF     		ite	hi
 1345 0174 4FF0000B 		movhi	fp, #0
 1346              	.LVL164:
 1347 0178 4FF0010B 		movls	fp, #1
 1348              	.LVL165:
 1349              	.L86:
 1350 017c 04EBCB05 		add	r5, r4, fp, lsl #3
 754:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				if (num_pulses < 1)
 1351              		.loc 1 754 0
 1352 0180 0C99     		ldr	r1, [sp, #48]	@ float
 753:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				int32_t num_pulses = weight * expected_move + cl_param->extra_num_pulses;
 1353              		.loc 1 753 0
 1354 0182 AB6B     		ldr	r3, [r5, #56]	@ float
 1355 0184 0D93     		str	r3, [sp, #52]	@ float
 1356              	.LVL166:
 754:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				if (num_pulses < 1)
 1357              		.loc 1 754 0
 1358 0186 1846     		mov	r0, r3
 1359              	.LVL167:
 1360 0188 B847     		blx	r7
 1361              	.LVL168:
 1362 018a 424B     		ldr	r3, .L133+44
 1363 018c 0746     		mov	r7, r0
 1364 018e B5F93C00 		ldrsh	r0, [r5, #60]
 1365 0192 9847     		blx	r3
 1366              	.LVL169:
 1367 0194 414B     		ldr	r3, .L133+52
 1368 0196 0146     		mov	r1, r0
 1369 0198 3846     		mov	r0, r7
 1370 019a 9847     		blx	r3
 1371              	.LVL170:
 1372 019c 404B     		ldr	r3, .L133+56
 1373 019e 9847     		blx	r3
 1374              	.LVL171:
 1375              	.LBB49:
 1376              	.LBB50:
 603:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     if (direction != piezo_param->last_move_dir)
 1377              		.loc 1 603 0
 1378 01a0 276B     		ldr	r7, [r4, #48]
 1379              	.LBE50:
 1380              	.LBE49:
 756:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				pwm_value.pattern.pair[0].num_pulses = num_pulses;
 1381              		.loc 1 756 0
 1382 01a2 0128     		cmp	r0, #1
 1383 01a4 B8BF     		it	lt
 1384 01a6 0120     		movlt	r0, #1
 1385              	.LVL172:
 1386              	.LBB53:
 1387              	.LBB54:
1267:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 								duty_cycle : (100 - duty_cycle);
 1388              		.loc 1 1267 0
 1389 01a8 BBF1010F 		cmp	fp, #1
 1390              	.LBE54:
 1391              	.LBE53:
 757:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				pwm_value.pattern.pair[0].duty =
 1392              		.loc 1 757 0
 1393 01ac 0346     		mov	r3, r0
 1394              	.LBB56:
 1395              	.LBB55:
1267:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 								duty_cycle : (100 - duty_cycle);
 1396              		.loc 1 1267 0
 1397 01ae 0CBF     		ite	eq
 1398 01b0 1E23     		moveq	r3, #30
 1399 01b2 4623     		movne	r3, #70
 1400              	.LBE55:
 1401              	.LBE56:
 756:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				pwm_value.pattern.pair[0].num_pulses = num_pulses;
 1402              		.loc 1 756 0
 1403 01b4 0890     		str	r0, [sp, #32]
 1404              	.LVL173:
 758:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 									get_derived_pwm_duty(duty_cycle, direction);
 1405              		.loc 1 758 0
 1406 01b6 8DF85430 		strb	r3, [sp, #84]
 1407              	.LBB57:
 1408              	.LBB51:
 604:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         return pwm_freq;
 1409              		.loc 1 604 0
 1410 01ba 94F83530 		ldrb	r3, [r4, #53]	@ zero_extendqisi2
 1411 01be 5B45     		cmp	r3, fp
 1412              	.LBE51:
 1413              	.LBE57:
 757:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				pwm_value.pattern.pair[0].duty =
 1414              		.loc 1 757 0
 1415 01c0 1690     		str	r0, [sp, #88]
 1416              	.LVL174:
 1417              	.LBB58:
 1418              	.LBB52:
 604:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         return pwm_freq;
 1419              		.loc 1 604 0
 1420 01c2 10D1     		bne	.L89
 606:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         piezo_param->freq_search_step = 1;
 1421              		.loc 1 606 0
 1422 01c4 374B     		ldr	r3, .L133+60
 1423 01c6 9F42     		cmp	r7, r3
 1424 01c8 01D8     		bhi	.L90
 607:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     else if (pwm_freq >= PIEZO_PWM_FREQ_MAX)
 1425              		.loc 1 607 0
 1426 01ca 0123     		movs	r3, #1
 1427 01cc 03E0     		b	.L132
 1428              	.L90:
 608:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         piezo_param->freq_search_step = -1;
 1429              		.loc 1 608 0
 1430 01ce 364B     		ldr	r3, .L133+64
 1431 01d0 9F42     		cmp	r7, r3
 1432 01d2 02D9     		bls	.L91
 609:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     return pwm_freq + 1000 * piezo_param->freq_search_step;
 1433              		.loc 1 609 0
 1434 01d4 FF23     		movs	r3, #255
 1435              	.L132:
 1436 01d6 84F83430 		strb	r3, [r4, #52]
 1437              	.L91:
 610:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 1438              		.loc 1 610 0
 1439 01da 4FF47A72 		mov	r2, #1000
 1440 01de 94F93430 		ldrsb	r3, [r4, #52]
 1441 01e2 02FB0377 		mla	r7, r2, r3, r7
 1442              	.LVL175:
 1443              	.L89:
 1444              	.LBE52:
 1445              	.LBE58:
 764:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hal_pwm_start(piezo->pwm);
 1446              		.loc 1 764 0
 1447 01e6 6079     		ldrb	r0, [r4, #5]	@ zero_extendqisi2
 1448              	.LVL176:
 762:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	            pwm_value.freq = pwm_freq;
 1449              		.loc 1 762 0
 1450 01e8 4FF47A73 		mov	r3, #1000
 764:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hal_pwm_start(piezo->pwm);
 1451              		.loc 1 764 0
 1452 01ec 10A9     		add	r1, sp, #64
 762:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	            pwm_value.freq = pwm_freq;
 1453              		.loc 1 762 0
 1454 01ee B7FBF3F3 		udiv	r3, r7, r3
 764:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hal_pwm_start(piezo->pwm);
 1455              		.loc 1 764 0
 1456 01f2 15AA     		add	r2, sp, #84
 763:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	            hal_pwm_init(piezo->pwm, &pwm_cfg, &pwm_value);
 1457              		.loc 1 763 0
 1458 01f4 1C97     		str	r7, [sp, #112]
 762:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	            pwm_value.freq = pwm_freq;
 1459              		.loc 1 762 0
 1460 01f6 1893     		str	r3, [sp, #96]
 764:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hal_pwm_start(piezo->pwm);
 1461              		.loc 1 764 0
 1462 01f8 2C4B     		ldr	r3, .L133+68
 1463 01fa 9847     		blx	r3
 1464              	.LVL177:
 765:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #if 0
 1465              		.loc 1 765 0
 1466 01fc 6079     		ldrb	r0, [r4, #5]	@ zero_extendqisi2
 1467 01fe 2C4B     		ldr	r3, .L133+72
 1468 0200 9847     		blx	r3
 1469              	.LVL178:
 770:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 1470              		.loc 1 770 0
 1471 0202 0021     		movs	r1, #0
 1472 0204 E06A     		ldr	r0, [r4, #44]
 1473 0206 4FF0FF32 		mov	r2, #-1
 1474 020a 0B46     		mov	r3, r1
 1475 020c DFF8BCC0 		ldr	ip, .L133+100
 1476 0210 E047     		blx	ip
 1477              	.LVL179:
 1478 0212 0128     		cmp	r0, #1
 1479 0214 09D0     		beq	.L92
 772:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                     log_piezo_msg(piezo, SLOG_ERROR, "Error in piezo control, giving up");
 1480              		.loc 1 772 0
 1481 0216 6079     		ldrb	r0, [r4, #5]	@ zero_extendqisi2
 1482 0218 264B     		ldr	r3, .L133+76
 1483 021a 9847     		blx	r3
 1484              	.LVL180:
 773:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                     piezo_ret = ACTUATOR_MOVE_TIMED_OUT;
 1485              		.loc 1 773 0
 1486 021c 2046     		mov	r0, r4
 1487 021e 0221     		movs	r1, #2
 1488 0220 254A     		ldr	r2, .L133+80
 774:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					break;
 1489              		.loc 1 774 0
 1490 0222 0A27     		movs	r7, #10
 773:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                     piezo_ret = ACTUATOR_MOVE_TIMED_OUT;
 1491              		.loc 1 773 0
 1492 0224 144B     		ldr	r3, .L133+16
 1493 0226 9847     		blx	r3
 1494              	.LVL181:
 775:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				}
 1495              		.loc 1 775 0
 1496 0228 CFE0     		b	.L93
 1497              	.LVL182:
 1498              	.L92:
 779:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				actual_move = abs(current_position - start_position);
 1499              		.loc 1 779 0
 1500 022a 636A     		ldr	r3, [r4, #36]
 1501 022c E078     		ldrb	r0, [r4, #3]	@ zero_extendqisi2
 1502 022e 0DF14201 		add	r1, sp, #66
 1503 0232 DB68     		ldr	r3, [r3, #12]
 1504 0234 9847     		blx	r3
 1505              	.LVL183:
 780:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 1506              		.loc 1 780 0
 1507 0236 BDF84230 		ldrh	r3, [sp, #66]
 1508 023a CAEB030A 		rsb	r10, r10, r3
 1509              	.LVL184:
 1510 023e BAF1000F 		cmp	r10, #0
 1511 0242 0E93     		str	r3, [sp, #56]
 1512 0244 B8BF     		it	lt
 1513 0246 CAF1000A 		rsblt	r10, r10, #0
 782:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 1514              		.loc 1 782 0
 1515 024a 94F83530 		ldrb	r3, [r4, #53]	@ zero_extendqisi2
 1516 024e 5B45     		cmp	r3, fp
 779:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				actual_move = abs(current_position - start_position);
 1517              		.loc 1 779 0
 1518 0250 8046     		mov	r8, r0
 1519              	.LVL185:
 782:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 1520              		.loc 1 782 0
 1521 0252 42D1     		bne	.L94
 784:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                         piezo->piezo_param.pwm_freq = pwm_freq;
 1522              		.loc 1 784 0
 1523 0254 0F4B     		ldr	r3, .L133+44
 1524 0256 5046     		mov	r0, r10
 1525 0258 9847     		blx	r3
 1526              	.LVL186:
 1527 025a 0C99     		ldr	r1, [sp, #48]	@ float
 1528 025c 174B     		ldr	r3, .L133+84
 1529 025e 9847     		blx	r3
 1530              	.LVL187:
 1531 0260 B0B3     		cbz	r0, .L131
 785:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                     else
 1532              		.loc 1 785 0
 1533 0262 2763     		str	r7, [r4, #48]
 1534 0264 39E0     		b	.L94
 1535              	.L134:
 1536 0266 00BF     		.align	2
 1537              	.L133:
 1538 0268 66010000 		.word	.LC18
 1539 026c 00000000 		.word	.LANCHOR3
 1540 0270 00000000 		.word	slogf
 1541 0274 77010000 		.word	.LC19
 1542 0278 00000000 		.word	log_piezo_msg
 1543 027c 84010000 		.word	.LC20
 1544 0280 92010000 		.word	.LC21
 1545 0284 00000000 		.word	pwm_pattern_callback
 1546 0288 00000000 		.word	hal_pwm_enable_irq
 1547 028c 00000000 		.word	actuator_get_hard_stop_hall
 1548 0290 00000000 		.word	xTaskGetTickCount
 1549 0294 00000000 		.word	__aeabi_i2f
 1550 0298 00000000 		.word	__aeabi_fmul
 1551 029c 00000000 		.word	__aeabi_fadd
 1552 02a0 00000000 		.word	__aeabi_f2iz
 1553 02a4 905F0100 		.word	90000
 1554 02a8 775D0200 		.word	154999
 1555 02ac 00000000 		.word	hal_pwm_init
 1556 02b0 00000000 		.word	hal_pwm_start
 1557 02b4 00000000 		.word	hal_pwm_stop
 1558 02b8 A5010000 		.word	.LC22
 1559 02bc 00000000 		.word	__aeabi_fcmpge
 1560 02c0 6666663F 		.word	1063675494
 1561 02c4 9A99993E 		.word	1050253722
 1562 02c8 3333333F 		.word	1060320051
 1563 02cc 00000000 		.word	xQueueGenericReceive
 1564              	.L131:
 787:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				}
 1565              		.loc 1 787 0
 1566 02d0 94F83430 		ldrb	r3, [r4, #52]	@ zero_extendqisi2
 1567 02d4 5B42     		negs	r3, r3
 1568 02d6 84F83430 		strb	r3, [r4, #52]
 1569              	.L94:
 789:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				float extra_pulses_comp = cl_param->extra_num_pulses;
 1570              		.loc 1 789 0
 1571 02da 84F835B0 		strb	fp, [r4, #53]
 790:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				if (is_fine_mode)
 1572              		.loc 1 790 0
 1573 02de B5F93C00 		ldrsh	r0, [r5, #60]
 1574 02e2 5F4F     		ldr	r7, .L135
 1575 02e4 B847     		blx	r7
 1576              	.LVL188:
 791:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 1577              		.loc 1 791 0
 1578 02e6 099B     		ldr	r3, [sp, #36]
 790:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				if (is_fine_mode)
 1579              		.loc 1 790 0
 1580 02e8 8346     		mov	fp, r0
 1581              	.LVL189:
 791:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 1582              		.loc 1 791 0
 1583 02ea 002B     		cmp	r3, #0
 1584 02ec 31D0     		beq	.L97
 794:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    if (extra_pulses_comp < PIEZO_MIN_EXTRA_PULSES)
 1585              		.loc 1 794 0
 1586 02ee 0898     		ldr	r0, [sp, #32]
 1587              	.LVL190:
 1588 02f0 B847     		blx	r7
 1589              	.LVL191:
 1590 02f2 0990     		str	r0, [sp, #36]
 1591 02f4 5046     		mov	r0, r10
 1592 02f6 B847     		blx	r7
 1593              	.LVL192:
 1594 02f8 5A4A     		ldr	r2, .L135+4
 1595 02fa 0146     		mov	r1, r0
 1596 02fc 0D98     		ldr	r0, [sp, #52]	@ float
 1597 02fe 9047     		blx	r2
 1598              	.LVL193:
 1599 0300 099B     		ldr	r3, [sp, #36]
 1600 0302 0146     		mov	r1, r0
 1601 0304 1846     		mov	r0, r3
 1602 0306 584B     		ldr	r3, .L135+8
 1603 0308 9847     		blx	r3
 1604              	.LVL194:
 795:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				        extra_pulses_comp = PIEZO_MIN_EXTRA_PULSES;
 1605              		.loc 1 795 0
 1606 030a 5849     		ldr	r1, .L135+12
 1607 030c 584B     		ldr	r3, .L135+16
 794:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    if (extra_pulses_comp < PIEZO_MIN_EXTRA_PULSES)
 1608              		.loc 1 794 0
 1609 030e 0746     		mov	r7, r0
 1610              	.LVL195:
 795:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				        extra_pulses_comp = PIEZO_MIN_EXTRA_PULSES;
 1611              		.loc 1 795 0
 1612 0310 9847     		blx	r3
 1613              	.LVL196:
 1614 0312 30B9     		cbnz	r0, .L117
 797:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				        extra_pulses_comp = PIEZO_MAX_EXTRA_PULSES;
 1615              		.loc 1 797 0
 1616 0314 3846     		mov	r0, r7
 1617 0316 5749     		ldr	r1, .L135+20
 1618 0318 574B     		ldr	r3, .L135+24
 1619 031a 9847     		blx	r3
 1620              	.LVL197:
 1621 031c 10B1     		cbz	r0, .L98
 798:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    cl_param->extra_num_pulses = 0.5f * cl_param->extra_num_pulses + 0.5f * extra_pulses_comp;
 1622              		.loc 1 798 0
 1623 031e 554F     		ldr	r7, .L135+20
 1624              	.LVL198:
 1625 0320 00E0     		b	.L98
 1626              	.LVL199:
 1627              	.L117:
 796:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				    else if (extra_pulses_comp > PIEZO_MAX_EXTRA_PULSES)
 1628              		.loc 1 796 0
 1629 0322 524F     		ldr	r7, .L135+12
 1630              	.LVL200:
 1631              	.L98:
 799:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				}
 1632              		.loc 1 799 0
 1633 0324 4F4B     		ldr	r3, .L135+4
 1634 0326 5846     		mov	r0, fp
 1635 0328 4FF07C51 		mov	r1, #1056964608
 1636 032c 0993     		str	r3, [sp, #36]
 1637 032e 9847     		blx	r3
 1638              	.LVL201:
 1639 0330 4FF07C51 		mov	r1, #1056964608
 1640 0334 099B     		ldr	r3, [sp, #36]
 1641 0336 8346     		mov	fp, r0
 1642 0338 3846     		mov	r0, r7
 1643 033a 9847     		blx	r3
 1644              	.LVL202:
 1645 033c 4F4B     		ldr	r3, .L135+28
 1646 033e 0146     		mov	r1, r0
 1647 0340 5846     		mov	r0, fp
 1648 0342 9847     		blx	r3
 1649              	.LVL203:
 1650 0344 4E4B     		ldr	r3, .L135+32
 1651 0346 9847     		blx	r3
 1652              	.LVL204:
 1653 0348 A887     		strh	r0, [r5, #60]	@ movhi
 802:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                     if (actual_move == 0) {
 1654              		.loc 1 802 0
 1655 034a BAF1000F 		cmp	r10, #0
 1656 034e 06D1     		bne	.L100
 1657 0350 31E0     		b	.L101
 1658              	.LVL205:
 1659              	.L97:
 1660 0352 BAF1000F 		cmp	r10, #0
 1661 0356 01D1     		bne	.L118
 1662              	.LVL206:
 1663              	.L103:
 804:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                     } else {
 1664              		.loc 1 804 0
 1665 0358 4A4F     		ldr	r7, .L135+36
 1666 035a 1CE0     		b	.L102
 1667              	.LVL207:
 1668              	.L118:
 790:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				if (is_fine_mode)
 1669              		.loc 1 790 0
 1670 035c 0746     		mov	r7, r0
 1671              	.LVL208:
 1672              	.L100:
 806:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                         if (weight > MAX_PIEZO_LOOP_WEIGHT)
 1673              		.loc 1 806 0
 1674 035e DFF800B1 		ldr	fp, .L135
 1675 0362 0898     		ldr	r0, [sp, #32]
 1676 0364 D847     		blx	fp
 1677              	.LVL209:
 1678 0366 3946     		mov	r1, r7
 1679 0368 3F4B     		ldr	r3, .L135+8
 1680 036a 9847     		blx	r3
 1681              	.LVL210:
 1682 036c 0746     		mov	r7, r0
 1683              	.LVL211:
 1684 036e 5046     		mov	r0, r10
 1685 0370 D847     		blx	fp
 1686              	.LVL212:
 1687 0372 454B     		ldr	r3, .L135+40
 1688 0374 0146     		mov	r1, r0
 1689 0376 3846     		mov	r0, r7
 1690 0378 9847     		blx	r3
 1691              	.LVL213:
 807:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                             weight = MAX_PIEZO_LOOP_WEIGHT;
 1692              		.loc 1 807 0
 1693 037a 4249     		ldr	r1, .L135+36
 1694 037c 3E4B     		ldr	r3, .L135+24
 806:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                         if (weight > MAX_PIEZO_LOOP_WEIGHT)
 1695              		.loc 1 806 0
 1696 037e 0746     		mov	r7, r0
 1697              	.LVL214:
 807:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                             weight = MAX_PIEZO_LOOP_WEIGHT;
 1698              		.loc 1 807 0
 1699 0380 9847     		blx	r3
 1700              	.LVL215:
 1701 0382 0028     		cmp	r0, #0
 1702 0384 E8D1     		bne	.L103
 809:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                             weight = MIN_PIEZO_LOOP_WEIGHT;
 1703              		.loc 1 809 0
 1704 0386 3846     		mov	r0, r7
 1705 0388 4FF07C51 		mov	r1, #1056964608
 1706 038c 384B     		ldr	r3, .L135+16
 1707 038e 9847     		blx	r3
 1708              	.LVL216:
 1709 0390 08B1     		cbz	r0, .L102
 810:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                     }
 1710              		.loc 1 810 0
 1711 0392 4FF07C57 		mov	r7, #1056964608
 1712              	.LVL217:
 1713              	.L102:
 812:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				}
 1714              		.loc 1 812 0
 1715 0396 DFF8CCA0 		ldr	r10, .L135+4
 1716              	.LVL218:
 1717 039a 4FF07C51 		mov	r1, #1056964608
 1718 039e A86B     		ldr	r0, [r5, #56]	@ float
 1719 03a0 D047     		blx	r10
 1720              	.LVL219:
 1721 03a2 4FF07C51 		mov	r1, #1056964608
 1722 03a6 8346     		mov	fp, r0
 1723 03a8 3846     		mov	r0, r7
 1724 03aa D047     		blx	r10
 1725              	.LVL220:
 1726 03ac 334B     		ldr	r3, .L135+28
 1727 03ae 0146     		mov	r1, r0
 1728 03b0 5846     		mov	r0, fp
 1729 03b2 9847     		blx	r3
 1730              	.LVL221:
 1731 03b4 A863     		str	r0, [r5, #56]	@ float
 1732              	.LVL222:
 1733              	.L101:
 821:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 1734              		.loc 1 821 0
 1735 03b6 0E9B     		ldr	r3, [sp, #56]
 1736 03b8 F71A     		subs	r7, r6, r3
 1737 03ba 002F     		cmp	r7, #0
 1738 03bc B8BF     		it	lt
 1739 03be 7F42     		rsblt	r7, r7, #0
 823:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			}
 1740              		.loc 1 823 0
 1741 03c0 324B     		ldr	r3, .L135+44
 821:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 1742              		.loc 1 821 0
 1743 03c2 BFB2     		uxth	r7, r7
 1744              	.LVL223:
 823:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			}
 1745              		.loc 1 823 0
 1746 03c4 9847     		blx	r3
 1747              	.LVL224:
 1748 03c6 99E6     		b	.L82
 1749              	.LVL225:
 1750              	.L120:
 1751              	.LBE48:
 1752 03c8 0027     		movs	r7, #0
 1753              	.LVL226:
 1754              	.L93:
 825:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					(end_tick_count - start_tick_count));
 1755              		.loc 1 825 0
 1756 03ca 0E9B     		ldr	r3, [sp, #56]
 1757 03cc 2046     		mov	r0, r4
 1758 03ce 1021     		movs	r1, #16
 1759 03d0 2F4A     		ldr	r2, .L135+48
 1760 03d2 304D     		ldr	r5, .L135+52
 1761 03d4 A847     		blx	r5
 1762              	.LVL227:
 829:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			piezo->last_move_hall_code = current_position;
 1763              		.loc 1 829 0
 1764 03d6 BDF84230 		ldrh	r3, [sp, #66]
 1765 03da A9F80030 		strh	r3, [r9]	@ movhi
 830:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		}
 1766              		.loc 1 830 0
 1767 03de 6385     		strh	r3, [r4, #42]	@ movhi
 1768              	.LBE46:
 833:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		{
 1769              		.loc 1 833 0
 1770 03e0 B8F1000F 		cmp	r8, #0
 1771 03e4 0AD0     		beq	.L106
 1772              	.LVL228:
 1773              	.L109:
 835:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			piezo->last_move_hall_code = *target_position;
 1774              		.loc 1 835 0
 1775 03e6 0023     		movs	r3, #0
 837:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			piezo_ret = ACTUATOR_HALL_TIMED_OUT;
 1776              		.loc 1 837 0
 1777 03e8 2046     		mov	r0, r4
 1778 03ea 0221     		movs	r1, #2
 835:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			piezo->last_move_hall_code = *target_position;
 1779              		.loc 1 835 0
 1780 03ec A9F80030 		strh	r3, [r9]	@ movhi
 838:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		}
 1781              		.loc 1 838 0
 1782 03f0 0827     		movs	r7, #8
 836:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			log_piezo_msg(piezo, SLOG_ERROR, "Hall access timed out");
 1783              		.loc 1 836 0
 1784 03f2 6385     		strh	r3, [r4, #42]	@ movhi
 837:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			piezo_ret = ACTUATOR_HALL_TIMED_OUT;
 1785              		.loc 1 837 0
 1786 03f4 284A     		ldr	r2, .L135+56
 1787 03f6 274B     		ldr	r3, .L135+52
 1788 03f8 9847     		blx	r3
 1789              	.LVL229:
 1790 03fa 0DE0     		b	.L107
 1791              	.LVL230:
 1792              	.L106:
 840:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		{
 1793              		.loc 1 840 0
 1794 03fc F61A     		subs	r6, r6, r3
 1795 03fe 002E     		cmp	r6, #0
 1796 0400 0F9B     		ldr	r3, [sp, #60]
 1797 0402 B8BF     		it	lt
 1798 0404 7642     		rsblt	r6, r6, #0
 1799 0406 9E42     		cmp	r6, r3
 1800 0408 06DD     		ble	.L107
 842:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             {
 1801              		.loc 1 842 0
 1802 040a 0A9B     		ldr	r3, [sp, #40]
 1803 040c 23B9     		cbnz	r3, .L107
 844:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 piezo_ret = ACTUATOR_MOVE_TIMED_OUT;
 1804              		.loc 1 844 0
 1805 040e 2046     		mov	r0, r4
 1806 0410 0221     		movs	r1, #2
 1807 0412 224A     		ldr	r2, .L135+60
 845:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             }
 1808              		.loc 1 845 0
 1809 0414 0A27     		movs	r7, #10
 1810              	.LVL231:
 844:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 piezo_ret = ACTUATOR_MOVE_TIMED_OUT;
 1811              		.loc 1 844 0
 1812 0416 A847     		blx	r5
 1813              	.LVL232:
 1814              	.L107:
 850:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         log_piezo_msg(piezo, SLOG_DEBUG, "PWM frequency: %u, Weight/extra_num_pulses: %f, %i; %f, %
 1815              		.loc 1 850 0
 1816 0418 214A     		ldr	r2, .L135+64
 1817 041a BDF84230 		ldrh	r3, [sp, #66]
 1818 041e 2046     		mov	r0, r4
 1819 0420 0821     		movs	r1, #8
 1820 0422 1C4D     		ldr	r5, .L135+52
 1821 0424 A847     		blx	r5
 1822              	.LVL233:
 851:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 piezo->piezo_param.pwm_freq,
 1823              		.loc 1 851 0
 1824 0426 1F4E     		ldr	r6, .L135+68
 1825 0428 A06B     		ldr	r0, [r4, #56]	@ float
 1826 042a B047     		blx	r6
 1827              	.LVL234:
 1828 042c CDE90001 		strd	r0, [sp]
 1829 0430 B4F93C30 		ldrsh	r3, [r4, #60]
 1830 0434 0293     		str	r3, [sp, #8]
 1831 0436 206C     		ldr	r0, [r4, #64]	@ float
 1832 0438 B047     		blx	r6
 1833              	.LVL235:
 1834 043a 1B4A     		ldr	r2, .L135+72
 1835 043c CDE90401 		strd	r0, [sp, #16]
 1836 0440 2046     		mov	r0, r4
 1837 0442 B4F94430 		ldrsh	r3, [r4, #68]
 1838 0446 1021     		movs	r1, #16
 1839 0448 0693     		str	r3, [sp, #24]
 1840 044a 236B     		ldr	r3, [r4, #48]
 1841 044c A847     		blx	r5
 1842              	.LVL236:
 1843 044e 02E0     		b	.L130
 1844              	.LVL237:
 1845              	.L83:
 1846              	.LBB60:
 1847              	.LBB59:
 722:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					duty_cycle = ACTUATOR_DUTY_LOW;
 1848              		.loc 1 722 0
 1849 0450 0123     		movs	r3, #1
 1850 0452 0993     		str	r3, [sp, #36]
 1851              	.LVL238:
 1852 0454 6EE6     		b	.L111
 1853              	.LVL239:
 1854              	.L130:
 1855              	.LBE59:
 1856              	.LBE60:
 1857              	.LBE45:
 858:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 1858              		.loc 1 858 0
 1859 0456 3846     		mov	r0, r7
 1860 0458 1FB0     		add	sp, sp, #124
 1861              	.LCFI16:
 1862              		.cfi_def_cfa_offset 36
 1863              		@ sp needed
 1864 045a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1865              	.LVL240:
 1866              	.L136:
 1867 045e 00BF     		.align	2
 1868              	.L135:
 1869 0460 00000000 		.word	__aeabi_i2f
 1870 0464 00000000 		.word	__aeabi_fmul
 1871 0468 00000000 		.word	__aeabi_fsub
 1872 046c 0000A0C1 		.word	-1046478848
 1873 0470 00000000 		.word	__aeabi_fcmplt
 1874 0474 00002042 		.word	1109393408
 1875 0478 00000000 		.word	__aeabi_fcmpgt
 1876 047c 00000000 		.word	__aeabi_fadd
 1877 0480 00000000 		.word	__aeabi_f2iz
 1878 0484 00004842 		.word	1112014848
 1879 0488 00000000 		.word	__aeabi_fdiv
 1880 048c 00000000 		.word	xTaskGetTickCount
 1881 0490 C7010000 		.word	.LC23
 1882 0494 00000000 		.word	log_piezo_msg
 1883 0498 F4010000 		.word	.LC24
 1884 049c 0A020000 		.word	.LC25
 1885 04a0 1D020000 		.word	.LC26
 1886 04a4 00000000 		.word	__aeabi_f2d
 1887 04a8 35020000 		.word	.LC27
 1888              		.cfi_endproc
 1889              	.LFE8:
 1891              		.section	.text.actuator_calibrate,"ax",%progbits
 1892              		.align	1
 1893              		.global	actuator_calibrate
 1894              		.thumb
 1895              		.thumb_func
 1897              	actuator_calibrate:
 1898              	.LFB2:
 350:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	actuator_return_t piezo_ret = ACTUATOR_OK;
 1899              		.loc 1 350 0
 1900              		.cfi_startproc
 1901              		@ args = 0, pretend = 0, frame = 24
 1902              		@ frame_needed = 1, uses_anonymous_args = 0
 1903              	.LVL241:
 1904 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1905              	.LCFI17:
 1906              		.cfi_def_cfa_offset 36
 1907              		.cfi_offset 4, -36
 1908              		.cfi_offset 5, -32
 1909              		.cfi_offset 6, -28
 1910              		.cfi_offset 7, -24
 1911              		.cfi_offset 8, -20
 1912              		.cfi_offset 9, -16
 1913              		.cfi_offset 10, -12
 1914              		.cfi_offset 11, -8
 1915              		.cfi_offset 14, -4
 1916 0004 87B0     		sub	sp, sp, #28
 1917              	.LCFI18:
 1918              		.cfi_def_cfa_offset 64
 354:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_NULL_PTR;
 1919              		.loc 1 354 0
 1920 0006 0446     		mov	r4, r0
 350:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	actuator_return_t piezo_ret = ACTUATOR_OK;
 1921              		.loc 1 350 0
 1922 0008 00AF     		add	r7, sp, #0
 1923              	.LCFI19:
 1924              		.cfi_def_cfa_register 7
 354:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_NULL_PTR;
 1925              		.loc 1 354 0
 1926 000a 0028     		cmp	r0, #0
 1927 000c 00F0F780 		beq	.L148
 356:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_INVALID_TYPE;
 1928              		.loc 1 356 0
 1929 0010 8578     		ldrb	r5, [r0, #2]	@ zero_extendqisi2
 1930 0012 012D     		cmp	r5, #1
 1931 0014 00F20481 		bhi	.L149
 358:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_UNSUPPORTED_CAM_GROUP;
 1932              		.loc 1 358 0
 1933 0018 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 1934 001a 03F0F003 		and	r3, r3, #240
 1935 001e A02B     		cmp	r3, #160
 1936 0020 00F00081 		beq	.L150
 360:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_UNINITIALIZED;
 1937              		.loc 1 360 0
 1938 0024 90F82830 		ldrb	r3, [r0, #40]	@ zero_extendqisi2
 1939 0028 002B     		cmp	r3, #0
 1940 002a 00F0FD80 		beq	.L151
 364:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		{
 1941              		.loc 1 364 0
 1942 002e 002D     		cmp	r5, #0
 1943 0030 00F0DB80 		beq	.L139
 1944              	.LBB67:
 373:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			i2c_t		i2c_chid = piezo->hall_i2c;
 1945              		.loc 1 373 0
 1946 0034 436A     		ldr	r3, [r0, #36]
 385:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 1947              		.loc 1 385 0
 1948 0036 4FF6E852 		movw	r2, #65000
 373:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			i2c_t		i2c_chid = piezo->hall_i2c;
 1949              		.loc 1 373 0
 1950 003a FB60     		str	r3, [r7, #12]
 375:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			uint16_t	far_positions[hall_obj->nbo_sensitivities];
 1951              		.loc 1 375 0
 1952 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1953 003e 5B00     		lsls	r3, r3, #1
 374:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			uint16_t	near_positions[hall_obj->nbo_sensitivities];
 1954              		.loc 1 374 0
 1955 0040 90F80390 		ldrb	r9, [r0, #3]	@ zero_extendqisi2
 371:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			hall_return_t	hall_ret = HALL_OK;
 1956              		.loc 1 371 0
 1957 0044 066A     		ldr	r6, [r0, #32]
 1958              	.LVL242:
 375:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			uint16_t	far_positions[hall_obj->nbo_sensitivities];
 1959              		.loc 1 375 0
 1960 0046 0833     		adds	r3, r3, #8
 1961 0048 23F00703 		bic	r3, r3, #7
 1962 004c C7F804D0 		str	sp, [r7, #4]
 1963 0050 ADEB030D 		sub	sp, sp, r3
 1964 0054 EB46     		mov	fp, sp
 1965              	.LVL243:
 376:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #if(LOG_VERBOSE == STD_ON)
 1966              		.loc 1 376 0
 1967 0056 ADEB030D 		sub	sp, sp, r3
 385:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 1968              		.loc 1 385 0
 1969 005a 7368     		ldr	r3, [r6, #4]
 391:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			/* sensitivity hard coded to 1 */
 1970              		.loc 1 391 0
 1971 005c 0021     		movs	r1, #0
 1972 005e 4846     		mov	r0, r9
 1973              	.LVL244:
 385:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 1974              		.loc 1 385 0
 1975 0060 A3F5AF33 		sub	r3, r3, #89600
 1976 0064 A3F5C873 		sub	r3, r3, #400
 1977 0068 9342     		cmp	r3, r2
 376:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #if(LOG_VERBOSE == STD_ON)
 1978              		.loc 1 376 0
 1979 006a C7F808D0 		str	sp, [r7, #8]
 1980              	.LVL245:
 388:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			}
 1981              		.loc 1 388 0
 1982 006e 84BF     		itt	hi
 1983 0070 6E4B     		ldrhi	r3, .L163
 1984 0072 7360     		strhi	r3, [r6, #4]
 1985              	.LVL246:
 391:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			/* sensitivity hard coded to 1 */
 1986              		.loc 1 391 0
 1987 0074 FB68     		ldr	r3, [r7, #12]
 1988 0076 5B68     		ldr	r3, [r3, #4]
 1989 0078 9847     		blx	r3
 1990              	.LVL247:
 393:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 1991              		.loc 1 393 0
 1992 007a FB68     		ldr	r3, [r7, #12]
 1993 007c 4846     		mov	r0, r9
 1994 007e 0121     		movs	r1, #1
 1995 0080 9B68     		ldr	r3, [r3, #8]
 1996 0082 9847     		blx	r3
 1997              	.LVL248:
 1998 0084 DFF8D4C1 		ldr	ip, .L163+48
 395:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 1999              		.loc 1 395 0
 2000 0088 8246     		mov	r10, r0
 2001 008a 0028     		cmp	r0, #0
 2002 008c 40F0C280 		bne	.L141
 397:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* read hall sensor at the nearest position */
 2003              		.loc 1 397 0
 2004 0090 7368     		ldr	r3, [r6, #4]
 2005 0092 07F11801 		add	r1, r7, #24
 2006 0096 2363     		str	r3, [r4, #48]
 2007              	.LVL249:
 2008 0098 4FF6FF73 		movw	r3, #65535
 2009              	.LBB68:
 2010              	.LBB69:
 577:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 2011              		.loc 1 577 0
 2012 009c 5246     		mov	r2, r10
 2013 009e 2046     		mov	r0, r4
 2014              	.LVL250:
 2015 00a0 21F8043D 		strh	r3, [r1, #-4]!	@ movhi
 2016              	.LVL251:
 2017 00a4 0123     		movs	r3, #1
 2018 00a6 624D     		ldr	r5, .L163+4
 2019 00a8 C7F800C0 		str	ip, [r7]
 2020 00ac A847     		blx	r5
 2021              	.LVL252:
 2022              	.LBE69:
 2023              	.LBE68:
 400:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 														near_positions);
 2024              		.loc 1 400 0
 2025 00ae FB68     		ldr	r3, [r7, #12]
 2026 00b0 5946     		mov	r1, fp
 2027 00b2 1B69     		ldr	r3, [r3, #16]
 2028              	.LBB71:
 2029              	.LBB70:
 577:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 2030              		.loc 1 577 0
 2031 00b4 8046     		mov	r8, r0
 2032              	.LBE70:
 2033              	.LBE71:
 400:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 														near_positions);
 2034              		.loc 1 400 0
 2035 00b6 4846     		mov	r0, r9
 2036 00b8 9847     		blx	r3
 2037              	.LVL253:
 2038 00ba 07F11801 		add	r1, r7, #24
 2039              	.LBB72:
 2040              	.LBB73:
 577:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 2041              		.loc 1 577 0
 2042 00be 5246     		mov	r2, r10
 2043 00c0 0123     		movs	r3, #1
 2044 00c2 21F802AD 		strh	r10, [r1, #-2]!	@ movhi
 2045              	.LBE73:
 2046              	.LBE72:
 400:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 														near_positions);
 2047              		.loc 1 400 0
 2048 00c6 40EA0800 		orr	r0, r0, r8
 2049 00ca 5FFA80F8 		uxtb	r8, r0
 2050              	.LVL254:
 2051              	.LBB75:
 2052              	.LBB74:
 577:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 2053              		.loc 1 577 0
 2054 00ce 2046     		mov	r0, r4
 2055 00d0 A847     		blx	r5
 2056              	.LVL255:
 2057              	.LBE74:
 2058              	.LBE75:
 404:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 														far_positions);
 2059              		.loc 1 404 0
 2060 00d2 FB68     		ldr	r3, [r7, #12]
 2061 00d4 B968     		ldr	r1, [r7, #8]
 2062 00d6 1B69     		ldr	r3, [r3, #16]
 403:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hall_ret |= hall_obj->scan_sensitivities(i2c_chid,
 2063              		.loc 1 403 0
 2064 00d8 48EA0000 		orr	r0, r8, r0
 2065 00dc 5FFA80F8 		uxtb	r8, r0
 2066              	.LVL256:
 404:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 														far_positions);
 2067              		.loc 1 404 0
 2068 00e0 4846     		mov	r0, r9
 2069 00e2 9847     		blx	r3
 2070              	.LVL257:
 408:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 2071              		.loc 1 408 0
 2072 00e4 D7F800C0 		ldr	ip, [r7]
 404:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 														far_positions);
 2073              		.loc 1 404 0
 2074 00e8 48EA0000 		orr	r0, r8, r0
 2075              	.LVL258:
 408:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 2076              		.loc 1 408 0
 2077 00ec 10F0FF00 		ands	r0, r0, #255
 2078 00f0 40F09080 		bne	.L141
 2079              	.LVL259:
 2080              	.LBB76:
 431:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					far_position = far_positions[sensitivity];
 2081              		.loc 1 431 0
 2082 00f4 BBF80280 		ldrh	r8, [fp, #2]
 2083              	.LVL260:
 432:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 2084              		.loc 1 432 0
 2085 00f8 BB68     		ldr	r3, [r7, #8]
 2086 00fa B3F802A0 		ldrh	r10, [r3, #2]
 2087              	.LVL261:
 434:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						polarity_reversal = FALSE;
 2088              		.loc 1 434 0
 2089 00fe D045     		cmp	r8, r10
 2090              	.LVL262:
 435:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					else
 2091              		.loc 1 435 0
 2092 0100 8CBF     		ite	hi
 2093 0102 8346     		movhi	fp, r0
 2094              	.LVL263:
 439:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						near_position = hall_obj->max_position - near_position;
 2095              		.loc 1 439 0
 2096 0104 4FF0010B 		movls	fp, #1
 2097              	.LBE76:
 471:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				SLOGF(SLOG_INFO, "Best hall polarity reversal: %d",
 2098              		.loc 1 471 0
 2099 0108 2046     		mov	r0, r4
 2100 010a 4FF01001 		mov	r1, #16
 2101              	.LBB77:
 440:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						far_position = hall_obj->max_position - far_position;
 2102              		.loc 1 440 0
 2103 010e 9CBF     		itt	ls
 2104 0110 FB68     		ldrls	r3, [r7, #12]
 2105 0112 5B88     		ldrhls	r3, [r3, #2]
 2106              	.LBE77:
 471:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				SLOGF(SLOG_INFO, "Best hall polarity reversal: %d",
 2107              		.loc 1 471 0
 2108 0114 474A     		ldr	r2, .L163+8
 2109              	.LBB78:
 440:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						far_position = hall_obj->max_position - far_position;
 2110              		.loc 1 440 0
 2111 0116 9FBF     		itttt	ls
 2112 0118 C8EB0308 		rsbls	r8, r8, r3
 2113              	.LVL264:
 441:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					}
 2114              		.loc 1 441 0
 2115 011c CAEB030A 		rsbls	r10, r10, r3
 2116              	.LVL265:
 440:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						far_position = hall_obj->max_position - far_position;
 2117              		.loc 1 440 0
 2118 0120 1FFA88F8 		uxthls	r8, r8
 2119              	.LVL266:
 441:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					}
 2120              		.loc 1 441 0
 2121 0124 1FFA8AFA 		uxthls	r10, r10
 2122              	.LVL267:
 444:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 2123              		.loc 1 444 0
 2124 0128 CAEB0803 		rsb	r3, r10, r8
 2125              	.LBE78:
 472:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						best_polarity_reversal);
 2126              		.loc 1 472 0
 2127 012c 424D     		ldr	r5, .L163+12
 2128              	.LBB79:
 444:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 2129              		.loc 1 444 0
 2130 012e 9BB2     		uxth	r3, r3
 2131 0130 BB60     		str	r3, [r7, #8]
 2132              	.LVL268:
 2133              	.LBE79:
 471:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				SLOGF(SLOG_INFO, "Best hall polarity reversal: %d",
 2134              		.loc 1 471 0
 2135 0132 E047     		blx	ip
 2136              	.LVL269:
 472:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						best_polarity_reversal);
 2137              		.loc 1 472 0
 2138 0134 2720     		movs	r0, #39
 2139 0136 0821     		movs	r1, #8
 2140 0138 404A     		ldr	r2, .L163+16
 2141 013a 5B46     		mov	r3, fp
 2142 013c A847     		blx	r5
 2143              	.LVL270:
 474:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						best_sensitivity);
 2144              		.loc 1 474 0
 2145 013e 2720     		movs	r0, #39
 2146 0140 0821     		movs	r1, #8
 2147 0142 3F4A     		ldr	r2, .L163+20
 2148 0144 0123     		movs	r3, #1
 2149 0146 A847     		blx	r5
 2150              	.LVL271:
 476:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							SLOG_INFO : SLOG_ERROR,
 2151              		.loc 1 476 0
 2152 0148 BB68     		ldr	r3, [r7, #8]
 2153 014a 2720     		movs	r0, #39
 2154 014c 632B     		cmp	r3, #99
 2155 014e 8CBF     		ite	hi
 2156 0150 4FF0080C 		movhi	ip, #8
 2157 0154 4FF0020C 		movls	ip, #2
 2158 0158 3A4A     		ldr	r2, .L163+24
 2159 015a 5346     		mov	r3, r10
 2160 015c 6146     		mov	r1, ip
 2161 015e C7F800C0 		str	ip, [r7]
 2162 0162 A847     		blx	r5
 2163              	.LVL272:
 479:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							SLOG_INFO : SLOG_ERROR,
 2164              		.loc 1 479 0
 2165 0164 D7F800C0 		ldr	ip, [r7]
 2166 0168 4346     		mov	r3, r8
 2167 016a 2720     		movs	r0, #39
 2168 016c 6146     		mov	r1, ip
 2169 016e 364A     		ldr	r2, .L163+28
 2170 0170 A847     		blx	r5
 2171              	.LVL273:
 487:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				(best_hall_stroke >= ACTUATOR_MIN_STROKE))
 2172              		.loc 1 487 0
 2173 0172 BB68     		ldr	r3, [r7, #8]
 2174 0174 632B     		cmp	r3, #99
 2175 0176 35D9     		bls	.L156
 491:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				calib_data->hard_stop[1] = farthest_position;
 2176              		.loc 1 491 0
 2177 0178 A6F80A80 		strh	r8, [r6, #10]	@ movhi
 494:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				calib_data->verification = FLASH_CALIB_VERIFICATION;
 2178              		.loc 1 494 0
 2179 017c 4FF00108 		mov	r8, #1
 2180              	.LVL274:
 495:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* and write into the FLASH */
 2181              		.loc 1 495 0
 2182 0180 324B     		ldr	r3, .L163+32
 497:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 											piezo->cam_info.idx - 1, 1);
 2183              		.loc 1 497 0
 2184 0182 4146     		mov	r1, r8
 495:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				/* and write into the FLASH */
 2185              		.loc 1 495 0
 2186 0184 3360     		str	r3, [r6]
 492:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				calib_data->polarity = best_polarity_reversal;
 2187              		.loc 1 492 0
 2188 0186 A6F80CA0 		strh	r10, [r6, #12]	@ movhi
 493:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				calib_data->sensitivity = best_sensitivity;
 2189              		.loc 1 493 0
 2190 018a 86F80EB0 		strb	fp, [r6, #14]
 494:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				calib_data->verification = FLASH_CALIB_VERIFICATION;
 2191              		.loc 1 494 0
 2192 018e 86F80F80 		strb	r8, [r6, #15]
 498:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				flash_write((FLASH_CALIB_SUB_SECTOR + piezo->cam_info.idx - 1) *
 2193              		.loc 1 498 0
 2194 0192 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 497:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 											piezo->cam_info.idx - 1, 1);
 2195              		.loc 1 497 0
 2196 0194 00F00F00 		and	r0, r0, #15
 2197 0198 2D4B     		ldr	r3, .L163+36
 2198 019a 00F24F10 		addw	r0, r0, #335
 2199 019e 9847     		blx	r3
 2200              	.LVL275:
 499:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 								FLASH_SUB_SECTOR_SIZE,
 2201              		.loc 1 499 0
 2202 01a0 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 2203 01a2 00F00F00 		and	r0, r0, #15
 2204 01a6 00F24F10 		addw	r0, r0, #335
 2205 01aa 1021     		movs	r1, #16
 2206 01ac 226A     		ldr	r2, [r4, #32]
 2207 01ae 4346     		mov	r3, r8
 2208 01b0 284E     		ldr	r6, .L163+40
 2209              	.LVL276:
 2210 01b2 0003     		lsls	r0, r0, #12
 2211 01b4 B047     		blx	r6
 2212              	.LVL277:
 502:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 								"Wring to FLASH was successful");
 2213              		.loc 1 502 0
 2214 01b6 284A     		ldr	r2, .L163+44
 2215 01b8 2046     		mov	r0, r4
 2216 01ba 1021     		movs	r1, #16
 2217 01bc 274B     		ldr	r3, .L163+48
 2218 01be 9847     		blx	r3
 2219              	.LVL278:
 505:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 											best_polarity_reversal);
 2220              		.loc 1 505 0
 2221 01c0 FB68     		ldr	r3, [r7, #12]
 2222 01c2 5946     		mov	r1, fp
 2223 01c4 4846     		mov	r0, r9
 2224 01c6 5B68     		ldr	r3, [r3, #4]
 2225 01c8 9847     		blx	r3
 2226              	.LVL279:
 507:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 											best_sensitivity);
 2227              		.loc 1 507 0
 2228 01ca FB68     		ldr	r3, [r7, #12]
 2229 01cc 4146     		mov	r1, r8
 2230 01ce 9B68     		ldr	r3, [r3, #8]
 505:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 											best_polarity_reversal);
 2231              		.loc 1 505 0
 2232 01d0 0646     		mov	r6, r0
 2233              	.LVL280:
 507:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 											best_sensitivity);
 2234              		.loc 1 507 0
 2235 01d2 4846     		mov	r0, r9
 2236 01d4 9847     		blx	r3
 2237              	.LVL281:
 2238 01d6 3043     		orrs	r0, r0, r6
 2239              	.LVL282:
 511:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							((best_hall_stroke >= ACTUATOR_MIN_STROKE) ?
 2240              		.loc 1 511 0
 2241 01d8 C0B2     		uxtb	r0, r0
 2242 01da 0028     		cmp	r0, #0
 2243 01dc 14BF     		ite	ne
 2244 01de 0825     		movne	r5, #8
 2245 01e0 0025     		moveq	r5, #0
 2246 01e2 00E0     		b	.L145
 2247              	.LVL283:
 2248              	.L156:
 2249 01e4 0A25     		movs	r5, #10
 2250              	.LVL284:
 2251              	.L145:
 2252 01e6 D7F804D0 		ldr	sp, [r7, #4]
 2253              	.LVL285:
 2254              	.L139:
 2255              	.LBE67:
 518:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 2256              		.loc 1 518 0
 2257 01ea B5FA85F3 		clz	r3, r5
 2258 01ee 5B09     		lsrs	r3, r3, #5
 2259 01f0 84F82930 		strb	r3, [r4, #41]
 522:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		log_piezo_msg(piezo, SLOG_DEBUG, "Piezo calibration was successful");
 2260              		.loc 1 522 0
 2261 01f4 23B1     		cbz	r3, .L146
 523:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else
 2262              		.loc 1 523 0
 2263 01f6 2046     		mov	r0, r4
 2264 01f8 1021     		movs	r1, #16
 2265 01fa 194A     		ldr	r2, .L163+52
 2266 01fc 03E0     		b	.L162
 2267              	.LVL286:
 2268              	.L148:
 355:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else if (!IS_ACTUATOR_TYPE(piezo->type))
 2269              		.loc 1 355 0
 2270 01fe 0225     		movs	r5, #2
 2271              	.LVL287:
 2272              	.L146:
 525:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #endif
 2273              		.loc 1 525 0
 2274 0200 184A     		ldr	r2, .L163+56
 2275 0202 2046     		mov	r0, r4
 2276 0204 0221     		movs	r1, #2
 2277              	.LVL288:
 2278              	.L162:
 2279 0206 154B     		ldr	r3, .L163+48
 2280 0208 9847     		blx	r3
 2281              	.LVL289:
 529:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 2282              		.loc 1 529 0
 2283 020a 2846     		mov	r0, r5
 2284 020c 1C37     		adds	r7, r7, #28
 2285              	.LCFI20:
 2286              		.cfi_remember_state
 2287              		.cfi_def_cfa_offset 36
 2288 020e BD46     		mov	sp, r7
 2289              	.LCFI21:
 2290              		.cfi_def_cfa_register 13
 2291              		@ sp needed
 2292 0210 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2293              	.LVL290:
 2294              	.L141:
 2295              	.LCFI22:
 2296              		.cfi_restore_state
 2297              	.LBB80:
 484:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #endif
 2298              		.loc 1 484 0
 2299 0214 2046     		mov	r0, r4
 2300 0216 0221     		movs	r1, #2
 2301 0218 134A     		ldr	r2, .L163+60
 511:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							((best_hall_stroke >= ACTUATOR_MIN_STROKE) ?
 2302              		.loc 1 511 0
 2303 021a 0825     		movs	r5, #8
 484:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #endif
 2304              		.loc 1 484 0
 2305 021c E047     		blx	ip
 2306              	.LVL291:
 2307 021e E2E7     		b	.L145
 2308              	.LVL292:
 2309              	.L149:
 2310              	.LBE80:
 357:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else if (piezo->cam_info.grp == GRP_A)
 2311              		.loc 1 357 0
 2312 0220 0325     		movs	r5, #3
 2313 0222 EDE7     		b	.L146
 2314              	.L150:
 359:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else if (piezo->is_initialized == FALSE)
 2315              		.loc 1 359 0
 2316 0224 0525     		movs	r5, #5
 2317 0226 EBE7     		b	.L146
 2318              	.L151:
 361:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	else
 2319              		.loc 1 361 0
 2320 0228 0125     		movs	r5, #1
 2321              	.LVL293:
 2322 022a E9E7     		b	.L146
 2323              	.L164:
 2324              		.align	2
 2325              	.L163:
 2326 022c 580F0200 		.word	135000
 2327 0230 00000000 		.word	actuator_do_move_to_position
 2328 0234 70020000 		.word	.LC28
 2329 0238 00000000 		.word	slogf
 2330 023c 82020000 		.word	.LC29
 2331 0240 A2020000 		.word	.LC30
 2332 0244 BC020000 		.word	.LC31
 2333 0248 D5020000 		.word	.LC32
 2334 024c EFBEADDE 		.word	-559038737
 2335 0250 00000000 		.word	flash_sub_sector_erase
 2336 0254 00000000 		.word	flash_write
 2337 0258 EB020000 		.word	.LC33
 2338 025c 00000000 		.word	log_piezo_msg
 2339 0260 09030000 		.word	.LC34
 2340 0264 2A030000 		.word	.LC35
 2341 0268 F4010000 		.word	.LC24
 2342              		.cfi_endproc
 2343              	.LFE2:
 2345              		.section	.text.actuator_init,"ax",%progbits
 2346              		.align	1
 2347              		.global	actuator_init
 2348              		.thumb
 2349              		.thumb_func
 2351              	actuator_init:
 2352              	.LFB1:
 199:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	actuator_return_t piezo_ret = ACTUATOR_OK;
 2353              		.loc 1 199 0
 2354              		.cfi_startproc
 2355              		@ args = 0, pretend = 0, frame = 8
 2356              		@ frame_needed = 0, uses_anonymous_args = 0
 2357              	.LVL294:
 2358 0000 F7B5     		push	{r0, r1, r2, r4, r5, r6, r7, lr}
 2359              	.LCFI23:
 2360              		.cfi_def_cfa_offset 32
 2361              		.cfi_offset 4, -20
 2362              		.cfi_offset 5, -16
 2363              		.cfi_offset 6, -12
 2364              		.cfi_offset 7, -8
 2365              		.cfi_offset 14, -4
 204:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	assert_param(IS_ACTUATOR_TYPE(piezo->type));
 2366              		.loc 1 204 0
 2367 0002 0446     		mov	r4, r0
 2368 0004 18B9     		cbnz	r0, .L166
 204:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	assert_param(IS_ACTUATOR_TYPE(piezo->type));
 2369              		.loc 1 204 0 is_stmt 0 discriminator 1
 2370 0006 7148     		ldr	r0, .L208
 2371              	.LVL295:
 2372 0008 CC21     		movs	r1, #204
 2373 000a 714B     		ldr	r3, .L208+4
 2374 000c 9847     		blx	r3
 2375              	.LVL296:
 2376              	.L166:
 205:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 2377              		.loc 1 205 0 is_stmt 1
 2378 000e A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 2379 0010 012B     		cmp	r3, #1
 2380 0012 03D9     		bls	.L167
 205:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 2381              		.loc 1 205 0 is_stmt 0 discriminator 1
 2382 0014 6D48     		ldr	r0, .L208
 2383 0016 CD21     		movs	r1, #205
 2384 0018 6D4B     		ldr	r3, .L208+4
 2385 001a 9847     		blx	r3
 2386              	.LVL297:
 2387              	.L167:
 208:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 2388              		.loc 1 208 0 is_stmt 1
 2389 001c 94F82850 		ldrb	r5, [r4, #40]	@ zero_extendqisi2
 2390 0020 002D     		cmp	r5, #0
 2391 0022 40F0B480 		bne	.L185
 2392              	.LBB81:
 213:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		i2cm.init(piezo->eeprom_i2c);
 2393              		.loc 1 213 0
 2394 0026 6B4E     		ldr	r6, .L208+8
 2395 0028 E078     		ldrb	r0, [r4, #3]	@ zero_extendqisi2
 2396 002a 3368     		ldr	r3, [r6]
 2397 002c 9847     		blx	r3
 2398              	.LVL298:
 214:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 2399              		.loc 1 214 0
 2400 002e 3368     		ldr	r3, [r6]
 2401 0030 2079     		ldrb	r0, [r4, #4]	@ zero_extendqisi2
 2402 0032 9847     		blx	r3
 2403              	.LVL299:
 217:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		/* reset the calibration status */
 2404              		.loc 1 217 0
 2405 0034 A278     		ldrb	r2, [r4, #2]	@ zero_extendqisi2
 2406 0036 6849     		ldr	r1, .L208+12
 2407 0038 002A     		cmp	r2, #0
 2408 003a 684B     		ldr	r3, .L208+16
 2409 003c 18BF     		it	ne
 2410 003e 0B46     		movne	r3, r1
 219:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		/* update the initialization status */
 2411              		.loc 1 219 0
 2412 0040 84F82950 		strb	r5, [r4, #41]
 217:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		/* reset the calibration status */
 2413              		.loc 1 217 0
 2414 0044 6362     		str	r3, [r4, #36]
 221:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		for (size_t i = 0; i < ACTUATOR_NUM_DIR; ++i)
 2415              		.loc 1 221 0
 2416 0046 4FF00103 		mov	r3, #1
 2417 004a 84F82830 		strb	r3, [r4, #40]
 2418              	.LVL300:
 2419              	.LBB82:
 224:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             piezo->piezo_param.per_dir_param[i].extra_num_pulses = 5;
 2420              		.loc 1 224 0
 2421 004e 0CBF     		ite	eq
 2422 0050 4FF08143 		moveq	r3, #1082130432
 2423 0054 624B     		ldrne	r3, .L208+20
 2424 0056 A363     		str	r3, [r4, #56]	@ float
 225:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		}
 2425              		.loc 1 225 0
 2426 0058 0523     		movs	r3, #5
 2427 005a A387     		strh	r3, [r4, #60]	@ movhi
 2428              	.LVL301:
 224:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             piezo->piezo_param.per_dir_param[i].extra_num_pulses = 5;
 2429              		.loc 1 224 0
 2430 005c 0AB1     		cbz	r2, .L188
 2431 005e 6049     		ldr	r1, .L208+20
 2432 0060 01E0     		b	.L171
 2433              	.L188:
 2434 0062 4FF08141 		mov	r1, #1082130432
 2435              	.L171:
 2436              	.LBE82:
 228:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							(piezo->type == ACTUATOR_LENS) ?
 2437              		.loc 1 228 0
 2438 0066 002A     		cmp	r2, #0
 2439              	.LBB83:
 224:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****             piezo->piezo_param.per_dir_param[i].extra_num_pulses = 5;
 2440              		.loc 1 224 0
 2441 0068 2164     		str	r1, [r4, #64]	@ float
 2442              	.LBE83:
 228:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							(piezo->type == ACTUATOR_LENS) ?
 2443              		.loc 1 228 0
 2444 006a 08BF     		it	eq
 2445 006c 2820     		moveq	r0, #40
 2446              	.LBB84:
 225:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		}
 2447              		.loc 1 225 0
 2448 006e A4F84430 		strh	r3, [r4, #68]	@ movhi
 2449              	.LVL302:
 2450              	.LBE84:
 228:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							(piezo->type == ACTUATOR_LENS) ?
 2451              		.loc 1 228 0
 2452 0072 18BF     		it	ne
 2453 0074 1020     		movne	r0, #16
 2454 0076 5549     		ldr	r1, .L208
 2455 0078 E722     		movs	r2, #231
 2456 007a 5A4B     		ldr	r3, .L208+24
 2457 007c 9847     		blx	r3
 2458              	.LVL303:
 2459 007e 2062     		str	r0, [r4, #32]
 2460 0080 18B9     		cbnz	r0, .L173
 228:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							(piezo->type == ACTUATOR_LENS) ?
 2461              		.loc 1 228 0 is_stmt 0 discriminator 6
 2462 0082 5248     		ldr	r0, .L208
 2463 0084 E721     		movs	r1, #231
 2464 0086 584B     		ldr	r3, .L208+28
 2465 0088 9847     		blx	r3
 2466              	.LVL304:
 2467              	.L173:
 228:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							(piezo->type == ACTUATOR_LENS) ?
 2468              		.loc 1 228 0 discriminator 8
 2469 008a 2062     		str	r0, [r4, #32]
 232:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		{
 2470              		.loc 1 232 0 is_stmt 1 discriminator 8
 2471 008c A278     		ldrb	r2, [r4, #2]	@ zero_extendqisi2
 2472 008e 574B     		ldr	r3, .L208+32
 235:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			if (piezo_ret == ACTUATOR_OK)
 2473              		.loc 1 235 0 discriminator 8
 2474 0090 2046     		mov	r0, r4
 2475 0092 0DF10701 		add	r1, sp, #7
 232:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		{
 2476              		.loc 1 232 0 discriminator 8
 2477 0096 B2B9     		cbnz	r2, .L174
 2478              	.LVL305:
 235:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			if (piezo_ret == ACTUATOR_OK)
 2479              		.loc 1 235 0
 2480 0098 9847     		blx	r3
 2481              	.LVL306:
 236:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 2482              		.loc 1 236 0
 2483 009a 0546     		mov	r5, r0
 2484 009c 0028     		cmp	r0, #0
 2485 009e 68D1     		bne	.L178
 239:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				{
 2486              		.loc 1 239 0
 2487 00a0 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 2488 00a4 226A     		ldr	r2, [r4, #32]
 2489 00a6 43B1     		cbz	r3, .L176
 242:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							ACTUATOR_INVALID_FREQ)
 2490              		.loc 1 242 0
 2491 00a8 D907     		lsls	r1, r3, #31
 246:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 												128000;
 2492              		.loc 1 246 0
 2493 00aa 41BF     		itttt	mi
 2494 00ac 4FF4FA31 		movmi	r1, #128000
 249:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					}
 2495              		.loc 1 249 0
 2496 00b0 23F00103 		bicmi	r3, r3, #1
 246:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 												128000;
 2497              		.loc 1 246 0
 2498 00b4 1160     		strmi	r1, [r2]
 249:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					}
 2499              		.loc 1 249 0
 2500 00b6 8DF80730 		strbmi	r3, [sp, #7]
 2501              	.L176:
 253:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					piezo_ret = ACTUATOR_EEPROM_INVALID_DATA;
 2502              		.loc 1 253 0
 2503 00ba 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 2504 00be 002B     		cmp	r3, #0
 2505 00c0 67D0     		beq	.L206
 254:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			}
 2506              		.loc 1 254 0
 2507 00c2 0725     		movs	r5, #7
 2508 00c4 55E0     		b	.L178
 2509              	.LVL307:
 2510              	.L174:
 275:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			if (piezo_ret == ACTUATOR_OK && data_valid == ACTUATOR_DATA_OK)
 2511              		.loc 1 275 0
 2512 00c6 9847     		blx	r3
 2513              	.LVL308:
 276:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 2514              		.loc 1 276 0
 2515 00c8 0546     		mov	r5, r0
 2516 00ca 90B9     		cbnz	r0, .L179
 276:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			{
 2517              		.loc 1 276 0 is_stmt 0 discriminator 1
 2518 00cc 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 2519 00d0 7BB9     		cbnz	r3, .L179
 279:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((mirr_calib_data_t *)piezo->af_calib)->polarity);
 2520              		.loc 1 279 0 is_stmt 1
 2521 00d2 636A     		ldr	r3, [r4, #36]
 2522 00d4 E078     		ldrb	r0, [r4, #3]	@ zero_extendqisi2
 2523              	.LVL309:
 280:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				hall_ret |= piezo->hall_obj->set_sensitivity(piezo->hall_i2c,
 2524              		.loc 1 280 0
 2525 00d6 226A     		ldr	r2, [r4, #32]
 279:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((mirr_calib_data_t *)piezo->af_calib)->polarity);
 2526              		.loc 1 279 0
 2527 00d8 917B     		ldrb	r1, [r2, #14]	@ zero_extendqisi2
 2528 00da 0031     		adds	r1, r1, #0
 2529 00dc 5B68     		ldr	r3, [r3, #4]
 2530 00de 18BF     		it	ne
 2531 00e0 0121     		movne	r1, #1
 2532 00e2 9847     		blx	r3
 2533              	.LVL310:
 281:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((mirr_calib_data_t *)piezo->af_calib)->sensitivity);
 2534              		.loc 1 281 0
 2535 00e4 636A     		ldr	r3, [r4, #36]
 2536 00e6 226A     		ldr	r2, [r4, #32]
 2537 00e8 D17B     		ldrb	r1, [r2, #15]	@ zero_extendqisi2
 2538 00ea 9B68     		ldr	r3, [r3, #8]
 279:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((mirr_calib_data_t *)piezo->af_calib)->polarity);
 2539              		.loc 1 279 0
 2540 00ec 0546     		mov	r5, r0
 2541              	.LVL311:
 281:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((mirr_calib_data_t *)piezo->af_calib)->sensitivity);
 2542              		.loc 1 281 0
 2543 00ee E078     		ldrb	r0, [r4, #3]	@ zero_extendqisi2
 2544 00f0 5FE0     		b	.L205
 2545              	.LVL312:
 2546              	.L179:
 292:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				flash_read((FLASH_CALIB_SUB_SECTOR + piezo->cam_info.idx - 1) *
 2547              		.loc 1 292 0
 2548 00f2 2046     		mov	r0, r4
 2549              	.LVL313:
 2550 00f4 1021     		movs	r1, #16
 2551 00f6 3E4A     		ldr	r2, .L208+36
 2552 00f8 3E4E     		ldr	r6, .L208+40
 2553 00fa B047     		blx	r6
 2554              	.LVL314:
 293:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						FLASH_SUB_SECTOR_SIZE,
 2555              		.loc 1 293 0
 2556 00fc 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 2557 00fe 00F00F00 		and	r0, r0, #15
 2558 0102 00F24F10 		addw	r0, r0, #335
 2559 0106 1021     		movs	r1, #16
 2560 0108 226A     		ldr	r2, [r4, #32]
 2561 010a 0123     		movs	r3, #1
 2562 010c 0003     		lsls	r0, r0, #12
 2563 010e 3A4F     		ldr	r7, .L208+44
 2564 0110 B847     		blx	r7
 2565              	.LVL315:
 297:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						== FLASH_CALIB_VERIFICATION)
 2566              		.loc 1 297 0
 2567 0112 236A     		ldr	r3, [r4, #32]
 301:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							"Calibration info from FLASH:");
 2568              		.loc 1 301 0
 2569 0114 2046     		mov	r0, r4
 2570 0116 1021     		movs	r1, #16
 297:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						== FLASH_CALIB_VERIFICATION)
 2571              		.loc 1 297 0
 2572 0118 1A68     		ldr	r2, [r3]
 2573 011a 384B     		ldr	r3, .L208+48
 2574 011c 9A42     		cmp	r2, r3
 2575 011e 1ED1     		bne	.L181
 2576              	.LVL316:
 301:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							"Calibration info from FLASH:");
 2577              		.loc 1 301 0
 2578 0120 374A     		ldr	r2, .L208+52
 2579 0122 B047     		blx	r6
 2580              	.LVL317:
 303:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 2581              		.loc 1 303 0
 2582 0124 2046     		mov	r0, r4
 2583 0126 374B     		ldr	r3, .L208+56
 2584 0128 9847     		blx	r3
 2585              	.LVL318:
 306:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((mirr_calib_data_t *)piezo->af_calib)->polarity);
 2586              		.loc 1 306 0
 2587 012a 636A     		ldr	r3, [r4, #36]
 307:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					hall_ret |=
 2588              		.loc 1 307 0
 2589 012c 226A     		ldr	r2, [r4, #32]
 306:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((mirr_calib_data_t *)piezo->af_calib)->polarity);
 2590              		.loc 1 306 0
 2591 012e 917B     		ldrb	r1, [r2, #14]	@ zero_extendqisi2
 2592 0130 0031     		adds	r1, r1, #0
 2593 0132 E078     		ldrb	r0, [r4, #3]	@ zero_extendqisi2
 2594 0134 18BF     		it	ne
 2595 0136 0121     		movne	r1, #1
 2596 0138 5B68     		ldr	r3, [r3, #4]
 2597 013a 9847     		blx	r3
 2598              	.LVL319:
 309:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((mirr_calib_data_t *)piezo->af_calib)->sensitivity);
 2599              		.loc 1 309 0
 2600 013c 636A     		ldr	r3, [r4, #36]
 2601 013e 226A     		ldr	r2, [r4, #32]
 2602 0140 D17B     		ldrb	r1, [r2, #15]	@ zero_extendqisi2
 2603 0142 9B68     		ldr	r3, [r3, #8]
 306:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((mirr_calib_data_t *)piezo->af_calib)->polarity);
 2604              		.loc 1 306 0
 2605 0144 0646     		mov	r6, r0
 2606              	.LVL320:
 309:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((mirr_calib_data_t *)piezo->af_calib)->sensitivity);
 2607              		.loc 1 309 0
 2608 0146 E078     		ldrb	r0, [r4, #3]	@ zero_extendqisi2
 2609 0148 9847     		blx	r3
 2610              	.LVL321:
 308:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						piezo->hall_obj->set_sensitivity(piezo->hall_i2c,
 2611              		.loc 1 308 0
 2612 014a 3043     		orrs	r0, r0, r6
 2613              	.LVL322:
 312:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						piezo->is_calibrated = TRUE;
 2614              		.loc 1 312 0
 2615 014c 10F0FF0F 		tst	r0, #255
 2616 0150 01D0     		beq	.L207
 2617              	.L182:
 287:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 			}
 2618              		.loc 1 287 0
 2619 0152 0825     		movs	r5, #8
 2620 0154 0DE0     		b	.L178
 2621              	.L207:
 313:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					else
 2622              		.loc 1 313 0
 2623 0156 0123     		movs	r3, #1
 2624 0158 84F82930 		strb	r3, [r4, #41]
 2625 015c 09E0     		b	.L178
 2626              	.LVL323:
 2627              	.L181:
 323:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							"There is no calibration info from FLASH");
 2628              		.loc 1 323 0
 2629 015e 2A4A     		ldr	r2, .L208+60
 2630 0160 B047     		blx	r6
 2631              	.LVL324:
 326:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 							"Prepare to calibrate actuator");
 2632              		.loc 1 326 0
 2633 0162 2046     		mov	r0, r4
 2634 0164 1021     		movs	r1, #16
 2635 0166 294A     		ldr	r2, .L208+64
 2636 0168 B047     		blx	r6
 2637              	.LVL325:
 329:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** #ifndef ALWAYS_CALIB_MIRROR
 2638              		.loc 1 329 0
 2639 016a 2046     		mov	r0, r4
 2640 016c 284B     		ldr	r3, .L208+68
 2641 016e 9847     		blx	r3
 2642              	.LVL326:
 2643 0170 0546     		mov	r5, r0
 2644              	.LVL327:
 2645              	.L178:
 336:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 ((mirr_calib_data_t *)piezo->af_calib)->pwm_freq;
 2646              		.loc 1 336 0
 2647 0172 A278     		ldrb	r2, [r4, #2]	@ zero_extendqisi2
 2648 0174 236A     		ldr	r3, [r4, #32]
 2649 0176 0AB9     		cbnz	r2, .L183
 336:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 ((mirr_calib_data_t *)piezo->af_calib)->pwm_freq;
 2650              		.loc 1 336 0 is_stmt 0 discriminator 1
 2651 0178 1B68     		ldr	r3, [r3]
 2652 017a 00E0     		b	.L184
 2653              	.L183:
 336:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 ((mirr_calib_data_t *)piezo->af_calib)->pwm_freq;
 2654              		.loc 1 336 0 discriminator 2
 2655 017c 5B68     		ldr	r3, [r3, #4]
 2656              	.L184:
 335:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****                 ((lens_calib_data_t *)piezo->af_calib)->pwm_freq :
 2657              		.loc 1 335 0 is_stmt 1
 2658 017e 2363     		str	r3, [r4, #48]
 338:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         piezo->piezo_param.last_move_dir = ACTUATOR_NUM_DIR;
 2659              		.loc 1 338 0
 2660 0180 0123     		movs	r3, #1
 2661 0182 84F83430 		strb	r3, [r4, #52]
 339:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 2662              		.loc 1 339 0
 2663 0186 0223     		movs	r3, #2
 2664 0188 84F83530 		strb	r3, [r4, #53]
 2665 018c 1BE0     		b	.L204
 2666              	.LVL328:
 2667              	.L185:
 2668              	.LBE81:
 200:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	hall_return_t	hall_ret = HALL_OK;
 2669              		.loc 1 200 0
 2670 018e 0025     		movs	r5, #0
 2671              	.LVL329:
 2672 0190 19E0     		b	.L204
 2673              	.LVL330:
 2674              	.L206:
 2675              	.LBB85:
 260:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((lens_calib_data_t *)piezo->af_calib)->polarity);
 2676              		.loc 1 260 0
 2677 0192 636A     		ldr	r3, [r4, #36]
 2678 0194 92F82410 		ldrb	r1, [r2, #36]	@ zero_extendqisi2
 2679 0198 0031     		adds	r1, r1, #0
 2680 019a E078     		ldrb	r0, [r4, #3]	@ zero_extendqisi2
 2681 019c 18BF     		it	ne
 2682 019e 0121     		movne	r1, #1
 2683 01a0 5B68     		ldr	r3, [r3, #4]
 2684 01a2 9847     		blx	r3
 2685              	.LVL331:
 262:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((lens_calib_data_t *)piezo->af_calib)->sensitivity);
 2686              		.loc 1 262 0
 2687 01a4 636A     		ldr	r3, [r4, #36]
 2688 01a6 226A     		ldr	r2, [r4, #32]
 2689 01a8 92F82510 		ldrb	r1, [r2, #37]	@ zero_extendqisi2
 2690 01ac 9B68     		ldr	r3, [r3, #8]
 260:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((lens_calib_data_t *)piezo->af_calib)->polarity);
 2691              		.loc 1 260 0
 2692 01ae 0546     		mov	r5, r0
 2693              	.LVL332:
 262:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						((lens_calib_data_t *)piezo->af_calib)->sensitivity);
 2694              		.loc 1 262 0
 2695 01b0 E078     		ldrb	r0, [r4, #3]	@ zero_extendqisi2
 2696              	.LVL333:
 2697              	.L205:
 2698 01b2 9847     		blx	r3
 2699              	.LVL334:
 2700 01b4 2843     		orrs	r0, r0, r5
 2701              	.LVL335:
 265:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 					piezo->is_calibrated = TRUE;
 2702              		.loc 1 265 0
 2703 01b6 10F0FF0F 		tst	r0, #255
 2704 01ba CAD1     		bne	.L182
 266:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 				else
 2705              		.loc 1 266 0
 2706 01bc 0123     		movs	r3, #1
 2707 01be 0025     		movs	r5, #0
 2708 01c0 84F82930 		strb	r3, [r4, #41]
 2709 01c4 D5E7     		b	.L178
 2710              	.LVL336:
 2711              	.L204:
 2712              	.LBE85:
 343:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 2713              		.loc 1 343 0
 2714 01c6 2846     		mov	r0, r5
 2715 01c8 03B0     		add	sp, sp, #12
 2716              	.LCFI24:
 2717              		.cfi_def_cfa_offset 20
 2718              		@ sp needed
 2719 01ca F0BD     		pop	{r4, r5, r6, r7, pc}
 2720              	.LVL337:
 2721              	.L209:
 2722              		.align	2
 2723              	.L208:
 2724 01cc 00000000 		.word	.LANCHOR4
 2725 01d0 00000000 		.word	assert_failed
 2726 01d4 00000000 		.word	i2cm
 2727 01d8 00000000 		.word	as5510
 2728 01dc 00000000 		.word	a1457
 2729 01e0 00004041 		.word	1094713344
 2730 01e4 00000000 		.word	pvPortMalloc1
 2731 01e8 00000000 		.word	malloc_failed
 2732 01ec 00000000 		.word	read_eeprom
 2733 01f0 47030000 		.word	.LC36
 2734 01f4 00000000 		.word	log_piezo_msg
 2735 01f8 00000000 		.word	flash_read
 2736 01fc EFBEADDE 		.word	-559038737
 2737 0200 62030000 		.word	.LC37
 2738 0204 00000000 		.word	print_calib_info
 2739 0208 7F030000 		.word	.LC38
 2740 020c A7030000 		.word	.LC39
 2741 0210 00000000 		.word	actuator_calibrate
 2742              		.cfi_endproc
 2743              	.LFE1:
 2745              		.section	.text.actuator_read_position,"ax",%progbits
 2746              		.align	1
 2747              		.global	actuator_read_position
 2748              		.thumb
 2749              		.thumb_func
 2751              	actuator_read_position:
 2752              	.LFB5:
 581:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     actuator_return_t   piezo_ret = ACTUATOR_OK;
 2753              		.loc 1 581 0
 2754              		.cfi_startproc
 2755              		@ args = 0, pretend = 0, frame = 0
 2756              		@ frame_needed = 0, uses_anonymous_args = 0
 2757              	.LVL338:
 2758 0000 08B5     		push	{r3, lr}
 2759              	.LCFI25:
 2760              		.cfi_def_cfa_offset 8
 2761              		.cfi_offset 3, -8
 2762              		.cfi_offset 14, -4
 584:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     if (hall_ret != HALL_OK)
 2763              		.loc 1 584 0
 2764 0002 436A     		ldr	r3, [r0, #36]
 2765 0004 C078     		ldrb	r0, [r0, #3]	@ zero_extendqisi2
 2766              	.LVL339:
 2767 0006 DB68     		ldr	r3, [r3, #12]
 2768 0008 9847     		blx	r3
 2769              	.LVL340:
 585:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         piezo_ret = ACTUATOR_HALL_TIMED_OUT;
 2770              		.loc 1 585 0
 2771 000a 0028     		cmp	r0, #0
 2772              	.LVL341:
 588:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 2773              		.loc 1 588 0
 2774 000c 14BF     		ite	ne
 2775 000e 0820     		movne	r0, #8
 2776              	.LVL342:
 2777 0010 0020     		moveq	r0, #0
 2778 0012 08BD     		pop	{r3, pc}
 2779              		.cfi_endproc
 2780              	.LFE5:
 2782              		.section	.text.actuator_move_to_position,"ax",%progbits
 2783              		.align	1
 2784              		.global	actuator_move_to_position
 2785              		.thumb
 2786              		.thumb_func
 2788              	actuator_move_to_position:
 2789              	.LFB6:
 597:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	return actuator_do_move_to_position(piezo, target_position, tolerance, false);
 2790              		.loc 1 597 0
 2791              		.cfi_startproc
 2792              		@ args = 0, pretend = 0, frame = 0
 2793              		@ frame_needed = 0, uses_anonymous_args = 0
 2794              	.LVL343:
 2795 0000 10B5     		push	{r4, lr}
 2796              	.LCFI26:
 2797              		.cfi_def_cfa_offset 8
 2798              		.cfi_offset 4, -8
 2799              		.cfi_offset 14, -4
 598:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 2800              		.loc 1 598 0
 2801 0002 0023     		movs	r3, #0
 2802 0004 014C     		ldr	r4, .L214
 2803 0006 A047     		blx	r4
 2804              	.LVL344:
 599:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 2805              		.loc 1 599 0
 2806 0008 10BD     		pop	{r4, pc}
 2807              	.L215:
 2808 000a 00BF     		.align	2
 2809              	.L214:
 2810 000c 00000000 		.word	actuator_do_move_to_position
 2811              		.cfi_endproc
 2812              	.LFE6:
 2814              		.section	.text.actuator_move_to_distance,"ax",%progbits
 2815              		.align	1
 2816              		.global	actuator_move_to_distance
 2817              		.thumb
 2818              		.thumb_func
 2820              	actuator_move_to_distance:
 2821              	.LFB9:
 866:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	actuator_return_t	piezo_ret = ACTUATOR_OK;
 2822              		.loc 1 866 0
 2823              		.cfi_startproc
 2824              		@ args = 0, pretend = 0, frame = 8
 2825              		@ frame_needed = 0, uses_anonymous_args = 0
 2826              	.LVL345:
 2827 0000 73B5     		push	{r0, r1, r4, r5, r6, lr}
 2828              	.LCFI27:
 2829              		.cfi_def_cfa_offset 24
 2830              		.cfi_offset 4, -16
 2831              		.cfi_offset 5, -12
 2832              		.cfi_offset 6, -8
 2833              		.cfi_offset 14, -4
 870:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 2834              		.loc 1 870 0
 2835 0002 0546     		mov	r5, r0
 2836 0004 114E     		ldr	r6, .L225
 2837 0006 00B1     		cbz	r0, .L217
 870:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 2838              		.loc 1 870 0 is_stmt 0 discriminator 1
 2839 0008 31B9     		cbnz	r1, .L218
 2840              	.L217:
 872:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_NULL_PTR;
 2841              		.loc 1 872 0 is_stmt 1
 2842 000a 2720     		movs	r0, #39
 2843              	.LVL346:
 2844 000c 0221     		movs	r1, #2
 2845              	.LVL347:
 2846 000e 104A     		ldr	r2, .L225+4
 2847 0010 104B     		ldr	r3, .L225+8
 2848 0012 B047     		blx	r6
 2849              	.LVL348:
 873:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 2850              		.loc 1 873 0
 2851 0014 0220     		movs	r0, #2
 2852 0016 17E0     		b	.L219
 2853              	.LVL349:
 2854              	.L218:
 2855              	.LBB89:
 880:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		SLOGF(SLOG_INFO, "Target position: 0x%X", target_position);
 2856              		.loc 1 880 0
 2857 0018 0968     		ldr	r1, [r1]
 2858              	.LVL350:
 2859 001a 02AC     		add	r4, sp, #8
 2860 001c 006A     		ldr	r0, [r0, #32]
 2861              	.LVL351:
 2862              	.LBB90:
 2863              	.LBB91:
1253:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         d = 65535;
 2864              		.loc 1 1253 0
 2865 001e B1F5803F 		cmp	r1, #65536
1256:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     return object_distance_to_hallcode(&calib_data->af_calib, d);
 2866              		.loc 1 1256 0
 2867 0022 34BF     		ite	cc
 2868 0024 89B2     		uxthcc	r1, r1
 2869              	.LVL352:
1254:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     else
 2870              		.loc 1 1254 0
 2871 0026 4FF6FF71 		movwcs	r1, #65535
 2872              	.LVL353:
1257:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 2873              		.loc 1 1257 0
 2874 002a 1430     		adds	r0, r0, #20
 2875              	.LVL354:
 2876 002c 0A4B     		ldr	r3, .L225+12
 2877 002e 9847     		blx	r3
 2878              	.LVL355:
 2879              	.LBE91:
 2880              	.LBE90:
 881:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 2881              		.loc 1 881 0
 2882 0030 0821     		movs	r1, #8
 2883 0032 0A4A     		ldr	r2, .L225+16
 2884              	.LBB93:
 2885              	.LBB92:
1257:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 2886              		.loc 1 1257 0
 2887 0034 83B2     		uxth	r3, r0
 2888              	.LBE92:
 2889              	.LBE93:
 881:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 2890              		.loc 1 881 0
 2891 0036 2720     		movs	r0, #39
 880:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		SLOGF(SLOG_INFO, "Target position: 0x%X", target_position);
 2892              		.loc 1 880 0
 2893 0038 24F8023D 		strh	r3, [r4, #-2]!	@ movhi
 881:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 2894              		.loc 1 881 0
 2895 003c B047     		blx	r6
 2896              	.LVL356:
 884:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 2897              		.loc 1 884 0
 2898 003e 2846     		mov	r0, r5
 2899 0040 2146     		mov	r1, r4
 2900 0042 0322     		movs	r2, #3
 2901 0044 064B     		ldr	r3, .L225+20
 2902 0046 9847     		blx	r3
 2903              	.LVL357:
 2904              	.L219:
 2905              	.LBE89:
 888:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 2906              		.loc 1 888 0
 2907 0048 02B0     		add	sp, sp, #8
 2908              	.LCFI28:
 2909              		.cfi_def_cfa_offset 16
 2910              		@ sp needed
 2911 004a 70BD     		pop	{r4, r5, r6, pc}
 2912              	.LVL358:
 2913              	.L226:
 2914              		.align	2
 2915              	.L225:
 2916 004c 00000000 		.word	slogf
 2917 0050 66010000 		.word	.LC18
 2918 0054 00000000 		.word	.LANCHOR5
 2919 0058 00000000 		.word	object_distance_to_hallcode
 2920 005c C5030000 		.word	.LC40
 2921 0060 00000000 		.word	actuator_move_to_position
 2922              		.cfi_endproc
 2923              	.LFE9:
 2925              		.section	.text.actuator_nudge,"ax",%progbits
 2926              		.align	1
 2927              		.global	actuator_nudge
 2928              		.thumb
 2929              		.thumb_func
 2931              	actuator_nudge:
 2932              	.LFB10:
 897:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	actuator_return_t	piezo_ret;
 2933              		.loc 1 897 0
 2934              		.cfi_startproc
 2935              		@ args = 4, pretend = 0, frame = 56
 2936              		@ frame_needed = 0, uses_anonymous_args = 0
 2937              	.LVL359:
 2938 0000 30B5     		push	{r4, r5, lr}
 2939              	.LCFI29:
 2940              		.cfi_def_cfa_offset 12
 2941              		.cfi_offset 4, -12
 2942              		.cfi_offset 5, -8
 2943              		.cfi_offset 14, -4
 901:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 2944              		.loc 1 901 0
 2945 0002 0446     		mov	r4, r0
 897:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	actuator_return_t	piezo_ret;
 2946              		.loc 1 897 0
 2947 0004 8FB0     		sub	sp, sp, #60
 2948              	.LCFI30:
 2949              		.cfi_def_cfa_offset 72
 901:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 2950              		.loc 1 901 0
 2951 0006 38B9     		cbnz	r0, .L228
 903:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_NULL_PTR;
 2952              		.loc 1 903 0
 2953 0008 2720     		movs	r0, #39
 2954              	.LVL360:
 2955 000a 0221     		movs	r1, #2
 2956              	.LVL361:
 2957 000c 274A     		ldr	r2, .L236
 2958              	.LVL362:
 2959 000e 284B     		ldr	r3, .L236+4
 2960              	.LVL363:
 2961 0010 284C     		ldr	r4, .L236+8
 2962              	.LVL364:
 2963 0012 A047     		blx	r4
 2964              	.LVL365:
 904:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 2965              		.loc 1 904 0
 2966 0014 0220     		movs	r0, #2
 2967 0016 47E0     		b	.L229
 2968              	.LVL366:
 2969              	.L228:
 906:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 2970              		.loc 1 906 0
 2971 0018 8578     		ldrb	r5, [r0, #2]	@ zero_extendqisi2
 2972 001a 012D     		cmp	r5, #1
 2973 001c 05D9     		bls	.L230
 908:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_INVALID_TYPE;
 2974              		.loc 1 908 0
 2975 001e 0221     		movs	r1, #2
 2976              	.LVL367:
 2977 0020 254A     		ldr	r2, .L236+12
 2978              	.LVL368:
 2979 0022 264B     		ldr	r3, .L236+16
 2980              	.LVL369:
 2981 0024 9847     		blx	r3
 2982              	.LVL370:
 909:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 2983              		.loc 1 909 0
 2984 0026 0320     		movs	r0, #3
 2985 0028 3EE0     		b	.L229
 2986              	.LVL371:
 2987              	.L230:
 911:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 2988              		.loc 1 911 0
 2989 002a 90F82850 		ldrb	r5, [r0, #40]	@ zero_extendqisi2
 2990 002e 2DB9     		cbnz	r5, .L231
 913:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_UNINITIALIZED;
 2991              		.loc 1 913 0
 2992 0030 0221     		movs	r1, #2
 2993              	.LVL372:
 2994 0032 234A     		ldr	r2, .L236+20
 2995              	.LVL373:
 2996 0034 214B     		ldr	r3, .L236+16
 2997              	.LVL374:
 2998 0036 9847     		blx	r3
 2999              	.LVL375:
 914:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 3000              		.loc 1 914 0
 3001 0038 0120     		movs	r0, #1
 3002 003a 35E0     		b	.L229
 3003              	.LVL376:
 3004              	.L231:
 916:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 3005              		.loc 1 916 0
 3006 003c 90F82950 		ldrb	r5, [r0, #41]	@ zero_extendqisi2
 3007 0040 2DB9     		cbnz	r5, .L232
 918:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_NOT_CALIBRATED;
 3008              		.loc 1 918 0
 3009 0042 0221     		movs	r1, #2
 3010              	.LVL377:
 3011 0044 1F4A     		ldr	r2, .L236+24
 3012              	.LVL378:
 3013 0046 1D4B     		ldr	r3, .L236+16
 3014              	.LVL379:
 3015 0048 9847     		blx	r3
 3016              	.LVL380:
 919:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 3017              		.loc 1 919 0
 3018 004a 0920     		movs	r0, #9
 3019 004c 2CE0     		b	.L229
 3020              	.LVL381:
 3021              	.L232:
 921:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	{
 3022              		.loc 1 921 0
 3023 004e 0129     		cmp	r1, #1
 3024 0050 05D9     		bls	.L233
 923:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		piezo_ret = ACTUATOR_INVALID_DIR;
 3025              		.loc 1 923 0
 3026 0052 0221     		movs	r1, #2
 3027              	.LVL382:
 3028 0054 1C4A     		ldr	r2, .L236+28
 3029              	.LVL383:
 3030 0056 194B     		ldr	r3, .L236+16
 3031              	.LVL384:
 3032 0058 9847     		blx	r3
 3033              	.LVL385:
 924:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 3034              		.loc 1 924 0
 3035 005a 0420     		movs	r0, #4
 3036 005c 24E0     		b	.L229
 3037              	.LVL386:
 3038              	.L233:
 3039              	.LBB94:
 938:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_value.pattern.pair[0].duty =
 3040              		.loc 1 938 0
 3041 005e 0692     		str	r2, [sp, #24]
 3042              	.LVL387:
 3043              	.LBB95:
 3044              	.LBB96:
1267:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 								duty_cycle : (100 - duty_cycle);
 3045              		.loc 1 1267 0
 3046 0060 14BF     		ite	ne
 3047 0062 5422     		movne	r2, #84
 3048              	.LVL388:
 3049 0064 1022     		moveq	r2, #16
 3050              	.LBE96:
 3051              	.LBE95:
 934:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_value.freq = piezo->piezo_param.pwm_freq;
 3052              		.loc 1 934 0
 3053 0066 0220     		movs	r0, #2
 3054              	.LVL389:
 933:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_cfg.output_gen_mode = PWM_FIXED_PATTERNS;
 3055              		.loc 1 933 0
 3056 0068 0121     		movs	r1, #1
 3057              	.LVL390:
 939:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 						get_derived_pwm_duty(ACTUATOR_DUTY_NUDGE, direction);
 3058              		.loc 1 939 0
 3059 006a 8DF81420 		strb	r2, [sp, #20]
 941:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_irq.callback_handler = cb_func;
 3060              		.loc 1 941 0
 3061 006e 4FF48052 		mov	r2, #4096
 934:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_value.freq = piezo->piezo_param.pwm_freq;
 3062              		.loc 1 934 0
 3063 0072 8DF80500 		strb	r0, [sp, #5]
 942:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_irq.cb_param = cb_param;
 3064              		.loc 1 942 0
 3065 0076 0393     		str	r3, [sp, #12]
 935:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_value.num_patterns = 1;
 3066              		.loc 1 935 0
 3067 0078 206B     		ldr	r0, [r4, #48]
 943:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hal_pwm_init(piezo->pwm, &pwm_cfg, &pwm_value);
 3068              		.loc 1 943 0
 3069 007a 129B     		ldr	r3, [sp, #72]
 3070              	.LVL391:
 933:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_cfg.output_gen_mode = PWM_FIXED_PATTERNS;
 3071              		.loc 1 933 0
 3072 007c 8DF80410 		strb	r1, [sp, #4]
 935:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_value.num_patterns = 1;
 3073              		.loc 1 935 0
 3074 0080 0C90     		str	r0, [sp, #48]
 944:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hal_pwm_enable_irq(piezo->pwm, &pwm_irq);
 3075              		.loc 1 944 0
 3076 0082 6079     		ldrb	r0, [r4, #5]	@ zero_extendqisi2
 936:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_value.pattern.num_pairs = 1;
 3077              		.loc 1 936 0
 3078 0084 0D91     		str	r1, [sp, #52]
 937:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_value.pattern.pair[0].num_pulses = multiplier;
 3079              		.loc 1 937 0
 3080 0086 8DF82C10 		strb	r1, [sp, #44]
 944:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hal_pwm_enable_irq(piezo->pwm, &pwm_irq);
 3081              		.loc 1 944 0
 3082 008a 01A9     		add	r1, sp, #4
 941:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		pwm_irq.callback_handler = cb_func;
 3083              		.loc 1 941 0
 3084 008c ADF80820 		strh	r2, [sp, #8]	@ movhi
 944:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hal_pwm_enable_irq(piezo->pwm, &pwm_irq);
 3085              		.loc 1 944 0
 3086 0090 05AA     		add	r2, sp, #20
 943:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hal_pwm_init(piezo->pwm, &pwm_cfg, &pwm_value);
 3087              		.loc 1 943 0
 3088 0092 0493     		str	r3, [sp, #16]
 944:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		hal_pwm_enable_irq(piezo->pwm, &pwm_irq);
 3089              		.loc 1 944 0
 3090 0094 0D4B     		ldr	r3, .L236+32
 3091 0096 9847     		blx	r3
 3092              	.LVL392:
 945:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 		/* start moving actuator */
 3093              		.loc 1 945 0
 3094 0098 6079     		ldrb	r0, [r4, #5]	@ zero_extendqisi2
 3095 009a 02A9     		add	r1, sp, #8
 3096 009c 0C4B     		ldr	r3, .L236+36
 3097 009e 9847     		blx	r3
 3098              	.LVL393:
 947:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 3099              		.loc 1 947 0
 3100 00a0 6079     		ldrb	r0, [r4, #5]	@ zero_extendqisi2
 3101 00a2 0C4B     		ldr	r3, .L236+40
 3102 00a4 9847     		blx	r3
 3103              	.LVL394:
 949:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 	}
 3104              		.loc 1 949 0
 3105 00a6 0020     		movs	r0, #0
 3106              	.LVL395:
 3107              	.L229:
 3108              	.LBE94:
 953:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 3109              		.loc 1 953 0
 3110 00a8 0FB0     		add	sp, sp, #60
 3111              	.LCFI31:
 3112              		.cfi_def_cfa_offset 12
 3113              		@ sp needed
 3114 00aa 30BD     		pop	{r4, r5, pc}
 3115              	.LVL396:
 3116              	.L237:
 3117              		.align	2
 3118              	.L236:
 3119 00ac 66010000 		.word	.LC18
 3120 00b0 00000000 		.word	.LANCHOR6
 3121 00b4 00000000 		.word	slogf
 3122 00b8 77010000 		.word	.LC19
 3123 00bc 00000000 		.word	log_piezo_msg
 3124 00c0 84010000 		.word	.LC20
 3125 00c4 92010000 		.word	.LC21
 3126 00c8 DB030000 		.word	.LC41
 3127 00cc 00000000 		.word	hal_pwm_init
 3128 00d0 00000000 		.word	hal_pwm_enable_irq
 3129 00d4 00000000 		.word	hal_pwm_start
 3130              		.cfi_endproc
 3131              	.LFE10:
 3133              		.section	.text.actuator_object_distance_to_lens_hallcode,"ax",%progbits
 3134              		.align	1
 3135              		.global	actuator_object_distance_to_lens_hallcode
 3136              		.thumb
 3137              		.thumb_func
 3139              	actuator_object_distance_to_lens_hallcode:
 3140              	.LFB11:
 957:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     *hallcode = convert_to_position(piezo->af_calib, object_distance_mm);
 3141              		.loc 1 957 0
 3142              		.cfi_startproc
 3143              		@ args = 0, pretend = 0, frame = 0
 3144              		@ frame_needed = 0, uses_anonymous_args = 0
 3145              	.LVL397:
 958:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     return ACTUATOR_OK;
 3146              		.loc 1 958 0
 3147 0000 006A     		ldr	r0, [r0, #32]
 3148              	.LVL398:
 3149              	.LBB99:
 3150              	.LBB100:
1253:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****         d = 65535;
 3151              		.loc 1 1253 0
 3152 0002 B1F5803F 		cmp	r1, #65536
 3153              	.LBE100:
 3154              	.LBE99:
 957:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     *hallcode = convert_to_position(piezo->af_calib, object_distance_mm);
 3155              		.loc 1 957 0
 3156 0006 10B5     		push	{r4, lr}
 3157              	.LCFI32:
 3158              		.cfi_def_cfa_offset 8
 3159              		.cfi_offset 4, -8
 3160              		.cfi_offset 14, -4
 3161              	.LBB103:
 3162              	.LBB101:
1256:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     return object_distance_to_hallcode(&calib_data->af_calib, d);
 3163              		.loc 1 1256 0
 3164 0008 34BF     		ite	cc
 3165 000a 89B2     		uxthcc	r1, r1
 3166              	.LVL399:
1254:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     else
 3167              		.loc 1 1254 0
 3168 000c 4FF6FF71 		movwcs	r1, #65535
 3169              	.LVL400:
1257:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 3170              		.loc 1 1257 0
 3171 0010 1430     		adds	r0, r0, #20
 3172              	.LVL401:
 3173 0012 034B     		ldr	r3, .L241
 3174              	.LBE101:
 3175              	.LBE103:
 957:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     *hallcode = convert_to_position(piezo->af_calib, object_distance_mm);
 3176              		.loc 1 957 0
 3177 0014 1446     		mov	r4, r2
 3178              	.LBB104:
 3179              	.LBB102:
1257:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** }
 3180              		.loc 1 1257 0
 3181 0016 9847     		blx	r3
 3182              	.LVL402:
 3183              	.LBE102:
 3184              	.LBE104:
 958:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     return ACTUATOR_OK;
 3185              		.loc 1 958 0
 3186 0018 2080     		strh	r0, [r4]	@ movhi
 960:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 3187              		.loc 1 960 0
 3188 001a 0020     		movs	r0, #0
 3189 001c 10BD     		pop	{r4, pc}
 3190              	.LVL403:
 3191              	.L242:
 3192 001e 00BF     		.align	2
 3193              	.L241:
 3194 0020 00000000 		.word	object_distance_to_hallcode
 3195              		.cfi_endproc
 3196              	.LFE11:
 3198              		.section	.text.actuator_lens_hallcode_to_object_distance,"ax",%progbits
 3199              		.align	1
 3200              		.global	actuator_lens_hallcode_to_object_distance
 3201              		.thumb
 3202              		.thumb_func
 3204              	actuator_lens_hallcode_to_object_distance:
 3205              	.LFB12:
 964:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     *object_distance_mm = hallcode_to_object_distance(&((lens_calib_data_t *)piezo->af_calib)->af_c
 3206              		.loc 1 964 0
 3207              		.cfi_startproc
 3208              		@ args = 0, pretend = 0, frame = 0
 3209              		@ frame_needed = 0, uses_anonymous_args = 0
 3210              	.LVL404:
 965:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     return ACTUATOR_OK;
 3211              		.loc 1 965 0
 3212 0000 006A     		ldr	r0, [r0, #32]
 3213              	.LVL405:
 3214 0002 09B2     		sxth	r1, r1
 964:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     *object_distance_mm = hallcode_to_object_distance(&((lens_calib_data_t *)piezo->af_calib)->af_c
 3215              		.loc 1 964 0
 3216 0004 10B5     		push	{r4, lr}
 3217              	.LCFI33:
 3218              		.cfi_def_cfa_offset 8
 3219              		.cfi_offset 4, -8
 3220              		.cfi_offset 14, -4
 965:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     return ACTUATOR_OK;
 3221              		.loc 1 965 0
 3222 0006 034B     		ldr	r3, .L244
 3223 0008 1430     		adds	r0, r0, #20
 964:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     *object_distance_mm = hallcode_to_object_distance(&((lens_calib_data_t *)piezo->af_calib)->af_c
 3224              		.loc 1 964 0
 3225 000a 1446     		mov	r4, r2
 965:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c ****     return ACTUATOR_OK;
 3226              		.loc 1 965 0
 3227 000c 9847     		blx	r3
 3228              	.LVL406:
 3229 000e 2060     		str	r0, [r4]
 967:/home/tienluong/workspace/atlantis_fw/AsicFwS2/src/actuator.c **** 
 3230              		.loc 1 967 0
 3231 0010 0020     		movs	r0, #0
 3232 0012 10BD     		pop	{r4, pc}
 3233              	.LVL407:
 3234              	.L245:
 3235              		.align	2
 3236              	.L244:
 3237 0014 00000000 		.word	hallcode_to_object_distance
 3238              		.cfi_endproc
 3239              	.LFE12:
 3241              		.section	.rodata
 3242              		.set	.LANCHOR0,. + 0
 3243              	.LC9:
 3244 0000 43414D2D 		.ascii	"CAM-\000"
 3244      00
 3245 0005 00000000 		.space	11
 3245      00000000 
 3245      000000
 3246              		.section	.rodata.__FUNCTION__.9293,"a",%progbits
 3247              		.set	.LANCHOR1,. + 0
 3250              	__FUNCTION__.9293:
 3251 0000 6C6F675F 		.ascii	"log_piezo_msg\000"
 3251      7069657A 
 3251      6F5F6D73 
 3251      6700
 3252              		.section	.rodata.__FUNCTION__.9185,"a",%progbits
 3253              		.set	.LANCHOR2,. + 0
 3256              	__FUNCTION__.9185:
 3257 0000 61637475 		.ascii	"actuator_get_hard_stop_hall\000"
 3257      61746F72 
 3257      5F676574 
 3257      5F686172 
 3257      645F7374 
 3258              		.section	.rodata.__FUNCTION__.9245,"a",%progbits
 3259              		.set	.LANCHOR5,. + 0
 3262              	__FUNCTION__.9245:
 3263 0000 61637475 		.ascii	"actuator_move_to_distance\000"
 3263      61746F72 
 3263      5F6D6F76 
 3263      655F746F 
 3263      5F646973 
 3264              		.section	.rodata.str1.1,"aMS",%progbits,1
 3265              	.LC0:
 3266 0000 50574D20 		.ascii	"PWM frequency: %d\000"
 3266      66726571 
 3266      75656E63 
 3266      793A2025 
 3266      6400
 3267              	.LC1:
 3268 0012 506F7369 		.ascii	"Position %d: 0x%04X\000"
 3268      74696F6E 
 3268      2025643A 
 3268      20307825 
 3268      30345800 
 3269              	.LC2:
 3270 0026 506F7369 		.ascii	"Position at 45 degree: 0x%04X\000"
 3270      74696F6E 
 3270      20617420 
 3270      34352064 
 3270      65677265 
 3271              	.LC3:
 3272 0044 4D616372 		.ascii	"Macro hard stop: 0x%04X\000"
 3272      6F206861 
 3272      72642073 
 3272      746F703A 
 3272      20307825 
 3273              	.LC4:
 3274 005c 496E6669 		.ascii	"Infinity hard stop: 0x%04X\000"
 3274      6E697479 
 3274      20686172 
 3274      64207374 
 3274      6F703A20 
 3275              	.LC5:
 3276 0077 506F6C61 		.ascii	"Polarity: %d\000"
 3276      72697479 
 3276      3A202564 
 3276      00
 3277              	.LC6:
 3278 0084 53656E73 		.ascii	"Sensitivity: %d\000"
 3278      69746976 
 3278      6974793A 
 3278      20256400 
 3279              	.LC7:
 3280 0094 2D4C656E 		.ascii	"-Lens, \000"
 3280      732C2000 
 3281              	.LC8:
 3282 009c 2D4D6972 		.ascii	"-Mirror, \000"
 3282      726F722C 
 3282      2000
 3283              	.LC10:
 3284 00a6 255800   		.ascii	"%X\000"
 3285              	.LC11:
 3286 00a9 43616C69 		.ascii	"Calibration data from EEPROM:\000"
 3286      62726174 
 3286      696F6E20 
 3286      64617461 
 3286      2066726F 
 3287              	.LC12:
 3288 00c7 496E7661 		.ascii	"Invalid PWM frequency\000"
 3288      6C696420 
 3288      50574D20 
 3288      66726571 
 3288      75656E63 
 3289              	.LC13:
 3290 00dd 496E7661 		.ascii	"Invalid hall polarity\000"
 3290      6C696420 
 3290      68616C6C 
 3290      20706F6C 
 3290      61726974 
 3291              	.LC14:
 3292 00f3 496E7661 		.ascii	"Invalid hall sensitivity\000"
 3292      6C696420 
 3292      68616C6C 
 3292      2073656E 
 3292      73697469 
 3293              	.LC15:
 3294 010c 496E7661 		.ascii	"Invalid hard stop positions\000"
 3294      6C696420 
 3294      68617264 
 3294      2073746F 
 3294      7020706F 
 3295              	.LC16:
 3296 0128 52656164 		.ascii	"Reading camera EEPROM timed out\000"
 3296      696E6720 
 3296      63616D65 
 3296      72612045 
 3296      4550524F 
 3297              	.LC17:
 3298 0148 52656164 		.ascii	"Reading lens EEPROM timed out\000"
 3298      696E6720 
 3298      6C656E73 
 3298      20454550 
 3298      524F4D20 
 3299              	.LC18:
 3300 0166 25733A20 		.ascii	"%s: Null pointer\000"
 3300      4E756C6C 
 3300      20706F69 
 3300      6E746572 
 3300      00
 3301              	.LC19:
 3302 0177 496E7661 		.ascii	"Invalid type\000"
 3302      6C696420 
 3302      74797065 
 3302      00
 3303              	.LC20:
 3304 0184 556E696E 		.ascii	"Uninitialized\000"
 3304      69746961 
 3304      6C697A65 
 3304      6400
 3305              	.LC21:
 3306 0192 4E6F7420 		.ascii	"Not calibrated yet\000"
 3306      63616C69 
 3306      62726174 
 3306      65642079 
 3306      657400
 3307              	.LC22:
 3308 01a5 4572726F 		.ascii	"Error in piezo control, giving up\000"
 3308      7220696E 
 3308      20706965 
 3308      7A6F2063 
 3308      6F6E7472 
 3309              	.LC23:
 3310 01c7 546F7461 		.ascii	"Total move time (end_tick - start_tick) = %d\000"
 3310      6C206D6F 
 3310      76652074 
 3310      696D6520 
 3310      28656E64 
 3311              	.LC24:
 3312 01f4 48616C6C 		.ascii	"Hall access timed out\000"
 3312      20616363 
 3312      65737320 
 3312      74696D65 
 3312      64206F75 
 3313              	.LC25:
 3314 020a 4D6F7665 		.ascii	"Movement timed out\000"
 3314      6D656E74 
 3314      2074696D 
 3314      6564206F 
 3314      757400
 3315              	.LC26:
 3316 021d 53746F70 		.ascii	"Stopped at position: %u\000"
 3316      70656420 
 3316      61742070 
 3316      6F736974 
 3316      696F6E3A 
 3317              	.LC27:
 3318 0235 50574D20 		.ascii	"PWM frequency: %u, Weight/extra_num_pulses: %f, %i;"
 3318      66726571 
 3318      75656E63 
 3318      793A2025 
 3318      752C2057 
 3319 0268 2025662C 		.ascii	" %f, %i\000"
 3319      20256900 
 3320              	.LC28:
 3321 0270 43616C69 		.ascii	"Calibration data:\000"
 3321      62726174 
 3321      696F6E20 
 3321      64617461 
 3321      3A00
 3322              	.LC29:
 3323 0282 42657374 		.ascii	"Best hall polarity reversal: %d\000"
 3323      2068616C 
 3323      6C20706F 
 3323      6C617269 
 3323      74792072 
 3324              	.LC30:
 3325 02a2 42657374 		.ascii	"Best hall sensitivity: %d\000"
 3325      2068616C 
 3325      6C207365 
 3325      6E736974 
 3325      69766974 
 3326              	.LC31:
 3327 02bc 4E617272 		.ascii	"Narrowest position: 0x%X\000"
 3327      6F776573 
 3327      7420706F 
 3327      73697469 
 3327      6F6E3A20 
 3328              	.LC32:
 3329 02d5 57696465 		.ascii	"Widest position: 0x%X\000"
 3329      73742070 
 3329      6F736974 
 3329      696F6E3A 
 3329      20307825 
 3330              	.LC33:
 3331 02eb 5772696E 		.ascii	"Wring to FLASH was successful\000"
 3331      6720746F 
 3331      20464C41 
 3331      53482077 
 3331      61732073 
 3332              	.LC34:
 3333 0309 5069657A 		.ascii	"Piezo calibration was successful\000"
 3333      6F206361 
 3333      6C696272 
 3333      6174696F 
 3333      6E207761 
 3334              	.LC35:
 3335 032a 5069657A 		.ascii	"Piezo calibration was failed\000"
 3335      6F206361 
 3335      6C696272 
 3335      6174696F 
 3335      6E207761 
 3336              	.LC36:
 3337 0347 50726570 		.ascii	"Prepare to read from FLASH\000"
 3337      61726520 
 3337      746F2072 
 3337      65616420 
 3337      66726F6D 
 3338              	.LC37:
 3339 0362 43616C69 		.ascii	"Calibration info from FLASH:\000"
 3339      62726174 
 3339      696F6E20 
 3339      696E666F 
 3339      2066726F 
 3340              	.LC38:
 3341 037f 54686572 		.ascii	"There is no calibration info from FLASH\000"
 3341      65206973 
 3341      206E6F20 
 3341      63616C69 
 3341      62726174 
 3342              	.LC39:
 3343 03a7 50726570 		.ascii	"Prepare to calibrate actuator\000"
 3343      61726520 
 3343      746F2063 
 3343      616C6962 
 3343      72617465 
 3344              	.LC40:
 3345 03c5 54617267 		.ascii	"Target position: 0x%X\000"
 3345      65742070 
 3345      6F736974 
 3345      696F6E3A 
 3345      20307825 
 3346              	.LC41:
 3347 03db 496E7661 		.ascii	"Invalid direction\000"
 3347      6C696420 
 3347      64697265 
 3347      6374696F 
 3347      6E00
 3348              		.section	.rodata.__FUNCTION__.9256,"a",%progbits
 3349              		.set	.LANCHOR6,. + 0
 3352              	__FUNCTION__.9256:
 3353 0000 61637475 		.ascii	"actuator_nudge\000"
 3353      61746F72 
 3353      5F6E7564 
 3353      676500
 3354              		.section	.rodata.__FUNCTION__.9154,"a",%progbits
 3355              		.set	.LANCHOR4,. + 0
 3358              	__FUNCTION__.9154:
 3359 0000 61637475 		.ascii	"actuator_init\000"
 3359      61746F72 
 3359      5F696E69 
 3359      7400
 3360              		.section	.rodata.__FUNCTION__.9214,"a",%progbits
 3361              		.set	.LANCHOR3,. + 0
 3364              	__FUNCTION__.9214:
 3365 0000 61637475 		.ascii	"actuator_do_move_to_position\000"
 3365      61746F72 
 3365      5F646F5F 
 3365      6D6F7665 
 3365      5F746F5F 
 3366              		.text
 3367              	.Letext0:
 3368              		.file 2 "/opt/toolchains/gcc-arm-none-eabi-4_9-2015q1/lib/gcc/arm-none-eabi/4.9.3/include/stdarg.h
 3369              		.file 3 "/opt/toolchains/gcc-arm-none-eabi-4_9-2015q1/lib/gcc/arm-none-eabi/4.9.3/include/stddef.h
 3370              		.file 4 "/opt/toolchains/gcc-arm-none-eabi-4_9-2015q1/arm-none-eabi/include/machine/_default_types
 3371              		.file 5 "/opt/toolchains/gcc-arm-none-eabi-4_9-2015q1/arm-none-eabi/include/stdint.h"
 3372              		.file 6 "/home/tienluong/workspace/atlantis_fw/platform/os/Source/portable/GCC/cortex-r4/portmacro
 3373              		.file 7 "/home/tienluong/workspace/atlantis_fw/platform/os/Source/include/queue.h"
 3374              		.file 8 "/home/tienluong/workspace/atlantis_fw/platform/os/Source/include/semphr.h"
 3375              		.file 9 "/home/tienluong/workspace/atlantis_fw/platform/os/Source/include/event_groups.h"
 3376              		.file 10 "/home/tienluong/workspace/atlantis_fw/platform/asic/hal/include/hal_pwm.h"
 3377              		.file 11 "<built-in>"
 3378              		.file 12 "/home/tienluong/workspace/atlantis_fw/platform/asic/hal/include/hal_i2c.h"
 3379              		.file 13 "/home/tienluong/workspace/atlantis_fw/platform/asic/hal/include/hal_qspi.h"
 3380              		.file 14 "/home/tienluong/workspace/atlantis_fw/platform/common/lcc_system.h"
 3381              		.file 15 "/home/tienluong/workspace/atlantis_fw/platform/driver/include/i2cm.h"
 3382              		.file 16 "/home/tienluong/workspace/atlantis_fw/platform/driver/include/eeprom.h"
 3383              		.file 17 "/home/tienluong/workspace/atlantis_fw/AsicFwS2/include/light_system.h"
 3384              		.file 18 "/home/tienluong/workspace/atlantis_fw/platform/driver/include/hall.h"
 3385              		.file 19 "/home/tienluong/workspace/atlantis_fw/AsicFwS2/include/actuator.h"
 3386              		.file 20 "/home/tienluong/workspace/atlantis_fw/AsicFwS2/include/af_lens_calib.h"
DEFINED SYMBOLS
                            *ABS*:00000000 actuator.c
     /tmp/ccLTvOtR.s:19     .text.print_calib_info:00000000 $t
     /tmp/ccLTvOtR.s:23     .text.print_calib_info:00000000 print_calib_info
     /tmp/ccLTvOtR.s:175    .text.print_calib_info:00000098 $d
     /tmp/ccLTvOtR.s:187    .text.log_piezo_msg:00000000 $t
     /tmp/ccLTvOtR.s:191    .text.log_piezo_msg:00000000 log_piezo_msg
     /tmp/ccLTvOtR.s:351    .text.log_piezo_msg:000000ac $d
     /tmp/ccLTvOtR.s:369    .text.read_eeprom:00000000 $t
     /tmp/ccLTvOtR.s:373    .text.read_eeprom:00000000 read_eeprom
     /tmp/ccLTvOtR.s:795    .text.read_eeprom:0000022c $d
     /tmp/ccLTvOtR.s:811    .text.pwm_pattern_callback:00000000 $t
     /tmp/ccLTvOtR.s:815    .text.pwm_pattern_callback:00000000 pwm_pattern_callback
     /tmp/ccLTvOtR.s:869    .text.pwm_pattern_callback:00000028 $d
     /tmp/ccLTvOtR.s:876    .text.actuator_get_hard_stop_hall:00000000 $t
     /tmp/ccLTvOtR.s:881    .text.actuator_get_hard_stop_hall:00000000 actuator_get_hard_stop_hall
     /tmp/ccLTvOtR.s:1004   .text.actuator_get_hard_stop_hall:00000070 $d
     /tmp/ccLTvOtR.s:1025   .text.actuator_do_move_to_position:00000000 $t
     /tmp/ccLTvOtR.s:1029   .text.actuator_do_move_to_position:00000000 actuator_do_move_to_position
     /tmp/ccLTvOtR.s:1538   .text.actuator_do_move_to_position:00000268 $d
     /tmp/ccLTvOtR.s:1566   .text.actuator_do_move_to_position:000002d0 $t
     /tmp/ccLTvOtR.s:1869   .text.actuator_do_move_to_position:00000460 $d
     /tmp/ccLTvOtR.s:1892   .text.actuator_calibrate:00000000 $t
     /tmp/ccLTvOtR.s:1897   .text.actuator_calibrate:00000000 actuator_calibrate
     /tmp/ccLTvOtR.s:2326   .text.actuator_calibrate:0000022c $d
     /tmp/ccLTvOtR.s:2346   .text.actuator_init:00000000 $t
     /tmp/ccLTvOtR.s:2351   .text.actuator_init:00000000 actuator_init
     /tmp/ccLTvOtR.s:2724   .text.actuator_init:000001cc $d
     /tmp/ccLTvOtR.s:2746   .text.actuator_read_position:00000000 $t
     /tmp/ccLTvOtR.s:2751   .text.actuator_read_position:00000000 actuator_read_position
     /tmp/ccLTvOtR.s:2783   .text.actuator_move_to_position:00000000 $t
     /tmp/ccLTvOtR.s:2788   .text.actuator_move_to_position:00000000 actuator_move_to_position
     /tmp/ccLTvOtR.s:2810   .text.actuator_move_to_position:0000000c $d
     /tmp/ccLTvOtR.s:2815   .text.actuator_move_to_distance:00000000 $t
     /tmp/ccLTvOtR.s:2820   .text.actuator_move_to_distance:00000000 actuator_move_to_distance
     /tmp/ccLTvOtR.s:2916   .text.actuator_move_to_distance:0000004c $d
     /tmp/ccLTvOtR.s:2926   .text.actuator_nudge:00000000 $t
     /tmp/ccLTvOtR.s:2931   .text.actuator_nudge:00000000 actuator_nudge
     /tmp/ccLTvOtR.s:3119   .text.actuator_nudge:000000ac $d
     /tmp/ccLTvOtR.s:3134   .text.actuator_object_distance_to_lens_hallcode:00000000 $t
     /tmp/ccLTvOtR.s:3139   .text.actuator_object_distance_to_lens_hallcode:00000000 actuator_object_distance_to_lens_hallcode
     /tmp/ccLTvOtR.s:3194   .text.actuator_object_distance_to_lens_hallcode:00000020 $d
     /tmp/ccLTvOtR.s:3199   .text.actuator_lens_hallcode_to_object_distance:00000000 $t
     /tmp/ccLTvOtR.s:3204   .text.actuator_lens_hallcode_to_object_distance:00000000 actuator_lens_hallcode_to_object_distance
     /tmp/ccLTvOtR.s:3237   .text.actuator_lens_hallcode_to_object_distance:00000014 $d
     /tmp/ccLTvOtR.s:3245   .rodata:00000005 $d
     /tmp/ccLTvOtR.s:3250   .rodata.__FUNCTION__.9293:00000000 __FUNCTION__.9293
     /tmp/ccLTvOtR.s:3256   .rodata.__FUNCTION__.9185:00000000 __FUNCTION__.9185
     /tmp/ccLTvOtR.s:3262   .rodata.__FUNCTION__.9245:00000000 __FUNCTION__.9245
     /tmp/ccLTvOtR.s:3352   .rodata.__FUNCTION__.9256:00000000 __FUNCTION__.9256
     /tmp/ccLTvOtR.s:3358   .rodata.__FUNCTION__.9154:00000000 __FUNCTION__.9154
     /tmp/ccLTvOtR.s:3364   .rodata.__FUNCTION__.9214:00000000 __FUNCTION__.9214
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
slogf
memset
sprintf
strcat
strlen
vsprintf
pvPortMalloc1
memcpy
vPortFree1
eeprom_read
hal_pwm_stop
xQueueGiveFromISR
ulPortYieldRequired
__aeabi_i2f
__aeabi_fmul
__aeabi_fadd
__aeabi_f2iz
__aeabi_fcmpge
__aeabi_fsub
__aeabi_fcmplt
__aeabi_fcmpgt
__aeabi_fdiv
__aeabi_f2d
hal_pwm_enable_irq
xTaskGetTickCount
hal_pwm_init
hal_pwm_start
xQueueGenericReceive
flash_sub_sector_erase
flash_write
assert_failed
i2cm
as5510
a1457
malloc_failed
flash_read
object_distance_to_hallcode
hallcode_to_object_distance
